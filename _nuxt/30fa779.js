/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{100:function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){var r=n(2),o=n(3);t.exports={Link:r,Date:o}},function(t,e,n){t.exports={url:function(t,e){var n=t&&t.value?t.value.document:t;if(t&&[t.type,t.link_type,t._linkType,t.linkType].some((function(t){return t&&["Document","Link.Document","Link.document"].includes(t)}))&&e&&"function"==typeof e){var r=e(n);if(r)return r}return n&&n.url?n.url:""}}},function(t,e){t.exports=function(t){if(!t)return null;var e=24==t.length?"".concat(t.substring(0,22),":").concat(t.substring(22,24)):t;return new Date(e)}}])},function(t,e,n){t.exports=n(2)},function(t,e,n){var r=n(0),o=n(3),i=r.Date,u=r.Link;t.exports={Date:i,Link:u,RichText:o}},function(t,e,n){var r=n(4),o=n(0).Link,i=n(5),u=r.Elements;function l(t,e,n,r,l){switch(e){case u.heading1:return c("h1",n,l);case u.heading2:return c("h2",n,l);case u.heading3:return c("h3",n,l);case u.heading4:return c("h4",n,l);case u.heading5:return c("h5",n,l);case u.heading6:return c("h6",n,l);case u.paragraph:return c("p",n,l);case u.preformatted:return function(t){return"<pre".concat(a(t),">").concat(i(t.text),"</pre>")}(n);case u.strong:return c("strong",n,l);case u.em:return c("em",n,l);case u.listItem:case u.oListItem:return c("li",n,l);case u.list:return c("ul",n,l);case u.oList:return c("ol",n,l);case u.image:return function(t,e){var n=e.linkTo?o.url(e.linkTo,t):null,r=e.linkTo&&e.linkTo.target?'target="'.concat(e.linkTo.target,'" rel="noopener"'):"",u=[e.label||"","block-img"],l='<img src="'.concat(e.url,'" alt="').concat(e.alt?i(e.alt):"",'" copyright="').concat(e.copyright?i(e.copyright):"",'" />');return'\n    <p class="'.concat(u.join(" "),'">\n      ').concat(n?"<a ".concat(r,' href="').concat(n,'">').concat(l,"</a>"):l,"\n    </p>\n  ")}(t,n);case u.embed:return function(t){return'\n    <div data-oembed="'.concat(t.oembed.embed_url,'"\n      data-oembed-type="').concat(t.oembed.type,'"\n      data-oembed-provider="').concat(t.oembed.provider_name,'"\n      ').concat(a(t),">\n\n      ").concat(t.oembed.html,"\n    </div>\n  ")}(n);case u.hyperlink:return function(t,e,n){var r=e.data.target?'target="'.concat(e.data.target,'" rel="noopener"'):"",u=i(o.url(e.data,t));return"<a ".concat(r,' href="').concat(u,'">').concat(n.join(""),"</a>")}(t,n,l);case u.label:return function(t,e){return"<span ".concat(a(t.data),">").concat(e.join(""),"</span>")}(n,l);case u.span:return function(t){return t?i(t).replace(/\n/g,"<br />"):""}(r);default:return""}}function a(t){return t.label?' class="'.concat(t.label,'"'):""}function c(t,e,n){return"<".concat(t).concat(a(e),">").concat(n.join(""),"</").concat(t,">")}t.exports={asText:function(t,e){return r.asText(t,e)},asHtml:function(t,e,n){return r.serialize(t,l.bind(null,e),n).join("")},Elements:u}},function(t,e,n){"undefined"!=typeof self&&self,t.exports=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e,n){"use strict";var r;function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.defineProperty(e,"__esModule",{value:!0}),e.PRIORITIES=e.NODE_TYPES=void 0;var i={heading1:"heading1",heading2:"heading2",heading3:"heading3",heading4:"heading4",heading5:"heading5",heading6:"heading6",paragraph:"paragraph",preformatted:"preformatted",strong:"strong",em:"em",listItem:"list-item",oListItem:"o-list-item",list:"group-list-item",oList:"group-o-list-item",image:"image",embed:"embed",hyperlink:"hyperlink",label:"label",span:"span"};e.NODE_TYPES=i;var u=(o(r={},i.heading1,4),o(r,i.heading2,4),o(r,i.heading3,4),o(r,i.heading4,4),o(r,i.heading5,4),o(r,i.heading6,4),o(r,i.paragraph,3),o(r,i.preformatted,5),o(r,i.strong,6),o(r,i.em,6),o(r,i.oList,1),o(r,i.list,1),o(r,i.listItem,1),o(r,i.oListItem,1),o(r,i.image,1),o(r,i.embed,1),o(r,i.hyperlink,3),o(r,i.label,4),o(r,i.span,7),r);e.PRIORITIES=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=n(7),i=n(2),u=n(8),l=n(0),a=(r=n(3))&&r.__esModule?r:{default:r};function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t){if(0===t.length)throw new Error("Unable to elect node on empty list");var e=function(t){return function(t){if(Array.isArray(t))return t}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t.sort((function(t,e){if(t.isParentOf(e))return-1;if(e.isParentOf(t))return 1;var n=l.PRIORITIES[t.type]-l.PRIORITIES[e.type];return 0===n?t.text.length-e.text.length:n})));return{elected:e[0],others:e.slice(1)}}function h(t,e,n){if(e.length>0)return function(t,e,n){return e.reduce((function(r,o,u){var l=[],a=0===u&&o.start>n.lower,c=u===e.length-1&&n.upper>o.end;if(a){var s=new i.TextNode(n.lower,o.start,t.slice(n.lower,o.start));l=l.concat(s)}else{var h=e[u-1];if(h&&o.start>h.end){var d=t.slice(h.end,o.start),p=new i.TextNode(h.end,o.start,d);l=l.concat(p)}}if(l=l.concat(o),c){var f=new i.TextNode(o.end,n.upper,t.slice(o.end,n.upper));l=l.concat(f)}return r.concat(l)}),[])}(t,d(t,e),n);var r=t.slice(n.lower,n.upper);return[new i.TextNode(n.lower,n.upper,r)]}function d(t,e){var n=function(t){return function(t,e){return e.reduce((function(t,e){var n=(0,o.last)(t);if(n){if(n.some((function(t){return t.isParentOf(e)})))return(0,o.init)(t).concat([n.concat(e)]);var r=(0,o.last)(n);return r&&function(t,e){return t.end>=e.start}(r,e)?(0,o.init)(t).concat([n.concat(e)]):t.concat([[e]])}return[[e]]}),[])}(0,(0,o.sort)(t,(function(t,e){return n=e,t.start-n.start||function(t,e){return t.end-e.end}(t,e);var n})))}((0,o.sort)(e,(function(t,e){return t.start-e.start}))).map(s),r=(0,o.flatten)(n.map((function(e){return function(t,e){var n=e.others.reduce((function(n,r){var o=n.inner,u=n.outer,l=function(t,e,n){return n.start<e.start?{inner:i.SpanNode.slice(n,e.start,n.end,t),outer:i.SpanNode.slice(n,n.start,e.start,t)}:n.end>e.end?{inner:i.SpanNode.slice(n,n.start,e.end,t),outer:i.SpanNode.slice(n,e.end,n.end,t)}:{inner:n}}(t,e.elected,r);return{inner:o.concat(l.inner),outer:l.outer?u.concat(l.outer):u}}),{inner:[],outer:[]}),r=n.inner,o=n.outer;return[e.elected.setChildren(h(t,r,e.elected.boundaries()))].concat(d(t,o))}(t,e)})));return(0,o.sort)(r,(function(t,e){return t.start-e.start}))}var p=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e;return(e=[{key:"fromRichText",value:function(t){return{key:(0,a.default)(),children:t.reduce((function(t,e,n){if(u.RichTextBlock.isEmbedBlock(e.type)||u.RichTextBlock.isImageBlock(e.type))return t.concat(new i.BlockNode(e.type,e));var r=function(t){var e=(t.spans||[]).map((function(e){var n=t.text.slice(e.start,e.end);return new i.SpanNode(e.start,e.end,e.type,n,[],e)})),n={lower:0,upper:t.text.length};return h(t.text,e,n)}(e),l=t[t.length-1];if(u.RichTextBlock.isListItem(e.type)&&l&&l instanceof i.ListBlockNode){var a=new i.ListItemBlockNode(e,r),c=l.addChild(a);return(0,o.init)(t).concat(c)}if(u.RichTextBlock.isOrderedListItem(e.type)&&l&&l instanceof i.OrderedListBlockNode){var s=new i.OrderedListItemBlockNode(e,r),d=l.addChild(s);return(0,o.init)(t).concat(d)}if(u.RichTextBlock.isListItem(e.type)){var p=new i.ListItemBlockNode(e,r),f=new i.ListBlockNode(u.RichTextBlock.emptyList(),[p]);return t.concat(f)}if(u.RichTextBlock.isOrderedListItem(e.type)){var m=new i.OrderedListItemBlockNode(e,r),v=new i.OrderedListBlockNode(u.RichTextBlock.emptyOrderedList(),[m]);return t.concat(v)}return t.concat(new i.BlockNode(e.type,e,r))}),[])}}}])&&c(t,e),t}();e.default=p},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ListBlockNode=e.OrderedListBlockNode=e.OrderedListItemBlockNode=e.ListItemBlockNode=e.BlockNode=e.TextNode=e.SpanNode=e.Node=void 0;var r,o=(r=n(3))&&r.__esModule?r:{default:r},i=n(0);function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function a(t,e,n){return e&&l(t.prototype,e),n&&l(t,n),t}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function s(t){return function(){var e,n=h(t);if(function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}()){var r=h(this).constructor;e=Reflect.construct(n,arguments,r)}else e=n.apply(this,arguments);return function(t,e){return!e||"object"!==u(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,e)}}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function d(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function t(e,n,r){d(this,t),this.key=(0,o.default)(),this.type=e,this.element=n,this.children=r};e.Node=p;var f=function(t){c(n,p);var e=s(n);function n(t,r,o,i,u,l){var a;return d(this,n),(a=e.call(this,o,l,u)).start=t,a.end=r,a.text=i,a.children=u,a}return a(n,[{key:"boundaries",value:function(){return{lower:this.start,upper:this.end}}},{key:"isParentOf",value:function(t){return this.start<=t.start&&this.end>=t.end}},{key:"setChildren",value:function(t){return new n(this.start,this.end,this.type,this.text,t,this.element)}}],[{key:"slice",value:function(t,e,r,o){return new n(e,r,t.type,o.slice(e,r),t.children,t.element)}}]),n}();e.SpanNode=f;var m=function(t){c(n,f);var e=s(n);function n(t,r,o){d(this,n);var u={type:i.NODE_TYPES.span,start:t,end:r,text:o};return e.call(this,t,r,i.NODE_TYPES.span,o,[],u)}return n}();e.TextNode=m;var v=function(t){c(n,p);var e=s(n);function n(t,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return d(this,n),e.call(this,t,r,o)}return n}();e.BlockNode=v;var y=function(t){c(n,v);var e=s(n);function n(t,r){return d(this,n),e.call(this,i.NODE_TYPES.listItem,t,r)}return n}();e.ListItemBlockNode=y;var b=function(t){c(n,v);var e=s(n);function n(t,r){return d(this,n),e.call(this,i.NODE_TYPES.oListItem,t,r)}return n}();e.OrderedListItemBlockNode=b;var g=function(t){c(n,v);var e=s(n);function n(t,r){return d(this,n),e.call(this,i.NODE_TYPES.oList,t,r)}return a(n,[{key:"addChild",value:function(t){var e=this.children.concat(t);return new n(this.element,e)}}]),n}();e.OrderedListBlockNode=g;var _=function(t){c(n,v);var e=s(n);function n(t,r){return d(this,n),e.call(this,i.NODE_TYPES.list,t,r)}return a(n,[{key:"addChild",value:function(t){var e=this.children.concat(t);return new n(this.element,e)}}]),n}();e.ListBlockNode=_},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"==e?n:3&n|8).toString(16)}))}},function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";var r=l(n(6)),o=l(n(1)),i=l(n(9)),u=n(0);function l(t){return t&&t.__esModule?t:{default:t}}t.exports={asText:r.default,asTree:o.default.fromRichText,serialize:i.default,Elements:u.NODE_TYPES}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,e.default=function(t,e){var n="string"==typeof e?e:" ";return t.map((function(t){return t.text})).join(n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.init=function(t){return t.slice(0,-1)},e.last=function(t){return t[t.length-1]},e.flatten=function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var i,u=t[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;Array.isArray(l)?e.push.apply(e,l):e.push(l)}}catch(t){r=!0,o=t}finally{try{n||null==u.return||u.return()}finally{if(r)throw o}}return e},e.sort=function(t,e){return function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(t).sort(e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RichTextBlock=void 0;var r=n(0);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var i=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.text=n,this.spans=r}var e;return(e=[{key:"isEmbedBlock",value:function(t){return t===r.NODE_TYPES.embed}},{key:"isImageBlock",value:function(t){return t===r.NODE_TYPES.image}},{key:"isList",value:function(t){return t===r.NODE_TYPES.list}},{key:"isOrderedList",value:function(t){return t===r.NODE_TYPES.oList}},{key:"isListItem",value:function(t){return t===r.NODE_TYPES.listItem}},{key:"isOrderedListItem",value:function(t){return t===r.NODE_TYPES.oListItem}},{key:"emptyList",value:function(){return{type:r.NODE_TYPES.list,spans:[],text:""}}},{key:"emptyOrderedList",value:function(){return{type:r.NODE_TYPES.oList,spans:[],text:""}}}])&&o(t,e),t}();e.RichTextBlock=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=(r=n(1))&&r.__esModule?r:{default:r},i=n(2);e.default=function(t,e,n){return o.default.fromRichText(t).children.map((function(t,r){return function(t,e,n,r){return function t(n,o){var u=n instanceof i.SpanNode?n.text:null,l=n.children.reduce((function(e,n,r){return e.concat([t(n,r)])}),[]);return r&&r(n.type,n.element,u,l,o)||e(n.type,n.element,u,l,o)}(t,n)}(t,e,r,n)}))}}])},function(t,e,n){"use strict";var r=/["'&<>]/;t.exports=function(t){var e,n=""+t,o=r.exec(n);if(!o)return n;var i="",u=0,l=0;for(u=o.index;u<n.length;u++){switch(n.charCodeAt(u)){case 34:e="&quot;";break;case 38:e="&amp;";break;case 39:e="&#39;";break;case 60:e="&lt;";break;case 62:e="&gt;";break;default:continue}l!==u&&(i+=n.substring(l,u)),l=u+1,i+=e}return l!==u?i+n.substring(l,u):i}}])},108:function(t,e,n){"use strict";n.d(e,"a",(function(){return w}));var r=n(0),o=n(1),l=(n(36),n(124),n(3)),c={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},h=n(80),d=(n(12),n(79),n(2)),f=n(42),m=n(4),v=n(88);function y(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var _=function(t){Object(d.a)(n,t);var e=y(n);function n(t,o){var l;return Object(r.a)(this,n),(l=e.call(this)).scene=t,l.camera=o,l.clear=!0,l.needsSwap=!1,l.inverse=!1,l}return Object(o.a)(n,[{key:"render",value:function(t,e,n){var r,o,l=t.getContext(),c=t.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(r=0,o=1):(r=1,o=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(l.REPLACE,l.REPLACE,l.REPLACE),c.buffers.stencil.setFunc(l.ALWAYS,r,4294967295),c.buffers.stencil.setClear(o),c.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setLocked(!1),c.buffers.stencil.setFunc(l.EQUAL,1,4294967295),c.buffers.stencil.setOp(l.KEEP,l.KEEP,l.KEEP),c.buffers.stencil.setLocked(!0)}}]),n}(v.b),x=function(t){Object(d.a)(n,t);var e=y(n);function n(){var t;return Object(r.a)(this,n),(t=e.call(this)).needsSwap=!1,t}return Object(o.a)(n,[{key:"render",value:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}]),n}(v.b),w=function(){function t(e,n){if(Object(r.a)(this,t),this.renderer=e,void 0===n){var o={minFilter:l.h,magFilter:l.h,format:l.m},d=e.getSize(new l.t);this._pixelRatio=e.getPixelRatio(),this._width=d.width,this._height=d.height,(n=new l.w(this._width*this._pixelRatio,this._height*this._pixelRatio,o)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=n.width,this._height=n.height;this.renderTarget1=n,this.renderTarget2=n.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===c&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===h.a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new h.a(c),this.clock=new l.c}return Object(o.a)(t,[{key:"swapBuffers",value:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}},{key:"addPass",value:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"insertPass",value:function(t,e){this.passes.splice(e,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}},{key:"removePass",value:function(t){var e=this.passes.indexOf(t);-1!==e&&this.passes.splice(e,1)}},{key:"isLastEnabledPass",value:function(t){for(var i=t+1;i<this.passes.length;i++)if(this.passes[i].enabled)return!1;return!0}},{key:"render",value:function(t){void 0===t&&(t=this.clock.getDelta());for(var e=this.renderer.getRenderTarget(),n=!1,i=0,r=this.passes.length;i<r;i++){var o=this.passes[i];if(!1!==o.enabled){if(o.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),o.render(this.renderer,this.writeBuffer,this.readBuffer,t,n),o.needsSwap){if(n){var l=this.renderer.getContext(),c=this.renderer.state.buffers.stencil;c.setFunc(l.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),c.setFunc(l.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==_&&(o instanceof _?n=!0:o instanceof x&&(n=!1))}}this.renderer.setRenderTarget(e)}},{key:"reset",value:function(t){if(void 0===t){var e=this.renderer.getSize(new l.t);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}},{key:"setSize",value:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}},{key:"setPixelRatio",value:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}]),t}(),S=(new l.k(-1,1,1,-1,0,1),new l.b);S.setAttribute("position",new l.e([-1,3,0,-1,-1,0,3,-1,0],3)),S.setAttribute("uv",new l.e([0,2,0,0,2,0],2))},109:function(t,e,n){"use strict";var r={name:"NoSsr",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,l=r(),c=l.default;void 0===c&&(c=[]);var h=l.placeholder;return n._isMounted?c:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["no-ssr-placeholder"]},o.placeholder||h):c.length>0?c.map((function(){return t(!1)})):t(!1))}};t.exports=r},176:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));n(12),n(79);var r=n(0),o=n(1),l=n(2),c=n(42),h=n(4),d=n(3);function f(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var m=function(t){Object(l.a)(n,t);var e=f(n);function n(t,o,l,c,h){var f;return Object(r.a)(this,n),(f=e.call(this)).scene=t,f.camera=o,f.overrideMaterial=l,f.clearColor=c,f.clearAlpha=void 0!==h?h:0,f.clear=!0,f.clearDepth=!1,f.needsSwap=!1,f._oldClearColor=new d.d,f}return Object(o.a)(n,[{key:"render",value:function(t,e,n){var r,o,l=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),t.autoClear=l}}]),n}(n(88).b)},177:function(t,e,n){"use strict";n(90),n(12),n(28),n(67),n(37),n(75),n(101),n(61),n(36),n(68),n(44),n(29),n(30),n(69),n(73),n(45);var r=n(11);function o(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,h=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return c=t.done,t},e:function(t){h=!0,o=t},f:function(){try{c||null==n.return||n.return()}finally{if(h)throw o}}}}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var c=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout((function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})}),1)},h=window.cancelIdleCallback||function(t){clearTimeout(t)},d=window.IntersectionObserver&&new window.IntersectionObserver((function(t){t.forEach((function(t){var e=t.intersectionRatio,link=t.target;e<=0||!link.__prefetch||link.__prefetch()}))}));e.a={name:"NuxtLink",extends:r.a.component("RouterLink"),props:{prefetch:{type:Boolean,default:!0},noPrefetch:{type:Boolean,default:!1}},mounted:function(){this.prefetch&&!this.noPrefetch&&(this.handleId=c(this.observe,{timeout:2e3}))},beforeDestroy:function(){h(this.handleId),this.__observed&&(d.unobserve(this.$el),delete this.$el.__prefetch)},methods:{observe:function(){d&&this.shouldPrefetch()&&(this.$el.__prefetch=this.prefetchLink.bind(this),d.observe(this.$el),this.__observed=!0)},shouldPrefetch:function(){var t=this.$router.resolve(this.to,this.$route,this.append);return t.resolved.matched.map((function(t){return t.components.default})).filter((function(e){return t.href||"function"==typeof e&&!e.options&&!e.__prefetched})).length},canPrefetch:function(){var t=navigator.connection;return!(this.$nuxt.isOffline||t&&((t.effectiveType||"").includes("2g")||t.saveData))},getPrefetchComponents:function(){return this.$router.resolve(this.to,this.$route,this.append).resolved.matched.map((function(t){return t.components.default})).filter((function(t){return"function"==typeof t&&!t.options&&!t.__prefetched}))},prefetchLink:function(){if(this.canPrefetch()){d.unobserve(this.$el);var t,e=o(this.getPrefetchComponents());try{for(e.s();!(t=e.n()).done;){var n=t.value,r=n();r instanceof Promise&&r.catch((function(){})),n.__prefetched=!0}}catch(t){e.e(t)}finally{e.f()}if(!this.$root.isPreview){var l=this.$router.resolve(this.to,this.$route,this.append).href;this.$nuxt&&this.$nuxt.fetchPayload(l,!0).catch((function(){}))}}}}}},208:function(t,e,n){"use strict";e.a={}},209:function(t,e,n){"use strict";var r={name:"ClientOnly",functional:!0,props:{placeholder:String,placeholderTag:{type:String,default:"div"}},render:function(t,e){var n=e.parent,r=e.slots,o=e.props,l=r(),c=l.default;void 0===c&&(c=[]);var h=l.placeholder;return n._isMounted?c:(n.$once("hook:mounted",(function(){n.$forceUpdate()})),o.placeholderTag&&(o.placeholder||h)?t(o.placeholderTag,{class:["client-only-placeholder"]},o.placeholder||h):c.length>0?c.map((function(){return t(!1)})):t(!1))}};t.exports=r},21:function(t,e,n){"use strict";n.d(e,"a",(function(){return Rt}));var r,o,l,c,h,d,f,m,v=n(5),y={},_=180/Math.PI,x=Math.PI/180,w=Math.atan2,S=/([A-Z])/g,E=/(left|right|width|margin|padding|x)/i,M=/[\s,\(]\S/,T={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},A=function(t,data){return data.set(data.t,data.p,Math.round(1e4*(data.s+data.c*t))/1e4+data.u,data)},D=function(t,data){return data.set(data.t,data.p,1===t?data.e:Math.round(1e4*(data.s+data.c*t))/1e4+data.u,data)},P=function(t,data){return data.set(data.t,data.p,t?Math.round(1e4*(data.s+data.c*t))/1e4+data.u:data.b,data)},C=function(t,data){var e=data.s+data.c*t;data.set(data.t,data.p,~~(e+(e<0?-.5:.5))+data.u,data)},k=function(t,data){return data.set(data.t,data.p,t?data.e:data.b,data)},O=function(t,data){return data.set(data.t,data.p,1!==t?data.b:data.e,data)},L=function(t,e,n){return t.style[e]=n},F=function(t,e,n){return t.style.setProperty(e,n)},R=function(t,e,n){return t._gsap[e]=n},I=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},N=function(t,e,n,data,r){var o=t._gsap;o.scaleX=o.scaleY=n,o.renderTransform(r,o)},j=function(t,e,n,data,r){var o=t._gsap;o[e]=n,o.renderTransform(r,o)},B="transform",U=B+"Origin",z=function(t){var e=this,n=this.target,style=n.style;if(t in y){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=T[t]||t).indexOf(",")?t.split(",").forEach((function(a){return e.tfm[a]=st(n,a)})):this.tfm[t]=n._gsap.x?n._gsap[t]:st(n,t)),n._gsap.svg&&(this.svg=n.getAttribute(t)||""),this.props.indexOf(B)>=0)return;t=B}style&&this.props.push(t,style[t])},V=function(style){style.translate&&(style.removeProperty("translate"),style.removeProperty("scale"),style.removeProperty("rotate"))},H=function(){var i,p,t=this.props,e=this.target,style=e.style,n=e._gsap;for(i=0;i<t.length;i+=2)t[i+1]?style[t[i]]=t[i+1]:style.removeProperty(t[i].replace(S,"-$1").toLowerCase());if(this.tfm){for(p in n.svg&&e.setAttribute("transform",this.svg||""),this.tfm)n[p]=this.tfm[p];!(i=f())||i.isStart||style[B]||(V(style),n.uncache=1)}},G=function(t,e){var n={target:t,props:[],revert:H,save:z};return e&&e.split(",").forEach((function(p){return n.save(p)})),n},W=function(t,e){var n=o.createElementNS?o.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):o.createElement(t);return n.style?n:o.createElement(t)},X=function t(e,n,r){var o=getComputedStyle(e);return o[n]||o.getPropertyValue(n.replace(S,"-$1").toLowerCase())||o.getPropertyValue(n)||!r&&t(e,Q(n)||n,1)||""},Y="O,Moz,ms,Ms,Webkit".split(","),Q=function(t,element,e){var s=(element||h).style,i=5;if(t in s&&!e)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(Y[i]+t in s););return i<0?null:(3===i?"ms":i>=0?Y[i]:"")+t},$=function(){"undefined"!=typeof window&&window.document&&(r=window,o=r.document,l=o.documentElement,h=W("div")||{style:{}},W("div"),B=Q(B),U=B+"Origin",h.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",m=!!Q("perspective"),f=v.y.core.reverting,c=1)},K=function t(e){var n,svg=W("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,o=this.nextSibling,c=this.style.cssText;if(l.appendChild(svg),svg.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(o?r.insertBefore(this,o):r.appendChild(this)),l.removeChild(svg),this.style.cssText=c,n},J=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Z=function(t){var e;try{e=t.getBBox()}catch(n){e=K.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===K||(e=K.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+J(t,["x","cx","x1"])||0,y:+J(t,["y","cy","y1"])||0,width:0,height:0}},tt=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Z(t))},et=function(t,e){if(e){var style=t.style;e in y&&e!==U&&(e=B),style.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),style.removeProperty(e.replace(S,"-$1").toLowerCase())):style.removeAttribute(e)}},nt=function(t,e,n,r,o,l){var c=new v.b(t._pt,e,n,0,1,l?O:k);return t._pt=c,c.b=r,c.e=o,t._props.push(n),c},it={deg:1,rad:1,turn:1},at={grid:1,flex:1},ot=function t(e,n,r,l){var c,d,f,m,_=parseFloat(r)||0,x=(r+"").trim().substr((_+"").length)||"px",style=h.style,w=E.test(n),S="svg"===e.tagName.toLowerCase(),M=(S?"client":"offset")+(w?"Width":"Height"),T=100,A="px"===l,D="%"===l;return l===x||!_||it[l]||it[x]?_:("px"!==x&&!A&&(_=t(e,n,r,"px")),m=e.getCTM&&tt(e),!D&&"%"!==x||!y[n]&&!~n.indexOf("adius")?(style[w?"width":"height"]=T+(A?x:l),d=~n.indexOf("adius")||"em"===l&&e.appendChild&&!S?e:e.parentNode,m&&(d=(e.ownerSVGElement||{}).parentNode),d&&d!==o&&d.appendChild||(d=o.body),(f=d._gsap)&&D&&f.width&&w&&f.time===v.w.time&&!f.uncache?Object(v.u)(_/f.width*T):((D||"%"===x)&&!at[X(d,"display")]&&(style.position=X(e,"position")),d===e&&(style.position="static"),d.appendChild(h),c=h[M],d.removeChild(h),style.position="absolute",w&&D&&((f=Object(v.h)(d)).time=v.w.time,f.width=d[M]),Object(v.u)(A?c*_/T:c&&_?T/c*_:0))):(c=m?e.getBBox()[w?"width":"height"]:e[M],Object(v.u)(D?_/c*T:_/100*c)))},st=function(t,e,n,r){var o;return c||$(),e in T&&"transform"!==e&&~(e=T[e]).indexOf(",")&&(e=e.split(",")[0]),y[e]&&"transform"!==e?(o=_t(t,r),o="transformOrigin"!==e?o[e]:o.svg?o.origin:bt(X(t,U))+" "+o.zOrigin+"px"):(!(o=t.style[e])||"auto"===o||r||~(o+"").indexOf("calc("))&&(o=ht[e]&&ht[e](t,e,n)||X(t,e)||Object(v.i)(t,e)||("opacity"===e?1:0)),n&&!~(o+"").trim().indexOf(" ")?ot(t,e,o,n)+n:o},ut=function(t,e,n,r){if(!n||"none"===n){var p=Q(e,t,1),s=p&&X(t,p,1);s&&s!==n?(e=p,n=s):"borderColor"===e&&(n=X(t,"borderTopColor"))}var a,o,l,c,h,d,f,m,y,_,x,w=new v.b(this._pt,t.style,e,0,1,v.s),S=0,E=0;if(w.b=n,w.e=r,n+="","auto"===(r+="")&&(t.style[e]=r,r=X(t,e)||r,t.style[e]=n),a=[n,r],Object(v.e)(a),r=a[1],l=(n=a[0]).match(v.o)||[],(r.match(v.o)||[]).length){for(;o=v.o.exec(r);)f=o[0],y=r.substring(S,o.index),h?h=(h+1)%5:"rgba("!==y.substr(-5)&&"hsla("!==y.substr(-5)||(h=1),f!==(d=l[E++]||"")&&(c=parseFloat(d)||0,x=d.substr((c+"").length),"="===f.charAt(1)&&(f=Object(v.p)(c,f)+x),m=parseFloat(f),_=f.substr((m+"").length),S=v.o.lastIndex-_.length,_||(_=_||v.f.units[e]||x,S===r.length&&(r+=_,w.e+=_)),x!==_&&(c=ot(t,e,d,_)||0),w._pt={_next:w._pt,p:y||1===E?y:",",s:c,c:m-c,m:h&&h<4||"zIndex"===e?Math.round:0});w.c=S<r.length?r.substring(S,r.length):""}else w.r="display"===e&&"none"===r?O:k;return v.r.test(r)&&(w.e=0),this._pt=w,w},lt={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ct=function(t,data){if(data.tween&&data.tween._time===data.tween._dur){var e,n,i,r=data.t,style=r.style,o=data.u,l=r._gsap;if("all"===o||!0===o)style.cssText="",n=1;else for(i=(o=o.split(",")).length;--i>-1;)e=o[i],y[e]&&(n=1,e="transformOrigin"===e?U:B),et(r,e);n&&(et(r,B),l&&(l.svg&&r.removeAttribute("transform"),_t(r,1),l.uncache=1,V(style)))}},ht={clearProps:function(t,e,n,r,o){if("isFromStart"!==o.data){var l=t._pt=new v.b(t._pt,e,n,0,0,ct);return l.u=r,l.pr=-10,l.tween=o,t._props.push(n),1}}},pt=[1,0,0,1,0,0],ft={},mt=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},vt=function(t){var e=X(t,B);return mt(e)?pt:e.substr(7).match(v.n).map(v.u)},gt=function(t,e){var n,r,o,c,h=t._gsap||Object(v.h)(t),style=t.style,d=vt(t);return h.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(d=[(o=t.transform.baseVal.consolidate().matrix).a,o.b,o.c,o.d,o.e,o.f]).join(",")?pt:d:(d!==pt||t.offsetParent||t===l||h.svg||(o=style.display,style.display="block",(n=t.parentNode)&&t.offsetParent||(c=1,r=t.nextElementSibling,l.appendChild(t)),d=vt(t),o?style.display=o:et(t,"display"),c&&(r?n.insertBefore(t,r):n?n.appendChild(t):l.removeChild(t))),e&&d.length>6?[d[0],d[1],d[4],d[5],d[12],d[13]]:d)},yt=function(t,e,n,r,o,l){var c,h,d,f=t._gsap,m=o||gt(t,!0),v=f.xOrigin||0,y=f.yOrigin||0,_=f.xOffset||0,x=f.yOffset||0,a=m[0],b=m[1],w=m[2],S=m[3],E=m[4],M=m[5],T=e.split(" "),A=parseFloat(T[0])||0,D=parseFloat(T[1])||0;n?m!==pt&&(h=a*S-b*w)&&(d=A*(-b/h)+D*(a/h)-(a*M-b*E)/h,A=A*(S/h)+D*(-w/h)+(w*M-S*E)/h,D=d):(A=(c=Z(t)).x+(~T[0].indexOf("%")?A/100*c.width:A),D=c.y+(~(T[1]||T[0]).indexOf("%")?D/100*c.height:D)),r||!1!==r&&f.smooth?(E=A-v,M=D-y,f.xOffset=_+(E*a+M*w)-E,f.yOffset=x+(E*b+M*S)-M):f.xOffset=f.yOffset=0,f.xOrigin=A,f.yOrigin=D,f.smooth=!!r,f.origin=e,f.originIsAbsolute=!!n,t.style[U]="0px 0px",l&&(nt(l,f,"xOrigin",v,A),nt(l,f,"yOrigin",y,D),nt(l,f,"xOffset",_,f.xOffset),nt(l,f,"yOffset",x,f.yOffset)),t.setAttribute("data-svg-origin",A+" "+D)},_t=function(t,e){var n=t._gsap||new v.a(t);if("x"in n&&!e&&!n.uncache)return n;var r,o,l,c,h,d,f,y,S,E,M,T,A,D,P,C,k,a,b,O,L,F,R,I,N,j,z,V,H,G,W,Y,style=t.style,Q=n.scaleX<0,$="px",K="deg",J=getComputedStyle(t),Z=X(t,U)||"0";return r=o=l=d=f=y=S=E=M=0,c=h=1,n.svg=!(!t.getCTM||!tt(t)),J.translate&&("none"===J.translate&&"none"===J.scale&&"none"===J.rotate||(style[B]=("none"!==J.translate?"translate3d("+(J.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==J.rotate?"rotate("+J.rotate+") ":"")+("none"!==J.scale?"scale("+J.scale.split(" ").join(",")+") ":"")+J[B]),style.scale=style.rotate=style.translate="none"),D=gt(t,n.svg),n.svg&&(I=(!n.uncache||"0px 0px"===Z)&&!e&&t.getAttribute("data-svg-origin"),yt(t,I||Z,!!I||n.originIsAbsolute,!1!==n.smooth,D)),T=n.xOrigin||0,A=n.yOrigin||0,D!==pt&&(a=D[0],b=D[1],O=D[2],L=D[3],r=F=D[4],o=R=D[5],6===D.length?(c=Math.sqrt(a*a+b*b),h=Math.sqrt(L*L+O*O),d=a||b?w(b,a)*_:0,(S=O||L?w(O,L)*_+d:0)&&(h*=Math.abs(Math.cos(S*x))),n.svg&&(r-=T-(T*a+A*O),o-=A-(T*b+A*L))):(Y=D[6],G=D[7],z=D[8],V=D[9],H=D[10],W=D[11],r=D[12],o=D[13],l=D[14],f=(P=w(Y,H))*_,P&&(I=F*(C=Math.cos(-P))+z*(k=Math.sin(-P)),N=R*C+V*k,j=Y*C+H*k,z=F*-k+z*C,V=R*-k+V*C,H=Y*-k+H*C,W=G*-k+W*C,F=I,R=N,Y=j),y=(P=w(-O,H))*_,P&&(C=Math.cos(-P),W=L*(k=Math.sin(-P))+W*C,a=I=a*C-z*k,b=N=b*C-V*k,O=j=O*C-H*k),d=(P=w(b,a))*_,P&&(I=a*(C=Math.cos(P))+b*(k=Math.sin(P)),N=F*C+R*k,b=b*C-a*k,R=R*C-F*k,a=I,F=N),f&&Math.abs(f)+Math.abs(d)>359.9&&(f=d=0,y=180-y),c=Object(v.u)(Math.sqrt(a*a+b*b+O*O)),h=Object(v.u)(Math.sqrt(R*R+Y*Y)),P=w(F,R),S=Math.abs(P)>2e-4?P*_:0,M=W?1/(W<0?-W:W):0),n.svg&&(I=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!mt(X(t,B)),I&&t.setAttribute("transform",I))),Math.abs(S)>90&&Math.abs(S)<270&&(Q?(c*=-1,S+=d<=0?180:-180,d+=d<=0?180:-180):(h*=-1,S+=S<=0?180:-180)),e=e||n.uncache,n.x=r-((n.xPercent=r&&(!e&&n.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-r)?-50:0)))?t.offsetWidth*n.xPercent/100:0)+$,n.y=o-((n.yPercent=o&&(!e&&n.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-o)?-50:0)))?t.offsetHeight*n.yPercent/100:0)+$,n.z=l+$,n.scaleX=Object(v.u)(c),n.scaleY=Object(v.u)(h),n.rotation=Object(v.u)(d)+K,n.rotationX=Object(v.u)(f)+K,n.rotationY=Object(v.u)(y)+K,n.skewX=S+K,n.skewY=E+K,n.transformPerspective=M+$,(n.zOrigin=parseFloat(Z.split(" ")[2])||0)&&(style[U]=bt(Z)),n.xOffset=n.yOffset=0,n.force3D=v.f.force3D,n.renderTransform=n.svg?At:m?Tt:wt,n.uncache=0,n},bt=function(t){return(t=t.split(" "))[0]+" "+t[1]},xt=function(t,e,n){var r=Object(v.x)(e);return Object(v.u)(parseFloat(e)+parseFloat(ot(t,"x",n+"px",r)))+r},wt=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,Tt(t,e)},St="0deg",Et="0px",Mt=") ",Tt=function(t,e){var n=e||this,r=n.xPercent,o=n.yPercent,l=n.x,c=n.y,h=n.z,d=n.rotation,f=n.rotationY,m=n.rotationX,v=n.skewX,y=n.skewY,_=n.scaleX,w=n.scaleY,S=n.transformPerspective,E=n.force3D,M=n.target,T=n.zOrigin,A="",D="auto"===E&&t&&1!==t||!0===E;if(T&&(m!==St||f!==St)){var P,C=parseFloat(f)*x,k=Math.sin(C),O=Math.cos(C);C=parseFloat(m)*x,P=Math.cos(C),l=xt(M,l,k*P*-T),c=xt(M,c,-Math.sin(C)*-T),h=xt(M,h,O*P*-T+T)}S!==Et&&(A+="perspective("+S+Mt),(r||o)&&(A+="translate("+r+"%, "+o+"%) "),(D||l!==Et||c!==Et||h!==Et)&&(A+=h!==Et||D?"translate3d("+l+", "+c+", "+h+") ":"translate("+l+", "+c+Mt),d!==St&&(A+="rotate("+d+Mt),f!==St&&(A+="rotateY("+f+Mt),m!==St&&(A+="rotateX("+m+Mt),v===St&&y===St||(A+="skew("+v+", "+y+Mt),1===_&&1===w||(A+="scale("+_+", "+w+Mt),M.style[B]=A||"translate(0, 0)"},At=function(t,e){var n,r,o,l,c,h=e||this,d=h.xPercent,f=h.yPercent,m=h.x,y=h.y,_=h.rotation,w=h.skewX,S=h.skewY,E=h.scaleX,M=h.scaleY,T=h.target,A=h.xOrigin,D=h.yOrigin,P=h.xOffset,C=h.yOffset,k=h.forceCSS,O=parseFloat(m),L=parseFloat(y);_=parseFloat(_),w=parseFloat(w),(S=parseFloat(S))&&(w+=S=parseFloat(S),_+=S),_||w?(_*=x,w*=x,n=Math.cos(_)*E,r=Math.sin(_)*E,o=Math.sin(_-w)*-M,l=Math.cos(_-w)*M,w&&(S*=x,c=Math.tan(w-S),o*=c=Math.sqrt(1+c*c),l*=c,S&&(c=Math.tan(S),n*=c=Math.sqrt(1+c*c),r*=c)),n=Object(v.u)(n),r=Object(v.u)(r),o=Object(v.u)(o),l=Object(v.u)(l)):(n=E,l=M,r=o=0),(O&&!~(m+"").indexOf("px")||L&&!~(y+"").indexOf("px"))&&(O=ot(T,"x",m,"px"),L=ot(T,"y",y,"px")),(A||D||P||C)&&(O=Object(v.u)(O+A-(A*n+D*o)+P),L=Object(v.u)(L+D-(A*r+D*l)+C)),(d||f)&&(c=T.getBBox(),O=Object(v.u)(O+d/100*c.width),L=Object(v.u)(L+f/100*c.height)),c="matrix("+n+","+r+","+o+","+l+","+O+","+L+")",T.setAttribute("transform",c),k&&(T.style[B]=c)},Dt=function(t,e,n,r,o){var l,c,h=360,d=Object(v.k)(o),f=parseFloat(o)*(d&&~o.indexOf("rad")?_:1)-r,m=r+f+"deg";return d&&("short"===(l=o.split("_")[1])&&(f%=h)!==f%180&&(f+=f<0?h:-360),"cw"===l&&f<0?f=(f+36e9)%h-~~(f/h)*h:"ccw"===l&&f>0&&(f=(f-36e9)%h-~~(f/h)*h)),t._pt=c=new v.b(t._pt,e,n,r,f,D),c.e=m,c.u="deg",t._props.push(n),c},Pt=function(t,source){for(var p in source)t[p]=source[p];return t},Ct=function(t,e,n){var r,p,o,l,c,h,d,f=Pt({},n._gsap),style=n.style;for(p in f.svg?(o=n.getAttribute("transform"),n.setAttribute("transform",""),style[B]=e,r=_t(n,1),et(n,B),n.setAttribute("transform",o)):(o=getComputedStyle(n)[B],style[B]=e,r=_t(n,1),style[B]=o),y)(o=f[p])!==(l=r[p])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(p)<0&&(c=Object(v.x)(o)!==(d=Object(v.x)(l))?ot(n,p,o,d):parseFloat(o),h=parseFloat(l),t._pt=new v.b(t._pt,r,p,c,h-c,A),t._pt.u=d||0,t._props.push(p));Pt(r,f)};Object(v.g)("padding,margin,Width,Radius",(function(t,e){var n="Top",r="Right",b="Bottom",o="Left",l=(e<3?[n,r,b,o]:[n+o,n+r,b+r,b+o]).map((function(n){return e<2?t+n:"border"+n+t}));ht[e>1?"border"+t:t]=function(t,e,n,r,o){var a,c;if(arguments.length<4)return a=l.map((function(e){return st(t,e,n)})),5===(c=a.join(" ")).split(a[0]).length?a[0]:c;a=(r+"").split(" "),c={},l.forEach((function(t,i){return c[t]=a[i]=a[i]||a[(i-1)/2|0]})),t.init(e,c,o)}}));var kt,Ot,Lt,Ft={name:"css",register:$,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,r,o){var l,h,d,f,m,_,p,x,w,S,E,D,k,O,L,F,R,I,N,j,z=this._props,style=t.style,V=n.vars.startAt;for(p in c||$(),this.styles=this.styles||G(t),F=this.styles.props,this.tween=n,e)if("autoRound"!==p&&(h=e[p],!v.q[p]||!Object(v.c)(p,e,n,r,t,o)))if(m=typeof h,_=ht[p],"function"===m&&(m=typeof(h=h.call(n,r,t,o))),"string"===m&&~h.indexOf("random(")&&(h=Object(v.t)(h)),_)_(this,t,p,h,n)&&(L=1);else if("--"===p.substr(0,2))l=(getComputedStyle(t).getPropertyValue(p)+"").trim(),h+="",v.d.lastIndex=0,v.d.test(l)||(x=Object(v.x)(l),w=Object(v.x)(h)),w?x!==w&&(l=ot(t,p,l,w)+w):x&&(h+=x),this.add(style,"setProperty",l,h,r,o,0,0,p),z.push(p),F.push(p,style[p]);else if("undefined"!==m){if(V&&p in V?(l="function"==typeof V[p]?V[p].call(n,r,t,o):V[p],Object(v.k)(l)&&~l.indexOf("random(")&&(l=Object(v.t)(l)),Object(v.x)(l+"")||(l+=v.f.units[p]||Object(v.x)(st(t,p))||""),"="===(l+"").charAt(1)&&(l=st(t,p))):l=st(t,p),f=parseFloat(l),(S="string"===m&&"="===h.charAt(1)&&h.substr(0,2))&&(h=h.substr(2)),d=parseFloat(h),p in T&&("autoAlpha"===p&&(1===f&&"hidden"===st(t,"visibility")&&d&&(f=0),F.push("visibility",style.visibility),nt(this,style,"visibility",f?"inherit":"hidden",d?"inherit":"hidden",!d)),"scale"!==p&&"transform"!==p&&~(p=T[p]).indexOf(",")&&(p=p.split(",")[0])),E=p in y)if(this.styles.save(p),D||((k=t._gsap).renderTransform&&!e.parseTransform||_t(t,e.parseTransform),O=!1!==e.smoothOrigin&&k.smooth,(D=this._pt=new v.b(this._pt,style,B,0,1,k.renderTransform,k,0,-1)).dep=1),"scale"===p)this._pt=new v.b(this._pt,k,"scaleY",k.scaleY,(S?Object(v.p)(k.scaleY,S+d):d)-k.scaleY||0,A),this._pt.u=0,z.push("scaleY",p),p+="X";else{if("transformOrigin"===p){F.push(U,style[U]),I=void 0,N=void 0,j=void 0,I=(R=h).split(" "),N=I[0],j=I[1]||"50%","top"!==N&&"bottom"!==N&&"left"!==j&&"right"!==j||(R=N,N=j,j=R),I[0]=lt[N]||N,I[1]=lt[j]||j,h=I.join(" "),k.svg?yt(t,h,0,O,0,this):((w=parseFloat(h.split(" ")[2])||0)!==k.zOrigin&&nt(this,k,"zOrigin",k.zOrigin,w),nt(this,style,p,bt(l),bt(h)));continue}if("svgOrigin"===p){yt(t,h,1,O,0,this);continue}if(p in ft){Dt(this,k,p,f,S?Object(v.p)(f,S+h):h);continue}if("smoothOrigin"===p){nt(this,k,"smooth",k.smooth,h);continue}if("force3D"===p){k[p]=h;continue}if("transform"===p){Ct(this,h,t);continue}}else p in style||(p=Q(p)||p);if(E||(d||0===d)&&(f||0===f)&&!M.test(h)&&p in style)d||(d=0),(x=(l+"").substr((f+"").length))!==(w=Object(v.x)(h)||(p in v.f.units?v.f.units[p]:x))&&(f=ot(t,p,l,w)),this._pt=new v.b(this._pt,E?k:style,p,f,(S?Object(v.p)(f,S+d):d)-f,E||"px"!==w&&"zIndex"!==p||!1===e.autoRound?A:C),this._pt.u=w||0,x!==w&&"%"!==w&&(this._pt.b=l,this._pt.r=P);else if(p in style)ut.call(this,t,p,l,S?S+h:h);else{if(!(p in t)){Object(v.m)(p,h);continue}this.add(t,p,l||t[p],S?S+h:h,r,o)}E||F.push(p,style[p]),z.push(p)}L&&Object(v.v)(this)},render:function(t,data){if(data.tween._time||!f())for(var e=data._pt;e;)e.r(t,e.d),e=e._next;else data.styles.revert()},get:st,aliases:T,getSetter:function(t,e,n){var p=T[e];return p&&p.indexOf(",")<0&&(e=p),e in y&&e!==U&&(t._gsap.x||st(t,"x"))?n&&d===n?"scale"===e?I:R:(d=n||{})&&("scale"===e?N:j):t.style&&!Object(v.l)(t.style[e])?L:~e.indexOf("-")?F:Object(v.j)(t,e)},core:{_removeProperty:et,_getMatrix:gt}};v.y.utils.checkPrefix=Q,v.y.core.getStyleSaver=G,kt="x,y,z,scale,scaleX,scaleY,xPercent,yPercent",Ot="rotation,rotationX,rotationY,skewX,skewY",Lt=Object(v.g)(kt+","+Ot+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){y[t]=1})),Object(v.g)(Ot,(function(t){v.f.units[t]="deg",ft[t]=1})),T[Lt[13]]=kt+","+Ot,Object(v.g)("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");T[e[1]]=Lt[e[0]]})),Object(v.g)("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){v.f.units[t]="px"})),v.y.registerPlugin(Ft);var Rt=v.y.registerPlugin(Ft)||v.y;Rt.core.Tween},211:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var r=n(100);function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l=o(r);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){d(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var f={name:"PrismicEmbed",functional:!0,props:{field:{type:Object,required:!0},wrapper:{type:[String,Object,Function],required:!1,default:"div"}},render:function(t,e){var n=e.props,data=e.data,r=n.field,o=n.wrapper;if(!r||!r.html)return null;var l=r.embed_url,c=r.type,d=r.provider_name,f=h(h(h(h({},data.attrs),l&&{"data-oembed":l}),c&&{"data-oembed-type":c}),d&&{"data-oembed-provider":d});return t(o,h(h({},Object.assign(data,{attrs:f})),{},{domProps:{innerHTML:r.html}}))}},m={name:"PrismicImage",functional:!0,props:{field:{type:Object,required:!0}},render:function(t,e){var n=e.props,data=e.data,r=n.field;if(!r)return null;var o=r.url,l=r.alt,c=r.copyright;return t("img",Object.assign(data,{attrs:h(h({},data.attrs),{},{src:o,alt:l||"",copyright:c})}))}},v=function(t){var e=t.component,component=void 0===e?"a":e;return{name:"PrismicLink",functional:!0,props:{field:{type:Object,required:!0},linkResolver:{type:Function,required:!1},target:{type:String,default:void 0,required:!1},rel:{type:String,default:void 0,required:!1},blankTargetRelAttribute:{type:String,default:"noopener noreferrer",required:!1}},render:function(t,e){var n=e.props,data=e.data,r=e.children,o=e.parent,c=n.field,d=n.linkResolver;if(!c)return null;var f=o.$prismic?o.$prismic.asLink(c,d):l.default.Link.url(c,d||function(){return null});return function(t){var e=/^\/(?!\/)/.test(t),n=!e&&!/^https?:\/\//i.test(t);return e&&!n}(f)&&!n.target?(data.props=data.props||{},data.props.to=f,t(component,data,r)):(data.attrs=h(h({},data.attrs),{},{href:f}),void 0!==n.target?data.attrs.target=n.target:c.target&&(data.attrs.target=c.target),void 0!==n.rel?data.attrs.rel=n.rel:"_blank"===data.attrs.target&&(data.attrs.rel=n.blankTargetRelAttribute),t("a",data,r))}}},y={name:"PrismicRichText",functional:!0,props:{field:{type:Array,required:!0},linkResolver:{type:Function,required:!1},htmlSerializer:{type:Function,required:!1},wrapper:{type:[String,Object,Function],required:!1,default:"div"}},render:function(t,e){var n=e.props,data=e.data,o=e.parent,l=n.field,c=n.linkResolver,d=n.htmlSerializer,f=n.wrapper;if(!l)return null;var m=r.RichText.asHtml(l,c||(o.$prismic?o.$prismic.linkResolver:void 0),d||(o.$prismic?o.$prismic.htmlSerializer:void 0));return t(f,h(h({},data),{},{domProps:{innerHTML:m}}))}},_={name:"PrismicText",functional:!0,props:{field:{type:Array,required:!0},separator:{type:String,default:void 0,required:!1},wrapper:{type:[String,Object,Function],required:!1,default:"div"}},render:function(t,e){var n=e.props,data=e.data;e.children,e.parent;var o=n.field,l=n.separator,c=n.wrapper;if(!o)return null;var d=r.RichText.asText(o,l);return t(c,h(h({},data),{},{domProps:{innerHTML:d}}))}};void 0===t&&(globalThis.process={env:{}});var x=function(t){return{slice:{type:Object,required:!0},index:{type:Number,required:!0},slices:{type:Array,required:!0},context:{type:null,required:!0}}},w={common:{Embed:f,Image:m,RichText:y,Text:_,SliceZone:{name:"SliceZone",props:{slices:{type:Array,required:!0},components:{type:Object,default:void 0,required:!1},resolver:{type:Function,default:void 0,required:!1},context:{type:null,default:void 0,required:!1},defaultComponent:{type:Object,default:void 0,required:!1},wrapper:{type:[String,Object,Function],default:"div",required:!1}},computed:{renderedSlices:function(){var t=this;return this.slices?this.slices.map((function(e,n){var component=t.components&&e.slice_type in t.components?t.components[e.slice_type]:t.defaultComponent||null;if(t.resolver){var r=t.resolver({slice:e,sliceName:e.slice_type,i:n});r&&(component=r)}return{component:component,p:{key:"id"in e&&e.id?e.id:"".concat(n,"-").concat(JSON.stringify(e)),props:{slice:e,index:n,context:t.context,slices:t.slices}}}})):null}},render:function(t){return this.slices?t(this.wrapper,this.renderedSlices.map((function(e){var component=e.component,p=e.p;return t(component,p)}))):null}}},nuxt:{Link:v({component:"nuxt-link"})},vueRouter:{Link:v({component:"router-link"})}},S=w.common,E=w.nuxt,M=w.vueRouter;e.common=S,e.default=w,e.defineSliceZoneComponents=function(t){return t},e.getSliceComponentProps=x,e.nuxt=E,e.vueRouter=M}).call(this,n(201))},212:function(t,e,n){var r=n(423);function o(){return(o=r(regeneratorRuntime.mark((function t(){var e,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!1 in navigator)){t.next=2;break}throw new Error("serviceWorker is not supported in current browser!");case 2:return t.next=4,n.e(53).then(n.bind(null,427));case 4:return e=t.sent,r=e.Workbox,o=new r("/sw.js",{scope:"/"}),t.next=9,o.register();case 9:return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}n(46),n(12),n(44),n(45),window.$workbox=function(){return o.apply(this,arguments)}().catch((function(t){}))},217:function(t,e,n){!function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var r,o,l,c,h,d,f,m,v,y="transform",_=y+"Origin",x=function(element){var t=element.ownerDocument||element;!(y in element.style)&&"msTransform"in element.style&&(_=(y="msTransform")+"Origin");for(;t.parentNode&&(t=t.parentNode););if(o=window,f=new F,t){r=t,l=t.documentElement,c=t.body,(m=r.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var e=t.createElement("div"),n=t.createElement("div");c.appendChild(e),e.appendChild(n),e.style.position="static",e.style[y]="translate3d(0,0,1px)",v=n.offsetParent!==e,c.removeChild(e)}return t},w=function(t){for(var a,e;t&&t!==c;)(e=t._gsap)&&e.uncache&&e.get(t,"x"),e&&!e.scaleX&&!e.scaleY&&e.renderTransform&&(e.scaleX=e.scaleY=1e-4,e.renderTransform(1,e),a?a.push(e):a=[e]),t=t.parentNode;return a},S=[],E=[],M=function(){return o.pageYOffset||r.scrollTop||l.scrollTop||c.scrollTop||0},T=function(){return o.pageXOffset||r.scrollLeft||l.scrollLeft||c.scrollLeft||0},A=function(element){return element.ownerSVGElement||("svg"===(element.tagName+"").toLowerCase()?element:null)},D=function t(element){return"fixed"===o.getComputedStyle(element).position||((element=element.parentNode)&&1===element.nodeType?t(element):void 0)},P=function t(element,i){if(element.parentNode&&(r||x(element))){var svg=A(element),e=svg?svg.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",n=svg?i?"rect":"g":"div",o=2!==i?0:100,l=3===i?100:0,c="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",f=r.createElementNS?r.createElementNS(e.replace(/^https/,"http"),n):r.createElement(n);return i&&(svg?(d||(d=t(element)),f.setAttribute("width",.01),f.setAttribute("height",.01),f.setAttribute("transform","translate("+o+","+l+")"),d.appendChild(f)):(h||((h=t(element)).style.cssText=c),f.style.cssText=c+"width:0.1px;height:0.1px;top:"+l+"px;left:"+o+"px",h.appendChild(f))),f}throw"Need document and parent."},C=function(t){for(var e=new F,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e},k=function(svg){var t,e=svg.getCTM();return e||(t=svg.style[y],svg.style[y]="none",svg.appendChild(m),e=m.getCTM(),svg.removeChild(m),t?svg.style[y]=t:svg.style.removeProperty(y.replace(/([A-Z])/g,"-$1").toLowerCase())),e||f.clone()},O=function(element,t){var e,n,b,r,l,c,svg=A(element),m=element===svg,x=svg?S:E,w=element.parentNode;if(element===o)return element;if(x.length||x.push(P(element,1),P(element,2),P(element,3)),e=svg?d:h,svg)m?(r=-(b=k(element)).e/b.a,l=-b.f/b.d,n=f):element.getBBox?(b=element.getBBox(),r=(n=(n=element.transform?element.transform.baseVal:{}).numberOfItems?n.numberOfItems>1?C(n):n.getItem(0).matrix:f).a*b.x+n.c*b.y,l=n.b*b.x+n.d*b.y):(n=new F,r=l=0),t&&"g"===element.tagName.toLowerCase()&&(r=l=0),(m?svg:w).appendChild(e),e.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+r)+","+(n.f+l)+")");else{if(r=l=0,v)for(n=element.offsetParent,b=element;b&&(b=b.parentNode)&&b!==n&&b.parentNode;)(o.getComputedStyle(b)[y]+"").length>4&&(r=b.offsetLeft,l=b.offsetTop,b=0);if("absolute"!==(c=o.getComputedStyle(element)).position&&"fixed"!==c.position)for(n=element.offsetParent;w&&w!==n;)r+=w.scrollLeft||0,l+=w.scrollTop||0,w=w.parentNode;(b=e.style).top=element.offsetTop-l+"px",b.left=element.offsetLeft-r+"px",b[y]=c[y],b[_]=c[_],b.position="fixed"===c.position?"fixed":"absolute",element.parentNode.appendChild(e)}return e},L=function(t,a,b,e,n,r,o){return t.a=a,t.b=b,t.c=e,t.d=n,t.e=r,t.f=o,t},F=function(){function t(a,b,t,e,n,r){void 0===a&&(a=1),void 0===b&&(b=0),void 0===t&&(t=0),void 0===e&&(e=1),void 0===n&&(n=0),void 0===r&&(r=0),L(this,a,b,t,e,n,r)}var e=t.prototype;return e.inverse=function(){var a=this.a,b=this.b,t=this.c,e=this.d,n=this.e,r=this.f,o=a*e-b*t||1e-10;return L(this,e/o,-b/o,-t/o,a/o,(t*r-e*n)/o,-(a*r-b*n)/o)},e.multiply=function(t){var a=this.a,b=this.b,e=this.c,n=this.d,r=this.e,o=this.f,l=t.a,c=t.c,h=t.b,d=t.d,f=t.e,m=t.f;return L(this,l*a+h*e,l*b+h*n,c*a+d*e,c*b+d*n,r+f*a+m*e,o+f*b+m*n)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var a=this.a,b=this.b,e=this.c,n=this.d,r=this.e,o=this.f;return a===t.a&&b===t.b&&e===t.c&&n===t.d&&r===t.e&&o===t.f},e.apply=function(t,e){void 0===e&&(e={});var n=t.x,r=t.y,a=this.a,b=this.b,o=this.c,l=this.d,c=this.e,h=this.f;return e.x=n*a+r*o+c||0,e.y=n*b+r*l+h||0,e},t}();function R(element,t,e,n){if(!element||!element.parentNode||(r||x(element)).documentElement===element)return new F;var o=w(element),l=A(element)?S:E,c=O(element,e),h=l[0].getBoundingClientRect(),d=l[1].getBoundingClientRect(),f=l[2].getBoundingClientRect(),m=c.parentNode,v=!n&&D(element),y=new F((d.left-h.left)/100,(d.top-h.top)/100,(f.left-h.left)/100,(f.top-h.top)/100,h.left+(v?0:T()),h.top+(v?0:M()));if(m.removeChild(c),o)for(h=o.length;h--;)(d=o[h]).scaleX=d.scaleY=0,d.renderTransform(1,d);return t?y.inverse():y}var I,N,j,B,U,z,V,H,G,W,X,Y,Q,$,K,J,Z,tt,et,nt,it,at=function(){return"undefined"!=typeof window},ot=function(){return I||at()&&(I=window.gsap)&&I.registerPlugin&&I},st=function(t){return"function"==typeof t},ut=function(t){return"object"==typeof t},lt=function(t){return void 0===t},ct=function(){return!1},ht="transform",pt="transformOrigin",ft=function(t){return Math.round(1e4*t)/1e4},mt=Array.isArray,vt=function(t,e){var n=j.createElementNS?j.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):j.createElement(t);return n.style?n:j.createElement(t)},gt=180/Math.PI,yt=1e20,_t=new F,bt=Date.now||function(){return(new Date).getTime()},xt=[],wt={},St=0,Et=/^(?:a|input|textarea|button|select)$/i,Mt=0,Tt={},At={},Dt=function(t,e){var p,n={};for(p in t)n[p]=e?t[p]*e:t[p];return n},Pt=function(t,e){for(var p in e)p in t||(t[p]=e[p]);return t},Ct=function t(e,n){for(var r,i=e.length;i--;)n?e[i].style.touchAction=n:e[i].style.removeProperty("touch-action"),(r=e[i].children)&&r.length&&t(r,n)},kt=function(){return xt.forEach((function(t){return t()}))},Ot=function(t){xt.push(t),1===xt.length&&I.ticker.add(kt)},Lt=function(){return!xt.length&&I.ticker.remove(kt)},Ft=function(t){for(var i=xt.length;i--;)xt[i]===t&&xt.splice(i,1);I.to(Lt,{overwrite:!0,delay:15,duration:0,onComplete:Lt,data:"_draggable"})},Rt=function(t,e){for(var p in e)p in t||(t[p]=e[p]);return t},It=function(element,t,e,n){if(element.addEventListener){var r=Q[t];n=n||(X?{passive:!1}:null),element.addEventListener(r||t,e,n),r&&t!==r&&element.addEventListener(t,e,n)}},Nt=function(element,t,e){if(element.removeEventListener){var n=Q[t];element.removeEventListener(n||t,e),n&&t!==n&&element.removeEventListener(t,e)}},jt=function(t){t.preventDefault&&t.preventDefault(),t.preventManipulation&&t.preventManipulation()},Bt=function(t,e){for(var i=t.length;i--;)if(t[i].identifier===e)return!0},Ut=function t(e){K=e.touches&&$<e.touches.length,Nt(e.target,"touchend",t)},zt=function(t){K=t.touches&&$<t.touches.length,It(t.target,"touchend",Ut)},Vt=function(t){return N.pageYOffset||t.scrollTop||t.documentElement.scrollTop||t.body.scrollTop||0},Ht=function(t){return N.pageXOffset||t.scrollLeft||t.documentElement.scrollLeft||t.body.scrollLeft||0},Gt=function t(e,n){It(e,"scroll",n),Xt(e.parentNode)||t(e.parentNode,n)},Wt=function t(e,n){Nt(e,"scroll",n),Xt(e.parentNode)||t(e.parentNode,n)},Xt=function(t){return!(t&&t!==B&&9!==t.nodeType&&t!==j.body&&t!==N&&t.nodeType&&t.parentNode)},Yt=function(element,t){var e="x"===t?"Width":"Height",n="scroll"+e,r="client"+e;return Math.max(0,Xt(element)?Math.max(B[n],U[n])-(N["inner"+e]||B[r]||U[r]):element[n]-element[r])},qt=function t(e,n){var r=Yt(e,"x"),o=Yt(e,"y");Xt(e)?e=At:t(e.parentNode,n),e._gsMaxScrollX=r,e._gsMaxScrollY=o,n||(e._gsScrollX=e.scrollLeft||0,e._gsScrollY=e.scrollTop||0)},Qt=function(element,t,e){var style=element.style;style&&(lt(style[t])&&(t=G(t,element)||t),null==e?style.removeProperty&&style.removeProperty(t.replace(/([A-Z])/g,"-$1").toLowerCase()):style[t]=e)},$t=function(element){return N.getComputedStyle(element instanceof Element?element:element.host||(element.parentNode||{}).host||element)},Kt={},Jt=function(t){if(t===N)return Kt.left=Kt.top=0,Kt.width=Kt.right=B.clientWidth||t.innerWidth||U.clientWidth||0,Kt.height=Kt.bottom=(t.innerHeight||0)-20<B.clientHeight?B.clientHeight:t.innerHeight||U.clientHeight||0,Kt;var e=t.ownerDocument||j,n=lt(t.pageX)?t.nodeType||lt(t.left)||lt(t.top)?W(t)[0].getBoundingClientRect():t:{left:t.pageX-Ht(e),top:t.pageY-Vt(e),right:t.pageX-Ht(e)+1,bottom:t.pageY-Vt(e)+1};return lt(n.right)&&!lt(n.width)?(n.right=n.left+n.width,n.bottom=n.top+n.height):lt(n.width)&&(n={width:n.right-n.left,height:n.bottom-n.top,right:n.right,left:n.left,bottom:n.bottom,top:n.top}),n},Zt=function(t,e,n){var r,o=t.vars,l=o[n],c=t._listeners[e];return st(l)&&(r=l.apply(o.callbackScope||t,o[n+"Params"]||[t.pointerEvent])),c&&!1===t.dispatchEvent(e)&&(r=!1),r},te=function(t,e){var n,r,o,l=W(t)[0];return l.nodeType||l===N?ne(l,e):lt(t.left)?{left:r=t.min||t.minX||t.minRotation||0,top:n=t.min||t.minY||0,width:(t.max||t.maxX||t.maxRotation||0)-r,height:(t.max||t.maxY||0)-n}:(o={x:0,y:0},{left:t.left-o.x,top:t.top-o.y,width:t.width,height:t.height})},ee={},ne=function(element,t){t=W(t)[0];var e,n,r,o,l,c,h,d,f,m,v,y,_,x=element.getBBox&&element.ownerSVGElement,w=element.ownerDocument||j;if(element===N)r=Vt(w),n=(e=Ht(w))+(w.documentElement.clientWidth||element.innerWidth||w.body.clientWidth||0),o=r+((element.innerHeight||0)-20<w.documentElement.clientHeight?w.documentElement.clientHeight:element.innerHeight||w.body.clientHeight||0);else{if(t===N||lt(t))return element.getBoundingClientRect();e=r=0,x?(v=(m=element.getBBox()).width,y=m.height):(element.viewBox&&(m=element.viewBox.baseVal)&&(e=m.x||0,r=m.y||0,v=m.width,y=m.height),v||(m="border-box"===(_=$t(element)).boxSizing,v=(parseFloat(_.width)||element.clientWidth||0)+(m?0:parseFloat(_.borderLeftWidth)+parseFloat(_.borderRightWidth)),y=(parseFloat(_.height)||element.clientHeight||0)+(m?0:parseFloat(_.borderTopWidth)+parseFloat(_.borderBottomWidth)))),n=v,o=y}return element===t?{left:e,top:r,width:n-e,height:o-r}:(c=(l=R(t,!0).multiply(R(element))).apply({x:e,y:r}),h=l.apply({x:n,y:r}),d=l.apply({x:n,y:o}),f=l.apply({x:e,y:o}),{left:e=Math.min(c.x,h.x,d.x,f.x),top:r=Math.min(c.y,h.y,d.y,f.y),width:Math.max(c.x,h.x,d.x,f.x)-e,height:Math.max(c.y,h.y,d.y,f.y)-r})},re=function(t,e,n,r,o,l){var a,i,c,h={};if(e)if(1!==o&&e instanceof Array){if(h.end=a=[],c=e.length,ut(e[0]))for(i=0;i<c;i++)a[i]=Dt(e[i],o);else for(i=0;i<c;i++)a[i]=e[i]*o;n+=1.1,r-=1.1}else st(e)?h.end=function(n){var r,p,l=e.call(t,n);if(1!==o)if(ut(l)){for(p in r={},l)r[p]=l[p]*o;l=r}else l*=o;return l}:h.end=e;return(n||0===n)&&(h.max=n),(r||0===r)&&(h.min=r),l&&(h.velocity=0),h},ie=function t(element){var data;return!(!element||!element.getAttribute||element===U)&&(!("true"!==(data=element.getAttribute("data-clickable"))&&("false"===data||!element.onclick&&!Et.test(element.nodeName+"")&&"true"!==element.getAttribute("contentEditable")))||t(element.parentNode))},ae=function(t,e){for(var n,i=t.length;i--;)(n=t[i]).ondragstart=n.onselectstart=e?null:ct,I.set(n,{lazy:!0,userSelect:e?"text":"none"})},oe=function t(element){return"fixed"===$t(element).position||((element=element.parentNode)&&1===element.nodeType?t(element):void 0)},se=function(element,t){element=I.utils.toArray(element)[0],t=t||{};var e,n,r,o,l,c,content=document.createElement("div"),style=content.style,h=element.firstChild,d=0,f=0,m=element.scrollTop,v=element.scrollLeft,y=element.scrollWidth,_=element.scrollHeight,x=0,w=0,S=0;nt&&!1!==t.force3D?(l="translate3d(",c="px,0px)"):ht&&(l="translate(",c="px)"),this.scrollTop=function(t,e){if(!arguments.length)return-this.top();this.top(-t,e)},this.scrollLeft=function(t,e){if(!arguments.length)return-this.left();this.left(-t,e)},this.left=function(e,n){if(!arguments.length)return-(element.scrollLeft+f);var r=element.scrollLeft-v,o=f;if((r>2||r<-2)&&!n)return v=element.scrollLeft,I.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-v),void(t.onKill&&t.onKill());(e=-e)<0?(f=e-.5|0,e=0):e>w?(f=e-w|0,e=w):f=0,(f||o)&&(this._skip||(style[ht]=l+-f+"px,"+-d+c),f+x>=0&&(style.paddingRight=f+x+"px")),element.scrollLeft=0|e,v=element.scrollLeft},this.top=function(e,n){if(!arguments.length)return-(element.scrollTop+d);var r=element.scrollTop-m,o=d;if((r>2||r<-2)&&!n)return m=element.scrollTop,I.killTweensOf(this,{top:1,scrollTop:1}),this.top(-m),void(t.onKill&&t.onKill());(e=-e)<0?(d=e-.5|0,e=0):e>S?(d=e-S|0,e=S):d=0,(d||o)&&(this._skip||(style[ht]=l+-f+"px,"+-d+c)),element.scrollTop=0|e,m=element.scrollTop},this.maxScrollTop=function(){return S},this.maxScrollLeft=function(){return w},this.disable=function(){for(h=content.firstChild;h;)o=h.nextSibling,element.appendChild(h),h=o;element===content.parentNode&&element.removeChild(content)},this.enable=function(){if((h=element.firstChild)!==content){for(;h;)o=h.nextSibling,content.appendChild(h),h=o;element.appendChild(content),this.calibrate()}},this.calibrate=function(t){var o,l,c,h=element.clientWidth===e;m=element.scrollTop,v=element.scrollLeft,h&&element.clientHeight===n&&content.offsetHeight===r&&y===element.scrollWidth&&_===element.scrollHeight&&!t||((d||f)&&(l=this.left(),c=this.top(),this.left(-element.scrollLeft),this.top(-element.scrollTop)),o=$t(element),h&&!t||(style.display="block",style.width="auto",style.paddingRight="0px",(x=Math.max(0,element.scrollWidth-element.clientWidth))&&(x+=parseFloat(o.paddingLeft)+(it?parseFloat(o.paddingRight):0))),style.display="inline-block",style.position="relative",style.overflow="visible",style.verticalAlign="top",style.boxSizing="content-box",style.width="100%",style.paddingRight=x+"px",it&&(style.paddingBottom=o.paddingBottom),e=element.clientWidth,n=element.clientHeight,y=element.scrollWidth,_=element.scrollHeight,w=element.scrollWidth-e,S=element.scrollHeight-n,r=content.offsetHeight,style.display="block",(l||c)&&(this.left(l),this.top(c)))},this.content=content,this.element=element,this._skip=!1,this.enable()},ue=function(t){if(at()&&document.body){var nav=window&&window.navigator;N=window,j=document,B=j.documentElement,U=j.body,z=vt("div"),et=!!window.PointerEvent,(V=vt("div")).style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",tt="grab"===V.style.cursor?"grab":"move",J=nav&&-1!==nav.userAgent.toLowerCase().indexOf("android"),Y="ontouchstart"in B&&"orientation"in N||nav&&(nav.MaxTouchPoints>0||nav.msMaxTouchPoints>0),div=vt("div"),n=vt("div"),r=n.style,o=U,r.display="inline-block",r.position="relative",div.style.cssText="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",div.appendChild(n),o.appendChild(div),e=n.offsetHeight+18>div.scrollHeight,o.removeChild(div),it=e,Q=function(t){for(var e=t.split(","),n=(("onpointerdown"in z?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in z?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":t).split(",")),r={},i=4;--i>-1;)r[e[i]]=n[i],r[n[i]]=e[i];try{B.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){X=1}}))}catch(t){}return r}("touchstart,touchmove,touchend,touchcancel"),It(j,"touchcancel",ct),It(N,"touchmove",ct),U&&U.addEventListener("touchstart",ct),It(j,"contextmenu",(function(){for(var p in wt)wt[p].isPressed&&wt[p].endDrag()})),I=H=ot()}var e,div,n,r,o;I?(Z=I.plugins.inertia,G=I.utils.checkPrefix,ht=G(ht),pt=G(pt),W=I.utils.toArray,nt=!!G("perspective")):t&&console.warn("Please gsap.registerPlugin(Draggable)")},le=function(t){function r(e,o){var l;l=t.call(this)||this,H||ue(1),e=W(e)[0],Z||(Z=I.plugins.inertia),l.vars=o=Dt(o||{}),l.target=e,l.x=l.y=l.rotation=0,l.dragResistance=parseFloat(o.dragResistance)||0,l.edgeResistance=isNaN(o.edgeResistance)?1:parseFloat(o.edgeResistance)||0,l.lockAxis=o.lockAxis,l.autoScroll=o.autoScroll||0,l.lockedAxis=null,l.allowEventDefault=!!o.allowEventDefault,I.getProperty(e,"x");var c,h,d,f,m,v,y,_,x,w,S,E,M,T,A,D,P,C,k,O,L,U,z,G,X,nt,it,at,ot,ct,ht,vt,xt,Et=(o.type||"x,y").toLowerCase(),kt=~Et.indexOf("x")||~Et.indexOf("y"),Lt=-1!==Et.indexOf("rotation"),Rt=Lt?"rotation":kt?"x":"left",Ut=kt?"y":"top",Yt=!(!~Et.indexOf("x")&&!~Et.indexOf("left")&&"scroll"!==Et),Kt=!(!~Et.indexOf("y")&&!~Et.indexOf("top")&&"scroll"!==Et),ne=o.minimumMovement||2,le=n(l),ce=W(o.trigger||o.handle||e),he={},de=0,pe=!1,fe=o.autoScrollMarginTop||40,me=o.autoScrollMarginRight||40,ve=o.autoScrollMarginBottom||40,ge=o.autoScrollMarginLeft||40,ye=o.clickableTest||ie,_e=0,be=e._gsap||I.core.getCache(e),xe=oe(e),we=function(t,n){return parseFloat(be.get(e,t,n))},Se=e.ownerDocument||j,Ee=function(t){return jt(t),t.stopImmediatePropagation&&t.stopImmediatePropagation(),!1},Me=function t(n){if(le.autoScroll&&le.isDragging&&(pe||P)){var r,o,rect,l,c,d,f,m,v=e,y=15*le.autoScroll;for(pe=!1,At.scrollTop=null!=N.pageYOffset?N.pageYOffset:null!=Se.documentElement.scrollTop?Se.documentElement.scrollTop:Se.body.scrollTop,At.scrollLeft=null!=N.pageXOffset?N.pageXOffset:null!=Se.documentElement.scrollLeft?Se.documentElement.scrollLeft:Se.body.scrollLeft,l=le.pointerX-At.scrollLeft,c=le.pointerY-At.scrollTop;v&&!o;)r=(o=Xt(v.parentNode))?At:v.parentNode,rect=o?{bottom:Math.max(B.clientHeight,N.innerHeight||0),right:Math.max(B.clientWidth,N.innerWidth||0),left:0,top:0}:r.getBoundingClientRect(),d=f=0,Kt&&((m=r._gsMaxScrollY-r.scrollTop)<0?f=m:c>rect.bottom-ve&&m?(pe=!0,f=Math.min(m,y*(1-Math.max(0,rect.bottom-c)/ve)|0)):c<rect.top+fe&&r.scrollTop&&(pe=!0,f=-Math.min(r.scrollTop,y*(1-Math.max(0,c-rect.top)/fe)|0)),f&&(r.scrollTop+=f)),Yt&&((m=r._gsMaxScrollX-r.scrollLeft)<0?d=m:l>rect.right-me&&m?(pe=!0,d=Math.min(m,y*(1-Math.max(0,rect.right-l)/me)|0)):l<rect.left+ge&&r.scrollLeft&&(pe=!0,d=-Math.min(r.scrollLeft,y*(1-Math.max(0,l-rect.left)/ge)|0)),d&&(r.scrollLeft+=d)),o&&(d||f)&&(N.scrollTo(r.scrollLeft,r.scrollTop),je(le.pointerX+d,le.pointerY+f)),v=r}if(P){var x=le.x,w=le.y;Lt?(le.deltaX=x-parseFloat(be.rotation),le.rotation=x,be.rotation=x+"deg",be.renderTransform(1,be)):h?(Kt&&(le.deltaY=w-h.top(),h.top(w)),Yt&&(le.deltaX=x-h.left(),h.left(x))):kt?(Kt&&(le.deltaY=w-parseFloat(be.y),be.y=w+"px"),Yt&&(le.deltaX=x-parseFloat(be.x),be.x=x+"px"),be.renderTransform(1,be)):(Kt&&(le.deltaY=w-parseFloat(e.style.top||0),e.style.top=w+"px"),Yt&&(le.deltaX=x-parseFloat(e.style.left||0),e.style.left=x+"px")),!_||n||at||(at=!0,!1===Zt(le,"drag","onDrag")&&(Yt&&(le.x-=le.deltaX),Kt&&(le.y-=le.deltaY),t(!0)),at=!1)}P=!1},Te=function(t,n){var r,o,l=le.x,c=le.y;e._gsap||(be=I.core.getCache(e)),be.uncache&&I.getProperty(e,"x"),kt?(le.x=parseFloat(be.x),le.y=parseFloat(be.y)):Lt?le.x=le.rotation=parseFloat(be.rotation):h?(le.y=h.top(),le.x=h.left()):(le.y=parseFloat(e.style.top||(o=$t(e))&&o.top)||0,le.x=parseFloat(e.style.left||(o||{}).left)||0),(k||O||L)&&!n&&(le.isDragging||le.isThrowing)&&(L&&(Tt.x=le.x,Tt.y=le.y,(r=L(Tt)).x!==le.x&&(le.x=r.x,P=!0),r.y!==le.y&&(le.y=r.y,P=!0)),k&&(r=k(le.x))!==le.x&&(le.x=r,Lt&&(le.rotation=r),P=!0),O&&((r=O(le.y))!==le.y&&(le.y=r),P=!0)),P&&Me(!0),t||(le.deltaX=le.x-l,le.deltaY=le.y-c,Zt(le,"throwupdate","onThrowUpdate"))},Ae=function(t,e,n,r){return null==e&&(e=-yt),null==n&&(n=yt),st(t)?function(o){var l=le.isPressed?1-le.edgeResistance:1;return t.call(le,(o>n?n+(o-n)*l:o<e?e+(o-e)*l:o)*r)*r}:mt(t)?function(r){for(var o,l,i=t.length,c=0,h=yt;--i>-1;)(l=(o=t[i])-r)<0&&(l=-l),l<h&&o>=e&&o<=n&&(c=i,h=l);return t[c]}:isNaN(t)?function(t){return t}:function(){return t*r}},De=function(t,e,n,r,o,l,c){return l=l&&l<yt?l*l:yt,st(t)?function(h){var d,f,m,v=le.isPressed?1-le.edgeResistance:1,y=h.x,_=h.y;return h.x=y=y>n?n+(y-n)*v:y<e?e+(y-e)*v:y,h.y=_=_>o?o+(_-o)*v:_<r?r+(_-r)*v:_,(d=t.call(le,h))!==h&&(h.x=d.x,h.y=d.y),1!==c&&(h.x*=c,h.y*=c),l<yt&&(f=h.x-y)*f+(m=h.y-_)*m>l&&(h.x=y,h.y=_),h}:mt(t)?function(p){for(var e,n,r,o,i=t.length,c=0,h=yt;--i>-1;)(o=(e=(r=t[i]).x-p.x)*e+(n=r.y-p.y)*n)<h&&(c=i,h=o);return h<=l?t[c]:p}:function(t){return t}},Pe=function(){var t,n,r,l;y=!1,h?(h.calibrate(),le.minX=S=-h.maxScrollLeft(),le.minY=M=-h.maxScrollTop(),le.maxX=w=le.maxY=E=0,y=!0):o.bounds&&(t=te(o.bounds,e.parentNode),Lt?(le.minX=S=t.left,le.maxX=w=t.left+t.width,le.minY=M=le.maxY=E=0):lt(o.bounds.maxX)&&lt(o.bounds.maxY)?(n=te(e,e.parentNode),le.minX=S=Math.round(we(Rt,"px")+t.left-n.left),le.minY=M=Math.round(we(Ut,"px")+t.top-n.top),le.maxX=w=Math.round(S+(t.width-n.width)),le.maxY=E=Math.round(M+(t.height-n.height))):(t=o.bounds,le.minX=S=t.minX,le.minY=M=t.minY,le.maxX=w=t.maxX,le.maxY=E=t.maxY),S>w&&(le.minX=w,le.maxX=w=S,S=le.minX),M>E&&(le.minY=E,le.maxY=E=M,M=le.minY),Lt&&(le.minRotation=S,le.maxRotation=w),y=!0),o.liveSnap&&(r=!0===o.liveSnap?o.snap||{}:o.liveSnap,l=mt(r)||st(r),Lt?(k=Ae(l?r:r.rotation,S,w,1),O=null):r.points?L=De(l?r:r.points,S,w,M,E,r.radius,h?-1:1):(Yt&&(k=Ae(l?r:r.x||r.left||r.scrollLeft,S,w,h?-1:1)),Kt&&(O=Ae(l?r:r.y||r.top||r.scrollTop,M,E,h?-1:1))))},Ce=function(){le.isThrowing=!1,Zt(le,"throwcomplete","onThrowComplete")},ke=function(){le.isThrowing=!1},animate=function(t,n){var r,l,c,d;t&&Z?(!0===t&&(r=o.snap||o.liveSnap||{},l=mt(r)||st(r),t={resistance:(o.throwResistance||o.resistance||1e3)/(Lt?10:1)},Lt?t.rotation=re(le,l?r:r.rotation,w,S,1,n):(Yt&&(t[Rt]=re(le,l?r:r.points||r.x||r.left,w,S,h?-1:1,n||"x"===le.lockedAxis)),Kt&&(t[Ut]=re(le,l?r:r.points||r.y||r.top,E,M,h?-1:1,n||"y"===le.lockedAxis)),(r.points||mt(r)&&ut(r[0]))&&(t.linkedProps=Rt+","+Ut,t.radius=r.radius))),le.isThrowing=!0,d=isNaN(o.overshootTolerance)?1===o.edgeResistance?0:1-le.edgeResistance+.2:o.overshootTolerance,t.duration||(t.duration={max:Math.max(o.minDuration||0,"maxDuration"in o?o.maxDuration:2),min:isNaN(o.minDuration)?0===d||ut(t)&&t.resistance>1e3?0:.5:o.minDuration,overshoot:d}),le.tween=c=I.to(h||e,{inertia:t,data:"_draggable",onComplete:Ce,onInterrupt:ke,onUpdate:o.fastMode?Zt:Te,onUpdateParams:o.fastMode?[le,"onthrowupdate","onThrowUpdate"]:r&&r.radius?[!1,!0]:[]}),o.fastMode||(h&&(h._skip=!0),c.render(1e9,!0,!0),Te(!0,!0),le.endX=le.x,le.endY=le.y,Lt&&(le.endRotation=le.x),c.play(0),Te(!0,!0),h&&(h._skip=!1))):y&&le.applyBounds()},Oe=function(t){var p,n=G;G=R(e.parentNode,!0),t&&le.isPressed&&!G.equals(n||new F)&&(p=n.inverse().apply({x:d,y:f}),G.apply(p,p),d=p.x,f=p.y),G.equals(_t)&&(G=null)},Le=function(){var t,n,r,o=1-le.edgeResistance,l=xe?Ht(Se):0,c=xe?Vt(Se):0;Oe(!1),ee.x=le.pointerX-l,ee.y=le.pointerY-c,G&&G.apply(ee,ee),d=ee.x,f=ee.y,P&&(je(le.pointerX,le.pointerY),Me(!0)),vt=R(e),h?(Pe(),v=h.top(),m=h.left()):(Fe()?(Te(!0,!0),Pe()):le.applyBounds(),Lt?(t=e.ownerSVGElement?[be.xOrigin-e.getBBox().x,be.yOrigin-e.getBBox().y]:($t(e)[pt]||"0 0").split(" "),D=le.rotationOrigin=R(e).apply({x:parseFloat(t[0])||0,y:parseFloat(t[1])||0}),Te(!0,!0),n=le.pointerX-D.x-l,r=D.y-le.pointerY+c,m=le.x,v=le.y=Math.atan2(r,n)*gt):(v=we(Ut,"px"),m=we(Rt,"px"))),y&&o&&(m>w?m=w+(m-w)/o:m<S&&(m=S-(S-m)/o),Lt||(v>E?v=E+(v-E)/o:v<M&&(v=M-(M-v)/o))),le.startX=m=ft(m),le.startY=v=ft(v)},Fe=function(){return le.tween&&le.tween.isActive()},Re=function(){!V.parentNode||Fe()||le.isDragging||V.parentNode.removeChild(V)},Ie=function(t,n){var i;if(!c||le.isPressed||!t||!("mousedown"!==t.type&&"pointerdown"!==t.type||n)&&bt()-_e<30&&Q[le.pointerEvent.type])ht&&t&&c&&jt(t);else{if(X=Fe(),xt=!1,le.pointerEvent=t,Q[t.type]?(z=~t.type.indexOf("touch")?t.currentTarget||t.target:Se,It(z,"touchend",Be),It(z,"touchmove",Ne),It(z,"touchcancel",Be),It(Se,"touchstart",zt)):(z=null,It(Se,"mousemove",Ne)),it=null,et&&z||(It(Se,"mouseup",Be),t&&t.target&&It(t.target,"mouseup",Be)),U=ye.call(le,t.target)&&!1===o.dragClickables&&!n)return It(t.target,"change",Be),Zt(le,"pressInit","onPressInit"),Zt(le,"press","onPress"),ae(ce,!0),void(ht=!1);if(nt=!(!z||Yt===Kt||!1===le.vars.allowNativeTouchScrolling||le.vars.allowContextMenu&&t&&(t.ctrlKey||t.which>2))&&(Yt?"y":"x"),(ht=!nt&&!le.allowEventDefault)&&(jt(t),It(N,"touchforcechange",jt)),t.changedTouches?(t=T=t.changedTouches[0],A=t.identifier):t.pointerId?A=t.pointerId:T=A=null,$++,Ot(Me),f=le.pointerY=t.pageY,d=le.pointerX=t.pageX,Zt(le,"pressInit","onPressInit"),(nt||le.autoScroll)&&qt(e.parentNode),!e.parentNode||!le.autoScroll||h||Lt||!e.parentNode._gsMaxScrollX||V.parentNode||e.getBBox||(V.style.width=e.parentNode.scrollWidth+"px",e.parentNode.appendChild(V)),Le(),le.tween&&le.tween.kill(),le.isThrowing=!1,I.killTweensOf(h||e,he,!0),h&&I.killTweensOf(e,{scrollTo:1},!0),le.tween=le.lockedAxis=null,(o.zIndexBoost||!Lt&&!h&&!1!==o.zIndexBoost)&&(e.style.zIndex=r.zIndex++),le.isPressed=!0,_=!(!o.onDrag&&!le._listeners.drag),x=!(!o.onMove&&!le._listeners.move),!1!==o.cursor||o.activeCursor)for(i=ce.length;--i>-1;)I.set(ce[i],{cursor:o.activeCursor||o.cursor||("grab"===tt?"grabbing":tt)});Zt(le,"press","onPress")}},Ne=function(t){var n,r,o,i,l,h,m=t;if(c&&!K&&le.isPressed&&t){if(le.pointerEvent=t,n=t.changedTouches){if((t=n[0])!==T&&t.identifier!==A){for(i=n.length;--i>-1&&(t=n[i]).identifier!==A&&t.target!==e;);if(i<0)return}}else if(t.pointerId&&A&&t.pointerId!==A)return;z&&nt&&!it&&(ee.x=t.pageX-(xe?Ht(Se):0),ee.y=t.pageY-(xe?Vt(Se):0),G&&G.apply(ee,ee),r=ee.x,o=ee.y,((l=Math.abs(r-d))!==(h=Math.abs(o-f))&&(l>ne||h>ne)||J&&nt===it)&&(it=l>h&&Yt?"x":"y",nt&&it!==nt&&It(N,"touchforcechange",jt),!1!==le.vars.lockAxisOnTouchScroll&&Yt&&Kt&&(le.lockedAxis="x"===it?"y":"x",st(le.vars.onLockAxis)&&le.vars.onLockAxis.call(le,m)),J&&nt===it))?Be(m):(le.allowEventDefault||nt&&(!it||nt===it)||!1===m.cancelable?ht&&(ht=!1):(jt(m),ht=!0),le.autoScroll&&(pe=!0),je(t.pageX,t.pageY,x))}else ht&&t&&c&&jt(t)},je=function(t,e,n){var r,o,l,c,h,_,x=1-le.dragResistance,T=1-le.edgeResistance,A=le.pointerX,C=le.pointerY,F=v,R=le.x,I=le.y,N=le.endX,j=le.endY,B=le.endRotation,U=P;le.pointerX=t,le.pointerY=e,xe&&(t-=Ht(Se),e-=Vt(Se)),Lt?(c=Math.atan2(D.y-e,t-D.x)*gt,(h=le.y-c)>180?(v-=360,le.y=c):h<-180&&(v+=360,le.y=c),le.x!==m||Math.abs(v-c)>ne?(le.y=c,l=m+(v-c)*x):l=m):(G&&(_=t*G.a+e*G.c+G.e,e=t*G.b+e*G.d+G.f,t=_),(o=e-f)<ne&&o>-ne&&(o=0),(r=t-d)<ne&&r>-ne&&(r=0),(le.lockAxis||le.lockedAxis)&&(r||o)&&((_=le.lockedAxis)||(le.lockedAxis=_=Yt&&Math.abs(r)>Math.abs(o)?"y":Kt?"x":null,_&&st(le.vars.onLockAxis)&&le.vars.onLockAxis.call(le,le.pointerEvent)),"y"===_?o=0:"x"===_&&(r=0)),l=ft(m+r*x),c=ft(v+o*x)),(k||O||L)&&(le.x!==l||le.y!==c&&!Lt)&&(L&&(Tt.x=l,Tt.y=c,_=L(Tt),l=ft(_.x),c=ft(_.y)),k&&(l=ft(k(l))),O&&(c=ft(O(c)))),y&&(l>w?l=w+Math.round((l-w)*T):l<S&&(l=S+Math.round((l-S)*T)),Lt||(c>E?c=Math.round(E+(c-E)*T):c<M&&(c=Math.round(M+(c-M)*T)))),(le.x!==l||le.y!==c&&!Lt)&&(Lt?(le.endRotation=le.x=le.endX=l,P=!0):(Kt&&(le.y=le.endY=c,P=!0),Yt&&(le.x=le.endX=l,P=!0)),n&&!1===Zt(le,"move","onMove")?(le.pointerX=A,le.pointerY=C,v=F,le.x=R,le.y=I,le.endX=N,le.endY=j,le.endRotation=B,P=U):!le.isDragging&&le.isPressed&&(le.isDragging=xt=!0,Zt(le,"dragstart","onDragStart")))},Be=function t(n,r){if(c&&le.isPressed&&(!n||null==A||r||!(n.pointerId&&n.pointerId!==A&&n.target!==e||n.changedTouches&&!Bt(n.changedTouches,A)))){le.isPressed=!1;var l,i,h,d,f,m=n,v=le.isDragging,y=le.vars.allowContextMenu&&n&&(n.ctrlKey||n.which>2),_=I.delayedCall(.001,Re);if(z?(Nt(z,"touchend",t),Nt(z,"touchmove",Ne),Nt(z,"touchcancel",t),Nt(Se,"touchstart",zt)):Nt(Se,"mousemove",Ne),Nt(N,"touchforcechange",jt),et&&z||(Nt(Se,"mouseup",t),n&&n.target&&Nt(n.target,"mouseup",t)),P=!1,v&&(de=Mt=bt(),le.isDragging=!1),Ft(Me),U&&!y)return n&&(Nt(n.target,"change",t),le.pointerEvent=m),ae(ce,!1),Zt(le,"release","onRelease"),Zt(le,"click","onClick"),void(U=!1);for(i=ce.length;--i>-1;)Qt(ce[i],"cursor",o.cursor||(!1!==o.cursor?tt:null));if($--,n){if((l=n.changedTouches)&&(n=l[0])!==T&&n.identifier!==A){for(i=l.length;--i>-1&&(n=l[i]).identifier!==A&&n.target!==e;);if(i<0&&!r)return}le.pointerEvent=m,le.pointerX=n.pageX,le.pointerY=n.pageY}return y&&m?(jt(m),ht=!0,Zt(le,"release","onRelease")):m&&!v?(ht=!1,X&&(o.snap||o.bounds)&&animate(o.inertia||o.throwProps),Zt(le,"release","onRelease"),J&&"touchmove"===m.type||-1!==m.type.indexOf("cancel")||(Zt(le,"click","onClick"),bt()-_e<300&&Zt(le,"doubleclick","onDoubleClick"),d=m.target||e,_e=bt(),f=function(){_e===ot||!le.enabled()||le.isPressed||m.defaultPrevented||(d.click?d.click():Se.createEvent&&((h=Se.createEvent("MouseEvents")).initMouseEvent("click",!0,!0,N,1,le.pointerEvent.screenX,le.pointerEvent.screenY,le.pointerX,le.pointerY,!1,!1,!1,!1,0,null),d.dispatchEvent(h)))},J||m.defaultPrevented||I.delayedCall(.05,f))):(animate(o.inertia||o.throwProps),le.allowEventDefault||!m||!1===o.dragClickables&&ye.call(le,m.target)||!v||nt&&(!it||nt!==it)||!1===m.cancelable?ht=!1:(ht=!0,jt(m)),Zt(le,"release","onRelease")),Fe()&&_.duration(le.tween.duration()),v&&Zt(le,"dragend","onDragEnd"),!0}ht&&n&&c&&jt(n)},Ue=function(t){if(t&&le.isDragging&&!h){var n=t.target||e.parentNode,r=n.scrollLeft-n._gsScrollX,o=n.scrollTop-n._gsScrollY;(r||o)&&(G?(d-=r*G.a+o*G.c,f-=o*G.d+r*G.b):(d-=r,f-=o),n._gsScrollX+=r,n._gsScrollY+=o,je(le.pointerX,le.pointerY))}},ze=function(t){var time=bt(),e=time-_e<100,n=time-de<50,r=e&&ot===_e,o=le.pointerEvent&&le.pointerEvent.defaultPrevented,l=e&&ct===_e,c=t.isTrusted||null==t.isTrusted&&e&&r;if((r||n&&!1!==le.vars.suppressClickOnDrag)&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),e&&(!le.pointerEvent||!le.pointerEvent.defaultPrevented)&&(!r||c&&!l))return c&&r&&(ct=_e),void(ot=_e);(le.isPressed||n||e)&&(c&&t.detail&&e&&!o||jt(t)),e||n||xt||(t&&t.target&&(le.pointerEvent=t),Zt(le,"click","onClick"))},Ve=function(p){return G?{x:p.x*G.a+p.y*G.c+G.e,y:p.x*G.b+p.y*G.d+G.f}:{x:p.x,y:p.y}};return(C=r.get(e))&&C.kill(),l.startDrag=function(t,n){var r,o,l,c;Ie(t||le.pointerEvent,!0),n&&!le.hitTest(t||le.pointerEvent)&&(r=Jt(t||le.pointerEvent),o=Jt(e),l=Ve({x:r.left+r.width/2,y:r.top+r.height/2}),c=Ve({x:o.left+o.width/2,y:o.top+o.height/2}),d-=l.x-c.x,f-=l.y-c.y),le.isDragging||(le.isDragging=xt=!0,Zt(le,"dragstart","onDragStart"))},l.drag=Ne,l.endDrag=function(t){return Be(t||le.pointerEvent,!0)},l.timeSinceDrag=function(){return le.isDragging?0:(bt()-de)/1e3},l.timeSinceClick=function(){return(bt()-_e)/1e3},l.hitTest=function(t,e){return r.hitTest(le.target,t,e)},l.getDirection=function(t,n){var r,o,l,c,h,d,f="velocity"===t&&Z?t:ut(t)&&!Lt?"element":"start";return"element"===f&&(h=Jt(le.target),d=Jt(t)),r="start"===f?le.x-m:"velocity"===f?Z.getVelocity(e,Rt):h.left+h.width/2-(d.left+d.width/2),Lt?r<0?"counter-clockwise":"clockwise":(n=n||2,o="start"===f?le.y-v:"velocity"===f?Z.getVelocity(e,Ut):h.top+h.height/2-(d.top+d.height/2),c=(l=Math.abs(r/o))<1/n?"":r<0?"left":"right",l<n&&(""!==c&&(c+="-"),c+=o<0?"up":"down"),c)},l.applyBounds=function(t,n){var r,l,c,h,d,f;if(t&&o.bounds!==t)return o.bounds=t,le.update(!0,n);if(Te(!0),Pe(),y&&!Fe()){if(r=le.x,l=le.y,r>w?r=w:r<S&&(r=S),l>E?l=E:l<M&&(l=M),(le.x!==r||le.y!==l)&&(c=!0,le.x=le.endX=r,Lt?le.endRotation=r:le.y=le.endY=l,P=!0,Me(!0),le.autoScroll&&!le.isDragging))for(qt(e.parentNode),h=e,At.scrollTop=null!=N.pageYOffset?N.pageYOffset:null!=Se.documentElement.scrollTop?Se.documentElement.scrollTop:Se.body.scrollTop,At.scrollLeft=null!=N.pageXOffset?N.pageXOffset:null!=Se.documentElement.scrollLeft?Se.documentElement.scrollLeft:Se.body.scrollLeft;h&&!f;)d=(f=Xt(h.parentNode))?At:h.parentNode,Kt&&d.scrollTop>d._gsMaxScrollY&&(d.scrollTop=d._gsMaxScrollY),Yt&&d.scrollLeft>d._gsMaxScrollX&&(d.scrollLeft=d._gsMaxScrollX),h=d;le.isThrowing&&(c||le.endX>w||le.endX<S||le.endY>E||le.endY<M)&&animate(o.inertia||o.throwProps,c)}return le},l.update=function(t,n,r){if(n&&le.isPressed){var o=R(e),p=vt.apply({x:le.x-m,y:le.y-v}),l=R(e.parentNode,!0);l.apply({x:o.e-p.x,y:o.f-p.y},p),le.x-=p.x-l.e,le.y-=p.y-l.f,Me(!0),Le()}var c=le.x,h=le.y;return Oe(!n),t?le.applyBounds():(P&&r&&Me(!0),Te(!0)),n&&(je(le.pointerX,le.pointerY),P&&Me(!0)),le.isPressed&&!n&&(Yt&&Math.abs(c-le.x)>.01||Kt&&Math.abs(h-le.y)>.01&&!Lt)&&Le(),le.autoScroll&&(qt(e.parentNode,le.isDragging),pe=le.isDragging,Me(!0),Wt(e,Ue),Gt(e,Ue)),le},l.enable=function(t){var n,i,r,l={lazy:!0};if(!1!==o.cursor&&(l.cursor=o.cursor||tt),I.utils.checkPrefix("touchCallout")&&(l.touchCallout="none"),"soft"!==t){for(Ct(ce,Yt===Kt?"none":o.allowNativeTouchScrolling&&e.scrollHeight===e.clientHeight==(e.scrollWidth===e.clientHeight)||o.allowEventDefault?"manipulation":Yt?"pan-y":"pan-x"),i=ce.length;--i>-1;)r=ce[i],et||It(r,"mousedown",Ie),It(r,"touchstart",Ie),It(r,"click",ze,!0),I.set(r,l),r.getBBox&&r.ownerSVGElement&&I.set(r.ownerSVGElement,{touchAction:Yt===Kt?"none":o.allowNativeTouchScrolling||o.allowEventDefault?"manipulation":Yt?"pan-y":"pan-x"}),o.allowContextMenu||It(r,"contextmenu",Ee);ae(ce,!1)}return Gt(e,Ue),c=!0,Z&&"soft"!==t&&Z.track(h||e,kt?"x,y":Lt?"rotation":"top,left"),e._gsDragID=n="d"+St++,wt[n]=le,h&&(h.enable(),h.element._gsDragID=n),(o.bounds||Lt)&&Le(),o.bounds&&le.applyBounds(),le},l.disable=function(t){for(var n,r=le.isDragging,i=ce.length;--i>-1;)Qt(ce[i],"cursor",null);if("soft"!==t){for(Ct(ce,null),i=ce.length;--i>-1;)n=ce[i],Qt(n,"touchCallout",null),Nt(n,"mousedown",Ie),Nt(n,"touchstart",Ie),Nt(n,"click",ze),Nt(n,"contextmenu",Ee);ae(ce,!0),z&&(Nt(z,"touchcancel",Be),Nt(z,"touchend",Be),Nt(z,"touchmove",Ne)),Nt(Se,"mouseup",Be),Nt(Se,"mousemove",Ne)}return Wt(e,Ue),c=!1,Z&&"soft"!==t&&Z.untrack(h||e,kt?"x,y":Lt?"rotation":"top,left"),h&&h.disable(),Ft(Me),le.isDragging=le.isPressed=U=!1,r&&Zt(le,"dragend","onDragEnd"),le},l.enabled=function(t,e){return arguments.length?t?le.enable(e):le.disable(e):c},l.kill=function(){return le.isThrowing=!1,le.tween&&le.tween.kill(),le.disable(),I.set(ce,{clearProps:"userSelect"}),delete wt[e._gsDragID],le},~Et.indexOf("scroll")&&(h=l.scrollProxy=new se(e,Pt({onKill:function(){le.isPressed&&Be(null)}},o)),e.style.overflowY=Kt&&!Y?"auto":"hidden",e.style.overflowX=Yt&&!Y?"auto":"hidden",e=h.content),Lt?he.rotation=1:(Yt&&(he[Rt]=1),Kt&&(he[Ut]=1)),be.force3D=!("force3D"in o)||o.force3D,l.enable(),l}return e(r,t),r.register=function(t){I=t,ue()},r.create=function(t,e){return H||ue(!0),W(t).map((function(t){return new r(t,e)}))},r.get=function(t){return wt[(W(t)[0]||{})._gsDragID]},r.timeSinceDrag=function(){return(bt()-Mt)/1e3},r.hitTest=function(t,e,n){if(t===e)return!1;var r,area,o,l=Jt(t),c=Jt(e),h=l.top,d=l.left,f=l.right,m=l.bottom,v=l.width,y=l.height,_=c.left>f||c.right<d||c.top>m||c.bottom<h;return _||!n?!_:(o=-1!==(n+"").indexOf("%"),n=parseFloat(n)||0,(r={left:Math.max(d,c.left),top:Math.max(h,c.top)}).width=Math.min(f,c.right)-r.left,r.height=Math.min(m,c.bottom)-r.top,!(r.width<0||r.height<0)&&(o?(n*=.01,(area=r.width*r.height)>=v*y*n||area>=c.width*c.height*n):r.width>n&&r.height>n))},r}(function(){function t(t){this._listeners={},this.target=t||this}var e=t.prototype;return e.addEventListener=function(t,e){var n=this._listeners[t]||(this._listeners[t]=[]);~n.indexOf(e)||n.push(e)},e.removeEventListener=function(t,e){var n=this._listeners[t],i=n&&n.indexOf(e);i>=0&&n.splice(i,1)},e.dispatchEvent=function(t){var e,n=this;return(this._listeners[t]||[]).forEach((function(r){return!1===r.call(n,{type:t,target:n.target})&&(e=!1)})),e},t}());Rt(le.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),le.zIndex=1e3,le.version="3.11.0",ot()&&I.registerPlugin(le),t.Draggable=le,t.default=le,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default}(e)},244:function(t,e,n){},245:function(t,e,n){},275:function(t,e,n){"use strict";e.a=function(t,e){return e=e||{},new Promise((function(n,r){var s=new XMLHttpRequest,o=[],u=[],i={},a=function(){return{ok:2==(s.status/100|0),statusText:s.statusText,status:s.status,url:s.responseURL,text:function(){return Promise.resolve(s.responseText)},json:function(){return Promise.resolve(s.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([s.response]))},clone:a,headers:{keys:function(){return o},entries:function(){return u},get:function(t){return i[t.toLowerCase()]},has:function(t){return t.toLowerCase()in i}}}};for(var l in s.open(e.method||"get",t,!0),s.onload=function(){s.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(t,e,n){o.push(e=e.toLowerCase()),u.push([e,n]),i[e]=i[e]?i[e]+","+n:n})),n(a())},s.onerror=r,s.withCredentials="include"==e.credentials,e.headers)s.setRequestHeader(l,e.headers[l]);s.send(e.body||null)}))}},277:function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)};var o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function l(t,e){return!1!==e.clone&&e.isMergeableObject(t)?m((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function c(t,source,e){return t.concat(source).map((function(element){return l(element,e)}))}function h(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(symbol){return t.propertyIsEnumerable(symbol)})):[]}(t))}function d(object,t){try{return t in object}catch(t){return!1}}function f(t,source,e){var n={};return e.isMergeableObject(t)&&h(t).forEach((function(r){n[r]=l(t[r],e)})),h(source).forEach((function(r){(function(t,e){return d(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,r)||(d(t,r)&&e.isMergeableObject(source[r])?n[r]=function(t,e){if(!e.customMerge)return m;var n=e.customMerge(t);return"function"==typeof n?n:m}(r,e)(t[r],source[r],e):n[r]=l(source[r],e))})),n}function m(t,source,e){(e=e||{}).arrayMerge=e.arrayMerge||c,e.isMergeableObject=e.isMergeableObject||r,e.cloneUnlessOtherwiseSpecified=l;var n=Array.isArray(source);return n===Array.isArray(t)?n?e.arrayMerge(t,source,e):f(t,source,e):l(source,e)}m.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return m(t,n,e)}),{})};var v=m;t.exports=v},278:function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o="~";function l(){}function c(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function h(t,e,n,r,l){if("function"!=typeof n)throw new TypeError("The listener must be a function");var h=new c(n,r||t,l),d=o?o+e:e;return t._events[d]?t._events[d].fn?t._events[d]=[t._events[d],h]:t._events[d].push(h):(t._events[d]=h,t._eventsCount++),t}function d(t,e){0==--t._eventsCount?t._events=new l:delete t._events[e]}function f(){this._events=new l,this._eventsCount=0}Object.create&&(l.prototype=Object.create(null),(new l).__proto__||(o=!1)),f.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)r.call(t,e)&&n.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},f.prototype.listeners=function(t){var e=o?o+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,r=n.length,l=new Array(r);i<r;i++)l[i]=n[i].fn;return l},f.prototype.listenerCount=function(t){var e=o?o+t:t,n=this._events[e];return n?n.fn?1:n.length:0},f.prototype.emit=function(t,e,n,r,l,c){var h=o?o+t:t;if(!this._events[h])return!1;var d,i,f=this._events[h],m=arguments.length;if(f.fn){switch(f.once&&this.removeListener(t,f.fn,void 0,!0),m){case 1:return f.fn.call(f.context),!0;case 2:return f.fn.call(f.context,e),!0;case 3:return f.fn.call(f.context,e,n),!0;case 4:return f.fn.call(f.context,e,n,r),!0;case 5:return f.fn.call(f.context,e,n,r,l),!0;case 6:return f.fn.call(f.context,e,n,r,l,c),!0}for(i=1,d=new Array(m-1);i<m;i++)d[i-1]=arguments[i];f.fn.apply(f.context,d)}else{var v,y=f.length;for(i=0;i<y;i++)switch(f[i].once&&this.removeListener(t,f[i].fn,void 0,!0),m){case 1:f[i].fn.call(f[i].context);break;case 2:f[i].fn.call(f[i].context,e);break;case 3:f[i].fn.call(f[i].context,e,n);break;case 4:f[i].fn.call(f[i].context,e,n,r);break;default:if(!d)for(v=1,d=new Array(m-1);v<m;v++)d[v-1]=arguments[v];f[i].fn.apply(f[i].context,d)}}return!0},f.prototype.on=function(t,e,n){return h(this,t,e,n,!1)},f.prototype.once=function(t,e,n){return h(this,t,e,n,!0)},f.prototype.removeListener=function(t,e,n,r){var l=o?o+t:t;if(!this._events[l])return this;if(!e)return d(this,l),this;var c=this._events[l];if(c.fn)c.fn!==e||r&&!c.once||n&&c.context!==n||d(this,l);else{for(var i=0,h=[],f=c.length;i<f;i++)(c[i].fn!==e||r&&!c[i].once||n&&c[i].context!==n)&&h.push(c[i]);h.length?this._events[l]=1===h.length?h[0]:h:d(this,l)}return this},f.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&d(this,e)):(this._events=new l,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,t.exports=f},279:function(t,e,n){var r;!function(o,l){"use strict";var c="function",h="undefined",d="object",f="string",m="model",v="name",y="type",_="vendor",x="version",w="architecture",S="console",E="mobile",M="tablet",T="smarttv",A="wearable",D="embedded",P="Amazon",C="Apple",k="ASUS",O="BlackBerry",L="Firefox",F="Google",R="Huawei",I="LG",N="Microsoft",j="Motorola",B="Opera",U="Samsung",z="Sony",V="Xiaomi",H="Zebra",G="Facebook",W=function(t){for(var e={},i=0;i<t.length;i++)e[t[i].toUpperCase()]=t[i];return e},X=function(t,e){return typeof t===f&&-1!==Y(e).indexOf(Y(t))},Y=function(t){return t.toLowerCase()},Q=function(t,e){if(typeof t===f)return t=t.replace(/^\s\s*/,"").replace(/\s\s*$/,""),typeof e===h?t:t.substring(0,255)},$=function(t,e){for(var n,r,p,q,o,h,i=0;i<e.length&&!o;){var f=e[i],m=e[i+1];for(n=r=0;n<f.length&&!o;)if(o=f[n++].exec(t))for(p=0;p<m.length;p++)h=o[++r],typeof(q=m[p])===d&&q.length>0?2===q.length?typeof q[1]==c?this[q[0]]=q[1].call(this,h):this[q[0]]=q[1]:3===q.length?typeof q[1]!==c||q[1].exec&&q[1].test?this[q[0]]=h?h.replace(q[1],q[2]):l:this[q[0]]=h?q[1].call(this,h,q[2]):l:4===q.length&&(this[q[0]]=h?q[3].call(this,h.replace(q[1],q[2])):l):this[q]=h||l;i+=2}},K=function(t,map){for(var i in map)if(typeof map[i]===d&&map[i].length>0){for(var e=0;e<map[i].length;e++)if(X(map[i][e],t))return"?"===i?l:i}else if(X(map[i],t))return"?"===i?l:i;return t},J={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Z={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[v,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[v,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[v,x],[/opios[\/ ]+([\w\.]+)/i],[x,[v,"Opera Mini"]],[/\bopr\/([\w\.]+)/i],[x,[v,B]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\/ ]?([\w\.]*)/i,/(ba?idubrowser)[\/ ]?([\w\.]+)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale|qqbrowserlite|qq)\/([-\w\.]+)/i,/(weibo)__([\d\.]+)/i],[v,x],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[v,"UCBrowser"]],[/\bqbcore\/([\w\.]+)/i],[x,[v,"WeChat(Win) Desktop"]],[/micromessenger\/([\w\.]+)/i],[x,[v,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[v,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[v,"IE"]],[/yabrowser\/([\w\.]+)/i],[x,[v,"Yandex"]],[/(avast|avg)\/([\w\.]+)/i],[[v,/(.+)/,"$1 Secure Browser"],x],[/\bfocus\/([\w\.]+)/i],[x,[v,"Firefox Focus"]],[/\bopt\/([\w\.]+)/i],[x,[v,"Opera Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[v,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[v,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[v,"Opera Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[v,"MIUI Browser"]],[/fxios\/([-\w\.]+)/i],[x,[v,L]],[/\bqihu|(qi?ho?o?|360)browser/i],[[v,"360 Browser"]],[/(oculus|samsung|sailfish)browser\/([\w\.]+)/i],[[v,/(.+)/,"$1 Browser"],x],[/(comodo_dragon)\/([\w\.]+)/i],[[v,/_/g," "],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\/ ]?([\w\.]+)/i],[v,x],[/(metasr)[\/ ]?([\w\.]+)/i,/(lbbrowser)/i],[v],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[v,G],x],[/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(chromium|instagram)[\/ ]([-\w\.]+)/i],[v,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[v,"GSA"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[v,"Chrome Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[v,"Chrome WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[v,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[v,x],[/version\/([\w\.]+) .*mobile\/\w+ (safari)/i],[x,[v,"Mobile Safari"]],[/version\/([\w\.]+) .*(mobile ?safari|safari)/i],[x,v],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[v,[x,K,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[v,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[v,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[v,"Firefox Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[v,x]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[w,"amd64"]],[/(ia32(?=;))/i],[[w,Y]],[/((?:i[346]|x)86)[;\)]/i],[[w,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[w,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[w,"armhf"]],[/windows (ce|mobile); ppc;/i],[[w,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[w,/ower/,"",Y]],[/(sun4\w)[;\)]/i],[[w,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[w,Y]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[pt]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[m,[_,U],[y,M]],[/\b((?:s[cgp]h|gt|sm)-\w+|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[m,[_,U],[y,E]],[/\((ip(?:hone|od)[\w ]*);/i],[m,[_,C],[y,E]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[m,[_,C],[y,M]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[m,[_,R],[y,M]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}-[atu]?[ln][01259x][012359][an]?)\b(?!.+d\/s)/i],[m,[_,R],[y,E]],[/\b(poco[\w ]+)(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[m,/_/g," "],[_,V],[y,E]],[/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[m,/_/g," "],[_,V],[y,M]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[m,[_,"OPPO"],[y,E]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[m,[_,"Vivo"],[y,E]],[/\b(rmx[12]\d{3})(?: bui|;|\))/i],[m,[_,"Realme"],[y,E]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[m,[_,j],[y,E]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[m,[_,j],[y,M]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[m,[_,I],[y,M]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[m,[_,I],[y,E]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[m,[_,"Lenovo"],[y,M]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[m,/_/g," "],[_,"Nokia"],[y,E]],[/(pixel c)\b/i],[m,[_,F],[y,M]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[m,[_,F],[y,E]],[/droid.+ ([c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[m,[_,z],[y,E]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[m,"Xperia Tablet"],[_,z],[y,M]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[m,[_,"OnePlus"],[y,E]],[/(alexa)webm/i,/(kf[a-z]{2}wi)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[m,[_,P],[y,M]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[m,/(.+)/g,"Fire Phone $1"],[_,P],[y,E]],[/(playbook);[-\w\),; ]+(rim)/i],[m,_,[y,M]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[m,[_,O],[y,E]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[m,[_,k],[y,M]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[m,[_,k],[y,E]],[/(nexus 9)/i],[m,[_,"HTC"],[y,M]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic|sony)[-_ ]?([-\w]*)/i],[_,[m,/_/g," "],[y,E]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[m,[_,"Acer"],[y,M]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[m,[_,"Meizu"],[y,E]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[m,[_,"Sharp"],[y,E]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,m,[y,E]],[/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,m,[y,M]],[/(surface duo)/i],[m,[_,N],[y,M]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[m,[_,"Fairphone"],[y,E]],[/(u304aa)/i],[m,[_,"AT&T"],[y,E]],[/\bsie-(\w*)/i],[m,[_,"Siemens"],[y,E]],[/\b(rct\w+) b/i],[m,[_,"RCA"],[y,M]],[/\b(venue[\d ]{2,7}) b/i],[m,[_,"Dell"],[y,M]],[/\b(q(?:mv|ta)\w+) b/i],[m,[_,"Verizon"],[y,M]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[m,[_,"Barnes & Noble"],[y,M]],[/\b(tm\d{3}\w+) b/i],[m,[_,"NuVision"],[y,M]],[/\b(k88) b/i],[m,[_,"ZTE"],[y,M]],[/\b(nx\d{3}j) b/i],[m,[_,"ZTE"],[y,E]],[/\b(gen\d{3}) b.+49h/i],[m,[_,"Swiss"],[y,E]],[/\b(zur\d{3}) b/i],[m,[_,"Swiss"],[y,M]],[/\b((zeki)?tb.*\b) b/i],[m,[_,"Zeki"],[y,M]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],m,[y,M]],[/\b(ns-?\w{0,9}) b/i],[m,[_,"Insignia"],[y,M]],[/\b((nxa|next)-?\w{0,9}) b/i],[m,[_,"NextBook"],[y,M]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],m,[y,E]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],m,[y,E]],[/\b(ph-1) /i],[m,[_,"Essential"],[y,E]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[m,[_,"Envizen"],[y,M]],[/\b(trio[-\w\. ]+) b/i],[m,[_,"MachSpeed"],[y,M]],[/\btu_(1491) b/i],[m,[_,"Rotor"],[y,M]],[/(shield[\w ]+) b/i],[m,[_,"Nvidia"],[y,M]],[/(sprint) (\w+)/i],[_,m,[y,E]],[/(kin\.[onetw]{3})/i],[[m,/\./g," "],[_,N],[y,E]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[m,[_,H],[y,M]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[m,[_,H],[y,E]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,m,[y,S]],[/droid.+; (shield) bui/i],[m,[_,"Nvidia"],[y,S]],[/(playstation [345portablevi]+)/i],[m,[_,z],[y,S]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[m,[_,N],[y,S]],[/smart-tv.+(samsung)/i],[_,[y,T]],[/hbbtv.+maple;(\d+)/i],[[m,/^/,"SmartTV"],[_,U],[y,T]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,I],[y,T]],[/(apple) ?tv/i],[_,[m,"Apple TV"],[y,T]],[/crkey/i],[[m,"Chromecast"],[_,F],[y,T]],[/droid.+aft(\w)( bui|\))/i],[m,[_,P],[y,T]],[/\(dtv[\);].+(aquos)/i],[m,[_,"Sharp"],[y,T]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w ]*; *(\w[^;]*);([^;]*)/i],[[_,Q],[m,Q],[y,T]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[y,T]],[/((pebble))app/i],[_,m,[y,A]],[/droid.+; (glass) \d/i],[m,[_,F],[y,A]],[/droid.+; (wt63?0{2,3})\)/i],[m,[_,H],[y,A]],[/(quest( 2)?)/i],[m,[_,G],[y,A]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[y,D]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+? mobile safari/i],[m,[y,E]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[m,[y,M]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[y,M]],[/(phone|mobile(?:[;\/]| safari)|pda(?=.+windows ce))/i],[[y,E]],[/(android[-\w\. ]{0,9});.+buil/i],[m,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[v,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[v,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i],[v,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,v]],os:[[/microsoft (windows) (vista|xp)/i],[v,x],[/(windows) nt 6\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i,/(windows)[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i],[v,[x,K,J]],[/(win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[v,"Windows"],[x,K,J]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[v,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[v,"Mac OS"],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86)/i],[x,v],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[v,x],[/\(bb(10);/i],[x,[v,O]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[v,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[v,"Firefox OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[v,"webOS"]],[/crkey\/([\d\.]+)/i],[x,[v,"Chromecast"]],[/(cros) [\w]+ ([\w\.]+\w)/i],[[v,"Chromium OS"],x],[/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[v,x],[/(sunos) ?([\w\.\d]*)/i],[[v,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux)/i,/(unix) ?([\w\.]*)/i],[v,x]]},tt=function(t,e){if(typeof t===d&&(e=t,t=l),!(this instanceof tt))return new tt(t,e).getResult();var n=t||(typeof o!==h&&o.navigator&&o.navigator.userAgent?o.navigator.userAgent:""),r=e?function(t,e){var n={};for(var i in t)e[i]&&e[i].length%2==0?n[i]=e[i].concat(t[i]):n[i]=t[i];return n}(Z,e):Z;return this.getBrowser=function(){var t,e={};return e.name=l,e.version=l,$.call(e,n,r.browser),e.major=typeof(t=e.version)===f?t.replace(/[^\d\.]/g,"").split(".")[0]:l,e},this.getCPU=function(){var t={};return t.architecture=l,$.call(t,n,r.cpu),t},this.getDevice=function(){var t={};return t.vendor=l,t.model=l,t.type=l,$.call(t,n,r.device),t},this.getEngine=function(){var t={};return t.name=l,t.version=l,$.call(t,n,r.engine),t},this.getOS=function(){var t={};return t.name=l,t.version=l,$.call(t,n,r.os),t},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return n},this.setUA=function(t){return n=typeof t===f&&t.length>255?Q(t,255):t,this},this.setUA(n),this};tt.VERSION="1.0.2",tt.BROWSER=W([v,x,"major"]),tt.CPU=W([w]),tt.DEVICE=W([m,_,y,S,E,T,M,A,D]),tt.ENGINE=tt.OS=W([v,x]),typeof e!==h?(typeof t!==h&&t.exports&&(e=t.exports=tt),e.UAParser=tt):n(351)?(r=function(){return tt}.call(e,n,e,t))===l||(t.exports=r):typeof o!==h&&(o.UAParser=tt);var et=typeof o!==h&&(o.jQuery||o.Zepto);if(et&&!et.ua){var nt=new tt;et.ua=nt.getResult(),et.ua.get=function(){return nt.getUA()},et.ua.set=function(t){nt.setUA(t);var e=nt.getResult();for(var n in e)et.ua[n]=e[n]}}}("object"==typeof window?window:this)},281:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={uniforms:{tDiffuse:{value:null},resolution:{value:new(n(3).t)(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:'\n\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\t#define FXAA_PC 1\n\t\t#define FXAA_GLSL_100 1\n\t\t#define FXAA_QUALITY_PRESET 12\n\n\t\t#define FXAA_GREEN_AS_LUMA 1\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_PC_CONSOLE\n\t\t\t\t//\n\t\t\t\t// The console algorithm for PC is included\n\t\t\t\t// for developers targeting really low spec machines.\n\t\t\t\t// Likely better to just run FXAA_PC, and use a really low preset.\n\t\t\t\t//\n\t\t\t\t#define FXAA_PC_CONSOLE 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_120\n\t\t\t\t#define FXAA_GLSL_120 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GLSL_130\n\t\t\t\t#define FXAA_GLSL_130 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_3\n\t\t\t\t#define FXAA_HLSL_3 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_4\n\t\t\t\t#define FXAA_HLSL_4 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_HLSL_5\n\t\t\t\t#define FXAA_HLSL_5 0\n\t\t#endif\n\t\t/*==========================================================================*/\n\t\t#ifndef FXAA_GREEN_AS_LUMA\n\t\t\t\t//\n\t\t\t\t// For those using non-linear color,\n\t\t\t\t// and either not able to get luma in alpha, or not wanting to,\n\t\t\t\t// this enables FXAA to run using green as a proxy for luma.\n\t\t\t\t// So with this enabled, no need to pack luma in alpha.\n\t\t\t\t//\n\t\t\t\t// This will turn off AA on anything which lacks some amount of green.\n\t\t\t\t// Pure red and blue or combination of only R and B, will get no AA.\n\t\t\t\t//\n\t\t\t\t// Might want to lower the settings for both,\n\t\t\t\t//\t\tfxaaConsoleEdgeThresholdMin\n\t\t\t\t//\t\tfxaaQualityEdgeThresholdMin\n\t\t\t\t// In order to insure AA does not get turned off on colors\n\t\t\t\t// which contain a minor amount of green.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_GREEN_AS_LUMA 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_EARLY_EXIT\n\t\t\t\t//\n\t\t\t\t// Controls algorithm\'s early exit path.\n\t\t\t\t// On PS3 turning this ON adds 2 cycles to the shader.\n\t\t\t\t// On 360 turning this OFF adds 10ths of a millisecond to the shader.\n\t\t\t\t// Turning this off on console will result in a more blurry image.\n\t\t\t\t// So this defaults to on.\n\t\t\t\t//\n\t\t\t\t// 1 = On.\n\t\t\t\t// 0 = Off.\n\t\t\t\t//\n\t\t\t\t#define FXAA_EARLY_EXIT 1\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_DISCARD\n\t\t\t\t//\n\t\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t\t//\n\t\t\t\t// 1 = Use discard on pixels which don\'t need AA.\n\t\t\t\t//\t\t For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t\t// 0 = Return unchanged color on pixels which don\'t need AA.\n\t\t\t\t//\n\t\t\t\t#define FXAA_DISCARD 0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t//\n\t\t\t\t// Used for GLSL 120 only.\n\t\t\t\t//\n\t\t\t\t// 1 = GL API supports fast pixel offsets\n\t\t\t\t// 0 = do not use fast pixel offsets\n\t\t\t\t//\n\t\t\t\t#ifdef GL_EXT_gpu_shader4\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_FAST_PIXEL_OFFSET\n\t\t\t\t\t\t#define FXAA_FAST_PIXEL_OFFSET 0\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t//\n\t\t\t\t// 1 = API supports gather4 on alpha channel.\n\t\t\t\t// 0 = API does not support gather4 on alpha channel.\n\t\t\t\t//\n\t\t\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_ARB_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifdef GL_NV_gpu_shader5\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 1\n\t\t\t\t#endif\n\t\t\t\t#ifndef FXAA_GATHER4_ALPHA\n\t\t\t\t\t\t#define FXAA_GATHER4_ALPHA 0\n\t\t\t\t#endif\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tFXAA QUALITY - TUNING KNOBS\n\t\t------------------------------------------------------------------------------\n\t\tNOTE the other tuning knobs are now in the shader function inputs!\n\t\t============================================================================*/\n\t\t#ifndef FXAA_QUALITY_PRESET\n\t\t\t\t//\n\t\t\t\t// Choose the quality preset.\n\t\t\t\t// This needs to be compiled into the shader as it effects code.\n\t\t\t\t// Best option to include multiple presets is to\n\t\t\t\t// in each shader define the preset, then include this file.\n\t\t\t\t//\n\t\t\t\t// OPTIONS\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n\t\t\t\t// 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n\t\t\t\t// 39\t\t\t - no dither, very expensive\n\t\t\t\t//\n\t\t\t\t// NOTES\n\t\t\t\t// -----------------------------------------------------------------------\n\t\t\t\t// 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n\t\t\t\t// 13 = about same speed as FXAA 3.9 and better than 12\n\t\t\t\t// 23 = closest to FXAA 3.9 visually and performance wise\n\t\t\t\t//\t_ = the lowest digit is directly related to performance\n\t\t\t\t// _\t= the highest digit is directly related to style\n\t\t\t\t//\n\t\t\t\t#define FXAA_QUALITY_PRESET 12\n\t\t#endif\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - PRESETS\n\n\t\t============================================================================*/\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - MEDIUM DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 10)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 3.0\n\t\t\t\t#define FXAA_QUALITY_P2 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 11)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 3.0\n\t\t\t\t#define FXAA_QUALITY_P3 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 12)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 4.0\n\t\t\t\t#define FXAA_QUALITY_P4 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 13)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 4.0\n\t\t\t\t#define FXAA_QUALITY_P5 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 14)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 4.0\n\t\t\t\t#define FXAA_QUALITY_P6 12.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 15)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 12.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - LOW DITHER PRESETS\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 20)\n\t\t\t\t#define FXAA_QUALITY_PS 3\n\t\t\t\t#define FXAA_QUALITY_P0 1.5\n\t\t\t\t#define FXAA_QUALITY_P1 2.0\n\t\t\t\t#define FXAA_QUALITY_P2 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 21)\n\t\t\t\t#define FXAA_QUALITY_PS 4\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 22)\n\t\t\t\t#define FXAA_QUALITY_PS 5\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 23)\n\t\t\t\t#define FXAA_QUALITY_PS 6\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 24)\n\t\t\t\t#define FXAA_QUALITY_PS 7\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 3.0\n\t\t\t\t#define FXAA_QUALITY_P6 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 25)\n\t\t\t\t#define FXAA_QUALITY_PS 8\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 4.0\n\t\t\t\t#define FXAA_QUALITY_P7 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 26)\n\t\t\t\t#define FXAA_QUALITY_PS 9\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 4.0\n\t\t\t\t#define FXAA_QUALITY_P8 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 27)\n\t\t\t\t#define FXAA_QUALITY_PS 10\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 4.0\n\t\t\t\t#define FXAA_QUALITY_P9 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 28)\n\t\t\t\t#define FXAA_QUALITY_PS 11\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 4.0\n\t\t\t\t#define FXAA_QUALITY_P10 8.0\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_QUALITY_PRESET == 29)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.5\n\t\t\t\t#define FXAA_QUALITY_P2 2.0\n\t\t\t\t#define FXAA_QUALITY_P3 2.0\n\t\t\t\t#define FXAA_QUALITY_P4 2.0\n\t\t\t\t#define FXAA_QUALITY_P5 2.0\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t\t FXAA QUALITY - EXTREME QUALITY\n\t\t============================================================================*/\n\t\t#if (FXAA_QUALITY_PRESET == 39)\n\t\t\t\t#define FXAA_QUALITY_PS 12\n\t\t\t\t#define FXAA_QUALITY_P0 1.0\n\t\t\t\t#define FXAA_QUALITY_P1 1.0\n\t\t\t\t#define FXAA_QUALITY_P2 1.0\n\t\t\t\t#define FXAA_QUALITY_P3 1.0\n\t\t\t\t#define FXAA_QUALITY_P4 1.0\n\t\t\t\t#define FXAA_QUALITY_P5 1.5\n\t\t\t\t#define FXAA_QUALITY_P6 2.0\n\t\t\t\t#define FXAA_QUALITY_P7 2.0\n\t\t\t\t#define FXAA_QUALITY_P8 2.0\n\t\t\t\t#define FXAA_QUALITY_P9 2.0\n\t\t\t\t#define FXAA_QUALITY_P10 4.0\n\t\t\t\t#define FXAA_QUALITY_P11 8.0\n\t\t#endif\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tAPI PORTING\n\n\t\t============================================================================*/\n\t\t#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard discard\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 vec2\n\t\t\t\t#define FxaaFloat3 vec3\n\t\t\t\t#define FxaaFloat4 vec4\n\t\t\t\t#define FxaaHalf float\n\t\t\t\t#define FxaaHalf2 vec2\n\t\t\t\t#define FxaaHalf3 vec3\n\t\t\t\t#define FxaaHalf4 vec4\n\t\t\t\t#define FxaaInt2 ivec2\n\t\t\t\t#define FxaaSat(x) clamp(x, 0.0, 1.0)\n\t\t\t\t#define FxaaTex sampler2D\n\t\t#else\n\t\t\t\t#define FxaaBool bool\n\t\t\t\t#define FxaaDiscard clip(-1)\n\t\t\t\t#define FxaaFloat float\n\t\t\t\t#define FxaaFloat2 float2\n\t\t\t\t#define FxaaFloat3 float3\n\t\t\t\t#define FxaaFloat4 float4\n\t\t\t\t#define FxaaHalf half\n\t\t\t\t#define FxaaHalf2 half2\n\t\t\t\t#define FxaaHalf3 half3\n\t\t\t\t#define FxaaHalf4 half4\n\t\t\t\t#define FxaaSat(x) saturate(x)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t#define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n\t\t\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_120 == 1)\n\t\t\t\t// Requires,\n\t\t\t\t//\t#version 120\n\t\t\t\t// And at least,\n\t\t\t\t//\t#extension GL_EXT_gpu_shader4 : enable\n\t\t\t\t//\t(or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n\t\t\t\t#define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n\t\t\t\t#if (FXAA_FAST_PIXEL_OFFSET == 1)\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n\t\t\t\t#else\n\t\t\t\t\t\t#define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n\t\t\t\t#endif\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_GLSL_130 == 1)\n\t\t\t\t// Requires "#version 130" or better\n\t\t\t\t#define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t// use #extension GL_ARB_gpu_shader5 : enable\n\t\t\t\t\t\t#define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n\t\t\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n\t\t\t\t\t\t#define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n\t\t\t\t\t\t#define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n\t\t\t\t#endif\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_3 == 1)\n\t\t\t\t#define FxaaInt2 float2\n\t\t\t\t#define FxaaTex sampler2D\n\t\t\t\t#define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))\n\t\t\t\t#define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_4 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#if (FXAA_HLSL_5 == 1)\n\t\t\t\t#define FxaaInt2 int2\n\t\t\t\tstruct FxaaTex { SamplerState smpl; Texture2D tex; };\n\t\t\t\t#define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)\n\t\t\t\t#define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)\n\t\t\t\t#define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)\n\t\t\t\t#define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)\n\t\t\t\t#define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)\n\t\t\t\t#define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)\n\t\t#endif\n\n\n\t\t/*============================================================================\n\t\t\t\t\t\t\t\t\t\t\t GREEN AS LUMA OPTION SUPPORT FUNCTION\n\t\t============================================================================*/\n\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n\t\t#else\n\t\t\t\tFxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n\t\t#endif\n\n\n\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t FXAA3 QUALITY - PC\n\n\t\t============================================================================*/\n\t\t#if (FXAA_PC == 1)\n\t\t/*--------------------------------------------------------------------------*/\n\t\tFxaaFloat4 FxaaPixelShader(\n\t\t\t\t//\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy} = center of pixel\n\t\t\t\tFxaaFloat2 pos,\n\t\t\t\t//\n\t\t\t\t// Used only for FXAA Console, and not used on the 360 version.\n\t\t\t\t// Use noperspective interpolation here (turn off perspective interpolation).\n\t\t\t\t// {xy_} = upper left of pixel\n\t\t\t\t// {_zw} = lower right of pixel\n\t\t\t\tFxaaFloat4 fxaaConsolePosPos,\n\t\t\t\t//\n\t\t\t\t// Input color texture.\n\t\t\t\t// {rgb_} = color in linear or perceptual color space\n\t\t\t\t// if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t//\t\t {__a} = luma in perceptual color space (not linear)\n\t\t\t\tFxaaTex tex,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for "tex".\n\t\t\t\t// For 360, same texture, just alias with a 2nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -1.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegOne,\n\t\t\t\t//\n\t\t\t\t// Only used on the optimized 360 version of FXAA Console.\n\t\t\t\t// For everything but 360, just use the same input here as for "tex".\n\t\t\t\t// For 360, same texture, just alias with a 3nd sampler.\n\t\t\t\t// This sampler needs to have an exponent bias of -2.\n\t\t\t\tFxaaTex fxaaConsole360TexExpBiasNegTwo,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x_} = 1.0/screenWidthInPixels\n\t\t\t\t// {_y} = 1.0/screenHeightInPixels\n\t\t\t\tFxaaFloat2 fxaaQualityRcpFrame,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// This effects sub-pixel AA quality and inversely sharpness.\n\t\t\t\t//\t Where N ranges between,\n\t\t\t\t//\t\t N = 0.50 (default)\n\t\t\t\t//\t\t N = 0.33 (sharper)\n\t\t\t\t// {x__} = -N/screenWidthInPixels\n\t\t\t\t// {_y_} = -N/screenHeightInPixels\n\t\t\t\t// {_z_} =\tN/screenWidthInPixels\n\t\t\t\t// {__w} =\tN/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Not used on 360, but used on PS3 and PC.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} = -2.0/screenWidthInPixels\n\t\t\t\t// {_y_} = -2.0/screenHeightInPixels\n\t\t\t\t// {_z_} =\t2.0/screenWidthInPixels\n\t\t\t\t// {__w} =\t2.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsoleRcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n\t\t\t\t// This must be from a constant/uniform.\n\t\t\t\t// {x__} =\t8.0/screenWidthInPixels\n\t\t\t\t// {_y_} =\t8.0/screenHeightInPixels\n\t\t\t\t// {_z_} = -4.0/screenWidthInPixels\n\t\t\t\t// {__w} = -4.0/screenHeightInPixels\n\t\t\t\tFxaaFloat4 fxaaConsole360RcpFrameOpt2,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_SUBPIX define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Choose the amount of sub-pixel aliasing removal.\n\t\t\t\t// This can effect sharpness.\n\t\t\t\t//\t 1.00 - upper limit (softer)\n\t\t\t\t//\t 0.75 - default amount of filtering\n\t\t\t\t//\t 0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n\t\t\t\t//\t 0.25 - almost off\n\t\t\t\t//\t 0.00 - completely off\n\t\t\t\tFxaaFloat fxaaQualitySubpix,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// The minimum amount of local contrast required to apply algorithm.\n\t\t\t\t//\t 0.333 - too little (faster)\n\t\t\t\t//\t 0.250 - low quality\n\t\t\t\t//\t 0.166 - default\n\t\t\t\t//\t 0.125 - high quality\n\t\t\t\t//\t 0.063 - overkill (slower)\n\t\t\t\tFxaaFloat fxaaQualityEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Quality.\n\t\t\t\t// This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t//\t 0.0833 - upper limit (default, the start of visible unfiltered edges)\n\t\t\t\t//\t 0.0625 - high quality (faster)\n\t\t\t\t//\t 0.0312 - visible limit (slower)\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaQualityEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only three safe values here: 2 and 4 and 8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// For all other platforms can be a non-power of two.\n\t\t\t\t//\t 8.0 is sharper (default!!!)\n\t\t\t\t//\t 4.0 is softer\n\t\t\t\t//\t 2.0 is really soft (good only for vector graphics inputs)\n\t\t\t\tFxaaFloat fxaaConsoleEdgeSharpness,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// This does not effect PS3, as this needs to be compiled in.\n\t\t\t\t//\t Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n\t\t\t\t//\t Due to the PS3 being ALU bound,\n\t\t\t\t//\t there are only two safe values here: 1/4 and 1/8.\n\t\t\t\t//\t These options use the shaders ability to a free *|/ by 2|4|8.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// Other platforms can use other values.\n\t\t\t\t//\t 0.125 leaves less aliasing, but is softer (default!!!)\n\t\t\t\t//\t 0.25 leaves more aliasing, and is sharper\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThreshold,\n\t\t\t\t//\n\t\t\t\t// Only used on FXAA Console.\n\t\t\t\t// This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n\t\t\t\t// It is here now to allow easier tuning.\n\t\t\t\t// Trims the algorithm from processing darks.\n\t\t\t\t// The console setting has a different mapping than the quality setting.\n\t\t\t\t// This only applies when FXAA_EARLY_EXIT is 1.\n\t\t\t\t// This does not apply to PS3,\n\t\t\t\t// PS3 was simplified to avoid more shader instructions.\n\t\t\t\t//\t 0.06 - faster but more aliasing in darks\n\t\t\t\t//\t 0.05 - default\n\t\t\t\t//\t 0.04 - slower and less aliasing in darks\n\t\t\t\t// Special notes when using FXAA_GREEN_AS_LUMA,\n\t\t\t\t//\t Likely want to set this to zero.\n\t\t\t\t//\t As colors that are mostly not-green\n\t\t\t\t//\t will appear very dark in the green channel!\n\t\t\t\t//\t Tune by looking at mostly non-green content,\n\t\t\t\t//\t then start at zero and increase until aliasing is a problem.\n\t\t\t\tFxaaFloat fxaaConsoleEdgeThresholdMin,\n\t\t\t\t//\n\t\t\t\t// Extra constants for 360 FXAA Console only.\n\t\t\t\t// Use zeros or anything else for other platforms.\n\t\t\t\t// These must be in physical constant registers and NOT immediates.\n\t\t\t\t// Immediates will result in compiler un-optimizing.\n\t\t\t\t// {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n\t\t\t\tFxaaFloat4 fxaaConsole360ConstDir\n\t\t) {\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posM;\n\t\t\t\tposM.x = pos.x;\n\t\t\t\tposM.y = pos.y;\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 1)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n\t\t\t\t\t\t\t\tFxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\t#define lumaM luma4A.w\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#define lumaE luma4A.z\n\t\t\t\t\t\t#define lumaS luma4A.x\n\t\t\t\t\t\t#define lumaSE luma4A.y\n\t\t\t\t\t\t#define lumaNW luma4B.w\n\t\t\t\t\t\t#define lumaN luma4B.z\n\t\t\t\t\t\t#define lumaW luma4B.x\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n\t\t\t\t\t\t#if (FXAA_GREEN_AS_LUMA == 0)\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.w\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\t#define lumaM rgbyM.y\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat maxSM = max(lumaS, lumaM);\n\t\t\t\tFxaaFloat minSM = min(lumaS, lumaM);\n\t\t\t\tFxaaFloat maxESM = max(lumaE, maxSM);\n\t\t\t\tFxaaFloat minESM = min(lumaE, minSM);\n\t\t\t\tFxaaFloat maxWN = max(lumaN, lumaW);\n\t\t\t\tFxaaFloat minWN = min(lumaN, lumaW);\n\t\t\t\tFxaaFloat rangeMax = max(maxWN, maxESM);\n\t\t\t\tFxaaFloat rangeMin = min(minWN, minESM);\n\t\t\t\tFxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n\t\t\t\tFxaaFloat range = rangeMax - rangeMin;\n\t\t\t\tFxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n\t\t\t\tFxaaBool earlyExit = range < rangeMaxClamped;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(earlyExit)\n\t\t\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\t\t\tFxaaDiscard;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t\treturn rgbyM;\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_GATHER4_ALPHA == 0)\n\t\t\t\t\t\t#if (FXAA_GLSL_100 == 1)\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tFxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\t#endif\n\t\t\t\t#else\n\t\t\t\t\t\tFxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n\t\t\t\t\t\tFxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNS = lumaN + lumaS;\n\t\t\t\tFxaaFloat lumaWE = lumaW + lumaE;\n\t\t\t\tFxaaFloat subpixRcpRange = 1.0/range;\n\t\t\t\tFxaaFloat subpixNSWE = lumaNS + lumaWE;\n\t\t\t\tFxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n\t\t\t\tFxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNESE = lumaNE + lumaSE;\n\t\t\t\tFxaaFloat lumaNWNE = lumaNW + lumaNE;\n\t\t\t\tFxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n\t\t\t\tFxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat lumaNWSW = lumaNW + lumaSW;\n\t\t\t\tFxaaFloat lumaSWSE = lumaSW + lumaSE;\n\t\t\t\tFxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n\t\t\t\tFxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n\t\t\t\tFxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n\t\t\t\tFxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n\t\t\t\tFxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n\t\t\t\tFxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n\t\t\t\tFxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n\t\t\t\tFxaaBool horzSpan = edgeHorz >= edgeVert;\n\t\t\t\tFxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!horzSpan) lumaN = lumaW;\n\t\t\t\tif(!horzSpan) lumaS = lumaE;\n\t\t\t\tif(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n\t\t\t\tFxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat gradientN = lumaN - lumaM;\n\t\t\t\tFxaaFloat gradientS = lumaS - lumaM;\n\t\t\t\tFxaaFloat lumaNN = lumaN + lumaM;\n\t\t\t\tFxaaFloat lumaSS = lumaS + lumaM;\n\t\t\t\tFxaaBool pairN = abs(gradientN) >= abs(gradientS);\n\t\t\t\tFxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n\t\t\t\tif(pairN) lengthSign = -lengthSign;\n\t\t\t\tFxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posB;\n\t\t\t\tposB.x = posM.x;\n\t\t\t\tposB.y = posM.y;\n\t\t\t\tFxaaFloat2 offNP;\n\t\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\t\t\t\tif(!horzSpan) posB.x += lengthSign * 0.5;\n\t\t\t\tif( horzSpan) posB.y += lengthSign * 0.5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat2 posN;\n\t\t\t\tposN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat2 posP;\n\t\t\t\tposP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n\t\t\t\tposP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n\t\t\t\tFxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n\t\t\t\tFxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n\t\t\t\tFxaaFloat subpixE = subpixC * subpixC;\n\t\t\t\tFxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(!pairN) lumaNN = lumaSS;\n\t\t\t\tFxaaFloat gradientScaled = gradient * 1.0/4.0;\n\t\t\t\tFxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n\t\t\t\tFxaaFloat subpixF = subpixD * subpixE;\n\t\t\t\tFxaaBool lumaMLTZero = lumaMM < 0.0;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tlumaEndN -= lumaNN * 0.5;\n\t\t\t\tlumaEndP -= lumaNN * 0.5;\n\t\t\t\tFxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\tFxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n\t\t\t\tFxaaBool doneNP = (!doneN) || (!doneP);\n\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 3)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 4)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 5)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 6)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 7)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t#if (FXAA_QUALITY_PS > 8)\n\t\t\t\tif(doneNP) {\n\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 9)\n\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 10)\n\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 11)\n\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t#if (FXAA_QUALITY_PS > 12)\n\t\t\t\t\t\t\t\t\t\t\t\tif(doneNP) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneN = abs(lumaEndN) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneP = abs(lumaEndP) >= gradientScaled;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdoneNP = (!doneN) || (!doneP);\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#endif\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\t}\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat dstN = posM.x - posN.x;\n\t\t\t\tFxaaFloat dstP = posP.x - posM.x;\n\t\t\t\tif(!horzSpan) dstN = posM.y - posN.y;\n\t\t\t\tif(!horzSpan) dstP = posP.y - posM.y;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLength = (dstP + dstN);\n\t\t\t\tFxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n\t\t\t\tFxaaFloat spanLengthRcp = 1.0/spanLength;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaBool directionN = dstN < dstP;\n\t\t\t\tFxaaFloat dst = min(dstN, dstP);\n\t\t\t\tFxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n\t\t\t\tFxaaFloat subpixG = subpixF * subpixF;\n\t\t\t\tFxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n\t\t\t\tFxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n\t\t/*--------------------------------------------------------------------------*/\n\t\t\t\tFxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n\t\t\t\tFxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n\t\t\t\tif(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n\t\t\t\tif( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n\t\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\t\t\treturn FxaaTexTop(tex, posM);\n\t\t\t\t#else\n\t\t\t\t\t\treturn FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n\t\t\t\t#endif\n\t\t}\n\t\t/*==========================================================================*/\n\t\t#endif\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\tvUv,\n\t\t\t\tvec4(0.0),\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\ttDiffuse,\n\t\t\t\tresolution,\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\tvec4(0.0),\n\t\t\t\t0.75,\n\t\t\t\t0.166,\n\t\t\t\t0.0833,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\t0.0,\n\t\t\t\tvec4(0.0)\n\t\t\t);\n\n\t\t\t// TODO avoid querying texture twice for same texel\n\t\t\tgl_FragColor.a = texture2D(tDiffuse, vUv).a;\n\t\t}'}},282:function(t,e){var n="undefined"!=typeof self?self:this,r=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),l="FormData"in t,c="ArrayBuffer"in t;if(c)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(t){return t&&h.indexOf(Object.prototype.toString.call(t))>-1};function f(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function m(t){return"string"!=typeof t&&(t=String(t)),t}function v(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function y(t){this.map={},t instanceof y?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(header){this.append(header[0],header[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function _(body){if(body.bodyUsed)return Promise.reject(new TypeError("Already read"));body.bodyUsed=!0}function x(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function w(t){var e=new FileReader,n=x(e);return e.readAsArrayBuffer(t),n}function S(t){if(t.slice)return t.slice(0);var view=new Uint8Array(t.byteLength);return view.set(new Uint8Array(t)),view.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(body){var t;this._bodyInit=body,body?"string"==typeof body?this._bodyText=body:o&&Blob.prototype.isPrototypeOf(body)?this._bodyBlob=body:l&&FormData.prototype.isPrototypeOf(body)?this._bodyFormData=body:n&&URLSearchParams.prototype.isPrototypeOf(body)?this._bodyText=body.toString():c&&o&&((t=body)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=S(body.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c&&(ArrayBuffer.prototype.isPrototypeOf(body)||d(body))?this._bodyArrayBuffer=S(body):this._bodyText=body=Object.prototype.toString.call(body):this._bodyText="",this.headers.get("content-type")||("string"==typeof body?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(body)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=_(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?_(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(w)}),this.text=function(){var t,e,n,r=_(this);if(r)return r;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=x(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var view=new Uint8Array(t),e=new Array(view.length),i=0;i<view.length;i++)e[i]=String.fromCharCode(view[i]);return e.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l&&(this.formData=function(){return this.text().then(A)}),this.json=function(){return this.text().then(JSON.parse)},this}y.prototype.append=function(t,e){t=f(t),e=m(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},y.prototype.delete=function(t){delete this.map[f(t)]},y.prototype.get=function(t){return t=f(t),this.has(t)?this.map[t]:null},y.prototype.has=function(t){return this.map.hasOwnProperty(f(t))},y.prototype.set=function(t,e){this.map[f(t)]=m(e)},y.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},y.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),v(t)},y.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),v(t)},y.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),v(t)},r&&(y.prototype[Symbol.iterator]=y.prototype.entries);var M=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function T(input,t){var e,n,body=(t=t||{}).body;if(input instanceof T){if(input.bodyUsed)throw new TypeError("Already read");this.url=input.url,this.credentials=input.credentials,t.headers||(this.headers=new y(input.headers)),this.method=input.method,this.mode=input.mode,this.signal=input.signal,body||null==input._bodyInit||(body=input._bodyInit,input.bodyUsed=!0)}else this.url=String(input);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new y(t.headers)),this.method=(e=t.method||this.method||"GET",n=e.toUpperCase(),M.indexOf(n)>-1?n:e),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&body)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(body)}function A(body){var form=new FormData;return body.trim().split("&").forEach((function(t){if(t){var e=t.split("="),n=e.shift().replace(/\+/g," "),r=e.join("=").replace(/\+/g," ");form.append(decodeURIComponent(n),decodeURIComponent(r))}})),form}function D(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new y(e.headers),this.url=e.url||"",this._initBody(t)}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})},E.call(T.prototype),E.call(D.prototype),D.prototype.clone=function(){return new D(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},D.error=function(){var t=new D(null,{status:0,statusText:""});return t.type="error",t};var P=[301,302,303,307,308];D.redirect=function(t,e){if(-1===P.indexOf(e))throw new RangeError("Invalid status code");return new D(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function C(input,t){return new Promise((function(n,r){var l=new T(input,t);if(l.signal&&l.signal.aborted)return r(new e.DOMException("Aborted","AbortError"));var c=new XMLHttpRequest;function h(){c.abort()}c.onload=function(){var t,e,r={status:c.status,statusText:c.statusText,headers:(t=c.getAllResponseHeaders()||"",e=new y,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(line){var t=line.split(":"),n=t.shift().trim();if(n){var r=t.join(":").trim();e.append(n,r)}})),e)};r.url="responseURL"in c?c.responseURL:r.headers.get("X-Request-URL");var body="response"in c?c.response:c.responseText;n(new D(body,r))},c.onerror=function(){r(new TypeError("Network request failed"))},c.ontimeout=function(){r(new TypeError("Network request failed"))},c.onabort=function(){r(new e.DOMException("Aborted","AbortError"))},c.open(l.method,l.url,!0),"include"===l.credentials?c.withCredentials=!0:"omit"===l.credentials&&(c.withCredentials=!1),"responseType"in c&&o&&(c.responseType="blob"),l.headers.forEach((function(t,e){c.setRequestHeader(e,t)})),l.signal&&(l.signal.addEventListener("abort",h),c.onreadystatechange=function(){4===c.readyState&&l.signal.removeEventListener("abort",h)}),c.send(void 0===l._bodyInit?null:l._bodyInit)}))}C.polyfill=!0,t.fetch||(t.fetch=C,t.Headers=y,t.Request=T,t.Response=D),e.Headers=y,e.Request=T,e.Response=D,e.fetch=C,Object.defineProperty(e,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e},283:function(t){t.exports=JSON.parse('{"title":"","meta":[{"hid":"charset","charset":"utf-8"},{"hid":"viewport","name":"viewport","content":"width=device-width, initial-scale=1"},{"hid":"mobile-web-app-capable","name":"mobile-web-app-capable","content":"yes"},{"hid":"og:type","name":"og:type","property":"og:type","content":"website"}],"link":[{"hid":"shortcut-icon","rel":"shortcut icon","href":"/_nuxt/icons/icon_64x64.7c5bcb.png"},{"hid":"apple-touch-icon","rel":"apple-touch-icon","href":"/_nuxt/icons/icon_512x512.7c5bcb.png","sizes":"512x512"},{"rel":"manifest","href":"/_nuxt/manifest.616c62eb.json","hid":"manifest","crossorigin":"use-credentials"}],"htmlAttrs":{"lang":"en"}}')},284:function(t,e,n){var r;t.exports=(r=function(){function t(a){return n.appendChild(a.dom),a}function u(a){for(var t=0;t<n.children.length;t++)n.children[t].style.display=t===a?"block":"none";e=a}var e=0,n=document.createElement("div");n.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",n.addEventListener("click",(function(a){a.preventDefault(),u(++e%n.children.length)}),!1);var o=(performance||Date).now(),g=o,a=0,l=t(new r.Panel("FPS","#0ff","#002")),c=t(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var h=t(new r.Panel("MB","#f08","#201"));return u(0),{REVISION:16,dom:n,addPanel:t,showPanel:u,begin:function(){o=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(c.update(t-o,200),t>g+1e3&&(l.update(1e3*a/(t-g),100),g=t,a=0,h)){var e=performance.memory;h.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){o=this.end()},domElement:n,setMode:u}},r.Panel=function(t,e,n){var r=1/0,o=0,g=Math.round,a=g(window.devicePixelRatio||1),l=80*a,c=48*a,h=3*a,d=2*a,f=3*a,m=15*a,v=74*a,p=30*a,q=document.createElement("canvas");q.width=l,q.height=c,q.style.cssText="width:80px;height:48px";var b=q.getContext("2d");return b.font="bold "+9*a+"px Helvetica,Arial,sans-serif",b.textBaseline="top",b.fillStyle=n,b.fillRect(0,0,l,c),b.fillStyle=e,b.fillText(t,h,d),b.fillRect(f,m,v,p),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(f,m,v,p),{dom:q,update:function(c,y){r=Math.min(r,c),o=Math.max(o,c),b.fillStyle=n,b.globalAlpha=1,b.fillRect(0,0,l,m),b.fillStyle=e,b.fillText(g(c)+" "+t+" ("+g(r)+"-"+g(o)+")",h,d),b.drawImage(q,f+a,m,v-a,p,f,m,v-a,p),b.fillRect(f+v-a,m,a,p),b.fillStyle=n,b.globalAlpha=.9,b.fillRect(f+v-a,m,a,g((1-c/y)*p))}}},r)},285:function(t,e,n){!function(t){"use strict";class e{constructor(text){const[t,e]=text.split("-"),n=t.split(".");this.major=parseInt(n[0],10),this.minor=parseInt(n[1],10),this.patch=parseInt(n[2],10),this.prerelease=null!=e?e:null}toString(){const t=[this.major,this.minor,this.patch].join(".");return null!==this.prerelease?[t,this.prerelease].join("-"):t}}class n{constructor(t){this.controller_=t}get disabled(){return this.controller_.viewProps.get("disabled")}set disabled(t){this.controller_.viewProps.set("disabled",t)}get hidden(){return this.controller_.viewProps.get("hidden")}set hidden(t){this.controller_.viewProps.set("hidden",t)}dispose(){this.controller_.viewProps.set("disposed",!0)}}class r{constructor(t){this.target=t}}class o extends r{constructor(t,e,n,r){super(t),this.value=e,this.presetKey=n,this.last=null==r||r}}class l extends r{constructor(t,e,n){super(t),this.value=e,this.presetKey=n}}class c extends r{constructor(t,e){super(t),this.expanded=e}}function h(t){return t}function d(t){return null==t}function f(t,e){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}const m={alreadydisposed:()=>"View has been already disposed",invalidparams:t=>`Invalid parameters for '${t.name}'`,nomatchingcontroller:t=>`No matching controller for '${t.key}'`,nomatchingview:t=>`No matching view for '${JSON.stringify(t.params)}'`,notbindable:()=>"Value is not bindable",propertynotfound:t=>`Property '${t.name}' not found`,shouldneverhappen:()=>"This error should never happen"};class v{constructor(t){var e;this.message=null!==(e=m[t.type](h(t.context)))&&void 0!==e?e:"Unexpected error",this.name=this.constructor.name,this.stack=new Error(this.message).stack,this.type=t.type}static alreadyDisposed(){return new v({type:"alreadydisposed"})}static notBindable(){return new v({type:"notbindable"})}static propertyNotFound(t){return new v({type:"propertynotfound",context:{name:t}})}static shouldNeverHappen(){return new v({type:"shouldneverhappen"})}}class y{constructor(t,e,n){this.obj_=t,this.key_=e,this.presetKey_=null!=n?n:e}static isBindable(t){return null!==t&&"object"==typeof t}get key(){return this.key_}get presetKey(){return this.presetKey_}read(){return this.obj_[this.key_]}write(t){this.obj_[this.key_]=t}writeProperty(t,e){const n=this.read();if(!y.isBindable(n))throw v.notBindable();if(!(t in n))throw v.propertyNotFound(t);n[t]=e}}class _ extends n{get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}get title(){var t;return null!==(t=this.controller_.valueController.props.get("title"))&&void 0!==t?t:""}set title(title){this.controller_.valueController.props.set("title",title)}on(t,e){const n=e.bind(this);return this.controller_.valueController.emitter.on(t,(()=>{n(new r(this))})),this}}class x{constructor(){this.observers_={}}on(t,e){let n=this.observers_[t];return n||(n=this.observers_[t]=[]),n.push({handler:e}),this}off(t,e){const n=this.observers_[t];return n&&(this.observers_[t]=n.filter((t=>t.handler!==e))),this}emit(t,e){const n=this.observers_[t];n&&n.forEach((t=>{t.handler(e)}))}}const w="tp";function S(t){return(e,n)=>[w,"-",t,"v",e?`_${e}`:"",n?`-${n}`:""].join("")}function E(h1,h2){return input=>h2(h1(input))}function M(t){return t.rawValue}function T(t,e){t.emitter.on("change",E(M,e)),e(t.rawValue)}function A(t,e,n){T(t.value(e),n)}function D(t,e,n){n?t.classList.add(e):t.classList.remove(e)}function P(t,e){return n=>{D(t,e,n)}}function C(t,e){T(t,(text=>{e.textContent=null!=text?text:""}))}const k=S("btn");class O{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(k()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("button");n.classList.add(k("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(k("t")),C(e.props.value("title"),r),this.buttonElement.appendChild(r)}}class L{constructor(t,e){this.emitter=new x,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new O(t,{props:this.props,viewProps:this.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class F{constructor(t,e){var n;this.constraint_=null==e?void 0:e.constraint,this.equals_=null!==(n=null==e?void 0:e.equals)&&void 0!==n?n:(t,e)=>t===e,this.emitter=new x,this.rawValue_=t}get constraint(){return this.constraint_}get rawValue(){return this.rawValue_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0},r=this.constraint_?this.constraint_.constrain(t):t;(!this.equals_(this.rawValue_,r)||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.rawValue_=r,this.emitter.emit("change",{options:n,rawValue:r,sender:this}))}}class R{constructor(t){this.emitter=new x,this.value_=t}get rawValue(){return this.value_}set rawValue(t){this.setRawValue(t,{forceEmit:!1,last:!0})}setRawValue(t,e){const n=null!=e?e:{forceEmit:!1,last:!0};(this.value_!==t||n.forceEmit)&&(this.emitter.emit("beforechange",{sender:this}),this.value_=t,this.emitter.emit("change",{options:n,rawValue:this.value_,sender:this}))}}function I(t,e){const n=null==e?void 0:e.constraint,r=null==e?void 0:e.equals;return n||r?new F(t,e):new R(t)}class N{constructor(t){this.emitter=new x,this.valMap_=t;for(const t in this.valMap_)this.valMap_[t].emitter.on("change",(()=>{this.emitter.emit("change",{key:t,sender:this})}))}static createCore(t){return Object.keys(t).reduce(((e,n)=>Object.assign(e,{[n]:I(t[n])})),{})}static fromObject(t){const e=this.createCore(t);return new N(e)}get(t){return this.valMap_[t].rawValue}set(t,e){this.valMap_[t].rawValue=e}value(t){return this.valMap_[t]}}function j(t,e){return h(Object.keys(e).reduce(((n,r)=>{if(void 0===n)return;const o=(0,e[r])(t[r]);return o.succeeded?Object.assign(Object.assign({},n),{[r]:o.value}):void 0}),{}))}function B(t,e){return t.reduce(((t,n)=>{if(void 0===t)return;const r=e(n);return r.succeeded&&void 0!==r.value?[...t,r.value]:void 0}),[])}function U(t){return null!==t&&"object"==typeof t}function z(t){return e=>n=>{if(!e&&void 0===n)return{succeeded:!1,value:void 0};if(e&&void 0===n)return{succeeded:!0,value:void 0};const r=t(n);return void 0!==r?{succeeded:!0,value:r}:{succeeded:!1,value:void 0}}}function V(t){return{custom:e=>z(e)(t),boolean:z((t=>"boolean"==typeof t?t:void 0))(t),number:z((t=>"number"==typeof t?t:void 0))(t),string:z((t=>"string"==typeof t?t:void 0))(t),function:z((t=>"function"==typeof t?t:void 0))(t),constant:e=>z((t=>t===e?e:void 0))(t),raw:z((t=>t))(t),object:e=>z((t=>{if(U(t))return j(t,e)}))(t),array:e=>z((t=>{if(Array.isArray(t))return B(t,e)}))(t)}}const H={optional:V(!0),required:V(!1)};function G(t,e){const n=H.required.object(e)(t);return n.succeeded?n.value:void 0}function W(t){return t&&t.parentElement&&t.parentElement.removeChild(t),null}function X(){return["veryfirst","first","last","verylast"]}const Y=S(""),Q={veryfirst:"vfst",first:"fst",last:"lst",verylast:"vlst"};class ${constructor(t){this.parent_=null,this.blade=t.blade,this.view=t.view,this.viewProps=t.viewProps;const e=this.view.element;this.blade.value("positions").emitter.on("change",(()=>{X().forEach((t=>{e.classList.remove(Y(void 0,Q[t]))})),this.blade.get("positions").forEach((t=>{e.classList.add(Y(void 0,Q[t]))}))})),this.viewProps.handleDispose((()=>{W(e)}))}get parent(){return this.parent_}}const K="http://www.w3.org/2000/svg";function J(element){element.offsetHeight}function Z(element,t){const e=element.style.transition;element.style.transition="none",t(),element.style.transition=e}function tt(t){return void 0!==t.ontouchstart}function et(){return new Function("return this")()}function nt(){return h(et()).document}function it(t){const e=t.ownerDocument.defaultView;return e&&"document"in e?t.getContext("2d"):null}const at={check:'<path d="M2 8l4 4l8 -8"/>',dropdown:'<path d="M5 7h6l-3 3 z"/>',p2dpad:'<path d="M8 4v8"/><path d="M4 8h8"/><circle cx="12" cy="12" r="1.2"/>'};function ot(t,e){const n=t.createElementNS(K,"svg");return n.innerHTML=at[e],n}function st(t,element,e){t.insertBefore(element,t.children[e])}function ut(element){element.parentElement&&element.parentElement.removeChild(element)}function lt(element){for(;element.children.length>0;)element.removeChild(element.children[0])}function ct(element){for(;element.childNodes.length>0;)element.removeChild(element.childNodes[0])}function ht(t){return t.relatedTarget?h(t.relatedTarget):"explicitOriginalTarget"in t?t.explicitOriginalTarget:null}const pt=S("lbl");function ft(t,label){const e=t.createDocumentFragment();return label.split("\n").map((line=>t.createTextNode(line))).forEach(((n,r)=>{r>0&&e.appendChild(t.createElement("br")),e.appendChild(n)})),e}class mt{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pt()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(pt("l")),A(e.props,"label",(e=>{d(e)?this.element.classList.add(pt(void 0,"nol")):(this.element.classList.remove(pt(void 0,"nol")),ct(n),n.appendChild(ft(t,e)))})),this.element.appendChild(n),this.labelElement=n;const r=t.createElement("div");r.classList.add(pt("v")),this.element.appendChild(r),this.valueElement=r}}class vt extends ${constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{view:new mt(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}const gt={id:"button",type:"blade",accept(t){const p=H,e=G(t,{title:p.required.string,view:p.required.constant("button"),label:p.optional.string});return e?{params:e}:null},controller:t=>new vt(t.document,{blade:t.blade,props:N.fromObject({label:t.params.label}),valueController:new L(t.document,{props:N.fromObject({title:t.params.title}),viewProps:t.viewProps})}),api:t=>t.controller instanceof vt&&t.controller.valueController instanceof L?new _(t.controller):null};class yt extends ${constructor(t){super(t),this.value=t.value}}function _t(){return new N({positions:I([],{equals:f})})}class bt extends N{constructor(t){super(t)}static create(t){const e={completed:!0,expanded:t,expandedHeight:null,shouldFixHeight:!1,temporaryExpanded:null},n=N.createCore(e);return new bt(n)}get styleExpanded(){var t;return null!==(t=this.get("temporaryExpanded"))&&void 0!==t?t:this.get("expanded")}get styleHeight(){if(!this.styleExpanded)return"0";const t=this.get("expandedHeight");return this.get("shouldFixHeight")&&!d(t)?`${t}px`:"auto"}bindExpandedClass(t,e){A(this,"expanded",(()=>{this.styleExpanded?t.classList.add(e):t.classList.remove(e)}))}}function xt(t,e){let n=0;return Z(e,(()=>{t.set("expandedHeight",null),t.set("temporaryExpanded",!0),J(e),n=e.clientHeight,t.set("temporaryExpanded",null),J(e)})),n}function wt(t,e){e.style.height=t.styleHeight}function St(t,e){t.value("expanded").emitter.on("beforechange",(()=>{t.set("completed",!1),d(t.get("expandedHeight"))&&t.set("expandedHeight",xt(t,e)),t.set("shouldFixHeight",!0),J(e)})),t.emitter.on("change",(()=>{wt(t,e)})),wt(t,e),e.addEventListener("transitionend",(e=>{"height"===e.propertyName&&(t.set("shouldFixHeight",!1),t.set("expandedHeight",null),t.set("completed",!0))}))}class Et extends n{constructor(t,e){super(t),this.rackApi_=e}}function Mt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"button"}))}function Tt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"folder"}))}function At(t,e){const n=e||{};return t.addBlade(Object.assign(Object.assign({},n),{view:"separator"}))}function Dt(t,e){return t.addBlade(Object.assign(Object.assign({},e),{view:"tab"}))}class Pt{constructor(t){this.emitter=new x,this.items_=[],this.cache_=new Set,this.onSubListAdd_=this.onSubListAdd_.bind(this),this.onSubListRemove_=this.onSubListRemove_.bind(this),this.extract_=t}get items(){return this.items_}allItems(){return Array.from(this.cache_)}find(t){for(const e of this.allItems())if(t(e))return e;return null}includes(t){return this.cache_.has(t)}add(t,e){if(this.includes(t))throw v.shouldNeverHappen();const n=void 0!==e?e:this.items_.length;this.items_.splice(n,0,t),this.cache_.add(t);const r=this.extract_(t);r&&(r.emitter.on("add",this.onSubListAdd_),r.emitter.on("remove",this.onSubListRemove_),r.allItems().forEach((t=>{this.cache_.add(t)}))),this.emitter.emit("add",{index:n,item:t,root:this,target:this})}remove(t){const e=this.items_.indexOf(t);if(e<0)return;this.items_.splice(e,1),this.cache_.delete(t);const n=this.extract_(t);n&&(n.emitter.off("add",this.onSubListAdd_),n.emitter.off("remove",this.onSubListRemove_)),this.emitter.emit("remove",{index:e,item:t,root:this,target:this})}onSubListAdd_(t){this.cache_.add(t.item),this.emitter.emit("add",{index:t.index,item:t.item,root:this,target:t.target})}onSubListRemove_(t){this.cache_.delete(t.item),this.emitter.emit("remove",{index:t.index,item:t.item,root:this,target:t.target})}}class Ct extends n{constructor(t){super(t),this.onBindingChange_=this.onBindingChange_.bind(this),this.emitter_=new x,this.controller_.binding.emitter.on("change",this.onBindingChange_)}get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingChange_(t){const e=t.sender.target.read();this.emitter_.emit("change",{event:new o(this,h(e),this.controller_.binding.target.presetKey,t.options.last)})}}class kt extends vt{constructor(t,e){super(t,e),this.binding=e.binding}}class Ot extends n{constructor(t){super(t),this.onBindingUpdate_=this.onBindingUpdate_.bind(this),this.emitter_=new x,this.controller_.binding.emitter.on("update",this.onBindingUpdate_)}get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}refresh(){this.controller_.binding.read()}onBindingUpdate_(t){const e=t.sender.target.read();this.emitter_.emit("update",{event:new l(this,h(e),this.controller_.binding.target.presetKey)})}}class Lt extends vt{constructor(t,e){super(t,e),this.binding=e.binding,this.viewProps.bindDisabled(this.binding.ticker),this.viewProps.handleDispose((()=>{this.binding.dispose()}))}}function Ft(t){return t instanceof Nt?t.apiSet_:t instanceof Et?t.rackApi_.apiSet_:null}function Rt(t,e){const n=t.find((t=>t.controller_===e));if(!n)throw v.shouldNeverHappen();return n}function It(t,e,n){if(!y.isBindable(t))throw v.notBindable();return new y(t,e,n)}class Nt extends n{constructor(t,e){super(t),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this),this.onRackInputChange_=this.onRackInputChange_.bind(this),this.onRackMonitorUpdate_=this.onRackMonitorUpdate_.bind(this),this.emitter_=new x,this.apiSet_=new Pt(Ft),this.pool_=e;const n=this.controller_.rack;n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),n.emitter.on("inputchange",this.onRackInputChange_),n.emitter.on("monitorupdate",this.onRackMonitorUpdate_),n.children.forEach((t=>{this.setUpApi_(t)}))}get children(){return this.controller_.rack.children.map((t=>Rt(this.apiSet_,t)))}addInput(object,t,e){const n=e||{},r=this.controller_.view.element.ownerDocument,o=this.pool_.createInput(r,It(object,t,n.presetKey),n),l=new Ct(o);return this.add(l,n.index)}addMonitor(object,t,e){const n=e||{},r=this.controller_.view.element.ownerDocument,o=this.pool_.createMonitor(r,It(object,t),n),l=new Ot(o);return h(this.add(l,n.index))}addFolder(t){return Tt(this,t)}addButton(t){return Mt(this,t)}addSeparator(t){return At(this,t)}addTab(t){return Dt(this,t)}add(t,e){this.controller_.rack.add(t.controller_,e);const n=this.apiSet_.find((a=>a.controller_===t.controller_));return n&&this.apiSet_.remove(n),this.apiSet_.add(t),t}remove(t){this.controller_.rack.remove(t.controller_)}addBlade(t){const e=this.controller_.view.element.ownerDocument,n=this.pool_.createBlade(e,t),r=this.pool_.createBladeApi(n);return this.add(r,t.index)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpApi_(t){this.apiSet_.find((e=>e.controller_===t))||this.apiSet_.add(this.pool_.createBladeApi(t))}onRackAdd_(t){this.setUpApi_(t.bladeController)}onRackRemove_(t){if(t.isRoot){const e=Rt(this.apiSet_,t.bladeController);this.apiSet_.remove(e)}}onRackInputChange_(t){const e=t.bladeController;if(e instanceof kt){const n=Rt(this.apiSet_,e),r=e.binding;this.emitter_.emit("change",{event:new o(n,h(r.target.read()),r.target.presetKey,t.options.last)})}else if(e instanceof yt){const n=Rt(this.apiSet_,e);this.emitter_.emit("change",{event:new o(n,e.value.rawValue,void 0,t.options.last)})}}onRackMonitorUpdate_(t){if(!(t.bladeController instanceof Lt))throw v.shouldNeverHappen();const e=Rt(this.apiSet_,t.bladeController),n=t.bladeController.binding;this.emitter_.emit("update",{event:new l(e,h(n.target.read()),n.target.presetKey)})}}class jt extends Et{constructor(t,e){super(t,new Nt(t.rackController,e)),this.emitter_=new x,this.controller_.foldable.value("expanded").emitter.on("change",(t=>{this.emitter_.emit("fold",{event:new c(this,t.sender.rawValue)})})),this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})}))}get expanded(){return this.controller_.foldable.get("expanded")}set expanded(t){this.controller_.foldable.set("expanded",t)}get title(){return this.controller_.props.get("title")}set title(title){this.controller_.props.set("title",title)}get children(){return this.rackApi_.children}addInput(object,t,e){return this.rackApi_.addInput(object,t,e)}addMonitor(object,t,e){return this.rackApi_.addMonitor(object,t,e)}addFolder(t){return this.rackApi_.addFolder(t)}addButton(t){return this.rackApi_.addButton(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){return this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addBlade(t){return this.rackApi_.addBlade(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class Bt extends ${constructor(t){super({blade:t.blade,view:t.view,viewProps:t.rackController.viewProps}),this.rackController=t.rackController}}class Ut{constructor(t,e){const n=S(e.viewName);this.element=t.createElement("div"),this.element.classList.add(n()),e.viewProps.bindClassModifiers(this.element)}}function zt(t,b){for(let i=0;i<t.length;i++){const e=t[i];if(e instanceof kt&&e.binding===b)return e}return null}function Vt(t,b){for(let i=0;i<t.length;i++){const e=t[i];if(e instanceof Lt&&e.binding===b)return e}return null}function Ht(t,e){for(let i=0;i<t.length;i++){const n=t[i];if(n instanceof yt&&n.value===e)return n}return null}function Gt(t){return t instanceof Yt?t.rack:t instanceof Bt?t.rackController.rack:null}function Wt(t){const e=Gt(t);return e?e.bcSet_:null}class Xt{constructor(t){var e;this.onBladePositionsChange_=this.onBladePositionsChange_.bind(this),this.onSetAdd_=this.onSetAdd_.bind(this),this.onSetRemove_=this.onSetRemove_.bind(this),this.onChildDispose_=this.onChildDispose_.bind(this),this.onChildPositionsChange_=this.onChildPositionsChange_.bind(this),this.onChildInputChange_=this.onChildInputChange_.bind(this),this.onChildMonitorUpdate_=this.onChildMonitorUpdate_.bind(this),this.onChildValueChange_=this.onChildValueChange_.bind(this),this.onChildViewPropsChange_=this.onChildViewPropsChange_.bind(this),this.onDescendantLayout_=this.onDescendantLayout_.bind(this),this.onDescendantInputChange_=this.onDescendantInputChange_.bind(this),this.onDescendantMonitorUpdate_=this.onDescendantMonitorUpdate_.bind(this),this.emitter=new x,this.blade_=null!=t?t:null,null===(e=this.blade_)||void 0===e||e.value("positions").emitter.on("change",this.onBladePositionsChange_),this.bcSet_=new Pt(Wt),this.bcSet_.emitter.on("add",this.onSetAdd_),this.bcSet_.emitter.on("remove",this.onSetRemove_)}get children(){return this.bcSet_.items}add(t,e){t.parent&&t.parent.remove(t),t.parent_=this,this.bcSet_.add(t,e)}remove(t){t.parent_=null,this.bcSet_.remove(t)}find(t){return h(this.bcSet_.allItems().filter((e=>e instanceof t)))}onSetAdd_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("add",{bladeController:t.item,index:t.index,isRoot:e,sender:this}),!e)return;const n=t.item;if(n.viewProps.emitter.on("change",this.onChildViewPropsChange_),n.blade.value("positions").emitter.on("change",this.onChildPositionsChange_),n.viewProps.handleDispose(this.onChildDispose_),n instanceof kt)n.binding.emitter.on("change",this.onChildInputChange_);else if(n instanceof Lt)n.binding.emitter.on("update",this.onChildMonitorUpdate_);else if(n instanceof yt)n.value.emitter.on("change",this.onChildValueChange_);else{const t=Gt(n);if(t){const e=t.emitter;e.on("layout",this.onDescendantLayout_),e.on("inputchange",this.onDescendantInputChange_),e.on("monitorupdate",this.onDescendantMonitorUpdate_)}}}onSetRemove_(t){this.updatePositions_();const e=t.target===t.root;if(this.emitter.emit("remove",{bladeController:t.item,isRoot:e,sender:this}),!e)return;const n=t.item;if(n instanceof kt)n.binding.emitter.off("change",this.onChildInputChange_);else if(n instanceof Lt)n.binding.emitter.off("update",this.onChildMonitorUpdate_);else if(n instanceof yt)n.value.emitter.off("change",this.onChildValueChange_);else{const t=Gt(n);if(t){const e=t.emitter;e.off("layout",this.onDescendantLayout_),e.off("inputchange",this.onDescendantInputChange_),e.off("monitorupdate",this.onDescendantMonitorUpdate_)}}}updatePositions_(){const t=this.bcSet_.items.filter((t=>!t.viewProps.get("hidden"))),e=t[0],n=t[t.length-1];this.bcSet_.items.forEach((t=>{const r=[];t===e&&(r.push("first"),this.blade_&&!this.blade_.get("positions").includes("veryfirst")||r.push("veryfirst")),t===n&&(r.push("last"),this.blade_&&!this.blade_.get("positions").includes("verylast")||r.push("verylast")),t.blade.set("positions",r)}))}onChildPositionsChange_(){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildViewPropsChange_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onChildDispose_(){this.bcSet_.items.filter((t=>t.viewProps.get("disposed"))).forEach((t=>{this.bcSet_.remove(t)}))}onChildInputChange_(t){const e=zt(this.find(kt),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onChildMonitorUpdate_(t){const e=Vt(this.find(Lt),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("monitorupdate",{bladeController:e,sender:this})}onChildValueChange_(t){const e=Ht(this.find(yt),t.sender);if(!e)throw v.shouldNeverHappen();this.emitter.emit("inputchange",{bladeController:e,options:t.options,sender:this})}onDescendantLayout_(t){this.updatePositions_(),this.emitter.emit("layout",{sender:this})}onDescendantInputChange_(t){this.emitter.emit("inputchange",{bladeController:t.bladeController,options:t.options,sender:this})}onDescendantMonitorUpdate_(t){this.emitter.emit("monitorupdate",{bladeController:t.bladeController,sender:this})}onBladePositionsChange_(){this.updatePositions_()}}class Yt extends ${constructor(t,e){super(Object.assign(Object.assign({},e),{view:new Ut(t,{viewName:"brk",viewProps:e.viewProps})})),this.onRackAdd_=this.onRackAdd_.bind(this),this.onRackRemove_=this.onRackRemove_.bind(this);const n=new Xt(e.root?void 0:e.blade);n.emitter.on("add",this.onRackAdd_),n.emitter.on("remove",this.onRackRemove_),this.rack=n,this.viewProps.handleDispose((()=>{for(let i=this.rack.children.length-1;i>=0;i--)this.rack.children[i].viewProps.set("disposed",!0)}))}onRackAdd_(t){t.isRoot&&st(this.view.element,t.bladeController.view.element,t.index)}onRackRemove_(t){t.isRoot&&ut(t.bladeController.view.element)}}const qt=S("cnt");class Qt{constructor(t,e){this.className_=S(e.viewName||"fld"),this.element=t.createElement("div"),this.element.classList.add(this.className_(),qt()),e.viewProps.bindClassModifiers(this.element),this.foldable_=e.foldable,this.foldable_.bindExpandedClass(this.element,this.className_(void 0,"expanded")),A(this.foldable_,"completed",P(this.element,this.className_(void 0,"cpl")));const n=t.createElement("button");n.classList.add(this.className_("b")),A(e.props,"title",(title=>{d(title)?this.element.classList.add(this.className_(void 0,"not")):this.element.classList.remove(this.className_(void 0,"not"))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(this.className_("t")),C(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r;const o=t.createElement("div");o.classList.add(this.className_("m")),this.buttonElement.appendChild(o);const l=e.containerElement;l.classList.add(this.className_("c")),this.element.appendChild(l),this.containerElement=l}}class $t extends Bt{constructor(t,e){var n;const r=bt.create(null===(n=e.expanded)||void 0===n||n),o=new Yt(t,{blade:e.blade,root:e.root,viewProps:e.viewProps});super(Object.assign(Object.assign({},e),{rackController:o,view:new Qt(t,{containerElement:o.view.element,foldable:r,props:e.props,viewName:e.root?"rot":void 0,viewProps:e.viewProps})})),this.onTitleClick_=this.onTitleClick_.bind(this),this.props=e.props,this.foldable=r,St(this.foldable,this.view.containerElement),this.view.buttonElement.addEventListener("click",this.onTitleClick_)}get document(){return this.view.element.ownerDocument}onTitleClick_(){this.foldable.set("expanded",!this.foldable.get("expanded"))}}const Kt={id:"folder",type:"blade",accept(t){const p=H,e=G(t,{title:p.required.string,view:p.required.constant("folder"),expanded:p.optional.boolean});return e?{params:e}:null},controller:t=>new $t(t.document,{blade:t.blade,expanded:t.params.expanded,props:N.fromObject({title:t.params.title}),viewProps:t.viewProps}),api:t=>t.controller instanceof $t?new jt(t.controller,t.pool):null};class Jt extends yt{constructor(t,e){const n=e.valueController.viewProps;super(Object.assign(Object.assign({},e),{value:e.valueController.value,view:new mt(t,{props:e.props,viewProps:n}),viewProps:n})),this.props=e.props,this.valueController=e.valueController,this.view.valueElement.appendChild(this.valueController.view.element)}}class Zt extends n{}const te=S("spr");class ee{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(te()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("hr");n.classList.add(te("r")),this.element.appendChild(n)}}class ne extends ${constructor(t,e){super(Object.assign(Object.assign({},e),{view:new ee(t,{viewProps:e.viewProps})}))}}const re={id:"separator",type:"blade",accept(t){const e=G(t,{view:H.required.constant("separator")});return e?{params:e}:null},controller:t=>new ne(t.document,{blade:t.blade,viewProps:t.viewProps}),api:t=>t.controller instanceof ne?new Zt(t.controller):null},ie=S("");function ae(t,e){return P(t,ie(void 0,e))}class oe extends N{constructor(t){super(t)}static create(t){var e,n;const r=null!=t?t:{},o={disabled:null!==(e=r.disabled)&&void 0!==e&&e,disposed:!1,hidden:null!==(n=r.hidden)&&void 0!==n&&n},l=N.createCore(o);return new oe(l)}bindClassModifiers(t){A(this,"disabled",ae(t,"disabled")),A(this,"hidden",ae(t,"hidden"))}bindDisabled(t){A(this,"disabled",(e=>{t.disabled=e}))}bindTabIndex(t){A(this,"disabled",(e=>{t.tabIndex=e?-1:0}))}handleDispose(t){this.value("disposed").emitter.on("change",(e=>{e&&t()}))}}const se=S("tbi");class ue{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(se()),e.viewProps.bindClassModifiers(this.element),A(e.props,"selected",(t=>{t?this.element.classList.add(se(void 0,"sel")):this.element.classList.remove(se(void 0,"sel"))}));const n=t.createElement("button");n.classList.add(se("b")),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.buttonElement=n;const r=t.createElement("div");r.classList.add(se("t")),C(e.props.value("title"),r),this.buttonElement.appendChild(r),this.titleElement=r}}class le{constructor(t,e){this.emitter=new x,this.onClick_=this.onClick_.bind(this),this.props=e.props,this.viewProps=e.viewProps,this.view=new ue(t,{props:e.props,viewProps:e.viewProps}),this.view.buttonElement.addEventListener("click",this.onClick_)}onClick_(){this.emitter.emit("click",{sender:this})}}class ce{constructor(t,e){this.onItemClick_=this.onItemClick_.bind(this),this.ic_=new le(t,{props:e.itemProps,viewProps:oe.create()}),this.ic_.emitter.on("click",this.onItemClick_),this.cc_=new Yt(t,{blade:_t(),viewProps:oe.create()}),this.props=e.props,A(this.props,"selected",(t=>{this.itemController.props.set("selected",t),this.contentController.viewProps.set("hidden",!t)}))}get itemController(){return this.ic_}get contentController(){return this.cc_}onItemClick_(){this.props.set("selected",!0)}}class he{constructor(t,e){this.controller_=t,this.rackApi_=e}get title(){var t;return null!==(t=this.controller_.itemController.props.get("title"))&&void 0!==t?t:""}set title(title){this.controller_.itemController.props.set("title",title)}get selected(){return this.controller_.props.get("selected")}set selected(t){this.controller_.props.set("selected",t)}get children(){return this.rackApi_.children}addButton(t){return this.rackApi_.addButton(t)}addFolder(t){return this.rackApi_.addFolder(t)}addSeparator(t){return this.rackApi_.addSeparator(t)}addTab(t){return this.rackApi_.addTab(t)}add(t,e){this.rackApi_.add(t,e)}remove(t){this.rackApi_.remove(t)}addInput(object,t,e){return this.rackApi_.addInput(object,t,e)}addMonitor(object,t,e){return this.rackApi_.addMonitor(object,t,e)}addBlade(t){return this.rackApi_.addBlade(t)}}class de extends Et{constructor(t,e){super(t,new Nt(t.rackController,e)),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.emitter_=new x,this.pageApiMap_=new Map,this.rackApi_.on("change",(t=>{this.emitter_.emit("change",{event:t})})),this.rackApi_.on("update",(t=>{this.emitter_.emit("update",{event:t})})),this.controller_.pageSet.emitter.on("add",this.onPageAdd_),this.controller_.pageSet.emitter.on("remove",this.onPageRemove_),this.controller_.pageSet.items.forEach((t=>{this.setUpPageApi_(t)}))}get pages(){return this.controller_.pageSet.items.map((t=>{const e=this.pageApiMap_.get(t);if(!e)throw v.shouldNeverHappen();return e}))}addPage(t){const e=this.controller_.view.element.ownerDocument,n=new ce(e,{itemProps:N.fromObject({selected:!1,title:t.title}),props:N.fromObject({selected:!1})});this.controller_.add(n,t.index);const r=this.pageApiMap_.get(n);if(!r)throw v.shouldNeverHappen();return r}removePage(t){this.controller_.remove(t)}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}setUpPageApi_(t){const e=this.rackApi_.apiSet_.find((e=>e.controller_===t.contentController));if(!e)throw v.shouldNeverHappen();const n=new he(t,e);this.pageApiMap_.set(t,n)}onPageAdd_(t){this.setUpPageApi_(t.item)}onPageRemove_(t){if(!this.pageApiMap_.get(t.item))throw v.shouldNeverHappen();this.pageApiMap_.delete(t.item)}}const pe=S("tab");class fe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(pe(),qt()),e.viewProps.bindClassModifiers(this.element),T(e.empty,P(this.element,pe(void 0,"nop")));const n=t.createElement("div");n.classList.add(pe("i")),this.element.appendChild(n),this.itemsElement=n;const r=e.contentsElement;r.classList.add(pe("c")),this.element.appendChild(r),this.contentsElement=r}}class me extends Bt{constructor(t,e){const n=new Yt(t,{blade:e.blade,viewProps:e.viewProps}),r=I(!0);super({blade:e.blade,rackController:n,view:new fe(t,{contentsElement:n.view.element,empty:r,viewProps:e.viewProps})}),this.onPageAdd_=this.onPageAdd_.bind(this),this.onPageRemove_=this.onPageRemove_.bind(this),this.onPageSelectedChange_=this.onPageSelectedChange_.bind(this),this.pageSet_=new Pt((()=>null)),this.pageSet_.emitter.on("add",this.onPageAdd_),this.pageSet_.emitter.on("remove",this.onPageRemove_),this.empty_=r,this.applyPages_()}get pageSet(){return this.pageSet_}add(t,e){this.pageSet_.add(t,null!=e?e:this.pageSet_.items.length)}remove(t){this.pageSet_.remove(this.pageSet_.items[t])}applyPages_(){this.keepSelection_(),this.empty_.rawValue=0===this.pageSet_.items.length}onPageAdd_(t){const e=t.item;st(this.view.itemsElement,e.itemController.view.element,t.index),this.rackController.rack.add(e.contentController,t.index),e.props.value("selected").emitter.on("change",this.onPageSelectedChange_),this.applyPages_()}onPageRemove_(t){const e=t.item;ut(e.itemController.view.element),this.rackController.rack.remove(e.contentController),e.props.value("selected").emitter.off("change",this.onPageSelectedChange_),this.applyPages_()}keepSelection_(){if(0===this.pageSet_.items.length)return;const t=this.pageSet_.items.findIndex((t=>t.props.get("selected")));t<0?this.pageSet_.items.forEach(((t,i)=>{t.props.set("selected",0===i)})):this.pageSet_.items.forEach(((e,i)=>{e.props.set("selected",i===t)}))}onPageSelectedChange_(t){if(t.rawValue){const e=this.pageSet_.items.findIndex((e=>e.props.value("selected")===t.sender));this.pageSet_.items.forEach(((t,i)=>{t.props.set("selected",i===e)}))}else this.keepSelection_()}}const ve={id:"tab",type:"blade",accept(t){const p=H,e=G(t,{pages:p.required.array(p.required.object({title:p.required.string})),view:p.required.constant("tab")});return e&&0!==e.pages.length?{params:e}:null},controller(t){const e=new me(t.document,{blade:t.blade,viewProps:t.viewProps});return t.params.pages.forEach((p=>{const n=new ce(t.document,{itemProps:N.fromObject({selected:!1,title:p.title}),props:N.fromObject({selected:!1})});e.add(n)})),e},api:t=>t.controller instanceof me?new de(t.controller,t.pool):null};function ge(t,e){const n=t.accept(e.params);if(!n)return null;const r=H.optional.boolean(e.params.disabled).value,o=H.optional.boolean(e.params.hidden).value;return t.controller({blade:_t(),document:e.document,params:h(Object.assign(Object.assign({},n.params),{disabled:r,hidden:o})),viewProps:oe.create({disabled:r,hidden:o})})}class ye{constructor(){this.disabled=!1,this.emitter=new x}dispose(){}tick(){this.disabled||this.emitter.emit("tick",{sender:this})}}class _e{constructor(t,e){this.disabled_=!1,this.timerId_=null,this.onTick_=this.onTick_.bind(this),this.doc_=t,this.emitter=new x,this.interval_=e,this.setTimer_()}get disabled(){return this.disabled_}set disabled(t){this.disabled_=t,this.disabled_?this.clearTimer_():this.setTimer_()}dispose(){this.clearTimer_()}clearTimer_(){if(null===this.timerId_)return;const t=this.doc_.defaultView;t&&t.clearInterval(this.timerId_),this.timerId_=null}setTimer_(){if(this.clearTimer_(),this.interval_<=0)return;const t=this.doc_.defaultView;t&&(this.timerId_=t.setInterval(this.onTick_,this.interval_))}onTick_(){this.disabled_||this.emitter.emit("tick",{sender:this})}}class be{constructor(t){this.constraints=t}constrain(t){return this.constraints.reduce(((t,e)=>e.constrain(t)),t)}}function xe(t,e){if(t instanceof e)return t;if(t instanceof be){const n=t.constraints.reduce(((t,n)=>t||(n instanceof e?n:null)),null);if(n)return n}return null}class we{constructor(t){this.options=t}constrain(t){const e=this.options;return 0===e.length||e.filter((e=>e.value===t)).length>0?t:e[0].value}}class Se{constructor(t){this.maxValue=t.max,this.minValue=t.min}constrain(t){let e=t;return d(this.minValue)||(e=Math.max(e,this.minValue)),d(this.maxValue)||(e=Math.min(e,this.maxValue)),e}}class Ee{constructor(t){this.step=t}constrain(t){return(t<0?-Math.round(-t/this.step):Math.round(t/this.step))*this.step}}const Me=S("lst");class Te{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.props_=e.props,this.element=t.createElement("div"),this.element.classList.add(Me()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("select");n.classList.add(Me("s")),A(this.props_,"options",(e=>{lt(n),e.forEach(((e,r)=>{const o=t.createElement("option");o.dataset.index=String(r),o.textContent=e.text,o.value=String(e.value),n.appendChild(o)}))})),e.viewProps.bindDisabled(n),this.element.appendChild(n),this.selectElement=n;const r=t.createElement("div");r.classList.add(Me("m")),r.appendChild(ot(t,"dropdown")),this.element.appendChild(r),e.value.emitter.on("change",this.onValueChange_),this.value_=e.value,this.update_()}update_(){this.selectElement.value=String(this.value_.rawValue)}onValueChange_(){this.update_()}}class Ae{constructor(t,e){this.onSelectChange_=this.onSelectChange_.bind(this),this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Te(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.view.selectElement.addEventListener("change",this.onSelectChange_)}onSelectChange_(t){const e=h(t.currentTarget).selectedOptions.item(0);if(!e)return;const n=Number(e.dataset.index);this.value.rawValue=this.props.get("options")[n].value}}const De=S("pop");class Pe{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(De()),e.viewProps.bindClassModifiers(this.element),T(e.shows,P(this.element,De(void 0,"v")))}}class Ce{constructor(t,e){this.shows=I(!1),this.viewProps=e.viewProps,this.view=new Pe(t,{shows:this.shows,viewProps:this.viewProps})}}const ke=S("txt");class Oe{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ke()),e.viewProps.bindClassModifiers(this.element),this.props_=e.props,this.props_.emitter.on("change",this.onChange_);const n=t.createElement("input");n.classList.add(ke("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onChange_),this.value_=e.value,this.refresh()}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value_.rawValue)}onChange_(){this.refresh()}}class Le{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.view=new Oe(t,{props:e.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=h(t.currentTarget).value,n=this.parser_(e);d(n)||(this.value.rawValue=n),this.view.refresh()}}function Fe(t){return String(t)}function Re(t){return"false"!==t&&!!t}function Ie(t){return Fe(t)}class Ne{constructor(text){this.text=text}evaluate(){return Number(this.text)}toString(){return this.text}}const je={"**":(t,e)=>Math.pow(t,e),"*":(t,e)=>t*e,"/":(t,e)=>t/e,"%":(t,e)=>t%e,"+":(t,e)=>t+e,"-":(t,e)=>t-e,"<<":(t,e)=>t<<e,">>":(t,e)=>t>>e,">>>":(t,e)=>t>>>e,"&":(t,e)=>t&e,"^":(t,e)=>t^e,"|":(t,e)=>t|e};class Be{constructor(t,e,n){this.left=e,this.operator=t,this.right=n}evaluate(){const t=je[this.operator];if(!t)throw new Error(`unexpected binary operator: '${this.operator}`);return t(this.left.evaluate(),this.right.evaluate())}toString(){return["b(",this.left.toString(),this.operator,this.right.toString(),")"].join(" ")}}const Ue={"+":t=>t,"-":t=>-t,"~":t=>~t};class ze{constructor(t,e){this.operator=t,this.expression=e}evaluate(){const t=Ue[this.operator];if(!t)throw new Error(`unexpected unary operator: '${this.operator}`);return t(this.expression.evaluate())}toString(){return["u(",this.operator,this.expression.toString(),")"].join(" ")}}function Ve(t){return(text,cursor)=>{for(let i=0;i<t.length;i++){const e=t[i](text,cursor);if(""!==e)return e}return""}}function He(text,cursor){var t;const e=text.substr(cursor).match(/^\s+/);return null!==(t=e&&e[0])&&void 0!==t?t:""}function Ge(text,cursor){const t=text.substr(cursor,1);return t.match(/^[1-9]$/)?t:""}function We(text,cursor){var t;const e=text.substr(cursor).match(/^[0-9]+/);return null!==(t=e&&e[0])&&void 0!==t?t:""}function Xe(text,cursor){const t=We(text,cursor);if(""!==t)return t;const e=text.substr(cursor,1);if("-"!==e&&"+"!==e)return"";const n=We(text,cursor+=1);return""===n?"":e+n}function Ye(text,cursor){const t=text.substr(cursor,1);if(cursor+=1,"e"!==t.toLowerCase())return"";const e=Xe(text,cursor);return""===e?"":t+e}function qe(text,cursor){const t=text.substr(cursor,1);if("0"===t)return t;const e=Ge(text,cursor);return cursor+=e.length,""===e?"":e+We(text,cursor)}function Qe(text,cursor){const t=qe(text,cursor);if(cursor+=t.length,""===t)return"";const e=text.substr(cursor,1);if(cursor+=e.length,"."!==e)return"";const n=We(text,cursor);return t+e+n+Ye(text,cursor+=n.length)}function $e(text,cursor){const t=text.substr(cursor,1);if(cursor+=t.length,"."!==t)return"";const e=We(text,cursor);return cursor+=e.length,""===e?"":t+e+Ye(text,cursor)}function Ke(text,cursor){const t=qe(text,cursor);return cursor+=t.length,""===t?"":t+Ye(text,cursor)}const Je=Ve([Qe,$e,Ke]);function Ze(text,cursor){var t;const e=text.substr(cursor).match(/^[01]+/);return null!==(t=e&&e[0])&&void 0!==t?t:""}function tn(text,cursor){const t=text.substr(cursor,2);if(cursor+=t.length,"0b"!==t.toLowerCase())return"";const e=Ze(text,cursor);return""===e?"":t+e}function en(text,cursor){var t;const e=text.substr(cursor).match(/^[0-7]+/);return null!==(t=e&&e[0])&&void 0!==t?t:""}function nn(text,cursor){const t=text.substr(cursor,2);if(cursor+=t.length,"0o"!==t.toLowerCase())return"";const e=en(text,cursor);return""===e?"":t+e}function rn(text,cursor){var t;const e=text.substr(cursor).match(/^[0-9a-f]+/i);return null!==(t=e&&e[0])&&void 0!==t?t:""}function an(text,cursor){const t=text.substr(cursor,2);if(cursor+=t.length,"0x"!==t.toLowerCase())return"";const e=rn(text,cursor);return""===e?"":t+e}const on=Ve([tn,nn,an]),sn=Ve([on,Je]);function un(text,cursor){const t=sn(text,cursor);return cursor+=t.length,""===t?null:{evaluable:new Ne(t),cursor:cursor}}function ln(text,cursor){const t=text.substr(cursor,1);if(cursor+=t.length,"("!==t)return null;const e=mn(text,cursor);if(!e)return null;cursor=e.cursor,cursor+=He(text,cursor).length;const n=text.substr(cursor,1);return cursor+=n.length,")"!==n?null:{evaluable:e.evaluable,cursor:cursor}}function cn(text,cursor){return un(text,cursor)||ln(text,cursor)}function hn(text,cursor){const t=cn(text,cursor);if(t)return t;const e=text.substr(cursor,1);if(cursor+=e.length,"+"!==e&&"-"!==e&&"~"!==e)return null;const n=hn(text,cursor);return n?{cursor:cursor=n.cursor,evaluable:new ze(e,n.evaluable)}:null}function dn(t,text,cursor){cursor+=He(text,cursor).length;const e=t.filter((t=>text.startsWith(t,cursor)))[0];return e?(cursor+=e.length,{cursor:cursor+=He(text,cursor).length,operator:e}):null}function pn(t,e){return(text,cursor)=>{const n=t(text,cursor);if(!n)return null;cursor=n.cursor;let r=n.evaluable;for(;;){const n=dn(e,text,cursor);if(!n)break;cursor=n.cursor;const o=t(text,cursor);if(!o)return null;cursor=o.cursor,r=new Be(n.operator,r,o.evaluable)}return r?{cursor:cursor,evaluable:r}:null}}const fn=[["**"],["*","/","%"],["+","-"],["<<",">>>",">>"],["&"],["^"],["|"]].reduce(((t,e)=>pn(t,e)),hn);function mn(text,cursor){return cursor+=He(text,cursor).length,fn(text,cursor)}function vn(text){const t=mn(text,0);return t?t.cursor+He(text,t.cursor).length!==text.length?null:t.evaluable:null}function gn(text){var t;const e=vn(text);return null!==(t=null==e?void 0:e.evaluate())&&void 0!==t?t:null}function yn(t){if("number"==typeof t)return t;if("string"==typeof t){const e=gn(t);if(!d(e))return e}return 0}function _n(t){return String(t)}function bn(t){return e=>e.toFixed(Math.max(Math.min(t,20),0))}const xn=bn(0);function wn(t){return xn(t)+"%"}function Sn(t){return String(t)}function En(t){return t}function Mn(t,e){for(;t.length<e;)t.push(void 0)}function Tn(t){const e=[];return Mn(e,t),I(e)}function An(t){const e=t.indexOf(void 0);return h(e<0?t:t.slice(0,e))}function Dn(t,e){const n=[...An(t),e];return n.length>t.length?n.splice(0,n.length-t.length):Mn(n,t.length),n}function Pn({primary:t,secondary:e,forward:n,backward:r}){let o=!1;function l(t){o||(o=!0,t(),o=!1)}t.emitter.on("change",(r=>{l((()=>{e.setRawValue(n(t,e),r.options)}))})),e.emitter.on("change",(o=>{l((()=>{t.setRawValue(r(t,e),o.options)})),l((()=>{e.setRawValue(n(t,e),o.options)}))})),l((()=>{e.setRawValue(n(t,e),{forceEmit:!1,last:!0})}))}function Cn(t,e){const n=t*(e.altKey?.1:1)*(e.shiftKey?10:1);return e.upKey?+n:e.downKey?-n:0}function kn(t){return{altKey:t.altKey,downKey:"ArrowDown"===t.key,shiftKey:t.shiftKey,upKey:"ArrowUp"===t.key}}function On(t){return{altKey:t.altKey,downKey:"ArrowLeft"===t.key,shiftKey:t.shiftKey,upKey:"ArrowRight"===t.key}}function Ln(t){return"ArrowUp"===t||"ArrowDown"===t}function Fn(t){return Ln(t)||"ArrowLeft"===t||"ArrowRight"===t}function Rn(t,e){const n=e.ownerDocument.defaultView,rect=e.getBoundingClientRect();return{x:t.pageX-((n&&n.scrollX||0)+rect.left),y:t.pageY-((n&&n.scrollY||0)+rect.top)}}class In{constructor(element){this.lastTouch_=null,this.onDocumentMouseMove_=this.onDocumentMouseMove_.bind(this),this.onDocumentMouseUp_=this.onDocumentMouseUp_.bind(this),this.onMouseDown_=this.onMouseDown_.bind(this),this.onTouchEnd_=this.onTouchEnd_.bind(this),this.onTouchMove_=this.onTouchMove_.bind(this),this.onTouchStart_=this.onTouchStart_.bind(this),this.elem_=element,this.emitter=new x,element.addEventListener("touchstart",this.onTouchStart_,{passive:!1}),element.addEventListener("touchmove",this.onTouchMove_,{passive:!0}),element.addEventListener("touchend",this.onTouchEnd_),element.addEventListener("mousedown",this.onMouseDown_)}computePosition_(t){const rect=this.elem_.getBoundingClientRect();return{bounds:{width:rect.width,height:rect.height},point:t?{x:t.x,y:t.y}:null}}onMouseDown_(t){var e;t.preventDefault(),null===(e=t.currentTarget)||void 0===e||e.focus();const n=this.elem_.ownerDocument;n.addEventListener("mousemove",this.onDocumentMouseMove_),n.addEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(Rn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseMove_(t){this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(Rn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onDocumentMouseUp_(t){const e=this.elem_.ownerDocument;e.removeEventListener("mousemove",this.onDocumentMouseMove_),e.removeEventListener("mouseup",this.onDocumentMouseUp_),this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(Rn(t,this.elem_)),sender:this,shiftKey:t.shiftKey})}onTouchStart_(t){t.preventDefault();const e=t.targetTouches.item(0),rect=this.elem_.getBoundingClientRect();this.emitter.emit("down",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-rect.left,y:e.clientY-rect.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchMove_(t){const e=t.targetTouches.item(0),rect=this.elem_.getBoundingClientRect();this.emitter.emit("move",{altKey:t.altKey,data:this.computePosition_(e?{x:e.clientX-rect.left,y:e.clientY-rect.top}:void 0),sender:this,shiftKey:t.shiftKey}),this.lastTouch_=e}onTouchEnd_(t){var e;const n=null!==(e=t.targetTouches.item(0))&&void 0!==e?e:this.lastTouch_,rect=this.elem_.getBoundingClientRect();this.emitter.emit("up",{altKey:t.altKey,data:this.computePosition_(n?{x:n.clientX-rect.left,y:n.clientY-rect.top}:void 0),sender:this,shiftKey:t.shiftKey})}}function Nn(t,e,n,r,o){return r+(t-e)/(n-e)*(o-r)}function jn(t){return String(t.toFixed(10)).split(".")[1].replace(/0+$/,"").length}function Bn(t,e,n){return Math.min(Math.max(t,e),n)}function Un(t,e){return(t%e+e)%e}const zn=S("txt");class Vn{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(zn(),zn(void 0,"num")),e.arrayPosition&&this.element.classList.add(zn(void 0,e.arrayPosition)),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(zn("i")),n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,this.onDraggingChange_=this.onDraggingChange_.bind(this),this.dragging_=e.dragging,this.dragging_.emitter.on("change",this.onDraggingChange_),this.element.classList.add(zn()),this.inputElement.classList.add(zn("i"));const r=t.createElement("div");r.classList.add(zn("k")),this.element.appendChild(r),this.knobElement=r;const o=t.createElementNS(K,"svg");o.classList.add(zn("g")),this.knobElement.appendChild(o);const l=t.createElementNS(K,"path");l.classList.add(zn("gb")),o.appendChild(l),this.guideBodyElem_=l;const c=t.createElementNS(K,"path");c.classList.add(zn("gh")),o.appendChild(c),this.guideHeadElem_=c;const h=t.createElement("div");h.classList.add(S("tt")()),this.knobElement.appendChild(h),this.tooltipElem_=h,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.refresh()}onDraggingChange_(t){if(null===t.rawValue)return void this.element.classList.remove(zn(void 0,"drg"));this.element.classList.add(zn(void 0,"drg"));const e=t.rawValue/this.props_.get("draggingScale"),n=e+(e>0?-1:e<0?1:0),r=Bn(-n,-4,4);this.guideHeadElem_.setAttributeNS(null,"d",[`M ${n+r},0 L${n},4 L${n+r},8`,`M ${e},-1 L${e},9`].join(" ")),this.guideBodyElem_.setAttributeNS(null,"d",`M 0,4 L${e},4`);const o=this.props_.get("formatter");this.tooltipElem_.textContent=o(this.value.rawValue),this.tooltipElem_.style.left=`${e}px`}refresh(){const t=this.props_.get("formatter");this.inputElement.value=t(this.value.rawValue)}onChange_(){this.refresh()}}class Hn{constructor(t,e){this.originRawValue_=0,this.onInputChange_=this.onInputChange_.bind(this),this.onInputKeyDown_=this.onInputKeyDown_.bind(this),this.onInputKeyUp_=this.onInputKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.parser_=e.parser,this.props=e.props,this.value=e.value,this.viewProps=e.viewProps,this.dragging_=I(null),this.view=new Vn(t,{arrayPosition:e.arrayPosition,dragging:this.dragging_,props:this.props,value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_),this.view.inputElement.addEventListener("keydown",this.onInputKeyDown_),this.view.inputElement.addEventListener("keyup",this.onInputKeyUp_);const n=new In(this.view.knobElement);n.emitter.on("down",this.onPointerDown_),n.emitter.on("move",this.onPointerMove_),n.emitter.on("up",this.onPointerUp_)}onInputChange_(t){const e=h(t.currentTarget).value,n=this.parser_(e);d(n)||(this.value.rawValue=n),this.view.refresh()}onInputKeyDown_(t){const e=Cn(this.baseStep_,kn(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onInputKeyUp_(t){0!==Cn(this.baseStep_,kn(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}onPointerDown_(){this.originRawValue_=this.value.rawValue,this.dragging_.rawValue=0}computeDraggingValue_(data){if(!data.point)return null;const t=data.point.x-data.bounds.width/2;return this.originRawValue_+t*this.props.get("draggingScale")}onPointerMove_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!1,last:!1}),this.dragging_.rawValue=this.value.rawValue-this.originRawValue_)}onPointerUp_(t){const e=this.computeDraggingValue_(t.data);null!==e&&(this.value.setRawValue(e,{forceEmit:!0,last:!0}),this.dragging_.rawValue=null)}}const Gn=S("sld");class Wn{constructor(t,e){this.onChange_=this.onChange_.bind(this),this.props_=e.props,this.props_.emitter.on("change",this.onChange_),this.element=t.createElement("div"),this.element.classList.add(Gn()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(Gn("t")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.trackElement=n;const r=t.createElement("div");r.classList.add(Gn("k")),this.trackElement.appendChild(r),this.knobElement=r,e.value.emitter.on("change",this.onChange_),this.value=e.value,this.update_()}update_(){const p=Bn(Nn(this.value.rawValue,this.props_.get("minValue"),this.props_.get("maxValue"),0,100),0,100);this.knobElement.style.width=`${p}%`}onChange_(){this.update_()}}class Xn{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDownOrMove_=this.onPointerDownOrMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.baseStep_=e.baseStep,this.value=e.value,this.viewProps=e.viewProps,this.props=e.props,this.view=new Wn(t,{props:this.props,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.trackElement),this.ptHandler_.emitter.on("down",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("move",this.onPointerDownOrMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.trackElement.addEventListener("keydown",this.onKeyDown_),this.view.trackElement.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){t.point&&this.value.setRawValue(Nn(Bn(t.point.x,0,t.bounds.width),0,t.bounds.width,this.props.get("minValue"),this.props.get("maxValue")),e)}onPointerDownOrMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Cn(this.baseStep_,On(t));0!==e&&this.value.setRawValue(this.value.rawValue+e,{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Cn(this.baseStep_,On(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const Yn=S("sldtxt");class qn{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Yn());const n=t.createElement("div");n.classList.add(Yn("s")),this.sliderView_=e.sliderView,n.appendChild(this.sliderView_.element),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Yn("t")),this.textView_=e.textView,r.appendChild(this.textView_.element),this.element.appendChild(r)}}class Qn{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.sliderC_=new Xn(t,{baseStep:e.baseStep,props:e.sliderProps,value:e.value,viewProps:this.viewProps}),this.textC_=new Hn(t,{baseStep:e.baseStep,parser:e.parser,props:e.textProps,value:e.value,viewProps:e.viewProps}),this.view=new qn(t,{sliderView:this.sliderC_.view,textView:this.textC_.view})}get sliderController(){return this.sliderC_}get textController(){return this.textC_}}function $n(t,e){t.write(e)}function Kn(t){const p=H;return Array.isArray(t)?p.required.array(p.required.object({text:p.required.string,value:p.required.raw}))(t).value:"object"==typeof t?p.required.raw(t).value:void 0}function Jn(t){if("inline"===t||"popup"===t)return t}function Zn(t){const p=H;return p.required.object({max:p.optional.number,min:p.optional.number,step:p.optional.number})(t).value}function er(t){if(Array.isArray(t))return t;const e=[];return Object.keys(t).forEach((text=>{e.push({text:text,value:t[text]})})),e}function nr(t){return d(t)?null:new we(er(h(t)))}function rr(t){const e=t?xe(t,we):null;return e?e.options:null}function ir(t){const e=t?xe(t,Ee):null;return e?e.step:null}function ar(t,e){const n=t&&xe(t,Ee);return n?jn(n.step):Math.max(jn(e),2)}function or(t){const e=ir(t);return null!=e?e:1}function sr(t,e){var n;const r=t&&xe(t,Ee),base=Math.abs(null!==(n=null==r?void 0:r.step)&&void 0!==n?n:e);return 0===base?.1:Math.pow(10,Math.floor(Math.log10(base))-1)}const ur=S("ckb");class lr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.element=t.createElement("div"),this.element.classList.add(ur()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("label");n.classList.add(ur("l")),this.element.appendChild(n);const r=t.createElement("input");r.classList.add(ur("i")),r.type="checkbox",n.appendChild(r),this.inputElement=r,e.viewProps.bindDisabled(this.inputElement);const o=t.createElement("div");o.classList.add(ur("w")),n.appendChild(o);const l=ot(t,"check");o.appendChild(l),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}update_(){this.inputElement.checked=this.value.rawValue}onValueChange_(){this.update_()}}class cr{constructor(t,e){this.onInputChange_=this.onInputChange_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new lr(t,{value:this.value,viewProps:this.viewProps}),this.view.inputElement.addEventListener("change",this.onInputChange_)}onInputChange_(t){const e=h(t.currentTarget);this.value.rawValue=e.checked}}function dr(t){const e=[],n=nr(t.options);return n&&e.push(n),new be(e)}const pr={id:"input-bool",type:"input",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=G(e,{options:H.optional.custom(Kn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Re,constraint:t=>dr(t.params),writer:t=>$n},controller:t=>{var e;const n=t.document,r=t.value,o=t.constraint;return o&&xe(o,we)?new Ae(n,{props:N.fromObject({options:null!==(e=rr(o))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new cr(n,{value:r,viewProps:t.viewProps})}},fr=S("col");class mr{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(fr()),e.foldable.bindExpandedClass(this.element,fr(void 0,"expanded")),A(e.foldable,"completed",P(this.element,fr(void 0,"cpl")));const n=t.createElement("div");n.classList.add(fr("h")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(fr("s")),n.appendChild(r),this.swatchElement=r;const o=t.createElement("div");if(o.classList.add(fr("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(fr("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}function vr(t,g,b){const rp=Bn(t/255,0,1),e=Bn(g/255,0,1),n=Bn(b/255,0,1),r=Math.max(rp,e,n),o=Math.min(rp,e,n),l=r-o;let c=0,s=0;const h=(o+r)/2;return 0!==l&&(s=l/(1-Math.abs(r+o-1)),c=rp===r?(e-n)/l:e===r?2+(n-rp)/l:4+(rp-e)/l,c=c/6+(c<0?1:0)),[360*c,100*s,100*h]}function gr(t,s,e){const n=(t%360+360)%360,r=Bn(s/100,0,1),o=Bn(e/100,0,1),l=(1-Math.abs(2*o-1))*r,c=l*(1-Math.abs(n/60%2-1)),h=o-l/2;let rp,d,f;return[rp,d,f]=n>=0&&n<60?[l,c,0]:n>=60&&n<120?[c,l,0]:n>=120&&n<180?[0,l,c]:n>=180&&n<240?[0,c,l]:n>=240&&n<300?[c,0,l]:[l,0,c],[255*(rp+h),255*(d+h),255*(f+h)]}function yr(t,g,b){const rp=Bn(t/255,0,1),e=Bn(g/255,0,1),n=Bn(b/255,0,1),r=Math.max(rp,e,n),o=r-Math.min(rp,e,n);let l;return l=0===o?0:r===rp?((e-n)/o%6+6)%6*60:r===e?60*((n-rp)/o+2):60*((rp-e)/o+4),[l,100*(0===r?0:o/r),100*r]}function _r(t,s,e){const n=Un(t,360),r=Bn(s/100,0,1),o=Bn(e/100,0,1),l=o*r,c=l*(1-Math.abs(n/60%2-1)),h=o-l;let rp,d,f;return[rp,d,f]=n>=0&&n<60?[l,c,0]:n>=60&&n<120?[c,l,0]:n>=120&&n<180?[0,l,c]:n>=180&&n<240?[0,c,l]:n>=240&&n<300?[c,0,l]:[l,0,c],[255*(rp+h),255*(d+h),255*(f+h)]}function xr(t,s,e){const n=e+s*(100-Math.abs(2*e-100))/200;return[t,0!==n?s*(100-Math.abs(2*e-100))/n:0,e+s*(100-Math.abs(2*e-100))/200]}function wr(t,s,e){const n=100-Math.abs(e*(200-s)/100-100);return[t,0!==n?s*e/n:0,e*(200-s)/200]}function Sr(t){return[t[0],t[1],t[2]]}function Er(t,e){return[t[0],t[1],t[2],e]}const Mr={hsl:{hsl:(t,s,e)=>[t,s,e],hsv:xr,rgb:gr},hsv:{hsl:wr,hsv:(t,s,e)=>[t,s,e],rgb:_r},rgb:{hsl:vr,hsv:yr,rgb:(t,g,b)=>[t,g,b]}};function Tr(t,e,n){return Mr[e][n](...t)}const Ar={hsl:t=>{var e;return[Un(t[0],360),Bn(t[1],0,100),Bn(t[2],0,100),Bn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},hsv:t=>{var e;return[Un(t[0],360),Bn(t[1],0,100),Bn(t[2],0,100),Bn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]},rgb:t=>{var e;return[Bn(t[0],0,255),Bn(t[1],0,255),Bn(t[2],0,255),Bn(null!==(e=t[3])&&void 0!==e?e:1,0,1)]}};function Dr(t,e){return"object"==typeof t&&!d(t)&&e in t&&"number"==typeof t[e]}class Pr{constructor(t,e){this.mode_=e,this.comps_=Ar[e](t)}static black(){return new Pr([0,0,0],"rgb")}static fromObject(t){const e="a"in t?[t.r,t.g,t.b,t.a]:[t.r,t.g,t.b];return new Pr(e,"rgb")}static toRgbaObject(t){return t.toRgbaObject()}static isRgbColorObject(t){return Dr(t,"r")&&Dr(t,"g")&&Dr(t,"b")}static isRgbaColorObject(t){return this.isRgbColorObject(t)&&Dr(t,"a")}static isColorObject(t){return this.isRgbColorObject(t)}static equals(t,e){if(t.mode_!==e.mode_)return!1;const n=t.comps_,r=e.comps_;for(let i=0;i<n.length;i++)if(n[i]!==r[i])return!1;return!0}get mode(){return this.mode_}getComponents(t){return Er(Tr(Sr(this.comps_),this.mode_,t||this.mode_),this.comps_[3])}toRgbaObject(){const t=this.getComponents("rgb");return{r:t[0],g:t[1],b:t[2],a:t[3]}}}const Cr=S("colp");class kr{constructor(t,e){this.alphaViews_=null,this.element=t.createElement("div"),this.element.classList.add(Cr());const n=t.createElement("div");n.classList.add(Cr("hsv"));const r=t.createElement("div");r.classList.add(Cr("sv")),this.svPaletteView_=e.svPaletteView,r.appendChild(this.svPaletteView_.element),n.appendChild(r);const o=t.createElement("div");o.classList.add(Cr("h")),this.hPaletteView_=e.hPaletteView,o.appendChild(this.hPaletteView_.element),n.appendChild(o),this.element.appendChild(n);const l=t.createElement("div");if(l.classList.add(Cr("rgb")),this.textView_=e.textView,l.appendChild(this.textView_.element),this.element.appendChild(l),e.alphaViews){this.alphaViews_={palette:e.alphaViews.palette,text:e.alphaViews.text};const n=t.createElement("div");n.classList.add(Cr("a"));const r=t.createElement("div");r.classList.add(Cr("ap")),r.appendChild(this.alphaViews_.palette.element),n.appendChild(r);const o=t.createElement("div");o.classList.add(Cr("at")),o.appendChild(this.alphaViews_.text.element),n.appendChild(o),this.element.appendChild(n)}}get allFocusableElements(){const t=[this.svPaletteView_.element,this.hPaletteView_.element,this.textView_.modeSelectElement,...this.textView_.textViews.map((t=>t.inputElement))];return this.alphaViews_&&t.push(this.alphaViews_.palette.element,this.alphaViews_.text.inputElement),t}}function Or(t){const p=H;return G(t,{alpha:p.optional.boolean,expanded:p.optional.boolean,picker:p.optional.custom(Jn)})}function Lr(t){return t?.1:1}function Fr(text,t){const e=text.match(/^(.+)%$/);return e?Math.min(.01*parseFloat(e[1])*t,t):Math.min(parseFloat(text),t)}const Rr={deg:t=>t,grad:t=>360*t/400,rad:t=>360*t/(2*Math.PI),turn:t=>360*t};function Ir(text){const t=text.match(/^([0-9.]+?)(deg|grad|rad|turn)$/);if(!t)return parseFloat(text);const e=parseFloat(t[1]),n=t[2];return Rr[n](e)}const Nr={"func.rgb":text=>{const t=text.match(/^rgb\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Fr(t[1],255),Fr(t[2],255),Fr(t[3],255)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:new Pr(e,"rgb")},"func.rgba":text=>{const t=text.match(/^rgba\(\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Fr(t[1],255),Fr(t[2],255),Fr(t[3],255),Fr(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:new Pr(e,"rgb")},"func.hsl":text=>{const t=text.match(/^hsl\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Ir(t[1]),Fr(t[2],100),Fr(t[3],100)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])?null:new Pr(e,"hsl")},"func.hsla":text=>{const t=text.match(/^hsla\(\s*([0-9A-Fa-f.]+(?:deg|grad|rad|turn)?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*,\s*([0-9A-Fa-f.]+%?)\s*\)$/);if(!t)return null;const e=[Ir(t[1]),Fr(t[2],100),Fr(t[3],100),Fr(t[4],1)];return isNaN(e[0])||isNaN(e[1])||isNaN(e[2])||isNaN(e[3])?null:new Pr(e,"hsl")},"hex.rgb":text=>{const t=text.match(/^#([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new Pr([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)],"rgb");const e=text.match(/^(?:#|0x)([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?new Pr([parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)],"rgb"):null},"hex.rgba":text=>{const t=text.match(/^#?([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])$/);if(t)return new Pr([parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16),Nn(parseInt(t[4]+t[4],16),0,255,0,1)],"rgb");const e=text.match(/^(?:#|0x)?([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})([0-9A-Fa-f]{2})$/);return e?new Pr([parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),Nn(parseInt(e[4],16),0,255,0,1)],"rgb"):null}};function jr(text){return Object.keys(Nr).reduce(((t,e)=>t||((0,Nr[e])(text)?e:null)),null)}const Br=text=>{const t=jr(text);return t?Nr[t](text):null};function Ur(t){return"func.hsla"===t||"func.rgba"===t||"hex.rgba"===t}function zr(t){if("string"==typeof t){const e=Br(t);if(e)return e}return Pr.black()}function Vr(t){const e=Bn(Math.floor(t),0,255).toString(16);return 1===e.length?`0${e}`:e}function Hr(t,e="#"){return`${e}${Sr(t.getComponents("rgb")).map(Vr).join("")}`}function Gr(t,e="#"){const n=t.getComponents("rgb");return`${e}${[n[0],n[1],n[2],255*n[3]].map(Vr).join("")}`}function Wr(t){const e=bn(0);return`rgb(${Sr(t.getComponents("rgb")).map((t=>e(t))).join(", ")})`}function Xr(t){const e=bn(2),n=bn(0);return`rgba(${t.getComponents("rgb").map(((t,r)=>(3===r?e:n)(t))).join(", ")})`}function Yr(t){const e=[bn(0),wn,wn];return`hsl(${Sr(t.getComponents("hsl")).map(((t,n)=>e[n](t))).join(", ")})`}function qr(t){const e=[bn(0),wn,wn,bn(2)];return`hsla(${t.getComponents("hsl").map(((t,n)=>e[n](t))).join(", ")})`}const Qr={"func.hsl":Yr,"func.hsla":qr,"func.rgb":Wr,"func.rgba":Xr,"hex.rgb":Hr,"hex.rgba":Gr};function $r(t){return Qr[t]}const Kr=S("apl");class Jr{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(Kr()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(Kr("b")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(Kr("c")),n.appendChild(r),this.colorElem_=r;const o=t.createElement("div");o.classList.add(Kr("m")),this.element.appendChild(o),this.markerElem_=o;const l=t.createElement("div");l.classList.add(Kr("p")),this.markerElem_.appendChild(l),this.previewElem_=l,this.update_()}update_(){const t=this.value.rawValue,e=t.getComponents("rgb"),n=new Pr([e[0],e[1],e[2],0],"rgb"),r=new Pr([e[0],e[1],e[2],255],"rgb"),o=["to right",Xr(n),Xr(r)];this.colorElem_.style.background=`linear-gradient(${o.join(",")})`,this.previewElem_.style.backgroundColor=Xr(t);const l=Nn(e[3],0,1,0,100);this.markerElem_.style.left=`${l}%`}onValueChange_(){this.update_()}}class Zr{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new Jr(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=t.point.x/t.bounds.width,r=this.value.rawValue,[o,s,l]=r.getComponents("hsv");this.value.setRawValue(new Pr([o,s,l,n],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Cn(Lr(!0),On(t));if(0===e)return;const n=this.value.rawValue,[r,s,o,a]=n.getComponents("hsv");this.value.setRawValue(new Pr([r,s,o,a+e],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Cn(Lr(!0),On(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const ti=S("coltxt");function ei(t){const e=t.createElement("select"),n=[{text:"RGB",value:"rgb"},{text:"HSL",value:"hsl"},{text:"HSV",value:"hsv"}];return e.appendChild(n.reduce(((e,n)=>{const r=t.createElement("option");return r.textContent=n.text,r.value=n.value,e.appendChild(r),e}),t.createDocumentFragment())),e}class ni{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(ti());const n=t.createElement("div");n.classList.add(ti("m")),this.modeElem_=ei(t),this.modeElem_.classList.add(ti("ms")),n.appendChild(this.modeSelectElement);const r=t.createElement("div");r.classList.add(ti("mm")),r.appendChild(ot(t,"dropdown")),n.appendChild(r),this.element.appendChild(n);const o=t.createElement("div");o.classList.add(ti("w")),this.element.appendChild(o),this.textsElem_=o,this.textViews_=e.textViews,this.applyTextViews_(),T(e.colorMode,(t=>{this.modeElem_.value=t}))}get modeSelectElement(){return this.modeElem_}get textViews(){return this.textViews_}set textViews(t){this.textViews_=t,this.applyTextViews_()}applyTextViews_(){lt(this.textsElem_);const t=this.element.ownerDocument;this.textViews_.forEach((e=>{const n=t.createElement("div");n.classList.add(ti("c")),n.appendChild(e.element),this.textsElem_.appendChild(n)}))}}const ri=bn(0),ii={rgb:()=>new Se({min:0,max:255}),hsl:t=>new Se(0===t?{min:0,max:360}:{min:0,max:100}),hsv:t=>new Se(0===t?{min:0,max:360}:{min:0,max:100})};function ai(t,e,n){return new Hn(t,{arrayPosition:0===n?"fst":2===n?"lst":"mid",baseStep:Lr(!1),parser:e.parser,props:N.fromObject({draggingScale:1,formatter:ri}),value:I(0,{constraint:ii[e.colorMode](n)}),viewProps:e.viewProps})}class oi{constructor(t,e){this.onModeSelectChange_=this.onModeSelectChange_.bind(this),this.parser_=e.parser,this.value=e.value,this.viewProps=e.viewProps,this.colorMode=I(this.value.rawValue.mode),this.ccs_=this.createComponentControllers_(t),this.view=new ni(t,{colorMode:this.colorMode,textViews:[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}),this.view.modeSelectElement.addEventListener("change",this.onModeSelectChange_)}createComponentControllers_(t){const e={colorMode:this.colorMode.rawValue,parser:this.parser_,viewProps:this.viewProps},n=[ai(t,e,0),ai(t,e,1),ai(t,e,2)];return n.forEach(((t,e)=>{Pn({primary:this.value,secondary:t.value,forward:p=>p.rawValue.getComponents(this.colorMode.rawValue)[e],backward:(p,s)=>{const t=this.colorMode.rawValue,n=p.rawValue.getComponents(t);return n[e]=s.rawValue,new Pr(Er(Sr(n),n[3]),t)}})})),n}onModeSelectChange_(t){const e=t.currentTarget;this.colorMode.rawValue=e.value,this.ccs_=this.createComponentControllers_(this.view.element.ownerDocument),this.view.textViews=[this.ccs_[0].view,this.ccs_[1].view,this.ccs_[2].view]}}const si=S("hpl");class ui{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(si()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("div");n.classList.add(si("c")),this.element.appendChild(n);const r=t.createElement("div");r.classList.add(si("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=this.value.rawValue,[e]=t.getComponents("hsv");this.markerElem_.style.backgroundColor=Wr(new Pr([e,100,100],"hsv"));const n=Nn(e,0,360,0,100);this.markerElem_.style.left=`${n}%`}onValueChange_(){this.update_()}}class ci{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new ui(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Nn(t.point.x,0,t.bounds.width,0,360),r=this.value.rawValue,[,s,o,a]=r.getComponents("hsv");this.value.setRawValue(new Pr([n,s,o,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){const e=Cn(Lr(!1),On(t));if(0===e)return;const n=this.value.rawValue,[r,s,o,a]=n.getComponents("hsv");this.value.setRawValue(new Pr([r+e,s,o,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){0!==Cn(Lr(!1),On(t))&&this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}const hi=S("svp"),di=64;class pi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),this.value=e.value,this.value.emitter.on("change",this.onValueChange_),this.element=t.createElement("div"),this.element.classList.add(hi()),e.viewProps.bindTabIndex(this.element);const n=t.createElement("canvas");n.height=di,n.width=di,n.classList.add(hi("c")),this.element.appendChild(n),this.canvasElement=n;const r=t.createElement("div");r.classList.add(hi("m")),this.element.appendChild(r),this.markerElem_=r,this.update_()}update_(){const t=it(this.canvasElement);if(!t)return;const e=this.value.rawValue.getComponents("hsv"),n=this.canvasElement.width,r=this.canvasElement.height,o=t.getImageData(0,0,n,r),data=o.data;for(let t=0;t<r;t++)for(let o=0;o<n;o++){const s=Nn(o,0,n,0,100),l=Nn(t,0,r,100,0),c=_r(e[0],s,l),i=4*(t*n+o);data[i]=c[0],data[i+1]=c[1],data[i+2]=c[2],data[i+3]=255}t.putImageData(o,0,0);const l=Nn(e[1],0,100,0,100);this.markerElem_.style.left=`${l}%`;const c=Nn(e[2],0,100,100,0);this.markerElem_.style.top=`${c}%`}onValueChange_(){this.update_()}}class fi{constructor(t,e){this.onKeyDown_=this.onKeyDown_.bind(this),this.onKeyUp_=this.onKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.view=new pi(t,{value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.element),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.element.addEventListener("keydown",this.onKeyDown_),this.view.element.addEventListener("keyup",this.onKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=Nn(t.point.x,0,t.bounds.width,0,100),r=Nn(t.point.y,0,t.bounds.height,100,0),[o,,,a]=this.value.rawValue.getComponents("hsv");this.value.setRawValue(new Pr([o,n,r,a],"hsv"),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onKeyDown_(t){Fn(t.key)&&t.preventDefault();const[e,s,n,a]=this.value.rawValue.getComponents("hsv"),r=Lr(!1),o=Cn(r,On(t)),l=Cn(r,kn(t));0===o&&0===l||this.value.setRawValue(new Pr([e,s+o,n+l,a],"hsv"),{forceEmit:!1,last:!1})}onKeyUp_(t){const e=Lr(!1),n=Cn(e,On(t)),r=Cn(e,kn(t));0===n&&0===r||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class mi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.hPaletteC_=new ci(t,{value:this.value,viewProps:this.viewProps}),this.svPaletteC_=new fi(t,{value:this.value,viewProps:this.viewProps}),this.alphaIcs_=e.supportsAlpha?{palette:new Zr(t,{value:this.value,viewProps:this.viewProps}),text:new Hn(t,{parser:gn,baseStep:.1,props:N.fromObject({draggingScale:.01,formatter:bn(2)}),value:I(0,{constraint:new Se({min:0,max:1})}),viewProps:this.viewProps})}:null,this.alphaIcs_&&Pn({primary:this.value,secondary:this.alphaIcs_.text.value,forward:p=>p.rawValue.getComponents()[3],backward:(p,s)=>{const t=p.rawValue.getComponents();return t[3]=s.rawValue,new Pr(t,p.rawValue.mode)}}),this.textC_=new oi(t,{parser:gn,value:this.value,viewProps:this.viewProps}),this.view=new kr(t,{alphaViews:this.alphaIcs_?{palette:this.alphaIcs_.palette.view,text:this.alphaIcs_.text.view}:null,hPaletteView:this.hPaletteC_.view,supportsAlpha:e.supportsAlpha,svPaletteView:this.svPaletteC_.view,textView:this.textC_.view})}get textController(){return this.textC_}}const vi=S("colsw");class gi{constructor(t,e){this.onValueChange_=this.onValueChange_.bind(this),e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.element=t.createElement("div"),this.element.classList.add(vi()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("div");n.classList.add(vi("sw")),this.element.appendChild(n),this.swatchElem_=n;const r=t.createElement("button");r.classList.add(vi("b")),e.viewProps.bindDisabled(r),this.element.appendChild(r),this.buttonElement=r,this.update_()}update_(){const t=this.value.rawValue;this.swatchElem_.style.backgroundColor=Gr(t)}onValueChange_(){this.update_()}}class yi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new gi(t,{value:this.value,viewProps:this.viewProps})}}class _i{constructor(t,e){this.onButtonBlur_=this.onButtonBlur_.bind(this),this.onButtonClick_=this.onButtonClick_.bind(this),this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=bt.create(e.expanded),this.swatchC_=new yi(t,{value:this.value,viewProps:this.viewProps});const n=this.swatchC_.view.buttonElement;n.addEventListener("blur",this.onButtonBlur_),n.addEventListener("click",this.onButtonClick_),this.textC_=new Le(t,{parser:e.parser,props:N.fromObject({formatter:e.formatter}),value:this.value,viewProps:this.viewProps}),this.view=new mr(t,{foldable:this.foldable_,pickerLayout:e.pickerLayout}),this.view.swatchElement.appendChild(this.swatchC_.view.element),this.view.textElement.appendChild(this.textC_.view.element),this.popC_="popup"===e.pickerLayout?new Ce(t,{viewProps:this.viewProps}):null;const r=new mi(t,{supportsAlpha:e.supportsAlpha,value:this.value,viewProps:this.viewProps});r.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=r,this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(r.view.element),Pn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:p=>p.rawValue,backward:(t,s)=>s.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),St(this.foldable_,this.view.pickerElement))}get textController(){return this.textC_}onButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=h(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ht(t);n&&e.contains(n)||n&&n===this.swatchC_.view.buttonElement&&!tt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.swatchC_.view.buttonElement.focus()}}function bi(t){return Pr.isColorObject(t)?Pr.fromObject(t):Pr.black()}function xi(t){return Sr(t.getComponents("rgb")).reduce(((t,e)=>t<<8|255&Math.floor(e)),0)}function wi(t){return t.getComponents("rgb").reduce(((t,e,n)=>t<<8|255&Math.floor(3===n?255*e:e)),0)>>>0}function Si(t){return new Pr([t>>16&255,t>>8&255,255&t],"rgb")}function Ei(t){return new Pr([t>>24&255,t>>16&255,t>>8&255,Nn(255&t,0,255,0,1)],"rgb")}function Mi(t){return"number"!=typeof t?Pr.black():Si(t)}function Ti(t){return"number"!=typeof t?Pr.black():Ei(t)}function Ai(t){const e=$r(t);return(t,n)=>{$n(t,e(n))}}function Di(t){const e=t?wi:xi;return(t,n)=>{$n(t,e(n))}}function Pi(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b),t.writeProperty("a",n.a)}function Ci(t,e){const n=e.toRgbaObject();t.writeProperty("r",n.r),t.writeProperty("g",n.g),t.writeProperty("b",n.b)}function ki(t){return t?Pi:Ci}function Oi(t){return"alpha"in t&&!0===t.alpha}function Li(t){return t?t=>Gr(t,"0x"):t=>Hr(t,"0x")}const Fi={id:"input-color-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;if(!("view"in e))return null;if("color"!==e.view)return null;const n=Or(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>Oi(t.params)?Ti:Mi,equals:Pr.equals,writer:t=>Di(Oi(t.params))},controller:t=>{const e=Oi(t.params),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0;return new _i(t.document,{expanded:null!=n&&n,formatter:Li(e),parser:Br,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}};function Ri(t){return Pr.isRgbaColorObject(t)}const Ii={id:"input-color-object",type:"input",accept:(t,e)=>{if(!Pr.isColorObject(t))return null;const n=Or(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>bi,equals:Pr.equals,writer:t=>ki(Ri(t.initialValue))},controller:t=>{const e=Pr.isRgbaColorObject(t.initialValue),n="expanded"in t.params?t.params.expanded:void 0,r="picker"in t.params?t.params.picker:void 0,o=e?Gr:Hr;return new _i(t.document,{expanded:null!=n&&n,formatter:o,parser:Br,pickerLayout:null!=r?r:"popup",supportsAlpha:e,value:t.value,viewProps:t.viewProps})}},Ni={id:"input-color-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;if("view"in e&&"text"===e.view)return null;if(!jr(t))return null;const n=Or(e);return n?{initialValue:t,params:n}:null},binding:{reader:t=>zr,equals:Pr.equals,writer:t=>{const e=jr(t.initialValue);if(!e)throw v.shouldNeverHappen();return Ai(e)}},controller:t=>{const e=jr(t.initialValue);if(!e)throw v.shouldNeverHappen();const n=$r(e),r="expanded"in t.params?t.params.expanded:void 0,o="picker"in t.params?t.params.picker:void 0;return new _i(t.document,{expanded:null!=r&&r,formatter:n,parser:Br,pickerLayout:null!=o?o:"popup",supportsAlpha:Ur(e),value:t.value,viewProps:t.viewProps})}};class ji{constructor(t){this.components=t.components,this.asm_=t.assembly}constrain(t){const e=this.asm_.toComponents(t).map(((t,e)=>{var n,r;return null!==(r=null===(n=this.components[e])||void 0===n?void 0:n.constrain(t))&&void 0!==r?r:t}));return this.asm_.fromComponents(e)}}const Bi=S("pndtxt");class Ui{constructor(t,e){this.textViews=e.textViews,this.element=t.createElement("div"),this.element.classList.add(Bi()),this.textViews.forEach((e=>{const n=t.createElement("div");n.classList.add(Bi("a")),n.appendChild(e.element),this.element.appendChild(n)}))}}function zi(t,e,n){return new Hn(t,{arrayPosition:0===n?"fst":n===e.axes.length-1?"lst":"mid",baseStep:e.axes[n].baseStep,parser:e.parser,props:e.axes[n].textProps,value:I(0,{constraint:e.axes[n].constraint}),viewProps:e.viewProps})}class Vi{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.acs_=e.axes.map(((n,r)=>zi(t,e,r))),this.acs_.forEach(((t,n)=>{Pn({primary:this.value,secondary:t.value,forward:p=>e.assembly.toComponents(p.rawValue)[n],backward:(p,s)=>{const t=e.assembly.toComponents(p.rawValue);return t[n]=s.rawValue,e.assembly.fromComponents(t)}})})),this.view=new Ui(t,{textViews:this.acs_.map((t=>t.view))})}}function Hi(t){return"step"in t&&!d(t.step)?new Ee(t.step):null}function Gi(t){return"max"in t&&!d(t.max)||"min"in t&&!d(t.min)?new Se({max:t.max,min:t.min}):null}function Wi(t){const e=[],n=Hi(t);n&&e.push(n);const r=Gi(t);r&&e.push(r);const o=nr(t.options);return o&&e.push(o),new be(e)}function Xi(t){const e=t?xe(t,Se):null;return e?[e.minValue,e.maxValue]:[void 0,void 0]}function Yi(t){const[e,n]=Xi(t);return[null!=e?e:0,null!=n?n:100]}const qi={id:"input-number",type:"input",accept:(t,e)=>{if("number"!=typeof t)return null;const p=H,n=G(e,{format:p.optional.function,max:p.optional.number,min:p.optional.number,options:p.optional.custom(Kn),step:p.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>yn,constraint:t=>Wi(t.params),writer:t=>$n},controller:t=>{var e,n;const r=t.value,o=t.constraint;if(o&&xe(o,we))return new Ae(t.document,{props:N.fromObject({options:null!==(e=rr(o))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps});const l=null!==(n="format"in t.params?t.params.format:void 0)&&void 0!==n?n:bn(ar(o,r.rawValue));if(o&&xe(o,Se)){const[e,n]=Yi(o);return new Qn(t.document,{baseStep:or(o),parser:gn,sliderProps:N.fromObject({maxValue:n,minValue:e}),textProps:N.fromObject({draggingScale:sr(o,r.rawValue),formatter:l}),value:r,viewProps:t.viewProps})}return new Hn(t.document,{baseStep:or(o),parser:gn,props:N.fromObject({draggingScale:sr(o,r.rawValue),formatter:l}),value:r,viewProps:t.viewProps})}};class Qi{constructor(t=0,e=0){this.x=t,this.y=e}getComponents(){return[this.x,this.y]}static isObject(t){if(d(t))return!1;const e=t.x,n=t.y;return"number"==typeof e&&"number"==typeof n}static equals(t,e){return t.x===e.x&&t.y===e.y}toObject(){return{x:this.x,y:this.y}}}const $i={toComponents:p=>p.getComponents(),fromComponents:t=>new Qi(...t)},Ki=S("p2d");class Ji{constructor(t,e){this.element=t.createElement("div"),this.element.classList.add(Ki()),e.viewProps.bindClassModifiers(this.element),T(e.expanded,P(this.element,Ki(void 0,"expanded")));const n=t.createElement("div");n.classList.add(Ki("h")),this.element.appendChild(n);const r=t.createElement("button");r.classList.add(Ki("b")),r.appendChild(ot(t,"p2dpad")),e.viewProps.bindDisabled(r),n.appendChild(r),this.buttonElement=r;const o=t.createElement("div");if(o.classList.add(Ki("t")),n.appendChild(o),this.textElement=o,"inline"===e.pickerLayout){const e=t.createElement("div");e.classList.add(Ki("p")),this.element.appendChild(e),this.pickerElement=e}else this.pickerElement=null}}const Zi=S("p2dp");class ta{constructor(t,e){this.onFoldableChange_=this.onFoldableChange_.bind(this),this.onValueChange_=this.onValueChange_.bind(this),this.invertsY_=e.invertsY,this.maxValue_=e.maxValue,this.element=t.createElement("div"),this.element.classList.add(Zi()),"popup"===e.layout&&this.element.classList.add(Zi(void 0,"p"));const n=t.createElement("div");n.classList.add(Zi("p")),e.viewProps.bindTabIndex(n),this.element.appendChild(n),this.padElement=n;const r=t.createElementNS(K,"svg");r.classList.add(Zi("g")),this.padElement.appendChild(r),this.svgElem_=r;const o=t.createElementNS(K,"line");o.classList.add(Zi("ax")),o.setAttributeNS(null,"x1","0"),o.setAttributeNS(null,"y1","50%"),o.setAttributeNS(null,"x2","100%"),o.setAttributeNS(null,"y2","50%"),this.svgElem_.appendChild(o);const l=t.createElementNS(K,"line");l.classList.add(Zi("ax")),l.setAttributeNS(null,"x1","50%"),l.setAttributeNS(null,"y1","0"),l.setAttributeNS(null,"x2","50%"),l.setAttributeNS(null,"y2","100%"),this.svgElem_.appendChild(l);const c=t.createElementNS(K,"line");c.classList.add(Zi("l")),c.setAttributeNS(null,"x1","50%"),c.setAttributeNS(null,"y1","50%"),this.svgElem_.appendChild(c),this.lineElem_=c;const h=t.createElement("div");h.classList.add(Zi("m")),this.padElement.appendChild(h),this.markerElem_=h,e.value.emitter.on("change",this.onValueChange_),this.value=e.value,this.update_()}get allFocusableElements(){return[this.padElement]}update_(){const[t,e]=this.value.rawValue.getComponents(),n=this.maxValue_,r=Nn(t,-n,+n,0,100),o=Nn(e,-n,+n,0,100),l=this.invertsY_?100-o:o;this.lineElem_.setAttributeNS(null,"x2",`${r}%`),this.lineElem_.setAttributeNS(null,"y2",`${l}%`),this.markerElem_.style.left=`${r}%`,this.markerElem_.style.top=`${l}%`}onValueChange_(){this.update_()}onFoldableChange_(){this.update_()}}function ea(t,e,n){return[Cn(e[0],On(t)),Cn(e[1],kn(t))*(n?1:-1)]}class na{constructor(t,e){this.onPadKeyDown_=this.onPadKeyDown_.bind(this),this.onPadKeyUp_=this.onPadKeyUp_.bind(this),this.onPointerDown_=this.onPointerDown_.bind(this),this.onPointerMove_=this.onPointerMove_.bind(this),this.onPointerUp_=this.onPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.baseSteps_=e.baseSteps,this.maxValue_=e.maxValue,this.invertsY_=e.invertsY,this.view=new ta(t,{invertsY:this.invertsY_,layout:e.layout,maxValue:this.maxValue_,value:this.value,viewProps:this.viewProps}),this.ptHandler_=new In(this.view.padElement),this.ptHandler_.emitter.on("down",this.onPointerDown_),this.ptHandler_.emitter.on("move",this.onPointerMove_),this.ptHandler_.emitter.on("up",this.onPointerUp_),this.view.padElement.addEventListener("keydown",this.onPadKeyDown_),this.view.padElement.addEventListener("keyup",this.onPadKeyUp_)}handlePointerEvent_(t,e){if(!t.point)return;const n=this.maxValue_,r=Nn(t.point.x,0,t.bounds.width,-n,+n),o=Nn(this.invertsY_?t.bounds.height-t.point.y:t.point.y,0,t.bounds.height,-n,+n);this.value.setRawValue(new Qi(r,o),e)}onPointerDown_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerMove_(t){this.handlePointerEvent_(t.data,{forceEmit:!1,last:!1})}onPointerUp_(t){this.handlePointerEvent_(t.data,{forceEmit:!0,last:!0})}onPadKeyDown_(t){Fn(t.key)&&t.preventDefault();const[e,n]=ea(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(new Qi(this.value.rawValue.x+e,this.value.rawValue.y+n),{forceEmit:!1,last:!1})}onPadKeyUp_(t){const[e,n]=ea(t,this.baseSteps_,this.invertsY_);0===e&&0===n||this.value.setRawValue(this.value.rawValue,{forceEmit:!0,last:!0})}}class ra{constructor(t,e){var n,r;this.onPopupChildBlur_=this.onPopupChildBlur_.bind(this),this.onPopupChildKeydown_=this.onPopupChildKeydown_.bind(this),this.onPadButtonBlur_=this.onPadButtonBlur_.bind(this),this.onPadButtonClick_=this.onPadButtonClick_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.foldable_=bt.create(e.expanded),this.popC_="popup"===e.pickerLayout?new Ce(t,{viewProps:this.viewProps}):null;const o=new na(t,{baseSteps:[e.axes[0].baseStep,e.axes[1].baseStep],invertsY:e.invertsY,layout:e.pickerLayout,maxValue:e.maxValue,value:this.value,viewProps:this.viewProps});o.view.allFocusableElements.forEach((t=>{t.addEventListener("blur",this.onPopupChildBlur_),t.addEventListener("keydown",this.onPopupChildKeydown_)})),this.pickerC_=o,this.textC_=new Vi(t,{assembly:$i,axes:e.axes,parser:e.parser,value:this.value,viewProps:this.viewProps}),this.view=new Ji(t,{expanded:this.foldable_.value("expanded"),pickerLayout:e.pickerLayout,viewProps:this.viewProps}),this.view.textElement.appendChild(this.textC_.view.element),null===(n=this.view.buttonElement)||void 0===n||n.addEventListener("blur",this.onPadButtonBlur_),null===(r=this.view.buttonElement)||void 0===r||r.addEventListener("click",this.onPadButtonClick_),this.popC_?(this.view.element.appendChild(this.popC_.view.element),this.popC_.view.element.appendChild(this.pickerC_.view.element),Pn({primary:this.foldable_.value("expanded"),secondary:this.popC_.shows,forward:p=>p.rawValue,backward:(t,s)=>s.rawValue})):this.view.pickerElement&&(this.view.pickerElement.appendChild(this.pickerC_.view.element),St(this.foldable_,this.view.pickerElement))}onPadButtonBlur_(t){if(!this.popC_)return;const e=this.view.element,n=h(t.relatedTarget);n&&e.contains(n)||(this.popC_.shows.rawValue=!1)}onPadButtonClick_(){this.foldable_.set("expanded",!this.foldable_.get("expanded")),this.foldable_.get("expanded")&&this.pickerC_.view.allFocusableElements[0].focus()}onPopupChildBlur_(t){if(!this.popC_)return;const e=this.popC_.view.element,n=ht(t);n&&e.contains(n)||n&&n===this.view.buttonElement&&!tt(e.ownerDocument)||(this.popC_.shows.rawValue=!1)}onPopupChildKeydown_(t){this.popC_?"Escape"===t.key&&(this.popC_.shows.rawValue=!1):this.view.pickerElement&&"Escape"===t.key&&this.view.buttonElement.focus()}}function ia(t){return Qi.isObject(t)?new Qi(t.x,t.y):new Qi}function aa(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y)}function oa(t){if(!t)return;const e=[];return d(t.step)||e.push(new Ee(t.step)),d(t.max)&&d(t.min)||e.push(new Se({max:t.max,min:t.min})),new be(e)}function sa(t){return new ji({assembly:$i,components:[oa("x"in t?t.x:void 0),oa("y"in t?t.y:void 0)]})}function ua(t,e){const n=t&&xe(t,Se);if(n)return Math.max(Math.abs(n.minValue||0),Math.abs(n.maxValue||0));const r=or(t);return Math.max(10*Math.abs(r),10*Math.abs(e))}function la(t,e){const n=e instanceof ji?e.components[0]:void 0,r=e instanceof ji?e.components[1]:void 0,o=ua(n,t.x),l=ua(r,t.y);return Math.max(o,l)}function ca(t,e){return{baseStep:or(e),constraint:e,textProps:N.fromObject({draggingScale:sr(e,t),formatter:bn(ar(e,t))})}}function ha(t){if(!("y"in t))return!1;const e=t.y;return!!e&&"inverted"in e&&!!e.inverted}const da={id:"input-point2d",type:"input",accept:(t,e)=>{if(!Qi.isObject(t))return null;const p=H,n=G(e,{expanded:p.optional.boolean,picker:p.optional.custom(Jn),x:p.optional.custom(Zn),y:p.optional.object({inverted:p.optional.boolean,max:p.optional.number,min:p.optional.number,step:p.optional.number})});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ia,constraint:t=>sa(t.params),equals:Qi.equals,writer:t=>aa},controller:t=>{const e=t.document,n=t.value,r=t.constraint;if(!(r instanceof ji))throw v.shouldNeverHappen();const o="expanded"in t.params?t.params.expanded:void 0,l="picker"in t.params?t.params.picker:void 0;return new ra(e,{axes:[ca(n.rawValue.x,r.components[0]),ca(n.rawValue.y,r.components[1])],expanded:null!=o&&o,invertsY:ha(t.params),maxValue:la(n.rawValue,r),parser:gn,pickerLayout:null!=l?l:"popup",value:n,viewProps:t.viewProps})}};class pa{constructor(t=0,e=0,n=0){this.x=t,this.y=e,this.z=n}getComponents(){return[this.x,this.y,this.z]}static isObject(t){if(d(t))return!1;const e=t.x,n=t.y,r=t.z;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z}toObject(){return{x:this.x,y:this.y,z:this.z}}}const fa={toComponents:p=>p.getComponents(),fromComponents:t=>new pa(...t)};function ma(t){return pa.isObject(t)?new pa(t.x,t.y,t.z):new pa}function va(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z)}function ga(t){if(!t)return;const e=[];return d(t.step)||e.push(new Ee(t.step)),d(t.max)&&d(t.min)||e.push(new Se({max:t.max,min:t.min})),new be(e)}function ya(t){return new ji({assembly:fa,components:[ga("x"in t?t.x:void 0),ga("y"in t?t.y:void 0),ga("z"in t?t.z:void 0)]})}function _a(t,e){return{baseStep:or(e),constraint:e,textProps:N.fromObject({draggingScale:sr(e,t),formatter:bn(ar(e,t))})}}const ba={id:"input-point3d",type:"input",accept:(t,e)=>{if(!pa.isObject(t))return null;const p=H,n=G(e,{x:p.optional.custom(Zn),y:p.optional.custom(Zn),z:p.optional.custom(Zn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>ma,constraint:t=>ya(t.params),equals:pa.equals,writer:t=>va},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof ji))throw v.shouldNeverHappen();return new Vi(t.document,{assembly:fa,axes:[_a(e.rawValue.x,n.components[0]),_a(e.rawValue.y,n.components[1]),_a(e.rawValue.z,n.components[2])],parser:gn,value:e,viewProps:t.viewProps})}};class xa{constructor(t=0,e=0,n=0,r=0){this.x=t,this.y=e,this.z=n,this.w=r}getComponents(){return[this.x,this.y,this.z,this.w]}static isObject(t){if(d(t))return!1;const e=t.x,n=t.y,r=t.z,o=t.w;return"number"==typeof e&&"number"==typeof n&&"number"==typeof r&&"number"==typeof o}static equals(t,e){return t.x===e.x&&t.y===e.y&&t.z===e.z&&t.w===e.w}toObject(){return{x:this.x,y:this.y,z:this.z,w:this.w}}}const wa={toComponents:p=>p.getComponents(),fromComponents:t=>new xa(...t)};function Sa(t){return xa.isObject(t)?new xa(t.x,t.y,t.z,t.w):new xa}function Ea(t,e){t.writeProperty("x",e.x),t.writeProperty("y",e.y),t.writeProperty("z",e.z),t.writeProperty("w",e.w)}function Ma(t){if(!t)return;const e=[];return d(t.step)||e.push(new Ee(t.step)),d(t.max)&&d(t.min)||e.push(new Se({max:t.max,min:t.min})),new be(e)}function Ta(t){return new ji({assembly:wa,components:[Ma("x"in t?t.x:void 0),Ma("y"in t?t.y:void 0),Ma("z"in t?t.z:void 0),Ma("w"in t?t.w:void 0)]})}function Aa(t,e){return{baseStep:or(e),constraint:e,textProps:N.fromObject({draggingScale:sr(e,t),formatter:bn(ar(e,t))})}}const Da={id:"input-point4d",type:"input",accept:(t,e)=>{if(!xa.isObject(t))return null;const p=H,n=G(e,{x:p.optional.custom(Zn),y:p.optional.custom(Zn),z:p.optional.custom(Zn),w:p.optional.custom(Zn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Sa,constraint:t=>Ta(t.params),equals:xa.equals,writer:t=>Ea},controller:t=>{const e=t.value,n=t.constraint;if(!(n instanceof ji))throw v.shouldNeverHappen();return new Vi(t.document,{assembly:wa,axes:e.rawValue.getComponents().map(((t,e)=>Aa(t,n.components[e]))),parser:gn,value:e,viewProps:t.viewProps})}};function Pa(t){const e=[],n=nr(t.options);return n&&e.push(n),new be(e)}const Ca={id:"input-string",type:"input",accept:(t,e)=>{if("string"!=typeof t)return null;const n=G(e,{options:H.optional.custom(Kn)});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Sn,constraint:t=>Pa(t.params),writer:t=>$n},controller:t=>{var e;const n=t.document,r=t.value,o=t.constraint;return o&&xe(o,we)?new Ae(n,{props:N.fromObject({options:null!==(e=rr(o))&&void 0!==e?e:[]}),value:r,viewProps:t.viewProps}):new Le(n,{parser:t=>t,props:N.fromObject({formatter:En}),value:r,viewProps:t.viewProps})}},ka={monitor:{defaultInterval:200,defaultLineCount:3}},Oa=S("mll");class La{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Oa()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("textarea");n.classList.add(Oa("i")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,n.readOnly=!0,e.viewProps.bindDisabled(n),this.element.appendChild(n),this.textareaElem_=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.textareaElem_,e=t.scrollTop===t.scrollHeight-t.clientHeight,n=[];this.value.rawValue.forEach((t=>{void 0!==t&&n.push(this.formatter_(t))})),t.textContent=n.join("\n"),e&&(t.scrollTop=t.scrollHeight)}onValueUpdate_(){this.update_()}}class Fa{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new La(t,{formatter:e.formatter,lineCount:e.lineCount,value:this.value,viewProps:this.viewProps})}}const Ra=S("sgl");class Ia{constructor(t,e){this.onValueUpdate_=this.onValueUpdate_.bind(this),this.formatter_=e.formatter,this.element=t.createElement("div"),this.element.classList.add(Ra()),e.viewProps.bindClassModifiers(this.element);const n=t.createElement("input");n.classList.add(Ra("i")),n.readOnly=!0,n.type="text",e.viewProps.bindDisabled(n),this.element.appendChild(n),this.inputElement=n,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}update_(){const t=this.value.rawValue,e=t[t.length-1];this.inputElement.value=void 0!==e?this.formatter_(e):""}onValueUpdate_(){this.update_()}}class Na{constructor(t,e){this.value=e.value,this.viewProps=e.viewProps,this.view=new Ia(t,{formatter:e.formatter,value:this.value,viewProps:this.viewProps})}}const ja={id:"monitor-bool",type:"monitor",accept:(t,e)=>{if("boolean"!=typeof t)return null;const n=G(e,{lineCount:H.optional.number});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Re},controller:t=>{var e;return 1===t.value.rawValue.length?new Na(t.document,{formatter:Ie,value:t.value,viewProps:t.viewProps}):new Fa(t.document,{formatter:Ie,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ka.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}};class Ba{constructor(){this.emitter=new x,this.index_=-1}get index(){return this.index_}set index(t){this.index_!==t&&(this.index_=t,this.emitter.emit("change",{index:t,sender:this}))}}const Ua=S("grl");class za{constructor(t,e){this.onCursorChange_=this.onCursorChange_.bind(this),this.onValueUpdate_=this.onValueUpdate_.bind(this),this.element=t.createElement("div"),this.element.classList.add(Ua()),e.viewProps.bindClassModifiers(this.element),this.formatter_=e.formatter,this.minValue_=e.minValue,this.maxValue_=e.maxValue,this.cursor_=e.cursor,this.cursor_.emitter.on("change",this.onCursorChange_);const n=t.createElementNS(K,"svg");n.classList.add(Ua("g")),n.style.height=`calc(var(--bld-us) * ${e.lineCount})`,this.element.appendChild(n),this.svgElem_=n;const r=t.createElementNS(K,"polyline");this.svgElem_.appendChild(r),this.lineElem_=r;const o=t.createElement("div");o.classList.add(Ua("t"),S("tt")()),this.element.appendChild(o),this.tooltipElem_=o,e.value.emitter.on("change",this.onValueUpdate_),this.value=e.value,this.update_()}get graphElement(){return this.svgElem_}update_(){const t=this.svgElem_.getBoundingClientRect(),e=this.value.rawValue.length-1,n=this.minValue_,r=this.maxValue_,o=[];this.value.rawValue.forEach(((l,c)=>{if(void 0===l)return;const h=Nn(c,0,e,0,t.width),d=Nn(l,n,r,t.height,0);o.push([h,d].join(","))})),this.lineElem_.setAttributeNS(null,"points",o.join(" "));const l=this.tooltipElem_,c=this.value.rawValue[this.cursor_.index];if(void 0===c)return void l.classList.remove(Ua("t","a"));const h=Nn(this.cursor_.index,0,e,0,t.width),d=Nn(c,n,r,t.height,0);l.style.left=`${h}px`,l.style.top=`${d}px`,l.textContent=`${this.formatter_(c)}`,l.classList.contains(Ua("t","a"))||(l.classList.add(Ua("t","a"),Ua("t","in")),J(l),l.classList.remove(Ua("t","in")))}onValueUpdate_(){this.update_()}onCursorChange_(){this.update_()}}class Va{constructor(t,e){if(this.onGraphMouseMove_=this.onGraphMouseMove_.bind(this),this.onGraphMouseLeave_=this.onGraphMouseLeave_.bind(this),this.onGraphPointerDown_=this.onGraphPointerDown_.bind(this),this.onGraphPointerMove_=this.onGraphPointerMove_.bind(this),this.onGraphPointerUp_=this.onGraphPointerUp_.bind(this),this.value=e.value,this.viewProps=e.viewProps,this.cursor_=new Ba,this.view=new za(t,{cursor:this.cursor_,formatter:e.formatter,lineCount:e.lineCount,maxValue:e.maxValue,minValue:e.minValue,value:this.value,viewProps:this.viewProps}),tt(t)){const t=new In(this.view.element);t.emitter.on("down",this.onGraphPointerDown_),t.emitter.on("move",this.onGraphPointerMove_),t.emitter.on("up",this.onGraphPointerUp_)}else this.view.element.addEventListener("mousemove",this.onGraphMouseMove_),this.view.element.addEventListener("mouseleave",this.onGraphMouseLeave_)}onGraphMouseLeave_(){this.cursor_.index=-1}onGraphMouseMove_(t){const e=this.view.element.getBoundingClientRect();this.cursor_.index=Math.floor(Nn(t.offsetX,0,e.width,0,this.value.rawValue.length))}onGraphPointerDown_(t){this.onGraphPointerMove_(t)}onGraphPointerMove_(t){t.data.point?this.cursor_.index=Math.floor(Nn(t.data.point.x,0,t.data.bounds.width,0,this.value.rawValue.length)):this.cursor_.index=-1}onGraphPointerUp_(){this.cursor_.index=-1}}function Ha(t){return"format"in t&&!d(t.format)?t.format:bn(2)}function Ga(t){var e;return 1===t.value.rawValue.length?new Na(t.document,{formatter:Ha(t.params),value:t.value,viewProps:t.viewProps}):new Fa(t.document,{formatter:Ha(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ka.monitor.defaultLineCount,value:t.value,viewProps:t.viewProps})}function Wa(t){var e,n,r;return new Va(t.document,{formatter:Ha(t.params),lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ka.monitor.defaultLineCount,maxValue:null!==(n="max"in t.params?t.params.max:null)&&void 0!==n?n:100,minValue:null!==(r="min"in t.params?t.params.min:null)&&void 0!==r?r:0,value:t.value,viewProps:t.viewProps})}function Xa(t){return"view"in t&&"graph"===t.view}const Ya={id:"monitor-number",type:"monitor",accept:(t,e)=>{if("number"!=typeof t)return null;const p=H,n=G(e,{format:p.optional.function,lineCount:p.optional.number,max:p.optional.number,min:p.optional.number,view:p.optional.string});return n?{initialValue:t,params:n}:null},binding:{defaultBufferSize:t=>Xa(t)?64:1,reader:t=>yn},controller:t=>Xa(t.params)?Wa(t):Ga(t)},qa={id:"monitor-string",type:"monitor",accept:(t,e)=>{if("string"!=typeof t)return null;const p=H,n=G(e,{lineCount:p.optional.number,multiline:p.optional.boolean});return n?{initialValue:t,params:n}:null},binding:{reader:t=>Sn},controller:t=>{var e;const n=t.value;return n.rawValue.length>1||"multiline"in t.params&&t.params.multiline?new Fa(t.document,{formatter:En,lineCount:null!==(e=t.params.lineCount)&&void 0!==e?e:ka.monitor.defaultLineCount,value:n,viewProps:t.viewProps}):new Na(t.document,{formatter:En,value:n,viewProps:t.viewProps})}};class Qa{constructor(t){this.onValueChange_=this.onValueChange_.bind(this),this.reader=t.reader,this.writer=t.writer,this.emitter=new x,this.value=t.value,this.value.emitter.on("change",this.onValueChange_),this.target=t.target,this.read()}read(){const t=this.target.read();void 0!==t&&(this.value.rawValue=this.reader(t))}write_(t){this.writer(this.target,t)}onValueChange_(t){this.write_(t.rawValue),this.emitter.emit("change",{options:t.options,rawValue:t.rawValue,sender:this})}}function $a(t,e){const n=t.accept(e.target.read(),e.params);if(d(n))return null;const p=H,r={target:e.target,initialValue:n.initialValue,params:n.params},o=t.binding.reader(r),l=t.binding.constraint?t.binding.constraint(r):void 0,c=I(o(n.initialValue),{constraint:l,equals:t.binding.equals}),h=new Qa({reader:o,target:e.target,value:c,writer:t.binding.writer(r)}),f=p.optional.boolean(e.params.disabled).value,m=p.optional.boolean(e.params.hidden).value,v=t.controller({constraint:l,document:e.document,initialValue:n.initialValue,params:n.params,value:h.value,viewProps:oe.create({disabled:f,hidden:m})}),label=p.optional.string(e.params.label).value;return new kt(e.document,{binding:h,blade:_t(),props:N.fromObject({label:label||e.target.key}),valueController:v})}class Ka{constructor(t){this.onTick_=this.onTick_.bind(this),this.reader_=t.reader,this.target=t.target,this.emitter=new x,this.value=t.value,this.ticker=t.ticker,this.ticker.emitter.on("tick",this.onTick_),this.read()}dispose(){this.ticker.dispose()}read(){const t=this.target.read();if(void 0===t)return;const e=this.value.rawValue,n=this.reader_(t);this.value.rawValue=Dn(e,n),this.emitter.emit("update",{rawValue:n,sender:this})}onTick_(t){this.read()}}function Ja(t,e){return 0===e?new ye:new _e(t,null!=e?e:ka.monitor.defaultInterval)}function Za(t,e){var n,r,o;const l=H,c=t.accept(e.target.read(),e.params);if(d(c))return null;const h={target:e.target,initialValue:c.initialValue,params:c.params},f=t.binding.reader(h),m=null!==(r=null!==(n=l.optional.number(e.params.bufferSize).value)&&void 0!==n?n:t.binding.defaultBufferSize&&t.binding.defaultBufferSize(c.params))&&void 0!==r?r:1,v=l.optional.number(e.params.interval).value,y=new Ka({reader:f,target:e.target,ticker:Ja(e.document,v),value:Tn(m)}),_=l.optional.boolean(e.params.disabled).value,x=l.optional.boolean(e.params.hidden).value,w=t.controller({document:e.document,params:c.params,value:y.value,viewProps:oe.create({disabled:_,hidden:x})}),label=null!==(o=l.optional.string(e.params.label).value)&&void 0!==o?o:e.target.key;return new Lt(e.document,{binding:y,blade:_t(),props:N.fromObject({label:label}),valueController:w})}class to{constructor(){this.pluginsMap_={blades:[],inputs:[],monitors:[]}}getAll(){return[...this.pluginsMap_.blades,...this.pluginsMap_.inputs,...this.pluginsMap_.monitors]}register(t){"blade"===t.type?this.pluginsMap_.blades.unshift(t):"input"===t.type?this.pluginsMap_.inputs.unshift(t):"monitor"===t.type&&this.pluginsMap_.monitors.unshift(t)}createInput(t,e,n){if(d(e.read()))throw new v({context:{key:e.key},type:"nomatchingcontroller"});const r=this.pluginsMap_.inputs.reduce(((r,o)=>r||$a(o,{document:t,target:e,params:n})),null);if(r)return r;throw new v({context:{key:e.key},type:"nomatchingcontroller"})}createMonitor(t,e,n){const r=this.pluginsMap_.monitors.reduce(((r,o)=>r||Za(o,{document:t,params:n,target:e})),null);if(r)return r;throw new v({context:{key:e.key},type:"nomatchingcontroller"})}createBlade(t,e){const n=this.pluginsMap_.blades.reduce(((n,r)=>n||ge(r,{document:t,params:e})),null);if(!n)throw new v({type:"nomatchingview",context:{params:e}});return n}createBladeApi(t){if(t instanceof kt)return new Ct(t);if(t instanceof Lt)return new Ot(t);if(t instanceof Yt)return new Nt(t,this);const e=this.pluginsMap_.blades.reduce(((e,n)=>e||n.api({controller:t,pool:this})),null);if(!e)throw v.shouldNeverHappen();return e}}function eo(){const t=new to;return[da,ba,Da,Ca,qi,Ni,Ii,Fi,pr,ja,qa,Ya,gt,Kt,re,ve].forEach((p=>{t.register(p)})),t}class no extends n{constructor(t){super(t),this.emitter_=new x,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new o(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}get options(){return this.controller_.valueController.props.get("options")}set options(t){this.controller_.valueController.props.set("options",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class ro extends n{constructor(t){super(t),this.emitter_=new x,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new o(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}get maxValue(){return this.controller_.valueController.sliderController.props.get("maxValue")}set maxValue(t){this.controller_.valueController.sliderController.props.set("maxValue",t)}get minValue(){return this.controller_.valueController.sliderController.props.get("minValue")}set minValue(t){this.controller_.valueController.sliderController.props.set("minValue",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}class io extends n{constructor(t){super(t),this.emitter_=new x,this.controller_.valueController.value.emitter.on("change",(t=>{this.emitter_.emit("change",{event:new o(this,t.rawValue)})}))}get label(){return this.controller_.props.get("label")}set label(label){this.controller_.props.set("label",label)}get formatter(){return this.controller_.valueController.props.get("formatter")}set formatter(t){this.controller_.valueController.props.set("formatter",t)}get value(){return this.controller_.valueController.value.rawValue}set value(t){this.controller_.valueController.value.rawValue=t}on(t,e){const n=e.bind(this);return this.emitter_.on(t,(t=>{n(t.event)})),this}}const ao={id:"list",type:"blade",accept(t){const p=H,e=G(t,{options:p.required.custom(Kn),value:p.required.raw,view:p.required.constant("list"),label:p.optional.string});return e?{params:e}:null},controller(t){const e=new Ae(t.document,{props:N.fromObject({options:er(t.params.options)}),value:I(t.params.value),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:N.fromObject({label:t.params.label}),valueController:e})},api:t=>t.controller instanceof Jt&&t.controller.valueController instanceof Ae?new no(t.controller):null};function oo(t){return t.reduce(((t,e)=>Object.assign(t,{[e.presetKey]:e.read()})),{})}function so(t,e){t.forEach((t=>{const n=e[t.presetKey];void 0!==n&&t.write(n)}))}class uo extends jt{constructor(t,e){super(t,e)}get element(){return this.controller_.view.element}importPreset(t){so(this.controller_.rackController.rack.find(kt).map((t=>t.binding.target)),t),this.refresh()}exportPreset(){return oo(this.controller_.rackController.rack.find(kt).map((t=>t.binding.target)))}refresh(){this.controller_.rackController.rack.find(kt).forEach((t=>{t.binding.read()})),this.controller_.rackController.rack.find(Lt).forEach((t=>{t.binding.read()}))}}class lo extends $t{constructor(t,e){super(t,{expanded:e.expanded,blade:e.blade,props:e.props,root:!0,viewProps:e.viewProps})}}const co={id:"slider",type:"blade",accept(t){const p=H,e=G(t,{max:p.required.number,min:p.required.number,view:p.required.constant("slider"),format:p.optional.function,label:p.optional.string,value:p.optional.number});return e?{params:e}:null},controller(t){var e,n;const r=null!==(e=t.params.value)&&void 0!==e?e:0,o=new Qn(t.document,{baseStep:1,parser:gn,sliderProps:N.fromObject({maxValue:t.params.max,minValue:t.params.min}),textProps:N.fromObject({draggingScale:sr(void 0,r),formatter:null!==(n=t.params.format)&&void 0!==n?n:_n}),value:I(r),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:N.fromObject({label:t.params.label}),valueController:o})},api:t=>t.controller instanceof Jt&&t.controller.valueController instanceof Qn?new ro(t.controller):null},ho={id:"text",type:"blade",accept(t){const p=H,e=G(t,{parse:p.required.function,value:p.required.raw,view:p.required.constant("text"),format:p.optional.function,label:p.optional.string});return e?{params:e}:null},controller(t){var e;const n=new Le(t.document,{parser:t.params.parse,props:N.fromObject({formatter:null!==(e=t.params.format)&&void 0!==e?e:t=>String(t)}),value:I(t.params.value),viewProps:t.viewProps});return new Jt(t.document,{blade:t.blade,props:N.fromObject({label:t.params.label}),valueController:n})},api:t=>t.controller instanceof Jt&&t.controller.valueController instanceof Le?new io(t.controller):null};function po(t){const e=t.createElement("div");return e.classList.add(S("dfw")()),t.body&&t.body.appendChild(e),e}function fo(t,e,n){if(t.querySelector(`style[data-tp-style=${e}]`))return;const r=t.createElement("style");r.dataset.tpStyle=e,r.textContent=n,t.head.appendChild(r)}class mo extends uo{constructor(t){var e;const n=t||{},r=null!==(e=n.document)&&void 0!==e?e:nt(),o=eo();super(new lo(r,{expanded:n.expanded,blade:_t(),props:N.fromObject({title:n.title}),viewProps:oe.create()}),o),this.pool_=o,this.containerElem_=n.container||po(r),this.containerElem_.appendChild(this.element),this.doc_=r,this.usesDefaultWrapper_=!n.container,this.setUpDefaultPlugins_()}get document(){if(!this.doc_)throw v.alreadyDisposed();return this.doc_}dispose(){const t=this.containerElem_;if(!t)throw v.alreadyDisposed();if(this.usesDefaultWrapper_){const e=t.parentElement;e&&e.removeChild(t)}this.containerElem_=null,this.doc_=null,super.dispose()}registerPlugin(t){("plugin"in t?[t.plugin]:"plugins"in t?t.plugins:[]).forEach((p=>{this.pool_.register(p),this.embedPluginStyle_(p)}))}embedPluginStyle_(t){t.css&&fo(this.document,`plugin-${t.id}`,t.css)}setUpDefaultPlugins_(){fo(this.document,"default",".tp-lstv_s,.tp-btnv_b,.tp-p2dv_b,.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i,.tp-grlv_g,.tp-sglv_i,.tp-mllv_i,.tp-fldv_b,.tp-rotv_b,.tp-ckbv_i,.tp-coltxtv_ms,.tp-tbiv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;font-family:inherit;font-size:inherit;font-weight:inherit;margin:0;outline:none;padding:0}.tp-lstv_s,.tp-btnv_b,.tp-p2dv_b{background-color:var(--btn-bg);border-radius:var(--elm-br);color:var(--btn-fg);cursor:pointer;display:block;font-weight:bold;height:var(--bld-us);line-height:var(--bld-us);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.tp-lstv_s:hover,.tp-btnv_b:hover,.tp-p2dv_b:hover{background-color:var(--btn-bg-h)}.tp-lstv_s:focus,.tp-btnv_b:focus,.tp-p2dv_b:focus{background-color:var(--btn-bg-f)}.tp-lstv_s:active,.tp-btnv_b:active,.tp-p2dv_b:active{background-color:var(--btn-bg-a)}.tp-lstv_s:disabled,.tp-btnv_b:disabled,.tp-p2dv_b:disabled{opacity:0.5}.tp-colswv_sw,.tp-p2dpv_p,.tp-txtv_i{background-color:var(--in-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--in-fg);font-family:inherit;height:var(--bld-us);line-height:var(--bld-us);min-width:0;width:100%}.tp-colswv_sw:hover,.tp-p2dpv_p:hover,.tp-txtv_i:hover{background-color:var(--in-bg-h)}.tp-colswv_sw:focus,.tp-p2dpv_p:focus,.tp-txtv_i:focus{background-color:var(--in-bg-f)}.tp-colswv_sw:active,.tp-p2dpv_p:active,.tp-txtv_i:active{background-color:var(--in-bg-a)}.tp-colswv_sw:disabled,.tp-p2dpv_p:disabled,.tp-txtv_i:disabled{opacity:0.5}.tp-grlv_g,.tp-sglv_i,.tp-mllv_i{background-color:var(--mo-bg);border-radius:var(--elm-br);box-sizing:border-box;color:var(--mo-fg);height:var(--bld-us);width:100%}.tp-rotv{--font-family: var(--tp-font-family, Roboto Mono,Source Code Pro,Menlo,Courier,monospace);--bs-br: var(--tp-base-border-radius, 6px);--cnt-h-p: var(--tp-container-horizontal-padding, 4px);--cnt-v-p: var(--tp-container-vertical-padding, 4px);--elm-br: var(--tp-element-border-radius, 2px);--bld-s: var(--tp-blade-spacing, 4px);--bld-us: var(--tp-blade-unit-size, 20px);--bs-bg: var(--tp-base-background-color, #2f3137);--bs-sh: var(--tp-base-shadow-color, rgba(0,0,0,0.2));--btn-bg: var(--tp-button-background-color, #adafb8);--btn-bg-a: var(--tp-button-background-color-active, #d6d7db);--btn-bg-f: var(--tp-button-background-color-focus, #c8cad0);--btn-bg-h: var(--tp-button-background-color-hover, #bbbcc4);--btn-fg: var(--tp-button-foreground-color, #2f3137);--cnt-bg: var(--tp-container-background-color, rgba(187,188,196,0.1));--cnt-bg-a: var(--tp-container-background-color-active, rgba(187,188,196,0.25));--cnt-bg-f: var(--tp-container-background-color-focus, rgba(187,188,196,0.2));--cnt-bg-h: var(--tp-container-background-color-hover, rgba(187,188,196,0.15));--cnt-fg: var(--tp-container-foreground-color, #bbbcc4);--in-bg: var(--tp-input-background-color, rgba(187,188,196,0.1));--in-bg-a: var(--tp-input-background-color-active, rgba(187,188,196,0.25));--in-bg-f: var(--tp-input-background-color-focus, rgba(187,188,196,0.2));--in-bg-h: var(--tp-input-background-color-hover, rgba(187,188,196,0.15));--in-fg: var(--tp-input-foreground-color, #bbbcc4);--lbl-fg: var(--tp-label-foreground-color, rgba(187,188,196,0.7));--mo-bg: var(--tp-monitor-background-color, rgba(0,0,0,0.2));--mo-fg: var(--tp-monitor-foreground-color, rgba(187,188,196,0.7));--grv-fg: var(--tp-groove-foreground-color, rgba(0,0,0,0.2))}.tp-fldv_c>.tp-cntv.tp-v-lst,.tp-tabv_c .tp-brkv>.tp-cntv.tp-v-lst,.tp-rotv_c>.tp-cntv.tp-v-lst{margin-bottom:calc(-1 * var(--cnt-v-p))}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_c,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_c{border-bottom-left-radius:0}.tp-fldv_c>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-v-lst .tp-fldv_b,.tp-rotv_c>.tp-fldv.tp-v-lst .tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c>*:not(.tp-v-fst),.tp-tabv_c .tp-brkv>*:not(.tp-v-fst),.tp-rotv_c>*:not(.tp-v-fst){margin-top:var(--bld-s)}.tp-fldv_c>.tp-sprv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-fst),.tp-rotv_c>.tp-sprv:not(.tp-v-fst),.tp-fldv_c>.tp-cntv:not(.tp-v-fst),.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-fst),.tp-rotv_c>.tp-cntv:not(.tp-v-fst){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-sprv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-sprv+*:not(.tp-v-hidden),.tp-fldv_c>.tp-cntv+*:not(.tp-v-hidden),.tp-tabv_c .tp-brkv>.tp-cntv+*:not(.tp-v-hidden),.tp-rotv_c>.tp-cntv+*:not(.tp-v-hidden){margin-top:var(--cnt-v-p)}.tp-fldv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-tabv_c .tp-brkv>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-rotv_c>.tp-sprv:not(.tp-v-hidden)+.tp-sprv,.tp-fldv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv:not(.tp-v-hidden)+.tp-cntv,.tp-rotv_c>.tp-cntv:not(.tp-v-hidden)+.tp-cntv{margin-top:0}.tp-fldv_c>.tp-cntv,.tp-tabv_c .tp-brkv>.tp-cntv{margin-left:4px}.tp-fldv_c>.tp-fldv>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv>.tp-fldv_b{border-top-left-radius:var(--elm-br);border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-fldv.tp-fldv-expanded>.tp-fldv_b,.tp-tabv_c .tp-brkv>.tp-fldv.tp-fldv-expanded>.tp-fldv_b{border-bottom-left-radius:0}.tp-fldv_c .tp-fldv>.tp-fldv_c,.tp-tabv_c .tp-brkv .tp-fldv>.tp-fldv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_c>.tp-tabv>.tp-tabv_i,.tp-tabv_c .tp-brkv>.tp-tabv>.tp-tabv_i{border-top-left-radius:var(--elm-br)}.tp-fldv_c .tp-tabv>.tp-tabv_c,.tp-tabv_c .tp-brkv .tp-tabv>.tp-tabv_c{border-bottom-left-radius:var(--elm-br)}.tp-fldv_b,.tp-rotv_b{background-color:var(--cnt-bg);color:var(--cnt-fg);cursor:pointer;display:block;height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);overflow:hidden;padding-left:var(--cnt-h-p);padding-right:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));position:relative;text-align:left;text-overflow:ellipsis;white-space:nowrap;width:100%;transition:border-radius .2s ease-in-out .2s}.tp-fldv_b:hover,.tp-rotv_b:hover{background-color:var(--cnt-bg-h)}.tp-fldv_b:focus,.tp-rotv_b:focus{background-color:var(--cnt-bg-f)}.tp-fldv_b:active,.tp-rotv_b:active{background-color:var(--cnt-bg-a)}.tp-fldv_b:disabled,.tp-rotv_b:disabled{opacity:0.5}.tp-fldv_m,.tp-rotv_m{background:linear-gradient(to left, var(--cnt-fg), var(--cnt-fg) 2px, transparent 2px, transparent 4px, var(--cnt-fg) 4px);border-radius:2px;bottom:0;content:'';display:block;height:6px;right:calc(var(--cnt-h-p) + (var(--bld-us) + 4px - 6px) / 2 - 2px);margin:auto;opacity:0.5;position:absolute;top:0;transform:rotate(90deg);transition:transform .2s ease-in-out;width:6px}.tp-fldv.tp-fldv-expanded>.tp-fldv_b>.tp-fldv_m,.tp-rotv.tp-rotv-expanded .tp-rotv_m{transform:none}.tp-fldv_c,.tp-rotv_c{box-sizing:border-box;height:0;opacity:0;overflow:hidden;padding-bottom:0;padding-top:0;position:relative;transition:height .2s ease-in-out,opacity .2s linear,padding .2s ease-in-out}.tp-fldv.tp-fldv-cpl:not(.tp-fldv-expanded)>.tp-fldv_c,.tp-rotv.tp-rotv-cpl:not(.tp-rotv-expanded) .tp-rotv_c{display:none}.tp-fldv.tp-fldv-expanded>.tp-fldv_c,.tp-rotv.tp-rotv-expanded .tp-rotv_c{opacity:1;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p);transform:none;overflow:visible;transition:height .2s ease-in-out,opacity .2s linear .2s,padding .2s ease-in-out}.tp-coltxtv_m,.tp-lstv{position:relative}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-coltxtv_mm,.tp-lstv_m{bottom:0;margin:auto;pointer-events:none;position:absolute;right:2px;top:0}.tp-coltxtv_mm svg,.tp-lstv_m svg{bottom:0;height:16px;margin:auto;position:absolute;right:0;top:0;width:16px}.tp-coltxtv_mm svg path,.tp-lstv_m svg path{fill:currentColor}.tp-coltxtv_w,.tp-pndtxtv{display:flex}.tp-coltxtv_c,.tp-pndtxtv_a{width:100%}.tp-coltxtv_c+.tp-coltxtv_c,.tp-pndtxtv_a+.tp-coltxtv_c,.tp-coltxtv_c+.tp-pndtxtv_a,.tp-pndtxtv_a+.tp-pndtxtv_a{margin-left:2px}.tp-btnv_b{width:100%}.tp-btnv_t{text-align:center}.tp-ckbv_l{display:block;position:relative}.tp-ckbv_i{left:0;opacity:0;position:absolute;top:0}.tp-ckbv_w{background-color:var(--in-bg);border-radius:var(--elm-br);cursor:pointer;display:block;height:var(--bld-us);position:relative;width:var(--bld-us)}.tp-ckbv_w svg{bottom:0;display:block;height:16px;left:0;margin:auto;opacity:0;position:absolute;right:0;top:0;width:16px}.tp-ckbv_w svg path{fill:none;stroke:var(--in-fg);stroke-width:2}.tp-ckbv_i:hover+.tp-ckbv_w{background-color:var(--in-bg-h)}.tp-ckbv_i:focus+.tp-ckbv_w{background-color:var(--in-bg-f)}.tp-ckbv_i:active+.tp-ckbv_w{background-color:var(--in-bg-a)}.tp-ckbv_i:checked+.tp-ckbv_w svg{opacity:1}.tp-ckbv.tp-v-disabled .tp-ckbv_w{opacity:0.5}.tp-colv{position:relative}.tp-colv_h{display:flex}.tp-colv_s{flex-grow:0;flex-shrink:0;width:var(--bld-us)}.tp-colv_t{flex:1;margin-left:4px}.tp-colv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-colv.tp-colv-cpl .tp-colv_p{overflow:visible}.tp-colv.tp-colv-expanded .tp-colv_p{margin-top:var(--bld-s);opacity:1}.tp-colv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-colpv_h,.tp-colpv_ap{margin-left:6px;margin-right:6px}.tp-colpv_h{margin-top:var(--bld-s)}.tp-colpv_rgb{display:flex;margin-top:var(--bld-s);width:100%}.tp-colpv_a{display:flex;margin-top:var(--cnt-v-p);padding-top:calc(var(--cnt-v-p) + 2px);position:relative}.tp-colpv_a:before{background-color:var(--grv-fg);content:'';height:2px;left:calc(-1 * var(--cnt-h-p));position:absolute;right:calc(-1 * var(--cnt-h-p));top:0}.tp-colpv_ap{align-items:center;display:flex;flex:3}.tp-colpv_at{flex:1;margin-left:4px}.tp-svpv{border-radius:var(--elm-br);outline:none;overflow:hidden;position:relative}.tp-svpv_c{cursor:crosshair;display:block;height:calc(var(--bld-us) * 4);width:100%}.tp-svpv_m{border-radius:100%;border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;filter:drop-shadow(0 0 1px rgba(0,0,0,0.3));height:12px;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;width:12px}.tp-svpv:focus .tp-svpv_m{border-color:#fff}.tp-hplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative}.tp-hplv_c{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAABCAYAAABubagXAAAAQ0lEQVQoU2P8z8Dwn0GCgQEDi2OK/RBgYHjBgIpfovFh8j8YBIgzFGQxuqEgPhaDOT5gOhPkdCxOZeBg+IDFZZiGAgCaSSMYtcRHLgAAAABJRU5ErkJggg==);background-position:left top;background-repeat:no-repeat;background-size:100% 100%;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;position:absolute;top:50%;width:100%}.tp-hplv_m{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-shadow:0 0 2px rgba(0,0,0,0.1);box-sizing:border-box;height:12px;left:50%;margin-left:-6px;margin-top:-6px;pointer-events:none;position:absolute;top:50%;width:12px}.tp-hplv:focus .tp-hplv_m{border-color:#fff}.tp-aplv{cursor:pointer;height:var(--bld-us);outline:none;position:relative;width:100%}.tp-aplv_b{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:4px 4px;background-position:0 0,2px 2px;border-radius:2px;display:block;height:4px;left:0;margin-top:-2px;overflow:hidden;position:absolute;top:50%;width:100%}.tp-aplv_c{bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv_m{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:12px 12px;background-position:0 0,6px 6px;border-radius:var(--elm-br);box-shadow:0 0 2px rgba(0,0,0,0.1);height:12px;left:50%;margin-left:-6px;margin-top:-6px;overflow:hidden;pointer-events:none;position:absolute;top:50%;width:12px}.tp-aplv_p{border-radius:var(--elm-br);border:rgba(255,255,255,0.75) solid 2px;box-sizing:border-box;bottom:0;left:0;position:absolute;right:0;top:0}.tp-aplv:focus .tp-aplv_p{border-color:#fff}.tp-colswv{background-color:#fff;background-image:linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%),linear-gradient(to top right, #ddd 25%, transparent 25%, transparent 75%, #ddd 75%);background-size:10px 10px;background-position:0 0,5px 5px;border-radius:var(--elm-br)}.tp-colswv.tp-v-disabled{opacity:0.5}.tp-colswv_b{-webkit-appearance:none;-moz-appearance:none;appearance:none;background-color:transparent;border-width:0;cursor:pointer;display:block;height:var(--bld-us);left:0;margin:0;outline:none;padding:0;position:absolute;top:0;width:var(--bld-us)}.tp-colswv_b:focus::after{border:rgba(255,255,255,0.75) solid 2px;border-radius:var(--elm-br);bottom:0;content:'';display:block;left:0;position:absolute;right:0;top:0}.tp-coltxtv{display:flex;width:100%}.tp-coltxtv_m{margin-right:4px}.tp-coltxtv_ms{border-radius:var(--elm-br);color:var(--lbl-fg);cursor:pointer;height:var(--bld-us);line-height:var(--bld-us);padding:0 18px 0 4px}.tp-coltxtv_ms:hover{background-color:var(--in-bg-h)}.tp-coltxtv_ms:focus{background-color:var(--in-bg-f)}.tp-coltxtv_ms:active{background-color:var(--in-bg-a)}.tp-coltxtv_mm{color:var(--lbl-fg)}.tp-coltxtv_w{flex:1}.tp-dfwv{position:absolute;top:8px;right:8px;width:256px}.tp-fldv.tp-fldv-not .tp-fldv_b{display:none}.tp-fldv_t{padding-left:4px}.tp-fldv_c{border-left:var(--cnt-bg) solid 4px}.tp-fldv_b:hover+.tp-fldv_c{border-left-color:var(--cnt-bg-h)}.tp-fldv_b:focus+.tp-fldv_c{border-left-color:var(--cnt-bg-f)}.tp-fldv_b:active+.tp-fldv_c{border-left-color:var(--cnt-bg-a)}.tp-grlv{position:relative}.tp-grlv_g{display:block;height:calc(var(--bld-us) * 3)}.tp-grlv_g polyline{fill:none;stroke:var(--mo-fg);stroke-linejoin:round}.tp-grlv_t{margin-top:-4px;transition:left 0.05s, top 0.05s;visibility:hidden}.tp-grlv_t.tp-grlv_t-a{visibility:visible}.tp-grlv_t.tp-grlv_t-in{transition:none}.tp-grlv.tp-v-disabled .tp-grlv_g{opacity:0.5}.tp-grlv .tp-ttv{background-color:var(--mo-fg)}.tp-grlv .tp-ttv::before{border-top-color:var(--mo-fg)}.tp-lblv{align-items:center;display:flex;line-height:1.3;padding-left:var(--cnt-h-p);padding-right:var(--cnt-h-p)}.tp-lblv.tp-lblv-nol{display:block}.tp-lblv_l{color:var(--lbl-fg);flex:1;-webkit-hyphens:auto;-ms-hyphens:auto;hyphens:auto;overflow:hidden;padding-left:4px;padding-right:16px}.tp-lblv.tp-v-disabled .tp-lblv_l{opacity:0.5}.tp-lblv.tp-lblv-nol .tp-lblv_l{display:none}.tp-lblv_v{align-self:flex-start;flex-grow:0;flex-shrink:0;width:160px}.tp-lblv.tp-lblv-nol .tp-lblv_v{width:100%}.tp-lstv_s{padding:0 20px 0 4px;width:100%}.tp-lstv_m{color:var(--btn-fg)}.tp-sglv_i{padding:0 4px}.tp-sglv.tp-v-disabled .tp-sglv_i{opacity:0.5}.tp-mllv_i{display:block;height:calc(var(--bld-us) * 3);line-height:var(--bld-us);padding:0 4px;resize:none;white-space:pre}.tp-mllv.tp-v-disabled .tp-mllv_i{opacity:0.5}.tp-p2dv{position:relative}.tp-p2dv_h{display:flex}.tp-p2dv_b{height:var(--bld-us);margin-right:4px;position:relative;width:var(--bld-us)}.tp-p2dv_b svg{display:block;height:16px;left:50%;margin-left:-8px;margin-top:-8px;position:absolute;top:50%;width:16px}.tp-p2dv_b svg path{stroke:currentColor;stroke-width:2}.tp-p2dv_b svg circle{fill:currentColor}.tp-p2dv_t{flex:1}.tp-p2dv_p{height:0;margin-top:0;opacity:0;overflow:hidden;transition:height .2s ease-in-out,opacity .2s linear,margin .2s ease-in-out}.tp-p2dv.tp-p2dv-expanded .tp-p2dv_p{margin-top:var(--bld-s);opacity:1}.tp-p2dv .tp-popv{left:calc(-1 * var(--cnt-h-p));right:calc(-1 * var(--cnt-h-p));top:var(--bld-us)}.tp-p2dpv{padding-left:calc(var(--bld-us) + 4px)}.tp-p2dpv_p{cursor:crosshair;height:0;overflow:hidden;padding-bottom:100%;position:relative}.tp-p2dpv_g{display:block;height:100%;left:0;pointer-events:none;position:absolute;top:0;width:100%}.tp-p2dpv_ax{opacity:0.1;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_l{opacity:0.5;stroke:var(--in-fg);stroke-dasharray:1}.tp-p2dpv_m{border:var(--in-fg) solid 1px;border-radius:50%;box-sizing:border-box;height:4px;margin-left:-2px;margin-top:-2px;position:absolute;width:4px}.tp-p2dpv_p:focus .tp-p2dpv_m{background-color:var(--in-fg);border-width:0}.tp-popv{background-color:var(--bs-bg);border-radius:6px;box-shadow:0 2px 4px var(--bs-sh);display:none;max-width:168px;padding:var(--cnt-v-p) var(--cnt-h-p);position:absolute;visibility:hidden;z-index:1000}.tp-popv.tp-popv-v{display:block;visibility:visible}.tp-sprv_r{background-color:var(--grv-fg);border-width:0;display:block;height:2px;margin:0;width:100%}.tp-sldv.tp-v-disabled{opacity:0.5}.tp-sldv_t{box-sizing:border-box;cursor:pointer;height:var(--bld-us);margin:0 6px;outline:none;position:relative}.tp-sldv_t::before{background-color:var(--in-bg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin:auto;position:absolute;right:0;top:0}.tp-sldv_k{height:100%;left:0;position:absolute;top:0}.tp-sldv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';display:block;height:2px;left:0;margin-bottom:auto;margin-top:auto;position:absolute;right:0;top:0}.tp-sldv_k::after{background-color:var(--btn-bg);border-radius:var(--elm-br);bottom:0;content:'';display:block;height:12px;margin-bottom:auto;margin-top:auto;position:absolute;right:-6px;top:0;width:12px}.tp-sldv_t:hover .tp-sldv_k::after{background-color:var(--btn-bg-h)}.tp-sldv_t:focus .tp-sldv_k::after{background-color:var(--btn-bg-f)}.tp-sldv_t:active .tp-sldv_k::after{background-color:var(--btn-bg-a)}.tp-sldtxtv{display:flex}.tp-sldtxtv_s{flex:2}.tp-sldtxtv_t{flex:1;margin-left:4px}.tp-tabv.tp-v-disabled{opacity:0.5}.tp-tabv_i{align-items:flex-end;display:flex;overflow:hidden}.tp-tabv.tp-tabv-nop .tp-tabv_i{height:calc(var(--bld-us) + 4px);position:relative}.tp-tabv.tp-tabv-nop .tp-tabv_i::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:0;position:absolute;right:0}.tp-tabv_c{border-left:var(--cnt-bg) solid 4px;padding-bottom:var(--cnt-v-p);padding-top:var(--cnt-v-p)}.tp-tbiv{flex:1;min-width:0;position:relative}.tp-tbiv+.tp-tbiv{margin-left:2px}.tp-tbiv+.tp-tbiv::before{background-color:var(--cnt-bg);bottom:0;content:'';height:2px;left:-2px;position:absolute;width:2px}.tp-tbiv_b{background-color:var(--cnt-bg);display:block;padding-left:calc(var(--cnt-h-p) + 4px);padding-right:calc(var(--cnt-h-p) + 4px);width:100%}.tp-tbiv_b:hover{background-color:var(--cnt-bg-h)}.tp-tbiv_b:focus{background-color:var(--cnt-bg-f)}.tp-tbiv_b:active{background-color:var(--cnt-bg-a)}.tp-tbiv_b:disabled{opacity:0.5}.tp-tbiv_t{color:var(--cnt-fg);height:calc(var(--bld-us) + 4px);line-height:calc(var(--bld-us) + 4px);opacity:0.5;overflow:hidden;text-overflow:ellipsis}.tp-tbiv.tp-tbiv-sel .tp-tbiv_t{opacity:1}.tp-txtv{position:relative}.tp-txtv_i{padding:0 4px}.tp-txtv.tp-txtv-fst .tp-txtv_i{border-bottom-right-radius:0;border-top-right-radius:0}.tp-txtv.tp-txtv-mid .tp-txtv_i{border-radius:0}.tp-txtv.tp-txtv-lst .tp-txtv_i{border-bottom-left-radius:0;border-top-left-radius:0}.tp-txtv.tp-txtv-num .tp-txtv_i{text-align:right}.tp-txtv.tp-txtv-drg .tp-txtv_i{opacity:0.3}.tp-txtv_k{cursor:pointer;height:100%;left:-3px;position:absolute;top:0;width:12px}.tp-txtv_k::before{background-color:var(--in-fg);border-radius:1px;bottom:0;content:'';height:calc(var(--bld-us) - 4px);left:50%;margin-bottom:auto;margin-left:-1px;margin-top:auto;opacity:0.1;position:absolute;top:0;transition:border-radius 0.1s, height 0.1s, transform 0.1s, width 0.1s;width:2px}.tp-txtv_k:hover::before,.tp-txtv.tp-txtv-drg .tp-txtv_k::before{opacity:1}.tp-txtv.tp-txtv-drg .tp-txtv_k::before{border-radius:50%;height:4px;transform:translateX(-1px);width:4px}.tp-txtv_g{bottom:0;display:block;height:8px;left:50%;margin:auto;overflow:visible;pointer-events:none;position:absolute;top:0;visibility:hidden;width:100%}.tp-txtv.tp-txtv-drg .tp-txtv_g{visibility:visible}.tp-txtv_gb{fill:none;stroke:var(--in-fg);stroke-dasharray:1}.tp-txtv_gh{fill:none;stroke:var(--in-fg)}.tp-txtv .tp-ttv{margin-left:6px;visibility:hidden}.tp-txtv.tp-txtv-drg .tp-ttv{visibility:visible}.tp-ttv{background-color:var(--in-fg);border-radius:var(--elm-br);color:var(--bs-bg);padding:2px 4px;pointer-events:none;position:absolute;transform:translate(-50%, -100%)}.tp-ttv::before{border-color:var(--in-fg) transparent transparent transparent;border-style:solid;border-width:2px;box-sizing:border-box;content:'';font-size:0.9em;height:4px;left:50%;margin-left:-2px;position:absolute;top:100%;width:4px}.tp-rotv{background-color:var(--bs-bg);border-radius:var(--bs-br);box-shadow:0 2px 4px var(--bs-sh);font-family:var(--font-family);font-size:11px;font-weight:500;line-height:1;text-align:left}.tp-rotv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br);border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br);padding-left:calc(2px * 2 + var(--bld-us) + var(--cnt-h-p));text-align:center}.tp-rotv.tp-rotv-expanded .tp-rotv_b{border-bottom-left-radius:0;border-bottom-right-radius:0}.tp-rotv.tp-rotv-not .tp-rotv_b{display:none}.tp-rotv_c>.tp-fldv.tp-v-lst>.tp-fldv_c,.tp-rotv_c>.tp-tabv.tp-v-lst>.tp-tabv_c{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c>.tp-fldv.tp-v-lst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-left-radius:var(--bs-br);border-bottom-right-radius:var(--bs-br)}.tp-rotv_c .tp-fldv.tp-v-vlst:not(.tp-fldv-expanded)>.tp-fldv_b{border-bottom-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-fldv.tp-v-fst>.tp-fldv_b{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst{margin-top:calc(-1 * var(--cnt-v-p))}.tp-rotv.tp-rotv-not .tp-rotv_c>.tp-tabv.tp-v-fst>.tp-tabv_i{border-top-left-radius:var(--bs-br);border-top-right-radius:var(--bs-br)}.tp-rotv.tp-v-disabled,.tp-rotv .tp-v-disabled{pointer-events:none}.tp-rotv.tp-v-hidden,.tp-rotv .tp-v-hidden{display:none}"),this.pool_.getAll().forEach((t=>{this.embedPluginStyle_(t)})),this.registerPlugin({plugins:[co,ao,ve,ho]})}}const vo=new e("3.0.7");t.BladeApi=n,t.ButtonApi=_,t.FolderApi=jt,t.InputBindingApi=Ct,t.ListApi=no,t.MonitorBindingApi=Ot,t.Pane=mo,t.SeparatorApi=Zt,t.SliderApi=ro,t.TabApi=de,t.TabPageApi=he,t.TextApi=io,t.TpChangeEvent=o,t.VERSION=vo,Object.defineProperty(t,"__esModule",{value:!0})}(e)},286:function(t,e,n){!function(t){"use strict";var e=/(?:^\s+|\s+$)/g,n=/([\uD800-\uDBFF][\uDC00-\uDFFF](?:[\u200D\uFE0F][\uD800-\uDBFF][\uDC00-\uDFFF]){2,}|\uD83D\uDC69(?:\u200D(?:(?:\uD83D\uDC69\u200D)?\uD83D\uDC67|(?:\uD83D\uDC69\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D(?:\uD83D\uDC69\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]\uFE0F|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC6F\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3C-\uDD3E\uDDD6-\uDDDF])\u200D[\u2640\u2642]\uFE0F|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF6\uD83C\uDDE6|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uFE0F\u200D[\u2640\u2642]|(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642])\uFE0F|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\uD83D\uDC69\u200D[\u2695\u2696\u2708]|\uD83D\uDC68(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708]))\uFE0F|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83D\uDC69\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69]))|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67)\uDB40\uDC7F|\uD83D\uDC68(?:\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66\u200D\uD83D\uDC66|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92])|(?:\uD83C[\uDFFB-\uDFFF])\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]))|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDD1-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|\uD83D\uDC68(?:\u200D(?:(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC67|(?:(?:\uD83D[\uDC68\uDC69])\u200D)?\uD83D\uDC66)|\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC69\uDC6E\uDC70-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD18-\uDD1C\uDD1E\uDD1F\uDD26\uDD30-\uDD39\uDD3D\uDD3E\uDDD1-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])?|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDEEB\uDEEC\uDEF4-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267B\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEF8]|\uD83E[\uDD10-\uDD3A\uDD3C-\uDD3E\uDD40-\uDD45\uDD47-\uDD4C\uDD50-\uDD6B\uDD80-\uDD97\uDDC0\uDDD0-\uDDE6])\uFE0F)/;function r(t){var e=t.nodeType,n="";if(1===e||9===e||11===e){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===e||4===e)return t.nodeValue;return n}function o(element,t,e,n){for(var s,r=element.firstChild,o=[];r;)3===r.nodeType?(s=(r.nodeValue+"").replace(/^\n+/g,""),n||(s=s.replace(/\s+/g," ")),o.push.apply(o,l(s,t,e,n))):"br"===(r.nodeName+"").toLowerCase()?o[o.length-1]+="<br>":o.push(r.outerHTML),r=r.nextSibling;for(s=o.length;s--;)"&"===o[s]&&o.splice(s,1,"&amp;");return o}function l(text,t,r,o){if(text+="",r&&(text=text.trim?text.trim():text.replace(e,"")),t&&""!==t)return text.replace(/>/g,"&gt;").replace(/</g,"&lt;").split(t);for(var l,c,h=[],d=text.length,i=0;i<d;i++)((c=text.charAt(i)).charCodeAt(0)>=55296&&c.charCodeAt(0)<=56319||text.charCodeAt(i+1)>=65024&&text.charCodeAt(i+1)<=65039)&&(l=((text.substr(i,12).split(n)||[])[1]||"").length||2,c=text.substr(i,l),h.emoji=1,i+=l-1),h.push(">"===c?"&gt;":"<"===c?"&lt;":!o||" "!==c||" "!==text.charAt(i-1)&&" "!==text.charAt(i+1)?c:"&nbsp;");return h}var c,h,d=function(){return c||"undefined"!=typeof window&&(c=window.gsap)&&c.registerPlugin&&c},f={version:"3.11.0",name:"text",init:function(t,e,n){"object"!=typeof e&&(e={value:e});var r,text,l,c,d,f,m,s,i=t.nodeName.toUpperCase(),data=this,v=e,y=v.newClass,_=v.oldClass,x=v.preserveSpaces,w=v.rtl,S=data.delimiter=e.delimiter||"",E=data.fillChar=e.fillChar||(e.padSpace?"&nbsp;":"");if(data.svg=t.getBBox&&("TEXT"===i||"TSPAN"===i),!("innerHTML"in t)&&!data.svg)return!1;if(data.target=t,"value"in e){for(l=o(t,S,!1,x),h||(h=document.createElement("div")),h.innerHTML=e.value,text=o(h,S,!1,x),data.from=n._from,!data.from&&!w||w&&data.from||(i=l,l=text,text=i),data.hasClass=!(!y&&!_),data.newClass=w?_:y,data.oldClass=w?y:_,r=(i=l.length-text.length)<0?l:text,i<0&&(i=-i);--i>-1;)r.push(E);if("diff"===e.type){for(c=0,d=[],f=[],m="",i=0;i<text.length;i++)(s=text[i])===l[i]?m+=s:(d[c]=m+s,f[c++]=m+l[i],m="");text=d,l=f,m&&(text.push(m),l.push(m))}e.speed&&n.duration(Math.min(.05/e.speed*r.length,e.maxDuration||9999)),data.rtl=w,data.original=l,data.text=text,data._props.push("text")}else data.text=data.original=[""]},render:function(t,data){t>1?t=1:t<0&&(t=0),data.from&&(t=1-t);var e,n,r,text=data.text,o=data.hasClass,l=data.newClass,c=data.oldClass,h=data.delimiter,d=data.target,f=data.fillChar,m=data.original,v=data.rtl,y=text.length,i=(v?1-t:t)*y+.5|0;o&&t?(n=c&&i!==y,r=((e=l&&i)?"<span class='"+l+"'>":"")+text.slice(0,i).join(h)+(e?"</span>":"")+(n?"<span class='"+c+"'>":"")+h+m.slice(i).join(h)+(n?"</span>":"")):r=text.slice(0,i).join(h)+h+m.slice(i).join(h),data.svg?d.textContent=r:d.innerHTML="&nbsp;"===f&&~r.indexOf("  ")?r.split("  ").join("&nbsp;&nbsp;"):r}};f.splitInnerHTML=o,f.emojiSafeSplit=l,f.getText=r,d()&&c.registerPlugin(f),t.TextPlugin=f,t.default=f,Object.defineProperty(t,"__esModule",{value:!0})}(e)},287:function(t,e,n){!function(t){"use strict";var e,n,r,o,l,c,h,d=function(){return"undefined"!=typeof window},f=function(){return e||d()&&(e=window.gsap)&&e.registerPlugin&&e},m=function(t){return"string"==typeof t},v=function(t){return"function"==typeof t},y=function(element,t){var e="x"===t?"Width":"Height",n="scroll"+e,c="client"+e;return element===r||element===o||element===l?Math.max(o[n],l[n])-(r["inner"+e]||o[c]||l[c]):element[n]-element["offset"+e]},_=function(t,e){var p="scroll"+("x"===e?"Left":"Top");return t===r&&(null!=t.pageXOffset?p="page"+e.toUpperCase()+"Offset":t=null!=o[p]?o:l),function(){return t[p]}},x=function(t,e,n,r){if(v(t)&&(t=t(e,n,r)),"object"!=typeof t)return m(t)&&"max"!==t&&"="!==t.charAt(1)?{x:t,y:t}:{y:t};if(t.nodeType)return{y:t,x:t};var p,o={};for(p in t)o[p]="onAutoKill"!==p&&v(t[p])?t[p](e,n,r):t[p];return o},w=function(element,t){if(!(element=c(element)[0])||!element.getBoundingClientRect)return console.warn("scrollTo target doesn't exist. Using 0")||{x:0,y:0};var rect=element.getBoundingClientRect(),e=!t||t===r||t===l,n=e?{top:o.clientTop-(r.pageYOffset||o.scrollTop||l.scrollTop||0),left:o.clientLeft-(r.pageXOffset||o.scrollLeft||l.scrollLeft||0)}:t.getBoundingClientRect(),h={x:rect.left-n.left,y:rect.top-n.top};return!e&&t&&(h.x+=_(t,"x")(),h.y+=_(t,"y")()),h},S=function(t,e,n,r,o){return isNaN(t)||"object"==typeof t?m(t)&&"="===t.charAt(1)?parseFloat(t.substr(2))*("-"===t.charAt(0)?-1:1)+r-o:"max"===t?y(e,n)-o:Math.min(y(e,n),w(t,e)[n]-o):parseFloat(t)-o},E=function(){e=f(),d()&&e&&document.body&&(r=window,l=document.body,o=document.documentElement,c=e.utils.toArray,e.config({autoKillThreshold:7}),h=e.config(),n=1)},M={version:"3.11.0",name:"scrollTo",rawVars:1,register:function(t){e=t,E()},init:function(t,o,l,c,h){n||E();var data=this,d=e.getProperty(t,"scrollSnapType");data.isWin=t===r,data.target=t,data.tween=l,o=x(o,c,t,h),data.vars=o,data.autoKill=!!o.autoKill,data.getX=_(t,"x"),data.getY=_(t,"y"),data.x=data.xPrev=data.getX(),data.y=data.yPrev=data.getY(),"smooth"===e.getProperty(t,"scrollBehavior")&&e.set(t,{scrollBehavior:"auto"}),d&&"none"!==d&&(data.snap=1,data.snapInline=t.style.scrollSnapType,t.style.scrollSnapType="none"),null!=o.x?(data.add(data,"x",data.x,S(o.x,t,"x",data.x,o.offsetX||0),c,h),data._props.push("scrollTo_x")):data.skipX=1,null!=o.y?(data.add(data,"y",data.y,S(o.y,t,"y",data.y,o.offsetY||0),c,h),data._props.push("scrollTo_y")):data.skipY=1},render:function(t,data){for(var e,n,o,l,c,d=data._pt,f=data.target,m=data.tween,v=data.autoKill,_=data.xPrev,x=data.yPrev,w=data.isWin,S=data.snap,E=data.snapInline;d;)d.r(t,d.d),d=d._next;e=w||!data.skipX?data.getX():_,o=(n=w||!data.skipY?data.getY():x)-x,l=e-_,c=h.autoKillThreshold,data.x<0&&(data.x=0),data.y<0&&(data.y=0),v&&(!data.skipX&&(l>c||l<-c)&&e<y(f,"x")&&(data.skipX=1),!data.skipY&&(o>c||o<-c)&&n<y(f,"y")&&(data.skipY=1),data.skipX&&data.skipY&&(m.kill(),data.vars.onAutoKill&&data.vars.onAutoKill.apply(m,data.vars.onAutoKillParams||[]))),w?r.scrollTo(data.skipX?e:data.x,data.skipY?n:data.y):(data.skipY||(f.scrollTop=data.y),data.skipX||(f.scrollLeft=data.x)),!S||1!==t&&0!==t||(n=f.scrollTop,e=f.scrollLeft,E?f.style.scrollSnapType=E:f.style.removeProperty("scroll-snap-type"),f.scrollTop=n+1,f.scrollLeft=e+1,f.scrollTop=n,f.scrollLeft=e),data.xPrev=data.x,data.yPrev=data.y},kill:function(t){var e="scrollTo"===t;(e||"scrollTo_x"===t)&&(this.skipX=1),(e||"scrollTo_y"===t)&&(this.skipY=1)}};M.max=y,M.getOffset=w,M.buildGetter=_,f()&&e.registerPlugin(M),t.ScrollToPlugin=M,t.default=M,Object.defineProperty(t,"__esModule",{value:!0})}(e)},288:function(t,e,n){"use strict";var r=n(15),o=(n(46),n(36),n(12),n(90),n(11)),l=n(9),c=window.__NUXT__;function h(){if(!this._hydrated)return this.$fetch()}function d(){if((t=this).$vnode&&t.$vnode.elm&&t.$vnode.elm.dataset&&t.$vnode.elm.dataset.fetchKey){var t;this._hydrated=!0,this._fetchKey=this.$vnode.elm.dataset.fetchKey;var data=c.fetch[this._fetchKey];if(data&&data._error)this.$fetchState.error=data._error;else for(var e in data)o.a.set(this.$data,e,data[e])}else f.call(this)}function f(){var t=!1!==this.$options.fetchOnServer;if("function"==typeof this.$options.fetchOnServer&&(t=!1!==this.$options.fetchOnServer.call(this)),t&&!this.$nuxt.isPreview&&this.$nuxt._pagePayload){this._hydrated=!0;var e=this.$options._scopeId||this.$options.name||"",n=Object(l.d)(this.$nuxt._fetchCounters,e);if("function"==typeof this.$options.fetchKey)this._fetchKey=this.$options.fetchKey.call(this,n);else{var r="string"==typeof this.$options.fetchKey?this.$options.fetchKey:e;this._fetchKey=r?r+":"+n(r):String(n(r))}var data=this.$nuxt._pagePayload.fetch[this._fetchKey];if(data&&data._error)this.$fetchState.error=data._error;else if(data)for(var c in data)o.a.set(this.$data,c,data[c]);else this.$fetch()}}function m(){var t=this;return this._fetchPromise||(this._fetchPromise=v.call(this).then((function(){delete t._fetchPromise}))),this._fetchPromise}function v(){return y.apply(this,arguments)}function y(){return(y=Object(r.a)(regeneratorRuntime.mark((function t(){var e,n,r,o=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.$nuxt.nbFetching++,this.$fetchState.pending=!0,this.$fetchState.error=null,this._hydrated=!1,e=null,n=Date.now(),t.prev=6,t.next=9,this.$options.fetch.call(this);case 9:t.next=15;break;case 11:t.prev=11,t.t0=t.catch(6),e=Object(l.p)(t.t0);case 15:if(!((r=this._fetchDelay-(Date.now()-n))>0)){t.next=19;break}return t.next=19,new Promise((function(t){return setTimeout(t,r)}));case 19:this.$fetchState.error=e,this.$fetchState.pending=!1,this.$fetchState.timestamp=Date.now(),this.$nextTick((function(){return o.$nuxt.nbFetching--}));case 23:case"end":return t.stop()}}),t,this,[[6,11]])})))).apply(this,arguments)}e.a={beforeCreate:function(){Object(l.m)(this)&&(this._fetchDelay="number"==typeof this.$options.fetchDelay?this.$options.fetchDelay:200,o.a.util.defineReactive(this,"$fetchState",{pending:!1,error:null,timestamp:Date.now()}),this.$fetch=m.bind(this),Object(l.a)(this,"created",d),Object(l.a)(this,"beforeMount",h))}}},289:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(12),n(36),n(90);var r={},o={},l={};function c(t,e){if(r[t])return Promise.resolve(r[t]);if(l[t])return Promise.reject(l[t]);if(o[t])return o[t];var n,c,h=o[t]=new Promise((function(t,e){n=t,c=e}));delete r[t];var d,script=document.createElement("script");script.charset="utf-8",script.timeout=120,script.src=e;var f=new Error,m=script.onerror=script.onload=function(e){if(clearTimeout(d),delete o[t],script.onerror=script.onload=null,r[t])return n(r[t]);var h=e&&("load"===e.type?"missing":e.type),m=e&&e.target&&e.target.src;f.message="Loading chunk "+t+" failed.\n("+h+": "+m+")",f.name="ChunkLoadError",f.type=h,f.request=m,l[t]=f,c(f)};return d=setTimeout((function(){m({type:"timeout",target:script})}),12e4),document.head.appendChild(script),h}function h(){window.__NUXT_JSONP__=function(t,e){r[t]=e},window.__NUXT_JSONP_CACHE__=r,window.__NUXT_IMPORT__=c}},3:function(t,e,n){"use strict";n.d(e,"a",(function(){return In})),n.d(e,"b",(function(){return Yn})),n.d(e,"c",(function(){return Dl})),n.d(e,"d",(function(){return ie})),n.d(e,"e",(function(){return Bn})),n.d(e,"f",(function(){return V})),n.d(e,"g",(function(){return H})),n.d(e,"h",(function(){return N})),n.d(e,"i",(function(){return pr})),n.d(e,"j",(function(){return F})),n.d(e,"k",(function(){return Xr})),n.d(e,"l",(function(){return wr})),n.d(e,"m",(function(){return W})),n.d(e,"n",(function(){return _u})),n.d(e,"o",(function(){return k})),n.d(e,"p",(function(){return _o})),n.d(e,"q",(function(){return _r})),n.d(e,"r",(function(){return Ju})),n.d(e,"s",(function(){return yr})),n.d(e,"t",(function(){return Yt})),n.d(e,"u",(function(){return ve})),n.d(e,"v",(function(){return ce})),n.d(e,"w",(function(){return he})),n.d(e,"x",(function(){return mo}));n(79),n(68);var r=n(15),o=n(10),l=n(40),c=n(6),h=n(50),d=n(2),f=n(42),m=n(4),v=n(0),y=n(1);n(46),n(124),n(61),n(12),n(106),n(246),n(73),n(44),n(45),n(30),n(69),n(126),n(361),n(128),n(129),n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(362),n(363),n(364),n(365),n(366),n(367),n(127),n(368),n(29),n(36),n(242),n(369),n(370),n(216),n(262),n(308),n(67),n(31),n(372),n(374),n(375),n(55),n(263),n(376),n(377),n(89),n(83),n(203),n(37),n(65),n(294),n(295),n(296),n(297),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(379),n(380),n(382),n(383),n(384),n(385),n(386),n(387),n(388),n(389),n(390),n(391),n(392),n(393),n(394),n(395),n(396),n(28),n(397),n(399),n(400),n(401),n(179),n(107),n(90),n(402),n(241);function _(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function w(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(m.a)(t);if(e){var o=Object(m.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}for(var S="138",E=100,M=301,T=302,A=303,D=304,P=306,C=307,k=1e3,O=1001,L=1002,F=1003,R=1004,I=1005,N=1006,j=1008,B=1009,U=1012,z=1014,V=1015,H=1016,G=1020,W=1023,X=1026,Y=1027,Q=33776,$=33777,K=33778,J=33779,Z=35840,tt=35841,et=35842,nt=35843,it=37492,at=37496,ot=37808,st=37809,ut=37810,lt=37811,ct=37812,ht=37813,pt=37814,ft=37815,mt=37816,vt=37817,gt=37818,yt=37819,_t=37820,bt=37821,xt=36492,wt=2300,St=2301,Et=2302,Mt=2400,Tt=2401,At=2402,Dt=2500,Pt=2501,Ct=3e3,kt=3001,Ot=7680,Lt=35044,Ft=35048,Rt="300 es",It=1035,Nt=function(){function t(){Object(v.a)(this,t)}return Object(y.a)(t,[{key:"addEventListener",value:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)}},{key:"hasEventListener",value:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)}},{key:"removeEventListener",value:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}},{key:"dispatchEvent",value:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t);t.target=null}}}}]),t}(),jt=[],i=0;i<256;i++)jt[i]=(i<16?"0":"")+i.toString(16);var Bt=Math.PI/180,Ut=180/Math.PI;function zt(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(jt[255&t]+jt[t>>8&255]+jt[t>>16&255]+jt[t>>24&255]+"-"+jt[255&e]+jt[e>>8&255]+"-"+jt[e>>16&15|64]+jt[e>>24&255]+"-"+jt[63&n|128]+jt[n>>8&255]+"-"+jt[n>>16&255]+jt[n>>24&255]+jt[255&r]+jt[r>>8&255]+jt[r>>16&255]+jt[r>>24&255]).toUpperCase()}function Vt(t,e,n){return Math.max(e,Math.min(n,t))}function Ht(t,e){return(t%e+e)%e}function Gt(t,e,n){return(1-n)*t+n*e}function Wt(t){return 0==(t&t-1)&&0!==t}function Xt(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}var Yt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(v.a)(this,e),this.x=t,this.y=n}return Object(y.a)(e,[{key:"width",get:function(){return this.x},set:function(t){this.x=t}},{key:"height",get:function(){return this.y},set:function(t){this.y=t}},{key:"set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y}},{key:"cross",value:function(t){return this.x*t.y-this.y*t.x}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function(){var t=Math.atan2(-this.y,-this.x)+Math.PI;return t}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}},{key:"rotateAround",value:function(t,e){var n=Math.cos(e),s=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*s+t.x,this.y=r*s+o*n+t.y,this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);Yt.prototype.isVector2=!0;var qt=function(){function t(){Object(v.a)(this,t),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return Object(y.a)(t,[{key:"set",value:function(t,e,n,r,o,l,c,h,d){var f=this.elements;return f[0]=t,f[1]=r,f[2]=c,f[3]=e,f[4]=o,f[5]=h,f[6]=n,f[7]=l,f[8]=d,this}},{key:"identity",value:function(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}},{key:"multiply",value:function(t){return this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(a,b){var t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[3],l=t[6],c=t[1],h=t[4],d=t[7],f=t[2],m=t[5],v=t[8],y=e[0],_=e[3],x=e[6],w=e[1],S=e[4],E=e[7],M=e[2],T=e[5],A=e[8];return n[0]=r*y+o*w+l*M,n[3]=r*_+o*S+l*T,n[6]=r*x+o*E+l*A,n[1]=c*y+h*w+d*M,n[4]=c*_+h*S+d*T,n[7]=c*x+h*E+d*A,n[2]=f*y+m*w+v*M,n[5]=f*_+m*S+v*T,n[8]=f*x+m*E+v*A,this}},{key:"multiplyScalar",value:function(s){var t=this.elements;return t[0]*=s,t[3]*=s,t[6]*=s,t[1]*=s,t[4]*=s,t[7]*=s,t[2]*=s,t[5]*=s,t[8]*=s,this}},{key:"determinant",value:function(){var t=this.elements,a=t[0],b=t[1],e=t[2],n=t[3],r=t[4],o=t[5],g=t[6],l=t[7],i=t[8];return a*r*i-a*o*l-b*n*i+b*o*g+e*n*l-e*r*g}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],c=t[5],h=t[6],d=t[7],f=t[8],m=f*l-c*d,v=c*h-f*o,y=d*o-l*h,_=e*m+n*v+r*y;if(0===_)return this.set(0,0,0,0,0,0,0,0,0);var x=1/_;return t[0]=m*x,t[1]=(r*d-f*n)*x,t[2]=(c*n-r*l)*x,t[3]=v*x,t[4]=(f*e-r*h)*x,t[5]=(r*o-c*e)*x,t[6]=y*x,t[7]=(n*h-d*e)*x,t[8]=(l*e-n*o)*x,this}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}},{key:"getNormalMatrix",value:function(t){return this.setFromMatrix4(t).invert().transpose()}},{key:"transposeIntoArray",value:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}},{key:"setUvTransform",value:function(t,e,n,r,o,l,c){var h=Math.cos(o),s=Math.sin(o);return this.set(n*h,n*s,-n*(h*l+s*c)+l+t,-r*s,r*h,-r*(-s*l+h*c)+c+e,0,0,1),this}},{key:"scale",value:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}},{key:"rotate",value:function(t){var e=Math.cos(t),s=Math.sin(t),n=this.elements,r=n[0],o=n[3],l=n[6],c=n[1],h=n[4],d=n[7];return n[0]=e*r+s*c,n[3]=e*o+s*h,n[6]=e*l+s*d,n[1]=-s*r+e*c,n[4]=-s*o+e*h,n[7]=-s*l+e*d,this}},{key:"translate",value:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<9;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}},{key:"clone",value:function(){return(new this.constructor).fromArray(this.elements)}}]),t}();function Qt(t){for(var e=t.length-1;e>=0;--e)if(t[e]>65535)return!0;return!1}qt.prototype.isMatrix3=!0;Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function $t(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}var Kt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jt={h:0,s:0,l:0},Zt={h:0,s:0,l:0};function te(p,q,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?p+6*(q-p)*t:t<.5?q:t<2/3?p+6*(q-p)*(2/3-t):p}function ee(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function ne(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}var re,ie=function(){function t(e,g,b){return Object(v.a)(this,t),void 0===g&&void 0===b?this.set(e):this.setRGB(e,g,b)}return Object(y.a)(t,[{key:"set",value:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this}},{key:"setScalar",value:function(t){return this.r=t,this.g=t,this.b=t,this}},{key:"setHex",value:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}},{key:"setRGB",value:function(t,g,b){return this.r=t,this.g=g,this.b=b,this}},{key:"setHSL",value:function(t,s,e){if(t=Ht(t,1),s=Vt(s,0,1),e=Vt(e,0,1),0===s)this.r=this.g=this.b=e;else{var p=e<=.5?e*(1+s):e+s-e*s,q=2*e-p;this.r=te(q,p,t+1/3),this.g=te(q,p,t),this.b=te(q,p,t-1/3)}return this}},{key:"setStyle",value:function(style){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+style+" will be ignored.")}var e;if(e=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(style)){var n,r=e[1],o=e[2];switch(r){case"rgb":case"rgba":if(n=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(n[1],10))/255,this.g=Math.min(255,parseInt(n[2],10))/255,this.b=Math.min(255,parseInt(n[3],10))/255,t(n[4]),this;if(n=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(n[1],10))/100,this.g=Math.min(100,parseInt(n[2],10))/100,this.b=Math.min(100,parseInt(n[3],10))/100,t(n[4]),this;break;case"hsl":case"hsla":if(n=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o)){var l=parseFloat(n[1])/360,s=parseInt(n[2],10)/100,c=parseInt(n[3],10)/100;return t(n[4]),this.setHSL(l,s,c)}}}else if(e=/^\#([A-Fa-f\d]+)$/.exec(style)){var h=e[1],d=h.length;if(3===d)return this.r=parseInt(h.charAt(0)+h.charAt(0),16)/255,this.g=parseInt(h.charAt(1)+h.charAt(1),16)/255,this.b=parseInt(h.charAt(2)+h.charAt(2),16)/255,this;if(6===d)return this.r=parseInt(h.charAt(0)+h.charAt(1),16)/255,this.g=parseInt(h.charAt(2)+h.charAt(3),16)/255,this.b=parseInt(h.charAt(4)+h.charAt(5),16)/255,this}return style&&style.length>0?this.setColorName(style):this}},{key:"setColorName",value:function(style){var t=Kt[style.toLowerCase()];return void 0!==t?this.setHex(t):console.warn("THREE.Color: Unknown color "+style),this}},{key:"clone",value:function(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}},{key:"copySRGBToLinear",value:function(t){return this.r=ee(t.r),this.g=ee(t.g),this.b=ee(t.b),this}},{key:"copyLinearToSRGB",value:function(t){return this.r=ne(t.r),this.g=ne(t.g),this.b=ne(t.b),this}},{key:"convertSRGBToLinear",value:function(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}},{key:"getHexString",value:function(){return("000000"+this.getHex().toString(16)).slice(-6)}},{key:"getHSL",value:function(t){var e,n,r=this.r,g=this.g,b=this.b,o=Math.max(r,g,b),l=Math.min(r,g,b),c=(l+o)/2;if(l===o)e=0,n=0;else{var h=o-l;switch(n=c<=.5?h/(o+l):h/(2-o-l),o){case r:e=(g-b)/h+(g<b?6:0);break;case g:e=(b-r)/h+2;break;case b:e=(r-g)/h+4}e/=6}return t.h=e,t.s=n,t.l=c,t}},{key:"getStyle",value:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}},{key:"offsetHSL",value:function(t,s,e){return this.getHSL(Jt),Jt.h+=t,Jt.s+=s,Jt.l+=e,this.setHSL(Jt.h,Jt.s,Jt.l),this}},{key:"add",value:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}},{key:"addColors",value:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}},{key:"addScalar",value:function(s){return this.r+=s,this.g+=s,this.b+=s,this}},{key:"sub",value:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}},{key:"multiply",value:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}},{key:"multiplyScalar",value:function(s){return this.r*=s,this.g*=s,this.b*=s,this}},{key:"lerp",value:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}},{key:"lerpColors",value:function(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}},{key:"lerpHSL",value:function(t,e){this.getHSL(Jt),t.getHSL(Zt);var n=Gt(Jt.h,Zt.h,e),s=Gt(Jt.s,Zt.s,e),r=Gt(Jt.l,Zt.l,e);return this.setHSL(n,s,r),this}},{key:"equals",value:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}},{key:"fromBufferAttribute",value:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function(){return this.getHex()}}]),t}();ie.NAMES=Kt,ie.prototype.isColor=!0,ie.prototype.r=1,ie.prototype.g=1,ie.prototype.b=1;var ae=function(){function t(){Object(v.a)(this,t)}return Object(y.a)(t,null,[{key:"getDataURL",value:function(image){if(/^data:/i.test(image.src))return image.src;if("undefined"==typeof HTMLCanvasElement)return image.src;var canvas;if(image instanceof HTMLCanvasElement)canvas=image;else{void 0===re&&(re=$t("canvas")),re.width=image.width,re.height=image.height;var t=re.getContext("2d");image instanceof ImageData?t.putImageData(image,0,0):t.drawImage(image,0,0,image.width,image.height),canvas=re}return canvas.width>2048||canvas.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",image),canvas.toDataURL("image/jpeg",.6)):canvas.toDataURL("image/png")}},{key:"sRGBToLinear",value:function(image){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){var canvas=$t("canvas");canvas.width=image.width,canvas.height=image.height;var t=canvas.getContext("2d");t.drawImage(image,0,0,image.width,image.height);for(var e=t.getImageData(0,0,image.width,image.height),data=e.data,n=0;n<data.length;n++)data[n]=255*ee(data[n]/255);return t.putImageData(e,0,0),canvas}if(image.data){for(var r=image.data.slice(0),o=0;o<r.length;o++)r instanceof Uint8Array||r instanceof Uint8ClampedArray?r[o]=Math.floor(255*ee(r[o]/255)):r[o]=ee(r[o]);return{data:r,width:image.width,height:image.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),image}}]),t}(),oe=function(){function t(){var data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Object(v.a)(this,t),this.uuid=zt(),this.data=data,this.version=0}return Object(y.a)(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.images[this.uuid])return meta.images[this.uuid];var output={uuid:this.uuid,url:""},data=this.data;if(null!==data){var e;if(Array.isArray(data)){e=[];for(var n=0,r=data.length;n<r;n++)data[n].isDataTexture?e.push(se(data[n].image)):e.push(se(data[n]))}else e=se(data);output.url=e}return t||(meta.images[this.uuid]=output),output}}]),t}();function se(image){return"undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap?ae.getDataURL(image):image.data?{data:Array.prototype.slice.call(image.data),width:image.width,height:image.height,type:image.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}oe.prototype.isSource=!0;var ue=0,le=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,image=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.DEFAULT_IMAGE,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.DEFAULT_MAPPING,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:N,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:j,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:W,m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:B,y=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,_=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Ct;return Object(v.a)(this,n),t=e.call(this),Object.defineProperty(Object(h.a)(t),"id",{value:ue++}),t.uuid=zt(),t.name="",t.source=new oe(image),t.mipmaps=[],t.mapping=r,t.wrapS=o,t.wrapT=l,t.magFilter=c,t.minFilter=d,t.anisotropy=y,t.format=f,t.internalFormat=null,t.type=m,t.offset=new Yt(0,0),t.repeat=new Yt(1,1),t.center=new Yt(0,0),t.rotation=0,t.matrixAutoUpdate=!0,t.matrix=new qt,t.generateMipmaps=!0,t.premultiplyAlpha=!1,t.flipY=!0,t.unpackAlignment=4,t.encoding=_,t.userData={},t.version=0,t.onUpdate=null,t.isRenderTargetTexture=!1,t.needsPMREMUpdate=!1,t}return Object(y.a)(n,[{key:"image",get:function(){return this.source.data},set:function(t){this.source.data=t}},{key:"updateMatrix",value:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){return this.name=source.name,this.source=source.source,this.mipmaps=source.mipmaps.slice(0),this.mapping=source.mapping,this.wrapS=source.wrapS,this.wrapT=source.wrapT,this.magFilter=source.magFilter,this.minFilter=source.minFilter,this.anisotropy=source.anisotropy,this.format=source.format,this.internalFormat=source.internalFormat,this.type=source.type,this.offset.copy(source.offset),this.repeat.copy(source.repeat),this.center.copy(source.center),this.rotation=source.rotation,this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrix.copy(source.matrix),this.generateMipmaps=source.generateMipmaps,this.premultiplyAlpha=source.premultiplyAlpha,this.flipY=source.flipY,this.unpackAlignment=source.unpackAlignment,this.encoding=source.encoding,this.userData=JSON.parse(JSON.stringify(source.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;if(!t&&void 0!==meta.textures[this.uuid])return meta.textures[this.uuid];var output={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(meta).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(output.userData=this.userData),t||(meta.textures[this.uuid]=output),output}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case k:t.x=t.x-Math.floor(t.x);break;case O:t.x=t.x<0?0:1;break;case L:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case k:t.y=t.y-Math.floor(t.y);break;case O:t.y=t.y<0?0:1;break;case L:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}},{key:"needsUpdate",set:function(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}}]),n}(Nt);le.DEFAULT_IMAGE=null,le.DEFAULT_MAPPING=300,le.prototype.isTexture=!0;var ce=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(v.a)(this,e),this.x=t,this.y=n,this.z=r,this.w=o}return Object(y.a)(e,[{key:"width",get:function(){return this.z},set:function(t){this.z=t}},{key:"height",get:function(){return this.w},set:function(t){this.w=t}},{key:"set",value:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setW",value:function(t){return this.w=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this.z+=s,this.w+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this.w+=t.w*s,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this.z-=s,this.w-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this}},{key:"multiply",value:function(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,o=this.w,l=t.elements;return this.x=l[0]*e+l[4]*n+l[8]*r+l[12]*o,this.y=l[1]*e+l[5]*n+l[9]*r+l[13]*o,this.z=l[2]*e+l[6]*n+l[10]*r+l[14]*o,this.w=l[3]*e+l[7]*n+l[11]*r+l[15]*o,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"setAxisAngleFromQuaternion",value:function(q){this.w=2*Math.acos(q.w);var s=Math.sqrt(1-q.w*q.w);return s<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=q.x/s,this.y=q.y/s,this.z=q.z/s),this}},{key:"setAxisAngleFromRotationMatrix",value:function(t){var e,n,r,o,l=.01,c=.1,h=t.elements,d=h[0],f=h[4],m=h[8],v=h[1],y=h[5],_=h[9],x=h[2],w=h[6],S=h[10];if(Math.abs(f-v)<l&&Math.abs(m-x)<l&&Math.abs(_-w)<l){if(Math.abs(f+v)<c&&Math.abs(m+x)<c&&Math.abs(_+w)<c&&Math.abs(d+y+S-3)<c)return this.set(1,0,0,0),this;e=Math.PI;var E=(d+1)/2,M=(y+1)/2,T=(S+1)/2,A=(f+v)/4,D=(m+x)/4,P=(_+w)/4;return E>M&&E>T?E<l?(n=0,r=.707106781,o=.707106781):(r=A/(n=Math.sqrt(E)),o=D/n):M>T?M<l?(n=.707106781,r=0,o=.707106781):(n=A/(r=Math.sqrt(M)),o=P/r):T<l?(n=.707106781,r=.707106781,o=0):(n=D/(o=Math.sqrt(T)),r=P/o),this.set(n,r,o,e),this}var s=Math.sqrt((w-_)*(w-_)+(m-x)*(m-x)+(v-f)*(v-f));return Math.abs(s)<.001&&(s=1),this.x=(w-_)/s,this.y=(m-x)/s,this.z=(v-f)/s,this.w=Math.acos((d+y+S-1)/2),this}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:return t.next=8,this.w;case 8:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);ce.prototype.isVector4=!0;var he=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(v.a)(this,n),(o=e.call(this)).width=t,o.height=r,o.depth=1,o.scissor=new ce(0,0,t,r),o.scissorTest=!1,o.viewport=new ce(0,0,t,r);var image={width:t,height:r,depth:1};return o.texture=new le(image,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),o.texture.isRenderTargetTexture=!0,o.texture.generateMipmaps=void 0!==l.generateMipmaps&&l.generateMipmaps,o.texture.internalFormat=void 0!==l.internalFormat?l.internalFormat:null,o.texture.minFilter=void 0!==l.minFilter?l.minFilter:N,o.depthBuffer=void 0===l.depthBuffer||l.depthBuffer,o.stencilBuffer=void 0!==l.stencilBuffer&&l.stencilBuffer,o.depthTexture=void 0!==l.depthTexture?l.depthTexture:null,o.samples=void 0!==l.samples?l.samples:0,o}return Object(y.a)(n,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===t&&this.height===e&&this.depth===n||(this.width=t,this.height=e,this.depth=n,this.texture.image.width=t,this.texture.image.height=e,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){return this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.copy(source.viewport),this.texture=source.texture.clone(),this.texture.image=Object.assign({},source.texture.image),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,null!==source.depthTexture&&(this.depthTexture=source.depthTexture.clone()),this.samples=source.samples,this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Nt);he.prototype.isWebGLRenderTarget=!0;var de=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(v.a)(this,n),(t=e.call(this,null)).image={data:data,width:r,height:o,depth:l},t.magFilter=F,t.minFilter=F,t.wrapR=O,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return n}(le);de.prototype.isDataArrayTexture=!0,function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;return Object(v.a)(this,n),(l=e.call(this,t,r)).depth=o,l.texture=new de(null,t,r,o),l.texture.isRenderTargetTexture=!0,l}return n}(he).prototype.isWebGLArrayRenderTarget=!0;var pe=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(v.a)(this,n),(t=e.call(this,null)).image={data:data,width:r,height:o,depth:l},t.magFilter=F,t.minFilter=F,t.wrapR=O,t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return n}(le);pe.prototype.isData3DTexture=!0,function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;return Object(v.a)(this,n),(l=e.call(this,t,r)).depth=o,l.texture=new pe(null,t,r,o),l.texture.isRenderTargetTexture=!0,l}return n}(he).prototype.isWebGL3DRenderTarget=!0;var fe=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};Object(v.a)(this,n);var h=(l=e.call(this,t,r,c)).texture;l.texture=[];for(var d=0;d<o;d++)l.texture[d]=h.clone(),l.texture[d].isRenderTargetTexture=!0;return l}return Object(y.a)(n,[{key:"setSize",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(var r=0,o=this.texture.length;r<o;r++)this.texture[r].image.width=t,this.texture[r].image.height=e,this.texture[r].image.depth=n;this.dispose()}return this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e),this}},{key:"copy",value:function(source){this.dispose(),this.width=source.width,this.height=source.height,this.depth=source.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=source.depthBuffer,this.stencilBuffer=source.stencilBuffer,this.depthTexture=source.depthTexture,this.texture.length=0;for(var t=0,e=source.texture.length;t<e;t++)this.texture[t]=source.texture[t].clone();return this}}]),n}(he);fe.prototype.isWebGLMultipleRenderTargets=!0;var me=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(v.a)(this,t),this._x=e,this._y=n,this._z=r,this._w=o}return Object(y.a)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"w",get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,o=t._z,l=t._order,c=Math.cos,h=Math.sin,d=c(n/2),f=c(r/2),m=c(o/2),v=h(n/2),y=h(r/2),_=h(o/2);switch(l){case"XYZ":this._x=v*f*m+d*y*_,this._y=d*y*m-v*f*_,this._z=d*f*_+v*y*m,this._w=d*f*m-v*y*_;break;case"YXZ":this._x=v*f*m+d*y*_,this._y=d*y*m-v*f*_,this._z=d*f*_-v*y*m,this._w=d*f*m+v*y*_;break;case"ZXY":this._x=v*f*m-d*y*_,this._y=d*y*m+v*f*_,this._z=d*f*_+v*y*m,this._w=d*f*m-v*y*_;break;case"ZYX":this._x=v*f*m-d*y*_,this._y=d*y*m+v*f*_,this._z=d*f*_-v*y*m,this._w=d*f*m+v*y*_;break;case"YZX":this._x=v*f*m+d*y*_,this._y=d*y*m+v*f*_,this._z=d*f*_-v*y*m,this._w=d*f*m-v*y*_;break;case"XZY":this._x=v*f*m-d*y*_,this._y=d*y*m-v*f*_,this._z=d*f*_+v*y*m,this._w=d*f*m+v*y*_;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+l)}return!1!==e&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function(t,e){var n=e/2,s=Math.sin(n);return this._x=t.x*s,this._y=t.y*s,this._z=t.z*s,this._w=Math.cos(n),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=t.elements,n=e[0],r=e[4],o=e[8],l=e[1],c=e[5],h=e[9],d=e[2],f=e[6],m=e[10],v=n+c+m;if(v>0){var s=.5/Math.sqrt(v+1);this._w=.25/s,this._x=(f-h)*s,this._y=(o-d)*s,this._z=(l-r)*s}else if(n>c&&n>m){var y=2*Math.sqrt(1+n-c-m);this._w=(f-h)/y,this._x=.25*y,this._y=(r+l)/y,this._z=(o+d)/y}else if(c>m){var _=2*Math.sqrt(1+c-n-m);this._w=(o-d)/_,this._x=(r+l)/_,this._y=.25*_,this._z=(h+f)/_}else{var x=2*Math.sqrt(1+m-n-c);this._w=(l-r)/x,this._x=(o+d)/x,this._y=(h+f)/x,this._z=.25*x}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function(t,e){var n=t.dot(e)+1;return n<Number.EPSILON?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}},{key:"angleTo",value:function(q){return 2*Math.acos(Math.abs(Vt(this.dot(q),-1,1)))}},{key:"rotateTowards",value:function(q,t){var e=this.angleTo(q);if(0===e)return this;var n=Math.min(1,t/e);return this.slerp(q,n),this}},{key:"identity",value:function(){return this.set(0,0,0,1)}},{key:"invert",value:function(){return this.conjugate()}},{key:"conjugate",value:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}},{key:"lengthSq",value:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}},{key:"multiply",value:function(q,p){return void 0!==p?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(q,p)):this.multiplyQuaternions(this,q)}},{key:"premultiply",value:function(q){return this.multiplyQuaternions(q,this)}},{key:"multiplyQuaternions",value:function(a,b){var t=a._x,e=a._y,n=a._z,r=a._w,o=b._x,l=b._y,c=b._z,h=b._w;return this._x=t*h+r*o+e*c-n*l,this._y=e*h+r*l+n*o-t*c,this._z=n*h+r*c+t*l-e*o,this._w=r*h-t*o-e*l-n*c,this._onChangeCallback(),this}},{key:"slerp",value:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,o=this._z,l=this._w,c=l*t._w+n*t._x+r*t._y+o*t._z;if(c<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,c=-c):this.copy(t),c>=1)return this._w=l,this._x=n,this._y=r,this._z=o,this;var h=1-c*c;if(h<=Number.EPSILON){var s=1-e;return this._w=s*l+e*this._w,this._x=s*n+e*this._x,this._y=s*r+e*this._y,this._z=s*o+e*this._z,this.normalize(),this._onChangeCallback(),this}var d=Math.sqrt(h),f=Math.atan2(d,c),m=Math.sin((1-e)*f)/d,v=Math.sin(e*f)/d;return this._w=l*m+this._w*v,this._x=n*m+this._x*v,this._y=r*m+this._y*v,this._z=o*m+this._z*v,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function(t,e,n){return this.copy(t).slerp(e,n)}},{key:"random",value:function(){var t=Math.random(),e=Math.sqrt(1-t),n=Math.sqrt(t),r=2*Math.PI*Math.random(),o=2*Math.PI*Math.random();return this.set(e*Math.cos(r),n*Math.sin(o),n*Math.cos(o),e*Math.sin(r))}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}},{key:"fromBufferAttribute",value:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}],[{key:"slerp",value:function(t,e,n,r){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),n.slerpQuaternions(t,e,r)}},{key:"slerpFlat",value:function(t,e,n,r,o,l,c){var h=n[r+0],d=n[r+1],f=n[r+2],m=n[r+3],v=o[l+0],y=o[l+1],_=o[l+2],x=o[l+3];if(0===c)return t[e+0]=h,t[e+1]=d,t[e+2]=f,void(t[e+3]=m);if(1===c)return t[e+0]=v,t[e+1]=y,t[e+2]=_,void(t[e+3]=x);if(m!==x||h!==v||d!==y||f!==_){var s=1-c,w=h*v+d*y+f*_+m*x,S=w>=0?1:-1,E=1-w*w;if(E>Number.EPSILON){var M=Math.sqrt(E),T=Math.atan2(M,w*S);s=Math.sin(s*T)/M,c=Math.sin(c*T)/M}var A=c*S;if(h=h*s+v*A,d=d*s+y*A,f=f*s+_*A,m=m*s+x*A,s===1-c){var D=1/Math.sqrt(h*h+d*d+f*f+m*m);h*=D,d*=D,f*=D,m*=D}}t[e]=h,t[e+1]=d,t[e+2]=f,t[e+3]=m}},{key:"multiplyQuaternionsFlat",value:function(t,e,n,r,o,l){var c=n[r],h=n[r+1],d=n[r+2],f=n[r+3],m=o[l],v=o[l+1],y=o[l+2],_=o[l+3];return t[e]=c*_+f*m+h*y-d*v,t[e+1]=h*_+f*v+d*m-c*y,t[e+2]=d*_+f*y+c*v-h*m,t[e+3]=f*_-c*m-h*v-d*y,t}}]),t}();me.prototype.isQuaternion=!0;var ve=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;Object(v.a)(this,e),this.x=t,this.y=n,this.z=r}return Object(y.a)(e,[{key:"set",value:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}},{key:"setScalar",value:function(t){return this.x=t,this.y=t,this.z=t,this}},{key:"setX",value:function(t){return this.x=t,this}},{key:"setY",value:function(t){return this.y=t,this}},{key:"setZ",value:function(t){return this.z=t,this}},{key:"setComponent",value:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}},{key:"getComponent",value:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}},{key:"clone",value:function(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}},{key:"add",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}},{key:"addScalar",value:function(s){return this.x+=s,this.y+=s,this.z+=s,this}},{key:"addVectors",value:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this}},{key:"addScaledVector",value:function(t,s){return this.x+=t.x*s,this.y+=t.y*s,this.z+=t.z*s,this}},{key:"sub",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}},{key:"subScalar",value:function(s){return this.x-=s,this.y-=s,this.z-=s,this}},{key:"subVectors",value:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}},{key:"multiplyScalar",value:function(t){return this.x*=t,this.y*=t,this.z*=t,this}},{key:"multiplyVectors",value:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this}},{key:"applyEuler",value:function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(ye.setFromEuler(t))}},{key:"applyAxisAngle",value:function(t,e){return this.applyQuaternion(ye.setFromAxisAngle(t,e))}},{key:"applyMatrix3",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}},{key:"applyNormalMatrix",value:function(t){return this.applyMatrix3(t).normalize()}},{key:"applyMatrix4",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements,l=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*l,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*l,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*l,this}},{key:"applyQuaternion",value:function(q){var t=this.x,e=this.y,n=this.z,r=q.x,o=q.y,l=q.z,c=q.w,h=c*t+o*n-l*e,d=c*e+l*t-r*n,f=c*n+r*e-o*t,m=-r*t-o*e-l*n;return this.x=h*c+m*-r+d*-l-f*-o,this.y=d*c+m*-o+f*-r-h*-l,this.z=f*c+m*-l+h*-o-d*-r,this}},{key:"project",value:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}},{key:"unproject",value:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}},{key:"transformDirection",value:function(t){var e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}},{key:"divide",value:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}},{key:"divideScalar",value:function(t){return this.multiplyScalar(1/t)}},{key:"min",value:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}},{key:"max",value:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}},{key:"clamp",value:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}},{key:"clampScalar",value:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}},{key:"clampLength",value:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}},{key:"floor",value:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function(t){return this.x*t.x+this.y*t.y+this.z*t.z}},{key:"lengthSq",value:function(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function(t){return this.normalize().multiplyScalar(t)}},{key:"lerp",value:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}},{key:"lerpVectors",value:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}},{key:"cross",value:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}},{key:"crossVectors",value:function(a,b){var t=a.x,e=a.y,n=a.z,r=b.x,o=b.y,l=b.z;return this.x=e*l-n*o,this.y=n*r-t*l,this.z=t*o-e*r,this}},{key:"projectOnVector",value:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}},{key:"projectOnPlane",value:function(t){return ge.copy(this).projectOnVector(t),this.sub(ge)}},{key:"reflect",value:function(t){return this.sub(ge.copy(t).multiplyScalar(2*this.dot(t)))}},{key:"angleTo",value:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(Vt(n,-1,1))}},{key:"distanceTo",value:function(t){return Math.sqrt(this.distanceToSquared(t))}},{key:"distanceToSquared",value:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}},{key:"manhattanDistanceTo",value:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}},{key:"setFromSpherical",value:function(s){return this.setFromSphericalCoords(s.radius,s.phi,s.theta)}},{key:"setFromSphericalCoords",value:function(t,e,n){var r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}},{key:"setFromCylindrical",value:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}},{key:"setFromCylindricalCoords",value:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}},{key:"setFromMatrixPosition",value:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}},{key:"setFromMatrixScale",value:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}},{key:"setFromMatrixColumn",value:function(t,e){return this.fromArray(t.elements,4*e)}},{key:"setFromMatrix3Column",value:function(t,e){return this.fromArray(t.elements,3*e)}},{key:"setFromEuler",value:function(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}},{key:"equals",value:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}},{key:"fromArray",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}},{key:"fromBufferAttribute",value:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}},{key:"random",value:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function(){var u=2*(Math.random()-.5),t=Math.random()*Math.PI*2,e=Math.sqrt(1-Math.pow(u,2));return this.x=e*Math.cos(t),this.y=e*Math.sin(t),this.z=u,this}},{key:t,value:regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.x;case 2:return t.next=4,this.y;case 4:return t.next=6,this.z;case 6:case"end":return t.stop()}}),t,this)}))}]),e}(Symbol.iterator);ve.prototype.isVector3=!0;var ge=new ve,ye=new me,_e=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve(1/0,1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve(-1/0,-1/0,-1/0);Object(v.a)(this,t),this.min=e,this.max=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromArray",value:function(t){for(var e=1/0,n=1/0,r=1/0,o=-1/0,l=-1/0,c=-1/0,h=0,d=t.length;h<d;h+=3){var f=t[h],m=t[h+1],v=t[h+2];f<e&&(e=f),m<n&&(n=m),v<r&&(r=v),f>o&&(o=f),m>l&&(l=m),v>c&&(c=v)}return this.min.set(e,n,r),this.max.set(o,l,c),this}},{key:"setFromBufferAttribute",value:function(t){for(var e=1/0,n=1/0,r=1/0,o=-1/0,l=-1/0,c=-1/0,h=0,d=t.count;h<d;h++){var f=t.getX(h),m=t.getY(h),v=t.getZ(h);f<e&&(e=f),m<n&&(n=m),v<r&&(r=v),f>o&&(o=f),m>l&&(l=m),v>c&&(c=v)}return this.min.set(e,n,r),this.max.set(o,l,c),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=xe.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"setFromObject",value:function(object){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(object,t)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"expandByObject",value:function(object){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];object.updateWorldMatrix(!1,!1);var e=object.geometry;if(void 0!==e)if(t&&null!=e.attributes&&void 0!==e.attributes.position)for(var n=e.attributes.position,r=0,o=n.count;r<o;r++)xe.fromBufferAttribute(n,r).applyMatrix4(object.matrixWorld),this.expandByPoint(xe);else null===e.boundingBox&&e.computeBoundingBox(),we.copy(e.boundingBox),we.applyMatrix4(object.matrixWorld),this.union(we);for(var l=object.children,c=0,h=l.length;c<h;c++)this.expandByObject(l[c],t);return this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}},{key:"intersectsSphere",value:function(t){return this.clampPoint(t.center,xe),xe.distanceToSquared(t.center)<=t.radius*t.radius}},{key:"intersectsPlane",value:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}},{key:"intersectsTriangle",value:function(t){if(this.isEmpty())return!1;this.getCenter(Pe),Ce.subVectors(this.max,Pe),Se.subVectors(t.a,Pe),Ee.subVectors(t.b,Pe),Me.subVectors(t.c,Pe),Te.subVectors(Ee,Se),Ae.subVectors(Me,Ee),De.subVectors(Se,Me);var e=[0,-Te.z,Te.y,0,-Ae.z,Ae.y,0,-De.z,De.y,Te.z,0,-Te.x,Ae.z,0,-Ae.x,De.z,0,-De.x,-Te.y,Te.x,0,-Ae.y,Ae.x,0,-De.y,De.x,0];return!!Le(e,Se,Ee,Me,Ce)&&(!!Le(e=[1,0,0,0,1,0,0,0,1],Se,Ee,Me,Ce)&&(ke.crossVectors(Te,Ae),Le(e=[ke.x,ke.y,ke.z],Se,Ee,Me,Ce)))}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return xe.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"getBoundingSphere",value:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(xe).length(),t}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"applyMatrix4",value:function(t){return this.isEmpty()||(be[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),be[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),be[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),be[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),be[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),be[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),be[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),be[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(be)),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();_e.prototype.isBox3=!0;var be=[new ve,new ve,new ve,new ve,new ve,new ve,new ve,new ve],xe=new ve,we=new _e,Se=new ve,Ee=new ve,Me=new ve,Te=new ve,Ae=new ve,De=new ve,Pe=new ve,Ce=new ve,ke=new ve,Oe=new ve;function Le(t,e,n,r,o){for(var l=0,c=t.length-3;l<=c;l+=3){Oe.fromArray(t,l);var h=o.x*Math.abs(Oe.x)+o.y*Math.abs(Oe.y)+o.z*Math.abs(Oe.z),d=e.dot(Oe),f=n.dot(Oe),m=r.dot(Oe);if(Math.max(-Math.max(d,f,m),Math.min(d,f,m))>h)return!1}return!0}var Fe=new _e,Re=new ve,Ie=new ve,Ne=new ve,je=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;Object(v.a)(this,t),this.center=e,this.radius=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.center.copy(t),this.radius=e,this}},{key:"setFromPoints",value:function(t,e){var n=this.center;void 0!==e?n.copy(e):Fe.setFromPoints(t).getCenter(n);for(var r=0,o=0,l=t.length;o<l;o++)r=Math.max(r,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}},{key:"copy",value:function(t){return this.center.copy(t.center),this.radius=t.radius,this}},{key:"isEmpty",value:function(){return this.radius<0}},{key:"makeEmpty",value:function(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function(t){return t.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}},{key:"intersectsBox",value:function(t){return t.intersectsSphere(this)}},{key:"intersectsPlane",value:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function(t,e){var n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}},{key:"getBoundingBox",value:function(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}},{key:"applyMatrix4",value:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}},{key:"translate",value:function(t){return this.center.add(t),this}},{key:"expandByPoint",value:function(t){Ne.subVectors(t,this.center);var e=Ne.lengthSq();if(e>this.radius*this.radius){var n=Math.sqrt(e),r=.5*(n-this.radius);this.center.add(Ne.multiplyScalar(r/n)),this.radius+=r}return this}},{key:"union",value:function(t){return!0===this.center.equals(t.center)?Ie.set(0,0,1).multiplyScalar(t.radius):Ie.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Re.copy(t.center).add(Ie)),this.expandByPoint(Re.copy(t.center).sub(Ie)),this}},{key:"equals",value:function(t){return t.center.equals(this.center)&&t.radius===this.radius}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),Be=new ve,Ue=new ve,ze=new ve,Ve=new ve,He=new ve,Ge=new ve,We=new ve,Xe=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve(0,0,-1);Object(v.a)(this,t),this.origin=e,this.direction=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.origin.copy(t),this.direction.copy(e),this}},{key:"copy",value:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}},{key:"at",value:function(t,e){return e.copy(this.direction).multiplyScalar(t).add(this.origin)}},{key:"lookAt",value:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this}},{key:"recast",value:function(t){return this.origin.copy(this.at(t,Be)),this}},{key:"closestPointToPoint",value:function(t,e){e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}},{key:"distanceToPoint",value:function(t){return Math.sqrt(this.distanceSqToPoint(t))}},{key:"distanceSqToPoint",value:function(t){var e=Be.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Be.copy(this.direction).multiplyScalar(e).add(this.origin),Be.distanceToSquared(t))}},{key:"distanceSqToSegment",value:function(t,e,n,r){Ue.copy(t).add(e).multiplyScalar(.5),ze.copy(e).sub(t).normalize(),Ve.copy(this.origin).sub(Ue);var o,l,c,h,d=.5*t.distanceTo(e),f=-this.direction.dot(ze),m=Ve.dot(this.direction),v=-Ve.dot(ze),y=Ve.lengthSq(),_=Math.abs(1-f*f);if(_>0)if(l=f*m-v,h=d*_,(o=f*v-m)>=0)if(l>=-h)if(l<=h){var x=1/_;c=(o*=x)*(o+f*(l*=x)+2*m)+l*(f*o+l+2*v)+y}else l=d,c=-(o=Math.max(0,-(f*l+m)))*o+l*(l+2*v)+y;else l=-d,c=-(o=Math.max(0,-(f*l+m)))*o+l*(l+2*v)+y;else l<=-h?c=-(o=Math.max(0,-(-f*d+m)))*o+(l=o>0?-d:Math.min(Math.max(-d,-v),d))*(l+2*v)+y:l<=h?(o=0,c=(l=Math.min(Math.max(-d,-v),d))*(l+2*v)+y):c=-(o=Math.max(0,-(f*d+m)))*o+(l=o>0?d:Math.min(Math.max(-d,-v),d))*(l+2*v)+y;else l=f>0?-d:d,c=-(o=Math.max(0,-(f*l+m)))*o+l*(l+2*v)+y;return n&&n.copy(this.direction).multiplyScalar(o).add(this.origin),r&&r.copy(ze).multiplyScalar(l).add(Ue),c}},{key:"intersectSphere",value:function(t,e){Be.subVectors(t.center,this.origin);var n=Be.dot(this.direction),r=Be.dot(Be)-n*n,o=t.radius*t.radius;if(r>o)return null;var l=Math.sqrt(o-r),c=n-l,h=n+l;return c<0&&h<0?null:c<0?this.at(h,e):this.at(c,e)}},{key:"intersectsSphere",value:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}},{key:"distanceToPlane",value:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}},{key:"intersectPlane",value:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}},{key:"intersectsPlane",value:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}},{key:"intersectBox",value:function(t,e){var n,r,o,l,c,h,d=1/this.direction.x,f=1/this.direction.y,m=1/this.direction.z,v=this.origin;return d>=0?(n=(t.min.x-v.x)*d,r=(t.max.x-v.x)*d):(n=(t.max.x-v.x)*d,r=(t.min.x-v.x)*d),f>=0?(o=(t.min.y-v.y)*f,l=(t.max.y-v.y)*f):(o=(t.max.y-v.y)*f,l=(t.min.y-v.y)*f),n>l||o>r?null:((o>n||n!=n)&&(n=o),(l<r||r!=r)&&(r=l),m>=0?(c=(t.min.z-v.z)*m,h=(t.max.z-v.z)*m):(c=(t.max.z-v.z)*m,h=(t.min.z-v.z)*m),n>h||c>r?null:((c>n||n!=n)&&(n=c),(h<r||r!=r)&&(r=h),r<0?null:this.at(n>=0?n:r,e)))}},{key:"intersectsBox",value:function(t){return null!==this.intersectBox(t,Be)}},{key:"intersectTriangle",value:function(a,b,t,e,n){He.subVectors(b,a),Ge.subVectors(t,a),We.crossVectors(He,Ge);var r,o=this.direction.dot(We);if(o>0){if(e)return null;r=1}else{if(!(o<0))return null;r=-1,o=-o}Ve.subVectors(this.origin,a);var l=r*this.direction.dot(Ge.crossVectors(Ve,Ge));if(l<0)return null;var c=r*this.direction.dot(He.cross(Ve));if(c<0)return null;if(l+c>o)return null;var h=-r*Ve.dot(We);return h<0?null:this.at(h/o,n)}},{key:"applyMatrix4",value:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}},{key:"equals",value:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),Ye=function(){function t(){Object(v.a)(this,t),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return Object(y.a)(t,[{key:"set",value:function(t,e,n,r,o,l,c,h,d,f,m,v,y,_,x,w){var S=this.elements;return S[0]=t,S[4]=e,S[8]=n,S[12]=r,S[1]=o,S[5]=l,S[9]=c,S[13]=h,S[2]=d,S[6]=f,S[10]=m,S[14]=v,S[3]=y,S[7]=_,S[11]=x,S[15]=w,this}},{key:"identity",value:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function(){return(new t).fromArray(this.elements)}},{key:"copy",value:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}},{key:"copyPosition",value:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}},{key:"setFromMatrix3",value:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}},{key:"extractBasis",value:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}},{key:"extractRotation",value:function(t){var e=this.elements,n=t.elements,r=1/qe.setFromMatrixColumn(t,0).length(),o=1/qe.setFromMatrixColumn(t,1).length(),l=1/qe.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*l,e[9]=n[9]*l,e[10]=n[10]*l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromEuler",value:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,o=t.z,a=Math.cos(n),b=Math.sin(n),l=Math.cos(r),c=Math.sin(r),h=Math.cos(o),d=Math.sin(o);if("XYZ"===t.order){var f=a*h,m=a*d,v=b*h,y=b*d;e[0]=l*h,e[4]=-l*d,e[8]=c,e[1]=m+v*c,e[5]=f-y*c,e[9]=-b*l,e[2]=y-f*c,e[6]=v+m*c,e[10]=a*l}else if("YXZ"===t.order){var _=l*h,x=l*d,w=c*h,S=c*d;e[0]=_+S*b,e[4]=w*b-x,e[8]=a*c,e[1]=a*d,e[5]=a*h,e[9]=-b,e[2]=x*b-w,e[6]=S+_*b,e[10]=a*l}else if("ZXY"===t.order){var E=l*h,M=l*d,T=c*h,A=c*d;e[0]=E-A*b,e[4]=-a*d,e[8]=T+M*b,e[1]=M+T*b,e[5]=a*h,e[9]=A-E*b,e[2]=-a*c,e[6]=b,e[10]=a*l}else if("ZYX"===t.order){var D=a*h,P=a*d,C=b*h,k=b*d;e[0]=l*h,e[4]=C*c-P,e[8]=D*c+k,e[1]=l*d,e[5]=k*c+D,e[9]=P*c-C,e[2]=-c,e[6]=b*l,e[10]=a*l}else if("YZX"===t.order){var O=a*l,L=a*c,F=b*l,R=b*c;e[0]=l*h,e[4]=R-O*d,e[8]=F*d+L,e[1]=d,e[5]=a*h,e[9]=-b*h,e[2]=-c*h,e[6]=L*d+F,e[10]=O-R*d}else if("XZY"===t.order){var I=a*l,N=a*c,j=b*l,B=b*c;e[0]=l*h,e[4]=-d,e[8]=c*h,e[1]=I*d+B,e[5]=a*h,e[9]=N*d-j,e[2]=j*d-N,e[6]=b*h,e[10]=B*d+I}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}},{key:"makeRotationFromQuaternion",value:function(q){return this.compose($e,q,Ke)}},{key:"lookAt",value:function(t,e,n){var r=this.elements;return tn.subVectors(t,e),0===tn.lengthSq()&&(tn.z=1),tn.normalize(),Je.crossVectors(n,tn),0===Je.lengthSq()&&(1===Math.abs(n.z)?tn.x+=1e-4:tn.z+=1e-4,tn.normalize(),Je.crossVectors(n,tn)),Je.normalize(),Ze.crossVectors(tn,Je),r[0]=Je.x,r[4]=Ze.x,r[8]=tn.x,r[1]=Je.y,r[5]=Ze.y,r[9]=tn.y,r[2]=Je.z,r[6]=Ze.z,r[10]=tn.z,this}},{key:"multiply",value:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}},{key:"premultiply",value:function(t){return this.multiplyMatrices(t,this)}},{key:"multiplyMatrices",value:function(a,b){var t=a.elements,e=b.elements,n=this.elements,r=t[0],o=t[4],l=t[8],c=t[12],h=t[1],d=t[5],f=t[9],m=t[13],v=t[2],y=t[6],_=t[10],x=t[14],w=t[3],S=t[7],E=t[11],M=t[15],T=e[0],A=e[4],D=e[8],P=e[12],C=e[1],k=e[5],O=e[9],L=e[13],F=e[2],R=e[6],I=e[10],N=e[14],j=e[3],B=e[7],U=e[11],z=e[15];return n[0]=r*T+o*C+l*F+c*j,n[4]=r*A+o*k+l*R+c*B,n[8]=r*D+o*O+l*I+c*U,n[12]=r*P+o*L+l*N+c*z,n[1]=h*T+d*C+f*F+m*j,n[5]=h*A+d*k+f*R+m*B,n[9]=h*D+d*O+f*I+m*U,n[13]=h*P+d*L+f*N+m*z,n[2]=v*T+y*C+_*F+x*j,n[6]=v*A+y*k+_*R+x*B,n[10]=v*D+y*O+_*I+x*U,n[14]=v*P+y*L+_*N+x*z,n[3]=w*T+S*C+E*F+M*j,n[7]=w*A+S*k+E*R+M*B,n[11]=w*D+S*O+E*I+M*U,n[15]=w*P+S*L+E*N+M*z,this}},{key:"multiplyScalar",value:function(s){var t=this.elements;return t[0]*=s,t[4]*=s,t[8]*=s,t[12]*=s,t[1]*=s,t[5]*=s,t[9]*=s,t[13]*=s,t[2]*=s,t[6]*=s,t[10]*=s,t[14]*=s,t[3]*=s,t[7]*=s,t[11]*=s,t[15]*=s,this}},{key:"determinant",value:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],l=t[1],c=t[5],h=t[9],d=t[13],f=t[2],m=t[6],v=t[10],y=t[14];return t[3]*(+o*h*m-r*d*m-o*c*v+n*d*v+r*c*y-n*h*y)+t[7]*(+e*h*y-e*d*v+o*l*v-r*l*y+r*d*f-o*h*f)+t[11]*(+e*d*m-e*c*y-o*l*m+n*l*y+o*c*f-n*d*f)+t[15]*(-r*c*f-e*h*m+e*c*v+r*l*m-n*l*v+n*h*f)}},{key:"transpose",value:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}},{key:"setPosition",value:function(t,e,n){var r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}},{key:"invert",value:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],l=t[4],c=t[5],h=t[6],d=t[7],f=t[8],m=t[9],v=t[10],y=t[11],_=t[12],x=t[13],w=t[14],S=t[15],E=m*w*d-x*v*d+x*h*y-c*w*y-m*h*S+c*v*S,M=_*v*d-f*w*d-_*h*y+l*w*y+f*h*S-l*v*S,T=f*x*d-_*m*d+_*c*y-l*x*y-f*c*S+l*m*S,A=_*m*h-f*x*h-_*c*v+l*x*v+f*c*w-l*m*w,D=e*E+n*M+r*T+o*A;if(0===D)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var P=1/D;return t[0]=E*P,t[1]=(x*v*o-m*w*o-x*r*y+n*w*y+m*r*S-n*v*S)*P,t[2]=(c*w*o-x*h*o+x*r*d-n*w*d-c*r*S+n*h*S)*P,t[3]=(m*h*o-c*v*o-m*r*d+n*v*d+c*r*y-n*h*y)*P,t[4]=M*P,t[5]=(f*w*o-_*v*o+_*r*y-e*w*y-f*r*S+e*v*S)*P,t[6]=(_*h*o-l*w*o-_*r*d+e*w*d+l*r*S-e*h*S)*P,t[7]=(l*v*o-f*h*o+f*r*d-e*v*d-l*r*y+e*h*y)*P,t[8]=T*P,t[9]=(_*m*o-f*x*o-_*n*y+e*x*y+f*n*S-e*m*S)*P,t[10]=(l*x*o-_*c*o+_*n*d-e*x*d-l*n*S+e*c*S)*P,t[11]=(f*c*o-l*m*o-f*n*d+e*m*d+l*n*y-e*c*y)*P,t[12]=A*P,t[13]=(f*x*r-_*m*r+_*n*v-e*x*v-f*n*w+e*m*w)*P,t[14]=(_*c*r-l*x*r-_*n*h+e*x*h+l*n*w-e*c*w)*P,t[15]=(l*m*r-f*c*r+f*n*h-e*m*h-l*n*v+e*c*v)*P,this}},{key:"scale",value:function(t){var e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}},{key:"getMaxScaleOnAxis",value:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}},{key:"makeTranslation",value:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}},{key:"makeRotationX",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(1,0,0,0,0,e,-s,0,0,s,e,0,0,0,0,1),this}},{key:"makeRotationY",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,0,s,0,0,1,0,0,-s,0,e,0,0,0,0,1),this}},{key:"makeRotationZ",value:function(t){var e=Math.cos(t),s=Math.sin(t);return this.set(e,-s,0,0,s,e,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function(t,e){var n=Math.cos(e),s=Math.sin(e),r=1-n,o=t.x,l=t.y,c=t.z,h=r*o,d=r*l;return this.set(h*o+n,h*l-s*c,h*c+s*l,0,h*l+s*c,d*l+n,d*c-s*o,0,h*c-s*l,d*c+s*o,r*c*c+n,0,0,0,0,1),this}},{key:"makeScale",value:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}},{key:"makeShear",value:function(t,e,n,r,o,l){return this.set(1,n,o,0,t,1,l,0,e,r,1,0,0,0,0,1),this}},{key:"compose",value:function(t,e,n){var r=this.elements,o=e._x,l=e._y,c=e._z,h=e._w,d=o+o,f=l+l,m=c+c,v=o*d,y=o*f,_=o*m,x=l*f,w=l*m,S=c*m,E=h*d,M=h*f,T=h*m,A=n.x,D=n.y,P=n.z;return r[0]=(1-(x+S))*A,r[1]=(y+T)*A,r[2]=(_-M)*A,r[3]=0,r[4]=(y-T)*D,r[5]=(1-(v+S))*D,r[6]=(w+E)*D,r[7]=0,r[8]=(_+M)*P,r[9]=(w-E)*P,r[10]=(1-(v+x))*P,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}},{key:"decompose",value:function(t,e,n){var r=this.elements,o=qe.set(r[0],r[1],r[2]).length(),l=qe.set(r[4],r[5],r[6]).length(),c=qe.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),t.x=r[12],t.y=r[13],t.z=r[14],Qe.copy(this);var h=1/o,d=1/l,f=1/c;return Qe.elements[0]*=h,Qe.elements[1]*=h,Qe.elements[2]*=h,Qe.elements[4]*=d,Qe.elements[5]*=d,Qe.elements[6]*=d,Qe.elements[8]*=f,Qe.elements[9]*=f,Qe.elements[10]*=f,e.setFromRotationMatrix(Qe),n.x=o,n.y=l,n.z=c,this}},{key:"makePerspective",value:function(t,e,n,r,o,l){void 0===l&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var c=this.elements,h=2*o/(e-t),d=2*o/(n-r),a=(e+t)/(e-t),b=(n+r)/(n-r),f=-(l+o)/(l-o),m=-2*l*o/(l-o);return c[0]=h,c[4]=0,c[8]=a,c[12]=0,c[1]=0,c[5]=d,c[9]=b,c[13]=0,c[2]=0,c[6]=0,c[10]=f,c[14]=m,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}},{key:"makeOrthographic",value:function(t,e,n,r,o,l){var c=this.elements,h=1/(e-t),d=1/(n-r),p=1/(l-o),f=(e+t)*h,m=(n+r)*d,v=(l+o)*p;return c[0]=2*h,c[4]=0,c[8]=0,c[12]=-f,c[1]=0,c[5]=2*d,c[9]=0,c[13]=-m,c[2]=0,c[6]=0,c[10]=-2*p,c[14]=-v,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}},{key:"equals",value:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<16;n++)this.elements[n]=t[n+e];return this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}]),t}();Ye.prototype.isMatrix4=!0;var qe=new ve,Qe=new Ye,$e=new ve(0,0,0),Ke=new ve(1,1,1),Je=new ve,Ze=new ve,tn=new ve,en=new Ye,nn=new me,rn=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.DefaultOrder;Object(v.a)(this,t),this._x=e,this._y=n,this._z=r,this._order=o}return Object(y.a)(t,[{key:"x",get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},{key:"y",get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},{key:"z",get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},{key:"order",get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}},{key:"set",value:function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=t,this._y=e,this._z=n,this._order=r,this._onChangeCallback(),this}},{key:"clone",value:function(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=t.elements,o=r[0],l=r[4],c=r[8],h=r[1],d=r[5],f=r[9],m=r[2],v=r[6],y=r[10];switch(e){case"XYZ":this._y=Math.asin(Vt(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-f,y),this._z=Math.atan2(-l,o)):(this._x=Math.atan2(v,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Vt(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(c,y),this._z=Math.atan2(h,d)):(this._y=Math.atan2(-m,o),this._z=0);break;case"ZXY":this._x=Math.asin(Vt(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-m,y),this._z=Math.atan2(-l,d)):(this._y=0,this._z=Math.atan2(h,o));break;case"ZYX":this._y=Math.asin(-Vt(m,-1,1)),Math.abs(m)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-l,d));break;case"YZX":this._z=Math.asin(Vt(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-f,d),this._y=Math.atan2(-m,o)):(this._x=0,this._y=Math.atan2(c,y));break;case"XZY":this._z=Math.asin(-Vt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(v,d),this._y=Math.atan2(c,o)):(this._x=Math.atan2(-f,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===n&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function(q,t,e){return en.makeRotationFromQuaternion(q),this.setFromRotationMatrix(en,t,e)}},{key:"setFromVector3",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(t.x,t.y,t.z,e)}},{key:"reorder",value:function(t){return nn.setFromEuler(this),this.setFromQuaternion(nn,t)}},{key:"equals",value:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}},{key:"fromArray",value:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}},{key:"toArray",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}},{key:"_onChange",value:function(t){return this._onChangeCallback=t,this}},{key:"_onChangeCallback",value:function(){}}]),t}();rn.prototype.isEuler=!0,rn.DefaultOrder="XYZ",rn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var an=function(){function t(){Object(v.a)(this,t),this.mask=1}return Object(y.a)(t,[{key:"set",value:function(t){this.mask=(1<<t|0)>>>0}},{key:"enable",value:function(t){this.mask|=1<<t|0}},{key:"enableAll",value:function(){this.mask=-1}},{key:"toggle",value:function(t){this.mask^=1<<t|0}},{key:"disable",value:function(t){this.mask&=~(1<<t|0)}},{key:"disableAll",value:function(){this.mask=0}},{key:"test",value:function(t){return 0!=(this.mask&t.mask)}},{key:"isEnabled",value:function(t){return 0!=(this.mask&(1<<t|0))}}]),t}(),on=0,sn=new ve,un=new me,ln=new Ye,cn=new ve,hn=new ve,dn=new ve,pn=new me,fn=new ve(1,0,0),mn=new ve(0,1,0),vn=new ve(0,0,1),gn={type:"added"},yn={type:"removed"},_n=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;Object(v.a)(this,n),t=e.call(this),Object.defineProperty(Object(h.a)(t),"id",{value:on++}),t.uuid=zt(),t.name="",t.type="Object3D",t.parent=null,t.children=[],t.up=n.DefaultUp.clone();var r=new ve,o=new rn,l=new me,c=new ve(1,1,1);return o._onChange((function(){l.setFromEuler(o,!1)})),l._onChange((function(){o.setFromQuaternion(l,void 0,!1)})),Object.defineProperties(Object(h.a)(t),{position:{configurable:!0,enumerable:!0,value:r},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:c},modelViewMatrix:{value:new Ye},normalMatrix:{value:new qt}}),t.matrix=new Ye,t.matrixWorld=new Ye,t.matrixAutoUpdate=n.DefaultMatrixAutoUpdate,t.matrixWorldNeedsUpdate=!1,t.layers=new an,t.visible=!0,t.castShadow=!1,t.receiveShadow=!1,t.frustumCulled=!0,t.renderOrder=0,t.animations=[],t.userData={},t}return Object(y.a)(n,[{key:"onBeforeRender",value:function(){}},{key:"onAfterRender",value:function(){}},{key:"applyMatrix4",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function(q){return this.quaternion.premultiply(q),this}},{key:"setRotationFromAxisAngle",value:function(t,e){this.quaternion.setFromAxisAngle(t,e)}},{key:"setRotationFromEuler",value:function(t){this.quaternion.setFromEuler(t,!0)}},{key:"setRotationFromMatrix",value:function(t){this.quaternion.setFromRotationMatrix(t)}},{key:"setRotationFromQuaternion",value:function(q){this.quaternion.copy(q)}},{key:"rotateOnAxis",value:function(t,e){return un.setFromAxisAngle(t,e),this.quaternion.multiply(un),this}},{key:"rotateOnWorldAxis",value:function(t,e){return un.setFromAxisAngle(t,e),this.quaternion.premultiply(un),this}},{key:"rotateX",value:function(t){return this.rotateOnAxis(fn,t)}},{key:"rotateY",value:function(t){return this.rotateOnAxis(mn,t)}},{key:"rotateZ",value:function(t){return this.rotateOnAxis(vn,t)}},{key:"translateOnAxis",value:function(t,e){return sn.copy(t).applyQuaternion(this.quaternion),this.position.add(sn.multiplyScalar(e)),this}},{key:"translateX",value:function(t){return this.translateOnAxis(fn,t)}},{key:"translateY",value:function(t){return this.translateOnAxis(mn,t)}},{key:"translateZ",value:function(t){return this.translateOnAxis(vn,t)}},{key:"localToWorld",value:function(t){return t.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function(t){return t.applyMatrix4(ln.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function(t,e,n){t.isVector3?cn.copy(t):cn.set(t,e,n);var r=this.parent;this.updateWorldMatrix(!0,!1),hn.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ln.lookAt(hn,cn,this.up):ln.lookAt(cn,hn,this.up),this.quaternion.setFromRotationMatrix(ln),r&&(ln.extractRotation(r.matrixWorld),un.setFromRotationMatrix(ln),this.quaternion.premultiply(un.invert()))}},{key:"add",value:function(object){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return object===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",object),this):(object&&object.isObject3D?(null!==object.parent&&object.parent.remove(object),object.parent=this,this.children.push(object),object.dispatchEvent(gn)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",object),this)}},{key:"remove",value:function(object){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var e=this.children.indexOf(object);return-1!==e&&(object.parent=null,this.children.splice(e,1),object.dispatchEvent(yn)),this}},{key:"removeFromParent",value:function(){var t=this.parent;return null!==t&&t.remove(this),this}},{key:"clear",value:function(){for(var t=0;t<this.children.length;t++){var object=this.children[t];object.parent=null,object.dispatchEvent(yn)}return this.children.length=0,this}},{key:"attach",value:function(object){return this.updateWorldMatrix(!0,!1),ln.copy(this.matrixWorld).invert(),null!==object.parent&&(object.parent.updateWorldMatrix(!0,!1),ln.multiply(object.parent.matrixWorld)),object.applyMatrix4(ln),this.add(object),object.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function(t){return this.getObjectByProperty("id",t)}},{key:"getObjectByName",value:function(t){return this.getObjectByProperty("name",t)}},{key:"getObjectByProperty",value:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var object=this.children[n].getObjectByProperty(t,e);if(void 0!==object)return object}}},{key:"getWorldPosition",value:function(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hn,t,dn),t}},{key:"getWorldScale",value:function(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hn,pn,t),t}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}},{key:"raycast",value:function(){}},{key:"traverse",value:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)}},{key:"traverseVisible",value:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}}},{key:"traverseAncestors",value:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}},{key:"updateMatrix",value:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)}},{key:"updateWorldMatrix",value:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var r=this.children,o=0,l=r.length;o<l;o++)r[o].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta,output={};t&&(meta={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},output.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var object={};function e(t,element){return void 0===t[element.uuid]&&(t[element.uuid]=element.toJSON(meta)),element.uuid}if(object.uuid=this.uuid,object.type=this.type,""!==this.name&&(object.name=this.name),!0===this.castShadow&&(object.castShadow=!0),!0===this.receiveShadow&&(object.receiveShadow=!0),!1===this.visible&&(object.visible=!1),!1===this.frustumCulled&&(object.frustumCulled=!1),0!==this.renderOrder&&(object.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(object.userData=this.userData),object.layers=this.layers.mask,object.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(object.matrixAutoUpdate=!1),this.isInstancedMesh&&(object.type="InstancedMesh",object.count=this.count,object.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(object.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?object.background=this.background.toJSON():this.background.isTexture&&(object.background=this.background.toJSON(meta).uuid)),this.environment&&this.environment.isTexture&&(object.environment=this.environment.toJSON(meta).uuid);else if(this.isMesh||this.isLine||this.isPoints){object.geometry=e(meta.geometries,this.geometry);var n=this.geometry.parameters;if(void 0!==n&&void 0!==n.shapes){var r=n.shapes;if(Array.isArray(r))for(var o=0,l=r.length;o<l;o++){var c=r[o];e(meta.shapes,c)}else e(meta.shapes,r)}}if(this.isSkinnedMesh&&(object.bindMode=this.bindMode,object.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(e(meta.skeletons,this.skeleton),object.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],d=0,f=this.material.length;d<f;d++)h.push(e(meta.materials,this.material[d]));object.material=h}else object.material=e(meta.materials,this.material);if(this.children.length>0){object.children=[];for(var m=0;m<this.children.length;m++)object.children.push(this.children[m].toJSON(meta).object)}if(this.animations.length>0){object.animations=[];for(var v=0;v<this.animations.length;v++){var y=this.animations[v];object.animations.push(e(meta.animations,y))}}if(t){var _=D(meta.geometries),x=D(meta.materials),w=D(meta.textures),S=D(meta.images),E=D(meta.shapes),M=D(meta.skeletons),T=D(meta.animations),A=D(meta.nodes);_.length>0&&(output.geometries=_),x.length>0&&(output.materials=x),w.length>0&&(output.textures=w),S.length>0&&(output.images=S),E.length>0&&(output.shapes=E),M.length>0&&(output.skeletons=M),T.length>0&&(output.animations=T),A.length>0&&(output.nodes=A)}return output.object=object,output;function D(t){var e=[];for(var n in t){var data=t[n];delete data.metadata,e.push(data)}return e}}},{key:"clone",value:function(t){return(new this.constructor).copy(this,t)}},{key:"copy",value:function(source){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=source.name,this.up.copy(source.up),this.position.copy(source.position),this.rotation.order=source.rotation.order,this.quaternion.copy(source.quaternion),this.scale.copy(source.scale),this.matrix.copy(source.matrix),this.matrixWorld.copy(source.matrixWorld),this.matrixAutoUpdate=source.matrixAutoUpdate,this.matrixWorldNeedsUpdate=source.matrixWorldNeedsUpdate,this.layers.mask=source.layers.mask,this.visible=source.visible,this.castShadow=source.castShadow,this.receiveShadow=source.receiveShadow,this.frustumCulled=source.frustumCulled,this.renderOrder=source.renderOrder,this.userData=JSON.parse(JSON.stringify(source.userData)),!0===t)for(var e=0;e<source.children.length;e++){var n=source.children[e];this.add(n.clone())}return this}}]),n}(Nt);_n.DefaultUp=new ve(0,1,0),_n.DefaultMatrixAutoUpdate=!0,_n.prototype.isObject3D=!0;var bn=new ve,xn=new ve,wn=new ve,Sn=new ve,En=new ve,Mn=new ve,Tn=new ve,An=new ve,Dn=new ve,Pn=new ve,Cn=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ve;Object(v.a)(this,t),this.a=a,this.b=b,this.c=e}return Object(y.a)(t,[{key:"set",value:function(a,b,t){return this.a.copy(a),this.b.copy(b),this.c.copy(t),this}},{key:"setFromPointsAndIndices",value:function(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}},{key:"setFromAttributeAndIndices",value:function(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}},{key:"getArea",value:function(){return bn.subVectors(this.c,this.b),xn.subVectors(this.a,this.b),.5*bn.cross(xn).length()}},{key:"getMidpoint",value:function(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function(e){return t.getNormal(this.a,this.b,this.c,e)}},{key:"getPlane",value:function(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function(e,n){return t.getBarycoord(e,this.a,this.b,this.c,n)}},{key:"getUV",value:function(e,n,r,o,l){return t.getUV(e,this.a,this.b,this.c,n,r,o,l)}},{key:"containsPoint",value:function(e){return t.containsPoint(e,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function(e){return t.isFrontFacing(this.a,this.b,this.c,e)}},{key:"intersectsBox",value:function(t){return t.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function(p,t){var e,n,a=this.a,b=this.b,r=this.c;En.subVectors(b,a),Mn.subVectors(r,a),An.subVectors(p,a);var o=En.dot(An),l=Mn.dot(An);if(o<=0&&l<=0)return t.copy(a);Dn.subVectors(p,b);var c=En.dot(Dn),h=Mn.dot(Dn);if(c>=0&&h<=c)return t.copy(b);var d=o*h-c*l;if(d<=0&&o>=0&&c<=0)return e=o/(o-c),t.copy(a).addScaledVector(En,e);Pn.subVectors(p,r);var f=En.dot(Pn),m=Mn.dot(Pn);if(m>=0&&f<=m)return t.copy(r);var v=f*l-o*m;if(v<=0&&l>=0&&m<=0)return n=l/(l-m),t.copy(a).addScaledVector(Mn,n);var y=c*m-f*h;if(y<=0&&h-c>=0&&f-m>=0)return Tn.subVectors(r,b),n=(h-c)/(h-c+(f-m)),t.copy(b).addScaledVector(Tn,n);var _=1/(y+v+d);return e=v*_,n=d*_,t.copy(a).addScaledVector(En,e).addScaledVector(Mn,n)}},{key:"equals",value:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}],[{key:"getNormal",value:function(a,b,t,e){e.subVectors(t,b),bn.subVectors(a,b),e.cross(bn);var n=e.lengthSq();return n>0?e.multiplyScalar(1/Math.sqrt(n)):e.set(0,0,0)}},{key:"getBarycoord",value:function(t,a,b,e,n){bn.subVectors(e,a),xn.subVectors(b,a),wn.subVectors(t,a);var r=bn.dot(bn),o=bn.dot(xn),l=bn.dot(wn),c=xn.dot(xn),h=xn.dot(wn),d=r*c-o*o;if(0===d)return n.set(-2,-1,-1);var f=1/d,u=(c*l-o*h)*f,m=(r*h-o*l)*f;return n.set(1-u-m,m,u)}},{key:"containsPoint",value:function(t,a,b,e){return this.getBarycoord(t,a,b,e,Sn),Sn.x>=0&&Sn.y>=0&&Sn.x+Sn.y<=1}},{key:"getUV",value:function(t,e,n,r,o,l,c,h){return this.getBarycoord(t,e,n,r,Sn),h.set(0,0),h.addScaledVector(o,Sn.x),h.addScaledVector(l,Sn.y),h.addScaledVector(c,Sn.z),h}},{key:"isFrontFacing",value:function(a,b,t,e){return bn.subVectors(t,b),xn.subVectors(a,b),bn.cross(xn).dot(e)<0}}]),t}(),kn=0,On=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),t=e.call(this),Object.defineProperty(Object(h.a)(t),"id",{value:kn++}),t.uuid=zt(),t.name="",t.type="Material",t.fog=!0,t.blending=1,t.side=0,t.vertexColors=!1,t.opacity=1,t.transparent=!1,t.blendSrc=204,t.blendDst=205,t.blendEquation=E,t.blendSrcAlpha=null,t.blendDstAlpha=null,t.blendEquationAlpha=null,t.depthFunc=3,t.depthTest=!0,t.depthWrite=!0,t.stencilWriteMask=255,t.stencilFunc=519,t.stencilRef=0,t.stencilFuncMask=255,t.stencilFail=Ot,t.stencilZFail=Ot,t.stencilZPass=Ot,t.stencilWrite=!1,t.clippingPlanes=null,t.clipIntersection=!1,t.clipShadows=!1,t.shadowSide=null,t.colorWrite=!0,t.precision=null,t.polygonOffset=!1,t.polygonOffsetFactor=0,t.polygonOffsetUnits=0,t.dithering=!1,t.alphaToCoverage=!1,t.premultipliedAlpha=!1,t.visible=!0,t.toneMapped=!0,t.userData={},t.version=0,t._alphaTest=0,t}return Object(y.a)(n,[{key:"alphaTest",get:function(){return this._alphaTest},set:function(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}},{key:"onBuild",value:function(){}},{key:"onBeforeRender",value:function(){}},{key:"onBeforeCompile",value:function(){}},{key:"customProgramCacheKey",value:function(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var r=this[e];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}}},{key:"toJSON",value:function(meta){var t=void 0===meta||"string"==typeof meta;t&&(meta={textures:{},images:{}});var data={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function e(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),this.color&&this.color.isColor&&(data.color=this.color.getHex()),void 0!==this.roughness&&(data.roughness=this.roughness),void 0!==this.metalness&&(data.metalness=this.metalness),void 0!==this.sheen&&(data.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(data.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(data.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(data.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(data.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(data.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(data.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(data.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(data.shininess=this.shininess),void 0!==this.clearcoat&&(data.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(data.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(data.clearcoatMap=this.clearcoatMap.toJSON(meta).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(data.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(meta).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(data.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(meta).uuid,data.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(data.map=this.map.toJSON(meta).uuid),this.matcap&&this.matcap.isTexture&&(data.matcap=this.matcap.toJSON(meta).uuid),this.alphaMap&&this.alphaMap.isTexture&&(data.alphaMap=this.alphaMap.toJSON(meta).uuid),this.lightMap&&this.lightMap.isTexture&&(data.lightMap=this.lightMap.toJSON(meta).uuid,data.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(data.aoMap=this.aoMap.toJSON(meta).uuid,data.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(data.bumpMap=this.bumpMap.toJSON(meta).uuid,data.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(data.normalMap=this.normalMap.toJSON(meta).uuid,data.normalMapType=this.normalMapType,data.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(data.displacementMap=this.displacementMap.toJSON(meta).uuid,data.displacementScale=this.displacementScale,data.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(data.roughnessMap=this.roughnessMap.toJSON(meta).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(data.metalnessMap=this.metalnessMap.toJSON(meta).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(data.emissiveMap=this.emissiveMap.toJSON(meta).uuid),this.specularMap&&this.specularMap.isTexture&&(data.specularMap=this.specularMap.toJSON(meta).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(data.specularIntensityMap=this.specularIntensityMap.toJSON(meta).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(data.specularColorMap=this.specularColorMap.toJSON(meta).uuid),this.envMap&&this.envMap.isTexture&&(data.envMap=this.envMap.toJSON(meta).uuid,void 0!==this.combine&&(data.combine=this.combine)),void 0!==this.envMapIntensity&&(data.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(data.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(data.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(data.gradientMap=this.gradientMap.toJSON(meta).uuid),void 0!==this.transmission&&(data.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(data.transmissionMap=this.transmissionMap.toJSON(meta).uuid),void 0!==this.thickness&&(data.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(data.thicknessMap=this.thicknessMap.toJSON(meta).uuid),void 0!==this.attenuationDistance&&(data.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(data.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(data.size=this.size),null!==this.shadowSide&&(data.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(data.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(data.blending=this.blending),0!==this.side&&(data.side=this.side),this.vertexColors&&(data.vertexColors=!0),this.opacity<1&&(data.opacity=this.opacity),!0===this.transparent&&(data.transparent=this.transparent),data.depthFunc=this.depthFunc,data.depthTest=this.depthTest,data.depthWrite=this.depthWrite,data.colorWrite=this.colorWrite,data.stencilWrite=this.stencilWrite,data.stencilWriteMask=this.stencilWriteMask,data.stencilFunc=this.stencilFunc,data.stencilRef=this.stencilRef,data.stencilFuncMask=this.stencilFuncMask,data.stencilFail=this.stencilFail,data.stencilZFail=this.stencilZFail,data.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(data.rotation=this.rotation),!0===this.polygonOffset&&(data.polygonOffset=!0),0!==this.polygonOffsetFactor&&(data.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(data.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(data.linewidth=this.linewidth),void 0!==this.dashSize&&(data.dashSize=this.dashSize),void 0!==this.gapSize&&(data.gapSize=this.gapSize),void 0!==this.scale&&(data.scale=this.scale),!0===this.dithering&&(data.dithering=!0),this.alphaTest>0&&(data.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(data.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(data.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(data.wireframe=this.wireframe),this.wireframeLinewidth>1&&(data.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(data.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(data.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(data.flatShading=this.flatShading),!1===this.visible&&(data.visible=!1),!1===this.toneMapped&&(data.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(data.userData=this.userData),t){var n=e(meta.textures),r=e(meta.images);n.length>0&&(data.textures=n),r.length>0&&(data.images=r)}return data}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){this.name=source.name,this.fog=source.fog,this.blending=source.blending,this.side=source.side,this.vertexColors=source.vertexColors,this.opacity=source.opacity,this.transparent=source.transparent,this.blendSrc=source.blendSrc,this.blendDst=source.blendDst,this.blendEquation=source.blendEquation,this.blendSrcAlpha=source.blendSrcAlpha,this.blendDstAlpha=source.blendDstAlpha,this.blendEquationAlpha=source.blendEquationAlpha,this.depthFunc=source.depthFunc,this.depthTest=source.depthTest,this.depthWrite=source.depthWrite,this.stencilWriteMask=source.stencilWriteMask,this.stencilFunc=source.stencilFunc,this.stencilRef=source.stencilRef,this.stencilFuncMask=source.stencilFuncMask,this.stencilFail=source.stencilFail,this.stencilZFail=source.stencilZFail,this.stencilZPass=source.stencilZPass,this.stencilWrite=source.stencilWrite;var t=source.clippingPlanes,e=null;if(null!==t){var n=t.length;e=new Array(n);for(var r=0;r!==n;++r)e[r]=t[r].clone()}return this.clippingPlanes=e,this.clipIntersection=source.clipIntersection,this.clipShadows=source.clipShadows,this.shadowSide=source.shadowSide,this.colorWrite=source.colorWrite,this.precision=source.precision,this.polygonOffset=source.polygonOffset,this.polygonOffsetFactor=source.polygonOffsetFactor,this.polygonOffsetUnits=source.polygonOffsetUnits,this.dithering=source.dithering,this.alphaTest=source.alphaTest,this.alphaToCoverage=source.alphaToCoverage,this.premultipliedAlpha=source.premultipliedAlpha,this.visible=source.visible,this.toneMapped=source.toneMapped,this.userData=JSON.parse(JSON.stringify(source.userData)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}}]),n}(Nt);On.prototype.isMaterial=!0,On.fromType=function(){return null};var Ln=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshBasicMaterial",r.color=new ie(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this}}]),n}(On);Ln.prototype.isMeshBasicMaterial=!0;var Fn=new ve,Rn=new Yt,In=function(){function t(e,n,r){if(Object(v.a)(this,t),Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=n,this.count=void 0!==e?e.length/n:0,this.normalized=!0===r,this.usage=Lt,this.updateRange={offset:0,count:-1},this.version=0}return Object(y.a)(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(source){return this.name=source.name,this.array=new source.array.constructor(source.array),this.itemSize=source.itemSize,this.count=source.count,this.normalized=source.normalized,this.usage=source.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[n+r];return this}},{key:"copyArray",value:function(t){return this.array.set(t),this}},{key:"copyColorsArray",value:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var l=t[r];void 0===l&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),l=new ie),e[n++]=l.r,e[n++]=l.g,e[n++]=l.b}return this}},{key:"copyVector2sArray",value:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var l=t[r];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),l=new Yt),e[n++]=l.x,e[n++]=l.y}return this}},{key:"copyVector3sArray",value:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var l=t[r];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),l=new ve),e[n++]=l.x,e[n++]=l.y,e[n++]=l.z}return this}},{key:"copyVector4sArray",value:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var l=t[r];void 0===l&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),l=new ce),e[n++]=l.x,e[n++]=l.y,e[n++]=l.z,e[n++]=l.w}return this}},{key:"applyMatrix3",value:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Rn.fromBufferAttribute(this,e),Rn.applyMatrix3(t),this.setXY(e,Rn.x,Rn.y);else if(3===this.itemSize)for(var r=0,o=this.count;r<o;r++)Fn.fromBufferAttribute(this,r),Fn.applyMatrix3(t),this.setXYZ(r,Fn.x,Fn.y,Fn.z);return this}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.applyMatrix4(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.applyNormalMatrix(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)Fn.x=this.getX(e),Fn.y=this.getY(e),Fn.z=this.getZ(e),Fn.transformDirection(t),this.setXYZ(e,Fn.x,Fn.y,Fn.z);return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"getX",value:function(t){return this.array[t*this.itemSize]}},{key:"setX",value:function(t,e){return this.array[t*this.itemSize]=e,this}},{key:"getY",value:function(t){return this.array[t*this.itemSize+1]}},{key:"setY",value:function(t,e){return this.array[t*this.itemSize+1]=e,this}},{key:"getZ",value:function(t){return this.array[t*this.itemSize+2]}},{key:"setZ",value:function(t,e){return this.array[t*this.itemSize+2]=e,this}},{key:"getW",value:function(t){return this.array[t*this.itemSize+3]}},{key:"setW",value:function(t,e){return this.array[t*this.itemSize+3]=e,this}},{key:"setXY",value:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,o){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"clone",value:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function(){var data={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(data.name=this.name),this.usage!==Lt&&(data.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(data.updateRange=this.updateRange),data}}]),t}();In.prototype.isBufferAttribute=!0;var Nn=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){return Object(v.a)(this,n),e.call(this,new Uint16Array(t),r,o)}return n}(In),jn=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){return Object(v.a)(this,n),e.call(this,new Uint32Array(t),r,o)}return n}(In);(function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){return Object(v.a)(this,n),e.call(this,new Uint16Array(t),r,o)}return n})(In).prototype.isFloat16BufferAttribute=!0;var Bn=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){return Object(v.a)(this,n),e.call(this,new Float32Array(t),r,o)}return n}(In),Un=0,zn=new Ye,Vn=new _n,Hn=new ve,Gn=new _e,Wn=new _e,Xn=new ve,Yn=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),t=e.call(this),Object.defineProperty(Object(h.a)(t),"id",{value:Un++}),t.uuid=zt(),t.name="",t.type="BufferGeometry",t.index=null,t.attributes={},t.morphAttributes={},t.morphTargetsRelative=!1,t.groups=[],t.boundingBox=null,t.boundingSphere=null,t.drawRange={start:0,count:1/0},t.userData={},t}return Object(y.a)(n,[{key:"getIndex",value:function(){return this.index}},{key:"setIndex",value:function(t){return Array.isArray(t)?this.index=new(Qt(t)?jn:Nn)(t,1):this.index=t,this}},{key:"getAttribute",value:function(t){return this.attributes[t]}},{key:"setAttribute",value:function(t,e){return this.attributes[t]=e,this}},{key:"deleteAttribute",value:function(t){return delete this.attributes[t],this}},{key:"hasAttribute",value:function(t){return void 0!==this.attributes[t]}},{key:"addGroup",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:t,count:e,materialIndex:n})}},{key:"clearGroups",value:function(){this.groups=[]}},{key:"setDrawRange",value:function(t,e){this.drawRange.start=t,this.drawRange.count=e}},{key:"applyMatrix4",value:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new qt).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var o=this.attributes.tangent;return void 0!==o&&(o.transformDirection(t),o.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function(q){return zn.makeRotationFromQuaternion(q),this.applyMatrix4(zn),this}},{key:"rotateX",value:function(t){return zn.makeRotationX(t),this.applyMatrix4(zn),this}},{key:"rotateY",value:function(t){return zn.makeRotationY(t),this.applyMatrix4(zn),this}},{key:"rotateZ",value:function(t){return zn.makeRotationZ(t),this.applyMatrix4(zn),this}},{key:"translate",value:function(t,e,n){return zn.makeTranslation(t,e,n),this.applyMatrix4(zn),this}},{key:"scale",value:function(t,e,n){return zn.makeScale(t,e,n),this.applyMatrix4(zn),this}},{key:"lookAt",value:function(t){return Vn.lookAt(t),Vn.updateMatrix(),this.applyMatrix4(Vn.matrix),this}},{key:"center",value:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Hn).negate(),this.translate(Hn.x,Hn.y,Hn.z),this}},{key:"setFromPoints",value:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var o=t[n];e.push(o.x,o.y,o.z||0)}return this.setAttribute("position",new Bn(e,3)),this}},{key:"computeBoundingBox",value:function(){null===this.boundingBox&&(this.boundingBox=new _e);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new ve(-1/0,-1/0,-1/0),new ve(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,r=e.length;n<r;n++){var o=e[n];Gn.setFromBufferAttribute(o),this.morphTargetsRelative?(Xn.addVectors(this.boundingBox.min,Gn.min),this.boundingBox.expandByPoint(Xn),Xn.addVectors(this.boundingBox.max,Gn.max),this.boundingBox.expandByPoint(Xn)):(this.boundingBox.expandByPoint(Gn.min),this.boundingBox.expandByPoint(Gn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function(){null===this.boundingSphere&&(this.boundingSphere=new je);var t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new ve,1/0);if(t){var n=this.boundingSphere.center;if(Gn.setFromBufferAttribute(t),e)for(var r=0,o=e.length;r<o;r++){var l=e[r];Wn.setFromBufferAttribute(l),this.morphTargetsRelative?(Xn.addVectors(Gn.min,Wn.min),Gn.expandByPoint(Xn),Xn.addVectors(Gn.max,Wn.max),Gn.expandByPoint(Xn)):(Gn.expandByPoint(Wn.min),Gn.expandByPoint(Wn.max))}Gn.getCenter(n);for(var c=0,h=0,d=t.count;h<d;h++)Xn.fromBufferAttribute(t,h),c=Math.max(c,n.distanceToSquared(Xn));if(e)for(var f=0,m=e.length;f<m;f++)for(var v=e[f],y=this.morphTargetsRelative,_=0,x=v.count;_<x;_++)Xn.fromBufferAttribute(v,_),y&&(Hn.fromBufferAttribute(t,_),Xn.add(Hn)),c=Math.max(c,n.distanceToSquared(Xn));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function(){var t=this.index,e=this.attributes;if(null!==t&&void 0!==e.position&&void 0!==e.normal&&void 0!==e.uv){var n=t.array,r=e.position.array,o=e.normal.array,l=e.uv.array,c=r.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new In(new Float32Array(4*c),4));for(var h=this.getAttribute("tangent").array,d=[],f=[],m=0;m<c;m++)d[m]=new ve,f[m]=new ve;var v=new ve,y=new ve,_=new ve,x=new Yt,w=new Yt,S=new Yt,E=new ve,M=new ve,T=this.groups;0===T.length&&(T=[{start:0,count:n.length}]);for(var A=0,D=T.length;A<D;++A)for(var P=T[A],C=P.start,k=C,O=C+P.count;k<O;k+=3)H(n[k+0],n[k+1],n[k+2]);for(var L=new ve,F=new ve,R=new ve,I=new ve,N=0,j=T.length;N<j;++N)for(var B=T[N],U=B.start,z=U,V=U+B.count;z<V;z+=3)G(n[z+0]),G(n[z+1]),G(n[z+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function H(a,b,t){v.fromArray(r,3*a),y.fromArray(r,3*b),_.fromArray(r,3*t),x.fromArray(l,2*a),w.fromArray(l,2*b),S.fromArray(l,2*t),y.sub(v),_.sub(v),w.sub(x),S.sub(x);var e=1/(w.x*S.y-S.x*w.y);isFinite(e)&&(E.copy(y).multiplyScalar(S.y).addScaledVector(_,-w.y).multiplyScalar(e),M.copy(_).multiplyScalar(w.x).addScaledVector(y,-S.x).multiplyScalar(e),d[a].add(E),d[b].add(E),d[t].add(E),f[a].add(M),f[b].add(M),f[t].add(M))}function G(t){R.fromArray(o,3*t),I.copy(R);var e=d[t];L.copy(e),L.sub(R.multiplyScalar(R.dot(e))).normalize(),F.crossVectors(I,e);var n=F.dot(f[t])<0?-1:1;h[4*t]=L.x,h[4*t+1]=L.y,h[4*t+2]=L.z,h[4*t+3]=n}}},{key:"computeVertexNormals",value:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new In(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var r=0,o=n.count;r<o;r++)n.setXYZ(r,0,0,0);var l=new ve,c=new ve,h=new ve,d=new ve,f=new ve,m=new ve,v=new ve,y=new ve;if(t)for(var _=0,x=t.count;_<x;_+=3){var w=t.getX(_+0),S=t.getX(_+1),E=t.getX(_+2);l.fromBufferAttribute(e,w),c.fromBufferAttribute(e,S),h.fromBufferAttribute(e,E),v.subVectors(h,c),y.subVectors(l,c),v.cross(y),d.fromBufferAttribute(n,w),f.fromBufferAttribute(n,S),m.fromBufferAttribute(n,E),d.add(v),f.add(v),m.add(v),n.setXYZ(w,d.x,d.y,d.z),n.setXYZ(S,f.x,f.y,f.z),n.setXYZ(E,m.x,m.y,m.z)}else for(var M=0,T=e.count;M<T;M+=3)l.fromBufferAttribute(e,M+0),c.fromBufferAttribute(e,M+1),h.fromBufferAttribute(e,M+2),v.subVectors(h,c),y.subVectors(l,c),v.cross(y),n.setXYZ(M+0,v.x,v.y,v.z),n.setXYZ(M+1,v.x,v.y,v.z),n.setXYZ(M+2,v.x,v.y,v.z);this.normalizeNormals(),n.needsUpdate=!0}}},{key:"merge",value:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var o=n[r].array,l=t.attributes[r],c=l.array,h=l.itemSize*e,d=Math.min(c.length,o.length-h),f=0,m=h;f<d;f++,m++)o[m]=c[f];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)}},{key:"normalizeNormals",value:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)Xn.fromBufferAttribute(t,e),Xn.normalize(),t.setXYZ(e,Xn.x,Xn.y,Xn.z)}},{key:"toNonIndexed",value:function(){function t(t,e){for(var n=t.array,r=t.itemSize,o=t.normalized,l=new n.constructor(e.length*r),c=0,h=0,d=0,f=e.length;d<f;d++){c=t.isInterleavedBufferAttribute?e[d]*t.data.stride+t.offset:e[d]*r;for(var m=0;m<r;m++)l[h++]=n[c++]}return new In(l,r,o)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var e=new n,r=this.index.array,o=this.attributes;for(var l in o){var c=t(o[l],r);e.setAttribute(l,c)}var h=this.morphAttributes;for(var d in h){for(var f=[],m=h[d],v=0,y=m.length;v<y;v++){var _=t(m[v],r);f.push(_)}e.morphAttributes[d]=f}e.morphTargetsRelative=this.morphTargetsRelative;for(var x=this.groups,w=0,S=x.length;w<S;w++){var E=x[w];e.addGroup(E.start,E.count,E.materialIndex)}return e}},{key:"toJSON",value:function(){var data={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(data.uuid=this.uuid,data.type=this.type,""!==this.name&&(data.name=this.name),Object.keys(this.userData).length>0&&(data.userData=this.userData),void 0!==this.parameters){var t=this.parameters;for(var e in t)void 0!==t[e]&&(data[e]=t[e]);return data}data.data={attributes:{}};var n=this.index;null!==n&&(data.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});var r=this.attributes;for(var o in r){var l=r[o];data.data.attributes[o]=l.toJSON(data.data)}var c={},h=!1;for(var d in this.morphAttributes){for(var f=this.morphAttributes[d],m=[],v=0,y=f.length;v<y;v++){var _=f[v];m.push(_.toJSON(data.data))}m.length>0&&(c[d]=m,h=!0)}h&&(data.data.morphAttributes=c,data.data.morphTargetsRelative=this.morphTargetsRelative);var x=this.groups;x.length>0&&(data.data.groups=JSON.parse(JSON.stringify(x)));var w=this.boundingSphere;return null!==w&&(data.data.boundingSphere={center:w.center.toArray(),radius:w.radius}),data}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var data={};this.name=source.name;var t=source.index;null!==t&&this.setIndex(t.clone(data));var e=source.attributes;for(var n in e){var r=e[n];this.setAttribute(n,r.clone(data))}var o=source.morphAttributes;for(var l in o){for(var c=[],h=o[l],d=0,f=h.length;d<f;d++)c.push(h[d].clone(data));this.morphAttributes[l]=c}this.morphTargetsRelative=source.morphTargetsRelative;for(var m=source.groups,v=0,y=m.length;v<y;v++){var _=m[v];this.addGroup(_.start,_.count,_.materialIndex)}var x=source.boundingBox;null!==x&&(this.boundingBox=x.clone());var w=source.boundingSphere;return null!==w&&(this.boundingSphere=w.clone()),this.drawRange.start=source.drawRange.start,this.drawRange.count=source.drawRange.count,this.userData=source.userData,void 0!==source.parameters&&(this.parameters=Object.assign({},source.parameters)),this}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(Nt);Yn.prototype.isBufferGeometry=!0;var qn=new Ye,Qn=new Xe,$n=new je,Kn=new ve,Jn=new ve,Zn=new ve,er=new ve,nr=new ve,rr=new ve,ir=new ve,ar=new ve,or=new ve,sr=new Yt,ur=new Yt,lr=new Yt,cr=new ve,dr=new ve,pr=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yn,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ln;return Object(v.a)(this,n),(t=e.call(this)).type="Mesh",t.geometry=r,t.material=o,t.updateMorphTargets(),t}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),void 0!==source.morphTargetInfluences&&(this.morphTargetInfluences=source.morphTargetInfluences.slice()),void 0!==source.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},source.morphTargetDictionary)),this.material=source.material,this.geometry=source.geometry,this}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,l=r.length;o<l;o++){var c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}else{var h=t.morphTargets;void 0!==h&&h.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function(t,e){var n,r=this.geometry,o=this.material,l=this.matrixWorld;if(void 0!==o&&(null===r.boundingSphere&&r.computeBoundingSphere(),$n.copy(r.boundingSphere),$n.applyMatrix4(l),!1!==t.ray.intersectsSphere($n)&&(qn.copy(l).invert(),Qn.copy(t.ray).applyMatrix4(qn),null===r.boundingBox||!1!==Qn.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var c=r.index,h=r.attributes.position,d=r.morphAttributes.position,f=r.morphTargetsRelative,m=r.attributes.uv,v=r.attributes.uv2,y=r.groups,_=r.drawRange;if(null!==c)if(Array.isArray(o))for(var x=0,w=y.length;x<w;x++)for(var S=y[x],E=o[S.materialIndex],M=Math.max(S.start,_.start),T=Math.min(c.count,Math.min(S.start+S.count,_.start+_.count));M<T;M+=3){var a=c.getX(M),b=c.getX(M+1),A=c.getX(M+2);(n=fr(this,E,t,Qn,h,d,f,m,v,a,b,A))&&(n.faceIndex=Math.floor(M/3),n.face.materialIndex=S.materialIndex,e.push(n))}else for(var D=Math.max(0,_.start),P=Math.min(c.count,_.start+_.count);D<P;D+=3){var C=c.getX(D),k=c.getX(D+1),O=c.getX(D+2);(n=fr(this,o,t,Qn,h,d,f,m,v,C,k,O))&&(n.faceIndex=Math.floor(D/3),e.push(n))}else if(void 0!==h)if(Array.isArray(o))for(var L=0,F=y.length;L<F;L++)for(var R=y[L],I=o[R.materialIndex],N=Math.max(R.start,_.start),j=Math.min(h.count,Math.min(R.start+R.count,_.start+_.count));N<j;N+=3){(n=fr(this,I,t,Qn,h,d,f,m,v,N,N+1,N+2))&&(n.faceIndex=Math.floor(N/3),n.face.materialIndex=R.materialIndex,e.push(n))}else for(var B=Math.max(0,_.start),U=Math.min(h.count,_.start+_.count);B<U;B+=3){(n=fr(this,o,t,Qn,h,d,f,m,v,B,B+1,B+2))&&(n.faceIndex=Math.floor(B/3),e.push(n))}}else r.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),n}(_n);function fr(object,t,e,n,r,o,l,c,h,a,b,d){Kn.fromBufferAttribute(r,a),Jn.fromBufferAttribute(r,b),Zn.fromBufferAttribute(r,d);var f=object.morphTargetInfluences;if(o&&f){ir.set(0,0,0),ar.set(0,0,0),or.set(0,0,0);for(var m=0,v=o.length;m<v;m++){var y=f[m],_=o[m];0!==y&&(er.fromBufferAttribute(_,a),nr.fromBufferAttribute(_,b),rr.fromBufferAttribute(_,d),l?(ir.addScaledVector(er,y),ar.addScaledVector(nr,y),or.addScaledVector(rr,y)):(ir.addScaledVector(er.sub(Kn),y),ar.addScaledVector(nr.sub(Jn),y),or.addScaledVector(rr.sub(Zn),y)))}Kn.add(ir),Jn.add(ar),Zn.add(or)}object.isSkinnedMesh&&(object.boneTransform(a,Kn),object.boneTransform(b,Jn),object.boneTransform(d,Zn));var x=function(object,t,e,n,r,o,l,c){if(null===(1===t.side?n.intersectTriangle(l,o,r,!0,c):n.intersectTriangle(r,o,l,2!==t.side,c)))return null;dr.copy(c),dr.applyMatrix4(object.matrixWorld);var h=e.ray.origin.distanceTo(dr);return h<e.near||h>e.far?null:{distance:h,point:dr.clone(),object:object}}(object,t,e,n,Kn,Jn,Zn,cr);if(x){c&&(sr.fromBufferAttribute(c,a),ur.fromBufferAttribute(c,b),lr.fromBufferAttribute(c,d),x.uv=Cn.getUV(cr,Kn,Jn,Zn,sr,ur,lr,new Yt)),h&&(sr.fromBufferAttribute(h,a),ur.fromBufferAttribute(h,b),lr.fromBufferAttribute(h,d),x.uv2=Cn.getUV(cr,Kn,Jn,Zn,sr,ur,lr,new Yt));var w={a:a,b:b,c:d,normal:new ve,materialIndex:0};Cn.getNormal(Kn,Jn,Zn,w.normal),x.face=w}return x}pr.prototype.isMesh=!0;var mr=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;Object(v.a)(this,n),(t=e.call(this)).type="BoxGeometry",t.parameters={width:r,height:o,depth:l,widthSegments:c,heightSegments:d,depthSegments:f};var m=Object(h.a)(t);c=Math.floor(c),d=Math.floor(d),f=Math.floor(f);var y=[],_=[],x=[],w=[],S=0,E=0;function M(u,t,e,n,r,o,l,c,h,d,f){for(var v=o/h,M=l/d,T=o/2,A=l/2,D=c/2,P=h+1,C=d+1,k=0,O=0,L=new ve,F=0;F<C;F++)for(var R=F*M-A,I=0;I<P;I++){var N=I*v-T;L[u]=N*n,L[t]=R*r,L[e]=D,_.push(L.x,L.y,L.z),L[u]=0,L[t]=0,L[e]=c>0?1:-1,x.push(L.x,L.y,L.z),w.push(I/h),w.push(1-F/d),k+=1}for(var j=0;j<d;j++)for(var B=0;B<h;B++){var a=S+B+P*j,b=S+B+P*(j+1),U=S+(B+1)+P*(j+1),z=S+(B+1)+P*j;y.push(a,b,z),y.push(b,U,z),O+=6}m.addGroup(E,O,f),E+=O,S+=k}return M("z","y","x",-1,-1,l,o,r,f,d,0),M("z","y","x",1,-1,l,o,-r,f,d,1),M("x","z","y",1,1,r,l,o,c,f,2),M("x","z","y",1,-1,r,l,-o,c,f,3),M("x","y","z",1,-1,r,o,l,c,d,4),M("x","y","z",-1,-1,r,o,-l,c,d,5),t.setIndex(y),t.setAttribute("position",new Bn(_,3)),t.setAttribute("normal",new Bn(x,3)),t.setAttribute("uv",new Bn(w,2)),t}return Object(y.a)(n,null,[{key:"fromJSON",value:function(data){return new n(data.width,data.height,data.depth,data.widthSegments,data.heightSegments,data.depthSegments)}}]),n}(Yn);function vr(t){var e={};for(var u in t)for(var p in e[u]={},t[u]){var n=t[u][p];n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture||n.isQuaternion)?e[u][p]=n.clone():Array.isArray(n)?e[u][p]=n.slice():e[u][p]=n}return e}function gr(t){for(var e={},u=0;u<t.length;u++){var n=vr(t[u]);for(var p in n)e[p]=n[p]}return e}var yr={clone:vr,merge:gr},_r=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="ShaderMaterial",r.defines={},r.uniforms={},r.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",r.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",r.linewidth=1,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.lights=!1,r.clipping=!1,r.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},r.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},r.index0AttributeName=void 0,r.uniformsNeedUpdate=!1,r.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),r.setValues(t)),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.fragmentShader=source.fragmentShader,this.vertexShader=source.vertexShader,this.uniforms=vr(source.uniforms),this.defines=Object.assign({},source.defines),this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.lights=source.lights,this.clipping=source.clipping,this.extensions=Object.assign({},source.extensions),this.glslVersion=source.glslVersion,this}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);for(var t in data.glslVersion=this.glslVersion,data.uniforms={},this.uniforms){var e=this.uniforms[t].value;e&&e.isTexture?data.uniforms[t]={type:"t",value:e.toJSON(meta).uuid}:e&&e.isColor?data.uniforms[t]={type:"c",value:e.getHex()}:e&&e.isVector2?data.uniforms[t]={type:"v2",value:e.toArray()}:e&&e.isVector3?data.uniforms[t]={type:"v3",value:e.toArray()}:e&&e.isVector4?data.uniforms[t]={type:"v4",value:e.toArray()}:e&&e.isMatrix3?data.uniforms[t]={type:"m3",value:e.toArray()}:e&&e.isMatrix4?data.uniforms[t]={type:"m4",value:e.toArray()}:data.uniforms[t]={value:e}}Object.keys(this.defines).length>0&&(data.defines=this.defines),data.vertexShader=this.vertexShader,data.fragmentShader=this.fragmentShader;var r={};for(var o in this.extensions)!0===this.extensions[o]&&(r[o]=!0);return Object.keys(r).length>0&&(data.extensions=r),data}}]),n}(On);_r.prototype.isShaderMaterial=!0;var xr=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="Camera",t.matrixWorldInverse=new Ye,t.projectionMatrix=new Ye,t.projectionMatrixInverse=new Ye,t}return Object(y.a)(n,[{key:"copy",value:function(source,t){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source,t),this.matrixWorldInverse.copy(source.matrixWorldInverse),this.projectionMatrix.copy(source.projectionMatrix),this.projectionMatrixInverse.copy(source.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function(t){this.updateWorldMatrix(!0,!1);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()}},{key:"updateMatrixWorld",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"updateMatrixWorld",this).call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function(t,e){Object(c.a)(Object(m.a)(n.prototype),"updateWorldMatrix",this).call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),n}(_n);xr.prototype.isCamera=!0;var wr=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return Object(v.a)(this,n),(t=e.call(this)).type="PerspectiveCamera",t.fov=r,t.zoom=1,t.near=l,t.far=c,t.focus=10,t.aspect=o,t.view=null,t.filmGauge=35,t.filmOffset=0,t.updateProjectionMatrix(),t}return Object(y.a)(n,[{key:"copy",value:function(source,t){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source,t),this.fov=source.fov,this.zoom=source.zoom,this.near=source.near,this.far=source.far,this.focus=source.focus,this.aspect=source.aspect,this.view=null===source.view?null:Object.assign({},source.view),this.filmGauge=source.filmGauge,this.filmOffset=source.filmOffset,this}},{key:"setFocalLength",value:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*Ut*Math.atan(e),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function(){var t=Math.tan(.5*Bt*this.fov);return.5*this.getFilmHeight()/t}},{key:"getEffectiveFOV",value:function(){return 2*Ut*Math.atan(Math.tan(.5*Bt*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function(t,e,n,r,o,l){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=this.near,e=t*Math.tan(.5*Bt*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r,view=this.view;if(null!==this.view&&this.view.enabled){var l=view.fullWidth,c=view.fullHeight;o+=view.offsetX*r/l,e-=view.offsetY*n/c,r*=view.width/l,n*=view.height/c}var h=this.filmOffset;0!==h&&(o+=t*h/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return data.object.fov=this.fov,data.object.zoom=this.zoom,data.object.near=this.near,data.object.far=this.far,data.object.focus=this.focus,data.object.aspect=this.aspect,null!==this.view&&(data.object.view=Object.assign({},this.view)),data.object.filmGauge=this.filmGauge,data.object.filmOffset=this.filmOffset,data}}]),n}(xr);wr.prototype.isPerspectiveCamera=!0;var Sr=90,Er=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;if(Object(v.a)(this,n),(l=e.call(this)).type="CubeCamera",!0!==o.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),Object(f.a)(l);l.renderTarget=o;var c=new wr(Sr,1,t,r);c.layers=l.layers,c.up.set(0,-1,0),c.lookAt(new ve(1,0,0)),l.add(c);var h=new wr(Sr,1,t,r);h.layers=l.layers,h.up.set(0,-1,0),h.lookAt(new ve(-1,0,0)),l.add(h);var d=new wr(Sr,1,t,r);d.layers=l.layers,d.up.set(0,0,1),d.lookAt(new ve(0,1,0)),l.add(d);var m=new wr(Sr,1,t,r);m.layers=l.layers,m.up.set(0,0,-1),m.lookAt(new ve(0,-1,0)),l.add(m);var y=new wr(Sr,1,t,r);y.layers=l.layers,y.up.set(0,-1,0),y.lookAt(new ve(0,0,1)),l.add(y);var _=new wr(Sr,1,t,r);return _.layers=l.layers,_.up.set(0,-1,0),_.lookAt(new ve(0,0,-1)),l.add(_),l}return Object(y.a)(n,[{key:"update",value:function(t,e){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,r=Object(l.a)(this.children,6),o=r[0],c=r[1],h=r[2],d=r[3],f=r[4],m=r[5],v=t.xr.enabled,y=t.getRenderTarget();t.xr.enabled=!1;var _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,o),t.setRenderTarget(n,1),t.render(e,c),t.setRenderTarget(n,2),t.render(e,h),t.setRenderTarget(n,3),t.render(e,d),t.setRenderTarget(n,4),t.render(e,f),n.texture.generateMipmaps=_,t.setRenderTarget(n,5),t.render(e,m),t.setRenderTarget(y),t.xr.enabled=v,n.texture.needsPMREMUpdate=!0}}]),n}(_n),Mr=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l,c,h,d,f,m,y){var _;return Object(v.a)(this,n),t=void 0!==t?t:[],r=void 0!==r?r:M,(_=e.call(this,t,r,o,l,c,h,d,f,m,y)).flipY=!1,_}return Object(y.a)(n,[{key:"images",get:function(){return this.image},set:function(t){this.image=t}}]),n}(le);Mr.prototype.isCubeTexture=!0;var Tr=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,n);var image={width:t,height:t,depth:1},l=[image,image,image,image,image,image];return(r=e.call(this,t,t,o)).texture=new Mr(l,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.encoding),r.texture.isRenderTargetTexture=!0,r.texture.generateMipmaps=void 0!==o.generateMipmaps&&o.generateMipmaps,r.texture.minFilter=void 0!==o.minFilter?o.minFilter:N,r}return Object(y.a)(n,[{key:"fromEquirectangularTexture",value:function(t,e){this.texture.type=e.type,this.texture.format=W,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",o="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",l=new mr(5,5,5),c=new _r({name:"CubemapFromEquirect",uniforms:vr(n),vertexShader:r,fragmentShader:o,side:1,blending:0});c.uniforms.tEquirect.value=e;var h=new pr(l,c),d=e.minFilter;return e.minFilter===j&&(e.minFilter=N),new Er(1,10,this).update(t,h),e.minFilter=d,h.geometry.dispose(),h.material.dispose(),this}},{key:"clear",value:function(t,e,n,r){for(var o=t.getRenderTarget(),l=0;l<6;l++)t.setRenderTarget(this,l),t.clear(e,n,r);t.setRenderTarget(o)}}]),n}(he);Tr.prototype.isWebGLCubeRenderTarget=!0;var Ar=new ve,Dr=new ve,Pr=new qt,Cr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve(1,0,0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(v.a)(this,t),this.normal=e,this.constant=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.normal.copy(t),this.constant=e,this}},{key:"setComponents",value:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}},{key:"setFromNormalAndCoplanarPoint",value:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function(a,b,t){var e=Ar.subVectors(t,b).cross(Dr.subVectors(a,b)).normalize();return this.setFromNormalAndCoplanarPoint(e,a),this}},{key:"copy",value:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this}},{key:"normalize",value:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}},{key:"negate",value:function(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function(t){return this.normal.dot(t)+this.constant}},{key:"distanceToSphere",value:function(t){return this.distanceToPoint(t.center)-t.radius}},{key:"projectPoint",value:function(t,e){return e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}},{key:"intersectLine",value:function(line,t){var e=line.delta(Ar),n=this.normal.dot(e);if(0===n)return 0===this.distanceToPoint(line.start)?t.copy(line.start):null;var r=-(line.start.dot(this.normal)+this.constant)/n;return r<0||r>1?null:t.copy(e).multiplyScalar(r).add(line.start)}},{key:"intersectsLine",value:function(line){var t=this.distanceToPoint(line.start),e=this.distanceToPoint(line.end);return t<0&&e>0||e<0&&t>0}},{key:"intersectsBox",value:function(t){return t.intersectsPlane(this)}},{key:"intersectsSphere",value:function(t){return t.intersectsPlane(this)}},{key:"coplanarPoint",value:function(t){return t.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function(t,e){var n=e||Pr.getNormalMatrix(t),r=this.coplanarPoint(Ar).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}},{key:"translate",value:function(t){return this.constant-=t.dot(this.normal),this}},{key:"equals",value:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();Cr.prototype.isPlane=!0;var kr=new je,Or=new ve,Lr=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Cr,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Cr,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Cr,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Cr,l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Cr,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Cr;Object(v.a)(this,t),this.planes=[e,n,r,o,l,c]}return Object(y.a)(t,[{key:"set",value:function(t,e,n,r,o,l){var c=this.planes;return c[0].copy(t),c[1].copy(e),c[2].copy(n),c[3].copy(r),c[4].copy(o),c[5].copy(l),this}},{key:"copy",value:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this}},{key:"setFromProjectionMatrix",value:function(t){var e=this.planes,n=t.elements,r=n[0],o=n[1],l=n[2],c=n[3],h=n[4],d=n[5],f=n[6],m=n[7],v=n[8],y=n[9],_=n[10],x=n[11],w=n[12],S=n[13],E=n[14],M=n[15];return e[0].setComponents(c-r,m-h,x-v,M-w).normalize(),e[1].setComponents(c+r,m+h,x+v,M+w).normalize(),e[2].setComponents(c+o,m+d,x+y,M+S).normalize(),e[3].setComponents(c-o,m-d,x-y,M-S).normalize(),e[4].setComponents(c-l,m-f,x-_,M-E).normalize(),e[5].setComponents(c+l,m+f,x+_,M+E).normalize(),this}},{key:"intersectsObject",value:function(object){var t=object.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),kr.copy(t.boundingSphere).applyMatrix4(object.matrixWorld),this.intersectsSphere(kr)}},{key:"intersectsSprite",value:function(t){return kr.center.set(0,0,0),kr.radius=.7071067811865476,kr.applyMatrix4(t.matrixWorld),this.intersectsSphere(kr)}},{key:"intersectsSphere",value:function(t){for(var e=this.planes,n=t.center,r=-t.radius,o=0;o<6;o++){if(e[o].distanceToPoint(n)<r)return!1}return!0}},{key:"intersectsBox",value:function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];if(Or.x=r.normal.x>0?t.max.x:t.min.x,Or.y=r.normal.y>0?t.max.y:t.min.y,Or.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(Or)<0)return!1}return!0}},{key:"containsPoint",value:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}();function Fr(){var t=null,e=!1,n=null,r=null;function o(time,e){n(time,e),r=t.requestAnimationFrame(o)}return{start:function(){!0!==e&&null!==n&&(r=t.requestAnimationFrame(o),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function Rr(t,e){var n=e.isWebGL2,r=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),r.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var data=r.get(e);data&&(t.deleteBuffer(data.buffer),r.delete(e))},update:function(e,o){if(e.isGLBufferAttribute){var l=r.get(e);(!l||l.version<e.version)&&r.set(e,{buffer:e.buffer,type:e.type,bytesPerElement:e.elementSize,version:e.version})}else{e.isInterleavedBufferAttribute&&(e=e.data);var data=r.get(e);void 0===data?r.set(e,function(e,r){var o,l=e.array,c=e.usage,h=t.createBuffer();if(t.bindBuffer(r,h),t.bufferData(r,l,c),e.onUploadCallback(),l instanceof Float32Array)o=5126;else if(l instanceof Uint16Array)if(e.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(l instanceof Int16Array)o=5122;else if(l instanceof Uint32Array)o=5125;else if(l instanceof Int32Array)o=5124;else if(l instanceof Int8Array)o=5120;else if(l instanceof Uint8Array)o=5121;else{if(!(l instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);o=5121}return{buffer:h,type:o,bytesPerElement:l.BYTES_PER_ELEMENT,version:e.version}}(e,o)):data.version<e.version&&(!function(e,r,o){var l=r.array,c=r.updateRange;t.bindBuffer(o,e),-1===c.count?t.bufferSubData(o,0,l):(n?t.bufferSubData(o,c.offset*l.BYTES_PER_ELEMENT,l,c.offset,c.count):t.bufferSubData(o,c.offset*l.BYTES_PER_ELEMENT,l.subarray(c.offset,c.offset+c.count)),c.count=-1)}(data.buffer,e,o),data.version=e.version)}}}}var Ir=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;Object(v.a)(this,n),(t=e.call(this)).type="PlaneGeometry",t.parameters={width:r,height:o,widthSegments:l,heightSegments:c};for(var h=r/2,d=o/2,f=Math.floor(l),m=Math.floor(c),y=f+1,_=m+1,x=r/f,w=o/m,S=[],E=[],M=[],T=[],A=0;A<_;A++)for(var D=A*w-d,P=0;P<y;P++){var C=P*x-h;E.push(C,-D,0),M.push(0,0,1),T.push(P/f),T.push(1-A/m)}for(var k=0;k<m;k++)for(var O=0;O<f;O++){var a=O+y*k,b=O+y*(k+1),L=O+1+y*(k+1),F=O+1+y*k;S.push(a,b,F),S.push(b,L,F)}return t.setIndex(S),t.setAttribute("position",new Bn(E,3)),t.setAttribute("normal",new Bn(M,3)),t.setAttribute("uv",new Bn(T,2)),t}return Object(y.a)(n,null,[{key:"fromJSON",value:function(data){return new n(data.width,data.height,data.widthSegments,data.heightSegments)}}]),n}(Yn),Nr={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 ) + 0.5;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec;\n\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\treflectVec = reflect( - viewDir, normal );\n\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t#else\n\t\t\t\treflectVec = refract( - viewDir, normal, refractionRatio );\n\t\t\t#endif\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tlightMapIrradiance *= PI;\n\t#endif\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ]\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform vec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tfloat texelIndex = float( vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset );\n\t\t\tfloat y = floor( texelIndex / morphTargetsTextureSize.x );\n\t\t\tfloat x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tvec3 morphUV = vec3( ( x + 0.5 ) / morphTargetsTextureSize.x, y / morphTargetsTextureSize.y, morphTargetIndex );\n\t\t\treturn texture( morphTargetsTexture, morphUV );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},jr={common:{diffuse:{value:new ie(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new qt},uv2Transform:{value:new qt},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Yt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ie(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ie(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new qt}},sprite:{diffuse:{value:new ie(16777215)},opacity:{value:1},center:{value:new Yt(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new qt}}},Br={basic:{uniforms:gr([jr.common,jr.specularmap,jr.envmap,jr.aomap,jr.lightmap,jr.fog]),vertexShader:Nr.meshbasic_vert,fragmentShader:Nr.meshbasic_frag},lambert:{uniforms:gr([jr.common,jr.specularmap,jr.envmap,jr.aomap,jr.lightmap,jr.emissivemap,jr.fog,jr.lights,{emissive:{value:new ie(0)}}]),vertexShader:Nr.meshlambert_vert,fragmentShader:Nr.meshlambert_frag},phong:{uniforms:gr([jr.common,jr.specularmap,jr.envmap,jr.aomap,jr.lightmap,jr.emissivemap,jr.bumpmap,jr.normalmap,jr.displacementmap,jr.fog,jr.lights,{emissive:{value:new ie(0)},specular:{value:new ie(1118481)},shininess:{value:30}}]),vertexShader:Nr.meshphong_vert,fragmentShader:Nr.meshphong_frag},standard:{uniforms:gr([jr.common,jr.envmap,jr.aomap,jr.lightmap,jr.emissivemap,jr.bumpmap,jr.normalmap,jr.displacementmap,jr.roughnessmap,jr.metalnessmap,jr.fog,jr.lights,{emissive:{value:new ie(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nr.meshphysical_vert,fragmentShader:Nr.meshphysical_frag},toon:{uniforms:gr([jr.common,jr.aomap,jr.lightmap,jr.emissivemap,jr.bumpmap,jr.normalmap,jr.displacementmap,jr.gradientmap,jr.fog,jr.lights,{emissive:{value:new ie(0)}}]),vertexShader:Nr.meshtoon_vert,fragmentShader:Nr.meshtoon_frag},matcap:{uniforms:gr([jr.common,jr.bumpmap,jr.normalmap,jr.displacementmap,jr.fog,{matcap:{value:null}}]),vertexShader:Nr.meshmatcap_vert,fragmentShader:Nr.meshmatcap_frag},points:{uniforms:gr([jr.points,jr.fog]),vertexShader:Nr.points_vert,fragmentShader:Nr.points_frag},dashed:{uniforms:gr([jr.common,jr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nr.linedashed_vert,fragmentShader:Nr.linedashed_frag},depth:{uniforms:gr([jr.common,jr.displacementmap]),vertexShader:Nr.depth_vert,fragmentShader:Nr.depth_frag},normal:{uniforms:gr([jr.common,jr.bumpmap,jr.normalmap,jr.displacementmap,{opacity:{value:1}}]),vertexShader:Nr.meshnormal_vert,fragmentShader:Nr.meshnormal_frag},sprite:{uniforms:gr([jr.sprite,jr.fog]),vertexShader:Nr.sprite_vert,fragmentShader:Nr.sprite_frag},background:{uniforms:{uvTransform:{value:new qt},t2D:{value:null}},vertexShader:Nr.background_vert,fragmentShader:Nr.background_frag},cube:{uniforms:gr([jr.envmap,{opacity:{value:1}}]),vertexShader:Nr.cube_vert,fragmentShader:Nr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nr.equirect_vert,fragmentShader:Nr.equirect_frag},distanceRGBA:{uniforms:gr([jr.common,jr.displacementmap,{referencePosition:{value:new ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nr.distanceRGBA_vert,fragmentShader:Nr.distanceRGBA_frag},shadow:{uniforms:gr([jr.lights,jr.fog,{color:{value:new ie(0)},opacity:{value:1}}]),vertexShader:Nr.shadow_vert,fragmentShader:Nr.shadow_frag}};function Ur(t,e,n,r,o,l){var c,h,d=new ie(0),f=!0===o?0:1,m=null,v=0,y=null;function _(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,l)}return{getClearColor:function(){return d},setClearColor:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d.set(t),_(d,f=e)},getClearAlpha:function(){return f},setClearAlpha:function(t){_(d,f=t)},render:function(n,o){var l=!1,x=!0===o.isScene?o.background:null;x&&x.isTexture&&(x=e.get(x));var w=t.xr,S=w.getSession&&w.getSession();S&&"additive"===S.environmentBlendMode&&(x=null),null===x?_(d,f):x&&x.isColor&&(_(x,1),l=!0),(t.autoClear||l)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),x&&(x.isCubeTexture||x.mapping===P)?(void 0===h&&((h=new pr(new mr(1,1,1),new _r({name:"BackgroundCubeMaterial",uniforms:vr(Br.cube.uniforms),vertexShader:Br.cube.vertexShader,fragmentShader:Br.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),h.geometry.deleteAttribute("uv"),h.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(h.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(h)),h.material.uniforms.envMap.value=x,h.material.uniforms.flipEnvMap.value=x.isCubeTexture&&!1===x.isRenderTargetTexture?-1:1,m===x&&v===x.version&&y===t.toneMapping||(h.material.needsUpdate=!0,m=x,v=x.version,y=t.toneMapping),n.unshift(h,h.geometry,h.material,0,0,null)):x&&x.isTexture&&(void 0===c&&((c=new pr(new Ir(2,2),new _r({name:"BackgroundMaterial",uniforms:vr(Br.background.uniforms),vertexShader:Br.background.vertexShader,fragmentShader:Br.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=x,!0===x.matrixAutoUpdate&&x.updateMatrix(),c.material.uniforms.uvTransform.value.copy(x.matrix),m===x&&v===x.version&&y===t.toneMapping||(c.material.needsUpdate=!0,m=x,v=x.version,y=t.toneMapping),n.unshift(c,c.geometry,c.material,0,0,null))}}}function zr(t,e,n,r){var o=t.getParameter(34921),l=r.isWebGL2?null:e.get("OES_vertex_array_object"),c=r.isWebGL2||null!==l,h={},d=y(null),f=d;function m(e){return r.isWebGL2?t.bindVertexArray(e):l.bindVertexArrayOES(e)}function v(e){return r.isWebGL2?t.deleteVertexArray(e):l.deleteVertexArrayOES(e)}function y(t){for(var e=[],n=[],r=[],l=0;l<o;l++)e[l]=0,n[l]=0,r[l]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:r,object:t,attributes:{},index:null}}function _(){for(var t=f.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function x(t){w(t,0)}function w(n,o){var l=f.newAttributes,c=f.enabledAttributes,h=f.attributeDivisors;(l[n]=1,0===c[n]&&(t.enableVertexAttribArray(n),c[n]=1),h[n]!==o)&&((r.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[r.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,o),h[n]=o)}function S(){for(var e=f.newAttributes,n=f.enabledAttributes,r=0,o=n.length;r<o;r++)n[r]!==e[r]&&(t.disableVertexAttribArray(r),n[r]=0)}function E(e,n,o,l,c,h){!0!==r.isWebGL2||5124!==o&&5125!==o?t.vertexAttribPointer(e,n,o,l,c,h):t.vertexAttribIPointer(e,n,o,c,h)}function M(){T(),f!==d&&m((f=d).object)}function T(){d.geometry=null,d.program=null,d.wireframe=!1}return{setup:function(object,o,d,v,M){var T=!1;if(c){var A=function(e,n,o){var c=!0===o.wireframe,d=h[e.id];void 0===d&&(d={},h[e.id]=d);var f=d[n.id];void 0===f&&(f={},d[n.id]=f);var m=f[c];void 0===m&&(m=y(r.isWebGL2?t.createVertexArray():l.createVertexArrayOES()),f[c]=m);return m}(v,d,o);f!==A&&m((f=A).object),T=function(t,e){var n=f.attributes,r=t.attributes,o=0;for(var l in r){var c=n[l],h=r[l];if(void 0===c)return!0;if(c.attribute!==h)return!0;if(c.data!==h.data)return!0;o++}return f.attributesNum!==o||f.index!==e}(v,M),T&&function(t,e){var n={},r=t.attributes,o=0;for(var l in r){var c=r[l],data={};data.attribute=c,c.data&&(data.data=c.data),n[l]=data,o++}f.attributes=n,f.attributesNum=o,f.index=e}(v,M)}else{var D=!0===o.wireframe;f.geometry===v.id&&f.program===d.id&&f.wireframe===D||(f.geometry=v.id,f.program=d.id,f.wireframe=D,T=!0)}!0===object.isInstancedMesh&&(T=!0),null!==M&&n.update(M,34963),T&&(!function(object,o,l,c){if(!1===r.isWebGL2&&(object.isInstancedMesh||c.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;_();var h=c.attributes,d=l.getAttributes(),f=o.defaultAttributeValues;for(var m in d){var v=d[m];if(v.location>=0){var y=h[m];if(void 0===y&&("instanceMatrix"===m&&object.instanceMatrix&&(y=object.instanceMatrix),"instanceColor"===m&&object.instanceColor&&(y=object.instanceColor)),void 0!==y){var M=y.normalized,T=y.itemSize,A=n.get(y);if(void 0===A)continue;var D=A.buffer,P=A.type,C=A.bytesPerElement;if(y.isInterleavedBufferAttribute){var data=y.data,k=data.stride,O=y.offset;if(data.isInstancedInterleavedBuffer){for(var L=0;L<v.locationSize;L++)w(v.location+L,data.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=data.meshPerAttribute*data.count)}else for(var F=0;F<v.locationSize;F++)x(v.location+F);t.bindBuffer(34962,D);for(var R=0;R<v.locationSize;R++)E(v.location+R,T/v.locationSize,P,M,k*C,(O+T/v.locationSize*R)*C)}else{if(y.isInstancedBufferAttribute){for(var I=0;I<v.locationSize;I++)w(v.location+I,y.meshPerAttribute);!0!==object.isInstancedMesh&&void 0===c._maxInstanceCount&&(c._maxInstanceCount=y.meshPerAttribute*y.count)}else for(var N=0;N<v.locationSize;N++)x(v.location+N);t.bindBuffer(34962,D);for(var j=0;j<v.locationSize;j++)E(v.location+j,T/v.locationSize,P,M,T*C,T/v.locationSize*j*C)}}else if(void 0!==f){var B=f[m];if(void 0!==B)switch(B.length){case 2:t.vertexAttrib2fv(v.location,B);break;case 3:t.vertexAttrib3fv(v.location,B);break;case 4:t.vertexAttrib4fv(v.location,B);break;default:t.vertexAttrib1fv(v.location,B)}}}}S()}(object,o,d,v),null!==M&&t.bindBuffer(34963,n.get(M).buffer))},reset:M,resetDefaultState:T,dispose:function(){for(var t in M(),h){var e=h[t];for(var n in e){var r=e[n];for(var o in r)v(r[o].object),delete r[o];delete e[n]}delete h[t]}},releaseStatesOfGeometry:function(t){if(void 0!==h[t.id]){var e=h[t.id];for(var n in e){var r=e[n];for(var o in r)v(r[o].object),delete r[o];delete e[n]}delete h[t.id]}},releaseStatesOfProgram:function(t){for(var e in h){var n=h[e];if(void 0!==n[t.id]){var r=n[t.id];for(var o in r)v(r[o].object),delete r[o];delete n[t.id]}}},initAttributes:_,enableAttribute:x,disableUnusedAttributes:S}}function Vr(t,e,n,r){var o,l=r.isWebGL2;this.setMode=function(t){o=t},this.render=function(e,r){t.drawArrays(o,e,r),n.update(r,o,1)},this.renderInstances=function(r,c,h){if(0!==h){var d,f;if(l)d=t,f="drawArraysInstanced";else if(f="drawArraysInstancedANGLE",null===(d=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");d[f](o,r,c,h),n.update(c,o,h)}}}function Hr(t,e,n){var r;function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var l="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,c=void 0!==n.precision?n.precision:"highp",h=o(c);h!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",h,"instead."),c=h);var d=l||e.has("WEBGL_draw_buffers"),f=!0===n.logarithmicDepthBuffer,m=t.getParameter(34930),v=t.getParameter(35660),y=t.getParameter(3379),_=t.getParameter(34076),x=t.getParameter(34921),w=t.getParameter(36347),S=t.getParameter(36348),E=t.getParameter(36349),M=v>0,T=l||e.has("OES_texture_float");return{isWebGL2:l,drawBuffers:d,getMaxAnisotropy:function(){if(void 0!==r)return r;if(!0===e.has("EXT_texture_filter_anisotropic")){var n=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r},getMaxPrecision:o,precision:c,logarithmicDepthBuffer:f,maxTextures:m,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:_,maxAttributes:x,maxVertexUniforms:w,maxVaryings:S,maxFragmentUniforms:E,vertexTextures:M,floatFragmentTextures:T,floatVertexTextures:M&&T,maxSamples:l?t.getParameter(36183):0}}function Gr(t){var e=this,n=null,r=0,o=!1,l=!1,c=new Cr,h=new qt,d={value:null,needsUpdate:!1};function f(){d.value!==n&&(d.value=n,d.needsUpdate=r>0),e.numPlanes=r,e.numIntersection=0}function m(t,n,r,o){var l=null!==t?t.length:0,f=null;if(0!==l){if(f=d.value,!0!==o||null===f){var m=r+4*l,v=n.matrixWorldInverse;h.getNormalMatrix(v),(null===f||f.length<m)&&(f=new Float32Array(m));for(var y=0,_=r;y!==l;++y,_+=4)c.copy(t[y]).applyMatrix4(v,h),c.normal.toArray(f,_),f[_+3]=c.constant}d.value=f,d.needsUpdate=!0}return e.numPlanes=l,e.numIntersection=0,f}this.uniform=d,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,l){var c=0!==t.length||e||0!==r||o;return o=e,n=m(t,l,0),r=t.length,c},this.beginShadows=function(){l=!0,m(null)},this.endShadows=function(){l=!1,f()},this.setState=function(e,c,h){var v=e.clippingPlanes,y=e.clipIntersection,_=e.clipShadows,x=t.get(e);if(!o||null===v||0===v.length||l&&!_)l?m(null):f();else{var w=l?0:r,S=4*w,E=x.clippingState||null;d.value=E,E=m(v,c,S,h);for(var M=0;M!==S;++M)E[M]=n[M];x.clippingState=E,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=w}}}function Wr(t){var e=new WeakMap;function n(t,e){return e===A?t.mapping=M:e===D&&(t.mapping=T),t}function r(t){var n=t.target;n.removeEventListener("dispose",r);var o=e.get(n);void 0!==o&&(e.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture&&!1===o.isRenderTargetTexture){var l=o.mapping;if(l===A||l===D){if(e.has(o))return n(e.get(o).texture,o.mapping);var image=o.image;if(image&&image.height>0){var c=new Tr(image.height/2);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}return null}}return o},dispose:function(){e=new WeakMap}}}Br.physical={uniforms:gr([Br.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new Yt(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new ie(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new Yt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new ie(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new ie(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Nr.meshphysical_vert,fragmentShader:Nr.meshphysical_frag};var Xr=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return Object(v.a)(this,n),(t=e.call(this)).type="OrthographicCamera",t.zoom=1,t.view=null,t.left=r,t.right=o,t.top=l,t.bottom=c,t.near=h,t.far=d,t.updateProjectionMatrix(),t}return Object(y.a)(n,[{key:"copy",value:function(source,t){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source,t),this.left=source.left,this.right=source.right,this.top=source.top,this.bottom=source.bottom,this.near=source.near,this.far=source.far,this.zoom=source.zoom,this.view=null===source.view?null:Object.assign({},source.view),this}},{key:"setViewOffset",value:function(t,e,n,r,o,l){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=l,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=n-t,l=n+t,c=r+e,h=r-e;if(null!==this.view&&this.view.enabled){var d=(this.right-this.left)/this.view.fullWidth/this.zoom,f=(this.top-this.bottom)/this.view.fullHeight/this.zoom;l=(o+=d*this.view.offsetX)+d*this.view.width,h=(c-=f*this.view.offsetY)-f*this.view.height}this.projectionMatrix.makeOrthographic(o,l,c,h,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return data.object.zoom=this.zoom,data.object.left=this.left,data.object.right=this.right,data.object.top=this.top,data.object.bottom=this.bottom,data.object.near=this.near,data.object.far=this.far,null!==this.view&&(data.object.view=Object.assign({},this.view)),data}}]),n}(xr);Xr.prototype.isOrthographicCamera=!0;var Yr=[.125,.215,.35,.446,.526,.582],qr=20,Qr=new Xr,$r=new ie,Kr=null,Jr=(1+Math.sqrt(5))/2,Zr=1/Jr,ti=[new ve(1,1,1),new ve(-1,1,1),new ve(1,1,-1),new ve(-1,1,-1),new ve(0,Jr,Zr),new ve(0,Jr,-Zr),new ve(Zr,0,Jr),new ve(-Zr,0,Jr),new ve(Jr,Zr,0),new ve(-Jr,Zr,0)],ei=function(){function t(e){Object(v.a)(this,t),this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return Object(y.a)(t,[{key:"fromScene",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Kr=this._renderer.getRenderTarget(),this._setSize(256);var o=this._allocateTargets();return o.depthBuffer=!0,this._sceneToCubeUV(t,n,r,o),e>0&&this._blur(o,0,0,e),this._applyPMREM(o),this._cleanup(o),o}},{key:"fromEquirectangular",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}},{key:"fromCubemap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(t,e)}},{key:"compileCubemapShader",value:function(){null===this._cubemapMaterial&&(this._cubemapMaterial=ai(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function(){null===this._equirectMaterial&&(this._equirectMaterial=ii(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function(){this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}},{key:"_cleanup",value:function(t){this._renderer.setRenderTarget(Kr),t.scissorTest=!1,ri(t,0,0,t.width,t.height)}},{key:"_fromTexture",value:function(t,e){t.mapping===M||t.mapping===T?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),Kr=this._renderer.getRenderTarget();var n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}},{key:"_allocateTargets",value:function(){var t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize-32,n={magFilter:N,minFilter:N,generateMipmaps:!1,type:H,format:W,encoding:Ct,depthBuffer:!1},r=ni(t,e,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=ni(t,e,n);var o=this._lodMax,l=function(t){for(var e=[],n=[],r=[],o=t,l=t-4+1+Yr.length,c=0;c<l;c++){var h=Math.pow(2,o);n.push(h);var d=1/h;c>t-4?d=Yr[c-t+4-1]:0===c&&(d=0),r.push(d);for(var f=1/(h-1),m=-f/2,v=1+f/2,y=[m,m,v,m,v,v,m,m,v,v,m,v],_=6,x=6,w=3,S=2,E=1,M=new Float32Array(w*x*_),T=new Float32Array(S*x*_),A=new Float32Array(E*x*_),D=0;D<_;D++){var P=D%3*2/3-1,C=D>2?0:-1,k=[P,C,0,P+2/3,C,0,P+2/3,C+1,0,P,C,0,P+2/3,C+1,0,P,C+1,0];M.set(k,w*x*D),T.set(y,S*x*D);var O=[D,D,D,D,D,D];A.set(O,E*x*D)}var L=new Yn;L.setAttribute("position",new In(M,w)),L.setAttribute("uv",new In(T,S)),L.setAttribute("faceIndex",new In(A,E)),e.push(L),o>4&&o--}return{lodPlanes:e,sizeLods:n,sigmas:r}}(o);this._sizeLods=l.sizeLods,this._lodPlanes=l.lodPlanes,this._sigmas=l.sigmas,this._blurMaterial=function(t,e,n){var r=new Float32Array(qr),o=new ve(0,1,0);return new _r({name:"SphericalGaussianBlur",defines:{n:qr,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(t,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:o}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(o,t,e)}return r}},{key:"_compileMaterial",value:function(t){var e=new pr(this._lodPlanes[0],t);this._renderer.compile(e,Qr)}},{key:"_sceneToCubeUV",value:function(t,e,n,r){var o=new wr(90,1,e,n),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],h=this._renderer,d=h.autoClear,f=h.toneMapping;h.getClearColor($r),h.toneMapping=0,h.autoClear=!1;var m=new Ln({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),v=new pr(new mr,m),y=!1,_=t.background;_?_.isColor&&(m.color.copy(_),t.background=null,y=!0):(m.color.copy($r),y=!0);for(var x=0;x<6;x++){var col=x%3;0===col?(o.up.set(0,l[x],0),o.lookAt(c[x],0,0)):1===col?(o.up.set(0,0,l[x]),o.lookAt(0,c[x],0)):(o.up.set(0,l[x],0),o.lookAt(0,0,c[x]));var w=this._cubeSize;ri(r,col*w,x>2?w:0,w,w),h.setRenderTarget(r),y&&h.render(v,o),h.render(t,o)}v.geometry.dispose(),v.material.dispose(),h.toneMapping=f,h.autoClear=d,t.background=_}},{key:"_textureToCubeUV",value:function(t,e){var n=this._renderer,r=t.mapping===M||t.mapping===T;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=ai()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=ii());var o=r?this._cubemapMaterial:this._equirectMaterial,l=new pr(this._lodPlanes[0],o);o.uniforms.envMap.value=t;var c=this._cubeSize;ri(e,0,0,3*c,2*c),n.setRenderTarget(e),n.render(l,Qr)}},{key:"_applyPMREM",value:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var r=1;r<this._lodPlanes.length;r++){var o=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),l=ti[(r-1)%ti.length];this._blur(t,r-1,r,o,l)}e.autoClear=n}},{key:"_blur",value:function(t,e,n,r,o){var l=this._pingPongRenderTarget;this._halfBlur(t,l,e,n,r,"latitudinal",o),this._halfBlur(l,t,n,n,r,"longitudinal",o)}},{key:"_halfBlur",value:function(t,e,n,r,o,l,c){var h=this._renderer,d=this._blurMaterial;"latitudinal"!==l&&"longitudinal"!==l&&console.error("blur direction must be either latitudinal or longitudinal!");var f=new pr(this._lodPlanes[r],d),m=d.uniforms,v=this._sizeLods[n]-1,y=isFinite(o)?Math.PI/(2*v):2*Math.PI/39,_=o/y,x=isFinite(o)?1+Math.floor(3*_):qr;x>qr&&console.warn("sigmaRadians, ".concat(o,", is too large and will clip, as it requested ").concat(x," samples when the maximum is set to ").concat(qr));for(var w=[],S=0,E=0;E<qr;++E){var M=E/_,T=Math.exp(-M*M/2);w.push(T),0===E?S+=T:E<x&&(S+=2*T)}for(var A=0;A<w.length;A++)w[A]=w[A]/S;m.envMap.value=t.texture,m.samples.value=x,m.weights.value=w,m.latitudinal.value="latitudinal"===l,c&&(m.poleAxis.value=c);var D=this._lodMax;m.dTheta.value=y,m.mipInt.value=D-n;var P=this._sizeLods[r];ri(e,3*P*(r>D-4?r-D+4:0),4*(this._cubeSize-P),3*P,2*P),h.setRenderTarget(e),h.render(f,Qr)}}]),t}();function ni(t,e,n){var r=new he(t,e,n);return r.texture.mapping=P,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function ri(t,e,n,r,o){t.viewport.set(e,n,r,o),t.scissor.set(e,n,r,o)}function ii(){return new _r({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function ai(){return new _r({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function oi(t){var e=new WeakMap,n=null;function r(t){var n=t.target;n.removeEventListener("dispose",r);var o=e.get(n);void 0!==o&&(e.delete(n),o.dispose())}return{get:function(o){if(o&&o.isTexture){var l=o.mapping,c=l===A||l===D,h=l===M||l===T;if(c||h){if(o.isRenderTargetTexture&&!0===o.needsPMREMUpdate){o.needsPMREMUpdate=!1;var d=e.get(o);return null===n&&(n=new ei(t)),d=c?n.fromEquirectangular(o,d):n.fromCubemap(o,d),e.set(o,d),d.texture}if(e.has(o))return e.get(o).texture;var image=o.image;if(c&&image&&image.height>0||h&&image&&function(image){for(var t=0,e=6,n=0;n<e;n++)void 0!==image[n]&&t++;return t===e}(image)){null===n&&(n=new ei(t));var f=c?n.fromEquirectangular(o):n.fromCubemap(o);return e.set(o,f),o.addEventListener("dispose",r),f.texture}return null}}return o},dispose:function(){e=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function si(t){var e={};function n(n){if(void 0!==e[n])return e[n];var r;switch(n){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(n)}return e[n]=r,r}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(t){var e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function ui(t,e,n,r){var o={},l=new WeakMap;function c(t){var h=t.target;for(var d in null!==h.index&&e.remove(h.index),h.attributes)e.remove(h.attributes[d]);h.removeEventListener("dispose",c),delete o[h.id];var f=l.get(h);f&&(e.remove(f),l.delete(h)),r.releaseStatesOfGeometry(h),!0===h.isInstancedBufferGeometry&&delete h._maxInstanceCount,n.memory.geometries--}function h(t){var n=[],r=t.index,o=t.attributes.position,c=0;if(null!==r){var h=r.array;c=r.version;for(var d=0,f=h.length;d<f;d+=3){var a=h[d+0],b=h[d+1],m=h[d+2];n.push(a,b,b,m,m,a)}}else{var v=o.array;c=o.version;for(var y=0,_=v.length/3-1;y<_;y+=3){var x=y+0,w=y+1,S=y+2;n.push(x,w,w,S,S,x)}}var E=new(Qt(n)?jn:Nn)(n,1);E.version=c;var M=l.get(t);M&&e.remove(M),l.set(t,E)}return{get:function(object,t){return!0===o[t.id]||(t.addEventListener("dispose",c),o[t.id]=!0,n.memory.geometries++),t},update:function(t){var n=t.attributes;for(var r in n)e.update(n[r],34962);var o=t.morphAttributes;for(var l in o)for(var c=o[l],h=0,d=c.length;h<d;h++)e.update(c[h],34962)},getWireframeAttribute:function(t){var e=l.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&h(t)}else h(t);return l.get(t)}}}function ci(t,e,n,r){var o,l,c,h=r.isWebGL2;this.setMode=function(t){o=t},this.setIndex=function(t){l=t.type,c=t.bytesPerElement},this.render=function(e,r){t.drawElements(o,r,l,e*c),n.update(r,o,1)},this.renderInstances=function(r,d,f){if(0!==f){var m,v;if(h)m=t,v="drawElementsInstanced";else if(v="drawElementsInstancedANGLE",null===(m=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");m[v](o,d,l,r*c,f),n.update(d,o,f)}}}function hi(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,r){switch(e.calls++,n){case 4:e.triangles+=r*(t/3);break;case 1:e.lines+=r*(t/2);break;case 3:e.lines+=r*(t-1);break;case 2:e.lines+=r*t;break;case 0:e.points+=r*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function di(a,b){return a[0]-b[0]}function pi(a,b){return Math.abs(b[1])-Math.abs(a[1])}function fi(t,e){var n=1,r=e.isInterleavedBufferAttribute?e.data.array:e.array;r instanceof Int8Array?n=127:r instanceof Int16Array?n=32767:r instanceof Int32Array?n=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",r),t.divideScalar(n)}function mi(t,e,n){for(var r={},o=new Float32Array(8),l=new WeakMap,c=new ce,h=[],d=0;d<8;d++)h[d]=[d,0];return{update:function(object,d,f,m){var v=object.morphTargetInfluences;if(!0===e.isWebGL2){var y=d.morphAttributes.position||d.morphAttributes.normal||d.morphAttributes.color,_=void 0!==y?y.length:0,x=l.get(d);if(void 0===x||x.count!==_){void 0!==x&&x.texture.dispose();var w=void 0!==d.morphAttributes.position,S=void 0!==d.morphAttributes.normal,E=void 0!==d.morphAttributes.color,M=d.morphAttributes.position||[],T=d.morphAttributes.normal||[],A=d.morphAttributes.color||[],D=0;!0===w&&(D=1),!0===S&&(D=2),!0===E&&(D=3);var P=d.attributes.position.count*D,C=1;P>e.maxTextureSize&&(C=Math.ceil(P/e.maxTextureSize),P=e.maxTextureSize);var k=new Float32Array(P*C*4*_),O=new de(k,P,C,_);O.format=W,O.type=V,O.needsUpdate=!0;for(var L=4*D,F=0;F<_;F++)for(var R=M[F],I=T[F],N=A[F],j=P*C*4*F,B=0;B<R.count;B++){var U=B*L;!0===w&&(c.fromBufferAttribute(R,B),!0===R.normalized&&fi(c,R),k[j+U+0]=c.x,k[j+U+1]=c.y,k[j+U+2]=c.z,k[j+U+3]=0),!0===S&&(c.fromBufferAttribute(I,B),!0===I.normalized&&fi(c,I),k[j+U+4]=c.x,k[j+U+5]=c.y,k[j+U+6]=c.z,k[j+U+7]=0),!0===E&&(c.fromBufferAttribute(N,B),!0===N.normalized&&fi(c,I),k[j+U+8]=c.x,k[j+U+9]=c.y,k[j+U+10]=c.z,k[j+U+11]=4===N.itemSize?c.w:1)}x={count:_,texture:O,size:new Yt(P,C)},l.set(d,x),d.addEventListener("dispose",(function t(){O.dispose(),l.delete(d),d.removeEventListener("dispose",t)}))}for(var z=0,H=0;H<v.length;H++)z+=v[H];var G=d.morphTargetsRelative?1:1-z;m.getUniforms().setValue(t,"morphTargetBaseInfluence",G),m.getUniforms().setValue(t,"morphTargetInfluences",v),m.getUniforms().setValue(t,"morphTargetsTexture",x.texture,n),m.getUniforms().setValue(t,"morphTargetsTextureSize",x.size)}else{var X=void 0===v?0:v.length,Y=r[d.id];if(void 0===Y||Y.length!==X){Y=[];for(var Q=0;Q<X;Q++)Y[Q]=[Q,0];r[d.id]=Y}for(var $=0;$<X;$++){var K=Y[$];K[0]=$,K[1]=v[$]}Y.sort(pi);for(var J=0;J<8;J++)J<X&&Y[J][1]?(h[J][0]=Y[J][0],h[J][1]=Y[J][1]):(h[J][0]=Number.MAX_SAFE_INTEGER,h[J][1]=0);h.sort(di);for(var Z=d.morphAttributes.position,tt=d.morphAttributes.normal,et=0,nt=0;nt<8;nt++){var it=h[nt],at=it[0],ot=it[1];at!==Number.MAX_SAFE_INTEGER&&ot?(Z&&d.getAttribute("morphTarget"+nt)!==Z[at]&&d.setAttribute("morphTarget"+nt,Z[at]),tt&&d.getAttribute("morphNormal"+nt)!==tt[at]&&d.setAttribute("morphNormal"+nt,tt[at]),o[nt]=ot,et+=ot):(Z&&!0===d.hasAttribute("morphTarget"+nt)&&d.deleteAttribute("morphTarget"+nt),tt&&!0===d.hasAttribute("morphNormal"+nt)&&d.deleteAttribute("morphNormal"+nt),o[nt]=0)}var st=d.morphTargetsRelative?1:1-et;m.getUniforms().setValue(t,"morphTargetBaseInfluence",st),m.getUniforms().setValue(t,"morphTargetInfluences",o)}}}}function vi(t,e,n,r){var o=new WeakMap;function l(t){var e=t.target;e.removeEventListener("dispose",l),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:function(object){var t=r.render.frame,c=object.geometry,h=e.get(object,c);return o.get(h)!==t&&(e.update(h),o.set(h,t)),object.isInstancedMesh&&(!1===object.hasEventListener("dispose",l)&&object.addEventListener("dispose",l),n.update(object.instanceMatrix,34962),null!==object.instanceColor&&n.update(object.instanceColor,34962)),h},dispose:function(){o=new WeakMap}}}var gi=new le,yi=new de,_i=new pe,bi=new Mr,xi=[],wi=[],Si=new Float32Array(16),Ei=new Float32Array(9),Mi=new Float32Array(4);function Ti(t,e,n){var r=t[0];if(r<=0||r>0)return t;var o=e*n,l=xi[o];if(void 0===l&&(l=new Float32Array(o),xi[o]=l),0!==e){r.toArray(l,0);for(var c=1,h=0;c!==e;++c)h+=n,t[c].toArray(l,h)}return l}function Ai(a,b){if(a.length!==b.length)return!1;for(var t=0,e=a.length;t<e;t++)if(a[t]!==b[t])return!1;return!0}function Di(a,b){for(var t=0,e=b.length;t<e;t++)a[t]=b[t]}function Pi(t,e){var n=wi[e];void 0===n&&(n=new Int32Array(e),wi[e]=n);for(var r=0;r!==e;++r)n[r]=t.allocateTextureUnit();return n}function Ci(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function ki(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ai(n,e))return;t.uniform2fv(this.addr,e),Di(n,e)}}function Oi(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ai(n,e))return;t.uniform3fv(this.addr,e),Di(n,e)}}function Li(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ai(n,e))return;t.uniform4fv(this.addr,e),Di(n,e)}}function Fi(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Di(n,e)}else{if(Ai(n,r))return;Mi.set(r),t.uniformMatrix2fv(this.addr,!1,Mi),Di(n,r)}}function Ri(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Di(n,e)}else{if(Ai(n,r))return;Ei.set(r),t.uniformMatrix3fv(this.addr,!1,Ei),Di(n,r)}}function Ii(t,e){var n=this.cache,r=e.elements;if(void 0===r){if(Ai(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Di(n,e)}else{if(Ai(n,r))return;Si.set(r),t.uniformMatrix4fv(this.addr,!1,Si),Di(n,r)}}function Ni(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function ji(t,e){var n=this.cache;Ai(n,e)||(t.uniform2iv(this.addr,e),Di(n,e))}function Bi(t,e){var n=this.cache;Ai(n,e)||(t.uniform3iv(this.addr,e),Di(n,e))}function Ui(t,e){var n=this.cache;Ai(n,e)||(t.uniform4iv(this.addr,e),Di(n,e))}function zi(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Vi(t,e){var n=this.cache;Ai(n,e)||(t.uniform2uiv(this.addr,e),Di(n,e))}function Hi(t,e){var n=this.cache;Ai(n,e)||(t.uniform3uiv(this.addr,e),Di(n,e))}function Gi(t,e){var n=this.cache;Ai(n,e)||(t.uniform4uiv(this.addr,e),Di(n,e))}function Wi(t,e,n){var r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2D(e||gi,o)}function Xi(t,e,n){var r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture3D(e||_i,o)}function Yi(t,e,n){var r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTextureCube(e||bi,o)}function qi(t,e,n){var r=this.cache,o=n.allocateTextureUnit();r[0]!==o&&(t.uniform1i(this.addr,o),r[0]=o),n.setTexture2DArray(e||yi,o)}function Qi(t,e){t.uniform1fv(this.addr,e)}function $i(t,e){var data=Ti(e,this.size,2);t.uniform2fv(this.addr,data)}function Ki(t,e){var data=Ti(e,this.size,3);t.uniform3fv(this.addr,data)}function Ji(t,e){var data=Ti(e,this.size,4);t.uniform4fv(this.addr,data)}function Zi(t,e){var data=Ti(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,data)}function ta(t,e){var data=Ti(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,data)}function ea(t,e){var data=Ti(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,data)}function na(t,e){t.uniform1iv(this.addr,e)}function ra(t,e){t.uniform2iv(this.addr,e)}function ia(t,e){t.uniform3iv(this.addr,e)}function aa(t,e){t.uniform4iv(this.addr,e)}function oa(t,e){t.uniform1uiv(this.addr,e)}function sa(t,e){t.uniform2uiv(this.addr,e)}function ua(t,e){t.uniform3uiv(this.addr,e)}function la(t,e){t.uniform4uiv(this.addr,e)}function ca(t,e,n){var r=e.length,o=Pi(n,r);t.uniform1iv(this.addr,o);for(var l=0;l!==r;++l)n.setTexture2D(e[l]||gi,o[l])}function ha(t,e,n){var r=e.length,o=Pi(n,r);t.uniform1iv(this.addr,o);for(var l=0;l!==r;++l)n.setTexture3D(e[l]||_i,o[l])}function da(t,e,n){var r=e.length,o=Pi(n,r);t.uniform1iv(this.addr,o);for(var l=0;l!==r;++l)n.setTextureCube(e[l]||bi,o[l])}function pa(t,e,n){var r=e.length,o=Pi(n,r);t.uniform1iv(this.addr,o);for(var l=0;l!==r;++l)n.setTexture2DArray(e[l]||yi,o[l])}function fa(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Ci;case 35664:return ki;case 35665:return Oi;case 35666:return Li;case 35674:return Fi;case 35675:return Ri;case 35676:return Ii;case 5124:case 35670:return Ni;case 35667:case 35671:return ji;case 35668:case 35672:return Bi;case 35669:case 35673:return Ui;case 5125:return zi;case 36294:return Vi;case 36295:return Hi;case 36296:return Gi;case 35678:case 36198:case 36298:case 36306:case 35682:return Wi;case 35679:case 36299:case 36307:return Xi;case 35680:case 36300:case 36308:case 36293:return Yi;case 36289:case 36303:case 36311:case 36292:return qi}}(e.type)}function ma(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Qi;case 35664:return $i;case 35665:return Ki;case 35666:return Ji;case 35674:return Zi;case 35675:return ta;case 35676:return ea;case 5124:case 35670:return na;case 35667:case 35671:return ra;case 35668:case 35672:return ia;case 35669:case 35673:return aa;case 5125:return oa;case 36294:return sa;case 36295:return ua;case 36296:return la;case 35678:case 36198:case 36298:case 36306:case 35682:return ca;case 35679:case 36299:case 36307:return ha;case 35680:case 36300:case 36308:case 36293:return da;case 36289:case 36303:case 36311:case 36292:return pa}}(e.type)}function va(t){this.id=t,this.seq=[],this.map={}}ma.prototype.updateCache=function(data){var t=this.cache;data instanceof Float32Array&&t.length!==data.length&&(this.cache=new Float32Array(data.length)),Di(t,data)},va.prototype.setValue=function(t,e,n){for(var r=this.seq,o=0,l=r.length;o!==l;++o){var u=r[o];u.setValue(t,e[u.id],n)}};var ga=/(\w+)(\])?(\[|\.)?/g;function ya(t,e){t.seq.push(e),t.map[e.id]=e}function _a(t,e,n){var path=t.name,r=path.length;for(ga.lastIndex=0;;){var o=ga.exec(path),l=ga.lastIndex,c=o[1],h="]"===o[2],d=o[3];if(h&&(c|=0),void 0===d||"["===d&&l+2===r){ya(n,void 0===d?new fa(c,t,e):new ma(c,t,e));break}var f=n.map[c];void 0===f&&ya(n,f=new va(c)),n=f}}function ba(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),r=0;r<n;++r){var o=t.getActiveUniform(e,r);_a(o,t.getUniformLocation(e,o.name),this)}}function xa(t,e,n){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}ba.prototype.setValue=function(t,e,n,r){var u=this.map[e];void 0!==u&&u.setValue(t,n,r)},ba.prototype.setOptional=function(t,object,e){var n=object[e];void 0!==n&&this.setValue(t,e,n)},ba.upload=function(t,e,n,r){for(var o=0,l=e.length;o!==l;++o){var u=e[o],c=n[u.id];!1!==c.needsUpdate&&u.setValue(t,c.value,r)}},ba.seqWithValue=function(t,e){for(var n=[],r=0,o=t.length;r!==o;++r){var u=t[r];u.id in e&&n.push(u)}return n};var wa=0;function Sa(t,e,n){var r=t.getShaderParameter(e,35713),o=t.getShaderInfoLog(e).trim();return r&&""===o?"":n.toUpperCase()+"\n\n"+o+"\n\n"+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function Ea(t,e){var n=function(t){switch(t){case Ct:return["Linear","( value )"];case kt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Ma(t,e){var n;switch(e){case 1:n="Linear";break;case 2:n="Reinhard";break;case 3:n="OptimizedCineon";break;case 4:n="ACESFilmic";break;case 5:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Ta(t){return""!==t}function Aa(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Da(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}var Pa=/^[ \t]*#include +<([\w\d./]+)>/gm;function Ca(t){return t.replace(Pa,ka)}function ka(t,e){var n=Nr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return Ca(n)}var Oa=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,La=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Fa(t){return t.replace(La,Ia).replace(Oa,Ra)}function Ra(t,e,n,r){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Ia(t,e,n,r)}function Ia(t,e,n,r){for(var o="",l=parseInt(e);l<parseInt(n);l++)o+=r.replace(/\[\s*i\s*\]/g,"[ "+l+" ]").replace(/UNROLLED_LOOP_INDEX/g,l);return o}function Na(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ja(t,e,n,r){var o,l,c=t.getContext(),h=n.defines,d=n.vertexShader,f=n.fragmentShader,m=function(t){var e="SHADOWMAP_TYPE_BASIC";return 1===t.shadowMapType?e="SHADOWMAP_TYPE_PCF":2===t.shadowMapType?e="SHADOWMAP_TYPE_PCF_SOFT":3===t.shadowMapType&&(e="SHADOWMAP_TYPE_VSM"),e}(n),v=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case M:case T:e="ENVMAP_TYPE_CUBE";break;case P:case C:e="ENVMAP_TYPE_CUBE_UV"}return e}(n),y=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case T:case C:e="ENVMAP_MODE_REFRACTION"}return e}(n),_=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case 0:e="ENVMAP_BLENDING_MULTIPLY";break;case 1:e="ENVMAP_BLENDING_MIX";break;case 2:e="ENVMAP_BLENDING_ADD"}return e}(n),x=function(t){var e=t.envMapCubeUVHeight;if(null===e)return null;var n=Math.log2(e/32+1)+3,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),w=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUVHeight||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap||t.transmission)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ta).join("\n")}(n),S=function(t){var e=[];for(var n in t){var r=t[n];!1!==r&&e.push("#define "+n+" "+r)}return e.join("\n")}(h),E=c.createProgram(),A=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?((o=[S].filter(Ta).join("\n")).length>0&&(o+="\n"),(l=[w,S].filter(Ta).join("\n")).length>0&&(l+="\n")):(o=[Na(n),"#define SHADER_NAME "+n.shaderName,S,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+y:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Ta).join("\n"),l=[w,Na(n),"#define SHADER_NAME "+n.shaderName,S,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+v:"",n.envMap?"#define "+y:"",n.envMap?"#define "+_:"",x?"#define CUBEUV_TEXEL_WIDTH "+x.texelWidth:"",x?"#define CUBEUV_TEXEL_HEIGHT "+x.texelHeight:"",x?"#define CUBEUV_MAX_MIP "+x.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+m:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==n.toneMapping?"#define TONE_MAPPING":"",0!==n.toneMapping?Nr.tonemapping_pars_fragment:"",0!==n.toneMapping?Ma("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",Nr.encodings_pars_fragment,Ea("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Ta).join("\n")),d=Da(d=Aa(d=Ca(d),n),n),f=Da(f=Aa(f=Ca(f),n),n),d=Fa(d),f=Fa(f),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(A="#version 300 es\n",o=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+o,l=["#define varying in",n.glslVersion===Rt?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===Rt?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+l);var D,k,O=A+l+f,L=xa(c,35633,A+o+d),F=xa(c,35632,O);if(c.attachShader(E,L),c.attachShader(E,F),void 0!==n.index0AttributeName?c.bindAttribLocation(E,0,n.index0AttributeName):!0===n.morphTargets&&c.bindAttribLocation(E,0,"position"),c.linkProgram(E),t.debug.checkShaderErrors){var R=c.getProgramInfoLog(E).trim(),I=c.getShaderInfoLog(L).trim(),N=c.getShaderInfoLog(F).trim(),j=!0,B=!0;if(!1===c.getProgramParameter(E,35714)){j=!1;var U=Sa(c,L,"vertex"),z=Sa(c,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+c.getError()+" - VALIDATE_STATUS "+c.getProgramParameter(E,35715)+"\n\nProgram Info Log: "+R+"\n"+U+"\n"+z)}else""!==R?console.warn("THREE.WebGLProgram: Program Info Log:",R):""!==I&&""!==N||(B=!1);B&&(this.diagnostics={runnable:j,programLog:R,vertexShader:{log:I,prefix:o},fragmentShader:{log:N,prefix:l}})}return c.deleteShader(L),c.deleteShader(F),this.getUniforms=function(){return void 0===D&&(D=new ba(c,E)),D},this.getAttributes=function(){return void 0===k&&(k=function(t,e){for(var n={},r=t.getProgramParameter(e,35721),o=0;o<r;o++){var l=t.getActiveAttrib(e,o),c=l.name,h=1;35674===l.type&&(h=2),35675===l.type&&(h=3),35676===l.type&&(h=4),n[c]={type:l.type,location:t.getAttribLocation(e,c),locationSize:h}}return n}(c,E)),k},this.destroy=function(){r.releaseStatesOfProgram(this),c.deleteProgram(E),this.program=void 0},this.name=n.shaderName,this.id=wa++,this.cacheKey=e,this.usedTimes=1,this.program=E,this.vertexShader=L,this.fragmentShader=F,this}var Ba=0,Ua=function(){function t(){Object(v.a)(this,t),this.shaderCache=new Map,this.materialCache=new Map}return Object(y.a)(t,[{key:"update",value:function(t){var e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(n),l=this._getShaderCacheForMaterial(t);return!1===l.has(r)&&(l.add(r),r.usedTimes++),!1===l.has(o)&&(l.add(o),o.usedTimes++),this}},{key:"remove",value:function(t){var e,n=_(this.materialCache.get(t));try{for(n.s();!(e=n.n()).done;){var r=e.value;r.usedTimes--,0===r.usedTimes&&this.shaderCache.delete(r)}}catch(t){n.e(t)}finally{n.f()}return this.materialCache.delete(t),this}},{key:"getVertexShaderID",value:function(t){return this._getShaderStage(t.vertexShader).id}},{key:"getFragmentShaderID",value:function(t){return this._getShaderStage(t.fragmentShader).id}},{key:"dispose",value:function(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function(t){var e=this.materialCache;return!1===e.has(t)&&e.set(t,new Set),e.get(t)}},{key:"_getShaderStage",value:function(code){var t=this.shaderCache;if(!1===t.has(code)){var e=new za;t.set(code,e)}return t.get(code)}}]),t}(),za=function t(){Object(v.a)(this,t),this.id=Ba++,this.usedTimes=0};function Va(t,e,n,r,o,l,c){var h=new an,d=new Ua,f=[],m=o.isWebGL2,v=o.logarithmicDepthBuffer,y=o.floatVertexTextures,_=o.maxVertexUniforms,x=o.vertexTextures,w=o.precision,S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(l,h,f,E,object){var M=E.fog,T=object.geometry,A=l.isMeshStandardMaterial?E.environment:null,D=(l.isMeshStandardMaterial?n:e).get(l.envMap||A),k=!D||D.mapping!==P&&D.mapping!==C?null:D.image.height,O=S[l.type],L=object.isSkinnedMesh?function(object){var t=object.skeleton.bones;if(y)return 1024;var e=_,n=Math.floor((e-20)/4),r=Math.min(n,t.length);return r<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+r+"."),0):r}(object):0;null!==l.precision&&(w=o.getMaxPrecision(l.precision))!==l.precision&&console.warn("THREE.WebGLProgram.getParameters:",l.precision,"not supported, using",w,"instead.");var F,R,I,N,j=T.morphAttributes.position||T.morphAttributes.normal||T.morphAttributes.color,B=void 0!==j?j.length:0,U=0;if(void 0!==T.morphAttributes.position&&(U=1),void 0!==T.morphAttributes.normal&&(U=2),void 0!==T.morphAttributes.color&&(U=3),O){var z=Br[O];F=z.vertexShader,R=z.fragmentShader}else F=l.vertexShader,R=l.fragmentShader,d.update(l),I=d.getVertexShaderID(l),N=d.getFragmentShaderID(l);var V=t.getRenderTarget(),H=l.alphaTest>0,G=l.clearcoat>0;return{isWebGL2:m,shaderID:O,shaderName:l.type,vertexShader:F,fragmentShader:R,defines:l.defines,customVertexShaderID:I,customFragmentShaderID:N,isRawShaderMaterial:!0===l.isRawShaderMaterial,glslVersion:l.glslVersion,precision:w,instancing:!0===object.isInstancedMesh,instancingColor:!0===object.isInstancedMesh&&null!==object.instanceColor,supportsVertexTextures:x,outputEncoding:null===V?t.outputEncoding:!0===V.isXRRenderTarget?V.texture.encoding:Ct,map:!!l.map,matcap:!!l.matcap,envMap:!!D,envMapMode:D&&D.mapping,envMapCubeUVHeight:k,lightMap:!!l.lightMap,aoMap:!!l.aoMap,emissiveMap:!!l.emissiveMap,bumpMap:!!l.bumpMap,normalMap:!!l.normalMap,objectSpaceNormalMap:1===l.normalMapType,tangentSpaceNormalMap:0===l.normalMapType,decodeVideoTexture:!!l.map&&!0===l.map.isVideoTexture&&l.map.encoding===kt,clearcoat:G,clearcoatMap:G&&!!l.clearcoatMap,clearcoatRoughnessMap:G&&!!l.clearcoatRoughnessMap,clearcoatNormalMap:G&&!!l.clearcoatNormalMap,displacementMap:!!l.displacementMap,roughnessMap:!!l.roughnessMap,metalnessMap:!!l.metalnessMap,specularMap:!!l.specularMap,specularIntensityMap:!!l.specularIntensityMap,specularColorMap:!!l.specularColorMap,opaque:!1===l.transparent&&1===l.blending,alphaMap:!!l.alphaMap,alphaTest:H,gradientMap:!!l.gradientMap,sheen:l.sheen>0,sheenColorMap:!!l.sheenColorMap,sheenRoughnessMap:!!l.sheenRoughnessMap,transmission:l.transmission>0,transmissionMap:!!l.transmissionMap,thicknessMap:!!l.thicknessMap,combine:l.combine,vertexTangents:!!l.normalMap&&!!T.attributes.tangent,vertexColors:l.vertexColors,vertexAlphas:!0===l.vertexColors&&!!T.attributes.color&&4===T.attributes.color.itemSize,vertexUvs:!!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatMap||l.clearcoatRoughnessMap||l.clearcoatNormalMap||l.displacementMap||l.transmissionMap||l.thicknessMap||l.specularIntensityMap||l.specularColorMap||l.sheenColorMap||l.sheenRoughnessMap),uvsVertexOnly:!(l.map||l.bumpMap||l.normalMap||l.specularMap||l.alphaMap||l.emissiveMap||l.roughnessMap||l.metalnessMap||l.clearcoatNormalMap||l.transmission>0||l.transmissionMap||l.thicknessMap||l.specularIntensityMap||l.specularColorMap||l.sheen>0||l.sheenColorMap||l.sheenRoughnessMap||!l.displacementMap),fog:!!M,useFog:l.fog,fogExp2:M&&M.isFogExp2,flatShading:!!l.flatShading,sizeAttenuation:l.sizeAttenuation,logarithmicDepthBuffer:v,skinning:!0===object.isSkinnedMesh&&L>0,maxBones:L,useVertexTexture:y,morphTargets:void 0!==T.morphAttributes.position,morphNormals:void 0!==T.morphAttributes.normal,morphColors:void 0!==T.morphAttributes.color,morphTargetsCount:B,morphTextureStride:U,numDirLights:h.directional.length,numPointLights:h.point.length,numSpotLights:h.spot.length,numRectAreaLights:h.rectArea.length,numHemiLights:h.hemi.length,numDirLightShadows:h.directionalShadowMap.length,numPointLightShadows:h.pointShadowMap.length,numSpotLightShadows:h.spotShadowMap.length,numClippingPlanes:c.numPlanes,numClipIntersection:c.numIntersection,dithering:l.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:l.toneMapped?t.toneMapping:0,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:l.premultipliedAlpha,doubleSided:2===l.side,flipSided:1===l.side,depthPacking:void 0!==l.depthPacking&&l.depthPacking,index0AttributeName:l.index0AttributeName,extensionDerivatives:l.extensions&&l.extensions.derivatives,extensionFragDepth:l.extensions&&l.extensions.fragDepth,extensionDrawBuffers:l.extensions&&l.extensions.drawBuffers,extensionShaderTextureLOD:l.extensions&&l.extensions.shaderTextureLOD,rendererExtensionFragDepth:m||r.has("EXT_frag_depth"),rendererExtensionDrawBuffers:m||r.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:m||r.has("EXT_shader_texture_lod"),customProgramCacheKey:l.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.customVertexShaderID),n.push(e.customFragmentShaderID)),void 0!==e.defines)for(var r in e.defines)n.push(r),n.push(e.defines[r]);return!1===e.isRawShaderMaterial&&(!function(t,e){t.push(e.precision),t.push(e.outputEncoding),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.combine),t.push(e.vertexUvs),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.maxBones),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection)}(n,e),function(t,e){h.disableAll(),e.isWebGL2&&h.enable(0);e.supportsVertexTextures&&h.enable(1);e.instancing&&h.enable(2);e.instancingColor&&h.enable(3);e.map&&h.enable(4);e.matcap&&h.enable(5);e.envMap&&h.enable(6);e.lightMap&&h.enable(7);e.aoMap&&h.enable(8);e.emissiveMap&&h.enable(9);e.bumpMap&&h.enable(10);e.normalMap&&h.enable(11);e.objectSpaceNormalMap&&h.enable(12);e.tangentSpaceNormalMap&&h.enable(13);e.clearcoat&&h.enable(14);e.clearcoatMap&&h.enable(15);e.clearcoatRoughnessMap&&h.enable(16);e.clearcoatNormalMap&&h.enable(17);e.displacementMap&&h.enable(18);e.specularMap&&h.enable(19);e.roughnessMap&&h.enable(20);e.metalnessMap&&h.enable(21);e.gradientMap&&h.enable(22);e.alphaMap&&h.enable(23);e.alphaTest&&h.enable(24);e.vertexColors&&h.enable(25);e.vertexAlphas&&h.enable(26);e.vertexUvs&&h.enable(27);e.vertexTangents&&h.enable(28);e.uvsVertexOnly&&h.enable(29);e.fog&&h.enable(30);t.push(h.mask),h.disableAll(),e.useFog&&h.enable(0);e.flatShading&&h.enable(1);e.logarithmicDepthBuffer&&h.enable(2);e.skinning&&h.enable(3);e.useVertexTexture&&h.enable(4);e.morphTargets&&h.enable(5);e.morphNormals&&h.enable(6);e.morphColors&&h.enable(7);e.premultipliedAlpha&&h.enable(8);e.shadowMapEnabled&&h.enable(9);e.physicallyCorrectLights&&h.enable(10);e.doubleSided&&h.enable(11);e.flipSided&&h.enable(12);e.depthPacking&&h.enable(13);e.dithering&&h.enable(14);e.specularIntensityMap&&h.enable(15);e.specularColorMap&&h.enable(16);e.transmission&&h.enable(17);e.transmissionMap&&h.enable(18);e.thicknessMap&&h.enable(19);e.sheen&&h.enable(20);e.sheenColorMap&&h.enable(21);e.sheenRoughnessMap&&h.enable(22);e.decodeVideoTexture&&h.enable(23);e.opaque&&h.enable(24);t.push(h.mask)}(n,e),n.push(t.outputEncoding)),n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=S[t.type];if(n){var r=Br[n];e=yr.clone(r.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var r,p=0,o=f.length;p<o;p++){var c=f[p];if(c.cacheKey===n){++(r=c).usedTimes;break}}return void 0===r&&(r=new ja(t,n,e,l),f.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){var e=f.indexOf(t);f[e]=f[f.length-1],f.pop(),t.destroy()}},releaseShaderCache:function(t){d.remove(t)},programs:f,dispose:function(){d.dispose()}}}function Ha(){var t=new WeakMap;return{get:function(object){var map=t.get(object);return void 0===map&&(map={},t.set(object,map)),map},remove:function(object){t.delete(object)},update:function(object,e,n){t.get(object)[e]=n},dispose:function(){t=new WeakMap}}}function Ga(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.material.id!==b.material.id?a.material.id-b.material.id:a.z!==b.z?a.z-b.z:a.id-b.id}function Wa(a,b){return a.groupOrder!==b.groupOrder?a.groupOrder-b.groupOrder:a.renderOrder!==b.renderOrder?a.renderOrder-b.renderOrder:a.z!==b.z?b.z-a.z:a.id-b.id}function Xa(){var t=[],e=0,n=[],r=[],o=[];function l(object,n,r,o,l,c){var h=t[e];return void 0===h?(h={id:object.id,object:object,geometry:n,material:r,groupOrder:o,renderOrder:object.renderOrder,z:l,group:c},t[e]=h):(h.id=object.id,h.object=object,h.geometry=n,h.material=r,h.groupOrder=o,h.renderOrder=object.renderOrder,h.z=l,h.group=c),e++,h}return{opaque:n,transmissive:r,transparent:o,init:function(){e=0,n.length=0,r.length=0,o.length=0},push:function(object,t,e,c,h,d){var f=l(object,t,e,c,h,d);e.transmission>0?r.push(f):!0===e.transparent?o.push(f):n.push(f)},unshift:function(object,t,e,c,h,d){var f=l(object,t,e,c,h,d);e.transmission>0?r.unshift(f):!0===e.transparent?o.unshift(f):n.unshift(f)},finish:function(){for(var n=e,r=t.length;n<r;n++){var o=t[n];if(null===o.id)break;o.id=null,o.object=null,o.geometry=null,o.material=null,o.group=null}},sort:function(t,e){n.length>1&&n.sort(t||Ga),r.length>1&&r.sort(e||Wa),o.length>1&&o.sort(e||Wa)}}}function Ya(){var t=new WeakMap;return{get:function(e,n){var r;return!1===t.has(e)?(r=new Xa,t.set(e,[r])):n>=t.get(e).length?(r=new Xa,t.get(e).push(r)):r=t.get(e)[n],r},dispose:function(){t=new WeakMap}}}function qa(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new ve,color:new ie};break;case"SpotLight":n={position:new ve,direction:new ve,color:new ie,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new ve,color:new ie,distance:0,decay:0};break;case"HemisphereLight":n={direction:new ve,skyColor:new ie,groundColor:new ie};break;case"RectAreaLight":n={color:new ie,position:new ve,halfWidth:new ve,halfHeight:new ve}}return t[e.id]=n,n}}}var Qa=0;function $a(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Ka(t,e){for(var n,r=new qa,o=(n={},{get:function(t){if(void 0!==n[t.id])return n[t.id];var e;switch(t.type){case"DirectionalLight":case"SpotLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt};break;case"PointLight":e={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Yt,shadowCameraNear:1,shadowCameraFar:1e3}}return n[t.id]=e,e}}),l={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},c=0;c<9;c++)l.probe.push(new ve);var h=new ve,d=new Ye,f=new Ye;return{setup:function(n,c){for(var h=0,g=0,b=0,d=0;d<9;d++)l.probe[d].set(0,0,0);var f=0,m=0,v=0,y=0,_=0,x=0,w=0,S=0;n.sort($a);for(var E=!0!==c?Math.PI:1,M=0,T=n.length;M<T;M++){var A=n[M],D=A.color,P=A.intensity,C=A.distance,k=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)h+=D.r*P*E,g+=D.g*P*E,b+=D.b*P*E;else if(A.isLightProbe)for(var O=0;O<9;O++)l.probe[O].addScaledVector(A.sh.coefficients[O],P);else if(A.isDirectionalLight){var L=r.get(A);if(L.color.copy(A.color).multiplyScalar(A.intensity*E),A.castShadow){var shadow=A.shadow,F=o.get(A);F.shadowBias=shadow.bias,F.shadowNormalBias=shadow.normalBias,F.shadowRadius=shadow.radius,F.shadowMapSize=shadow.mapSize,l.directionalShadow[f]=F,l.directionalShadowMap[f]=k,l.directionalShadowMatrix[f]=A.shadow.matrix,x++}l.directional[f]=L,f++}else if(A.isSpotLight){var R=r.get(A);if(R.position.setFromMatrixPosition(A.matrixWorld),R.color.copy(D).multiplyScalar(P*E),R.distance=C,R.coneCos=Math.cos(A.angle),R.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),R.decay=A.decay,A.castShadow){var I=A.shadow,N=o.get(A);N.shadowBias=I.bias,N.shadowNormalBias=I.normalBias,N.shadowRadius=I.radius,N.shadowMapSize=I.mapSize,l.spotShadow[v]=N,l.spotShadowMap[v]=k,l.spotShadowMatrix[v]=A.shadow.matrix,S++}l.spot[v]=R,v++}else if(A.isRectAreaLight){var j=r.get(A);j.color.copy(D).multiplyScalar(P),j.halfWidth.set(.5*A.width,0,0),j.halfHeight.set(0,.5*A.height,0),l.rectArea[y]=j,y++}else if(A.isPointLight){var B=r.get(A);if(B.color.copy(A.color).multiplyScalar(A.intensity*E),B.distance=A.distance,B.decay=A.decay,A.castShadow){var U=A.shadow,z=o.get(A);z.shadowBias=U.bias,z.shadowNormalBias=U.normalBias,z.shadowRadius=U.radius,z.shadowMapSize=U.mapSize,z.shadowCameraNear=U.camera.near,z.shadowCameraFar=U.camera.far,l.pointShadow[m]=z,l.pointShadowMap[m]=k,l.pointShadowMatrix[m]=A.shadow.matrix,w++}l.point[m]=B,m++}else if(A.isHemisphereLight){var V=r.get(A);V.skyColor.copy(A.color).multiplyScalar(P*E),V.groundColor.copy(A.groundColor).multiplyScalar(P*E),l.hemi[_]=V,_++}}y>0&&(e.isWebGL2||!0===t.has("OES_texture_float_linear")?(l.rectAreaLTC1=jr.LTC_FLOAT_1,l.rectAreaLTC2=jr.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(l.rectAreaLTC1=jr.LTC_HALF_1,l.rectAreaLTC2=jr.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),l.ambient[0]=h,l.ambient[1]=g,l.ambient[2]=b;var H=l.hash;H.directionalLength===f&&H.pointLength===m&&H.spotLength===v&&H.rectAreaLength===y&&H.hemiLength===_&&H.numDirectionalShadows===x&&H.numPointShadows===w&&H.numSpotShadows===S||(l.directional.length=f,l.spot.length=v,l.rectArea.length=y,l.point.length=m,l.hemi.length=_,l.directionalShadow.length=x,l.directionalShadowMap.length=x,l.pointShadow.length=w,l.pointShadowMap.length=w,l.spotShadow.length=S,l.spotShadowMap.length=S,l.directionalShadowMatrix.length=x,l.pointShadowMatrix.length=w,l.spotShadowMatrix.length=S,H.directionalLength=f,H.pointLength=m,H.spotLength=v,H.rectAreaLength=y,H.hemiLength=_,H.numDirectionalShadows=x,H.numPointShadows=w,H.numSpotShadows=S,l.version=Qa++)},setupView:function(t,e){for(var n=0,r=0,o=0,c=0,m=0,v=e.matrixWorldInverse,y=0,_=t.length;y<_;y++){var x=t[y];if(x.isDirectionalLight){var w=l.directional[n];w.direction.setFromMatrixPosition(x.matrixWorld),h.setFromMatrixPosition(x.target.matrixWorld),w.direction.sub(h),w.direction.transformDirection(v),n++}else if(x.isSpotLight){var S=l.spot[o];S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(v),S.direction.setFromMatrixPosition(x.matrixWorld),h.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(h),S.direction.transformDirection(v),o++}else if(x.isRectAreaLight){var E=l.rectArea[c];E.position.setFromMatrixPosition(x.matrixWorld),E.position.applyMatrix4(v),f.identity(),d.copy(x.matrixWorld),d.premultiply(v),f.extractRotation(d),E.halfWidth.set(.5*x.width,0,0),E.halfHeight.set(0,.5*x.height,0),E.halfWidth.applyMatrix4(f),E.halfHeight.applyMatrix4(f),c++}else if(x.isPointLight){var M=l.point[r];M.position.setFromMatrixPosition(x.matrixWorld),M.position.applyMatrix4(v),r++}else if(x.isHemisphereLight){var T=l.hemi[m];T.direction.setFromMatrixPosition(x.matrixWorld),T.direction.transformDirection(v),T.direction.normalize(),m++}}},state:l}}function Ja(t,e){var n=new Ka(t,e),r=[],o=[];return{init:function(){r.length=0,o.length=0},state:{lightsArray:r,shadowsArray:o,lights:n},setupLights:function(t){n.setup(r,t)},setupLightsView:function(t){n.setupView(r,t)},pushLight:function(t){r.push(t)},pushShadow:function(t){o.push(t)}}}function Za(t,e){var n=new WeakMap;return{get:function(r){var o,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===n.has(r)?(o=new Ja(t,e),n.set(r,[o])):l>=n.get(r).length?(o=new Ja(t,e),n.get(r).push(o)):o=n.get(r)[l],o},dispose:function(){n=new WeakMap}}}var to=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshDepthMaterial",r.depthPacking=3200,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.depthPacking=source.depthPacking,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this}}]),n}(On);to.prototype.isMeshDepthMaterial=!0;var eo=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshDistanceMaterial",r.referencePosition=new ve,r.nearDistance=1,r.farDistance=1e3,r.map=null,r.alphaMap=null,r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.fog=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.referencePosition.copy(source.referencePosition),this.nearDistance=source.nearDistance,this.farDistance=source.farDistance,this.map=source.map,this.alphaMap=source.alphaMap,this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this}}]),n}(On);eo.prototype.isMeshDistanceMaterial=!0;function no(t,e,n){var r=new Lr,o=new Yt,l=new Yt,c=new ce,h=new to({depthPacking:3201}),d=new eo,f={},m=n.maxTextureSize,v={0:1,1:0,2:2},y=new _r({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Yt},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=y.clone();_.defines.HORIZONTAL_PASS=1;var x=new Yn;x.setAttribute("position",new In(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var w=new pr(x,y),S=this;function E(shadow,n){var r=e.update(w);y.defines.VSM_SAMPLES!==shadow.blurSamples&&(y.defines.VSM_SAMPLES=shadow.blurSamples,_.defines.VSM_SAMPLES=shadow.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),y.uniforms.shadow_pass.value=shadow.map.texture,y.uniforms.resolution.value=shadow.mapSize,y.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.mapPass),t.clear(),t.renderBufferDirect(n,null,r,y,w,null),_.uniforms.shadow_pass.value=shadow.mapPass.texture,_.uniforms.resolution.value=shadow.mapSize,_.uniforms.radius.value=shadow.radius,t.setRenderTarget(shadow.map),t.clear(),t.renderBufferDirect(n,null,r,_,w,null)}function M(object,e,n,r,o,l){var c=null,m=!0===n.isPointLight?object.customDistanceMaterial:object.customDepthMaterial;if(c=void 0!==m?m:!0===n.isPointLight?d:h,t.localClippingEnabled&&!0===e.clipShadows&&0!==e.clippingPlanes.length||e.displacementMap&&0!==e.displacementScale||e.alphaMap&&e.alphaTest>0){var y=c.uuid,_=e.uuid,x=f[y];void 0===x&&(x={},f[y]=x);var w=x[_];void 0===w&&(w=c.clone(),x[_]=w),c=w}return c.visible=e.visible,c.wireframe=e.wireframe,c.side=3===l?null!==e.shadowSide?e.shadowSide:e.side:null!==e.shadowSide?e.shadowSide:v[e.side],c.alphaMap=e.alphaMap,c.alphaTest=e.alphaTest,c.clipShadows=e.clipShadows,c.clippingPlanes=e.clippingPlanes,c.clipIntersection=e.clipIntersection,c.displacementMap=e.displacementMap,c.displacementScale=e.displacementScale,c.displacementBias=e.displacementBias,c.wireframeLinewidth=e.wireframeLinewidth,c.linewidth=e.linewidth,!0===n.isPointLight&&!0===c.isMeshDistanceMaterial&&(c.referencePosition.setFromMatrixPosition(n.matrixWorld),c.nearDistance=r,c.farDistance=o),c}function T(object,n,o,l,c){if(!1!==object.visible){if(object.layers.test(n.layers)&&(object.isMesh||object.isLine||object.isPoints)&&(object.castShadow||object.receiveShadow&&3===c)&&(!object.frustumCulled||r.intersectsObject(object))){object.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,object.matrixWorld);var h=e.update(object),d=object.material;if(Array.isArray(d))for(var f=h.groups,m=0,v=f.length;m<v;m++){var y=f[m],_=d[y.materialIndex];if(_&&_.visible){var x=M(object,_,l,o.near,o.far,c);t.renderBufferDirect(o,null,h,x,object,y)}}else if(d.visible){var w=M(object,d,l,o.near,o.far,c);t.renderBufferDirect(o,null,h,w,object,null)}}for(var S=object.children,E=0,A=S.length;E<A;E++)T(S[E],n,o,l,c)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(e,n,h){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==e.length){var d=t.getRenderTarget(),f=t.getActiveCubeFace(),v=t.getActiveMipmapLevel(),y=t.state;y.setBlending(0),y.buffers.color.setClear(1,1,1,1),y.buffers.depth.setTest(!0),y.setScissorTest(!1);for(var _=0,x=e.length;_<x;_++){var w=e[_],shadow=w.shadow;if(void 0!==shadow){if(!1!==shadow.autoUpdate||!1!==shadow.needsUpdate){o.copy(shadow.mapSize);var M=shadow.getFrameExtents();if(o.multiply(M),l.copy(shadow.mapSize),(o.x>m||o.y>m)&&(o.x>m&&(l.x=Math.floor(m/M.x),o.x=l.x*M.x,shadow.mapSize.x=l.x),o.y>m&&(l.y=Math.floor(m/M.y),o.y=l.y*M.y,shadow.mapSize.y=l.y)),null===shadow.map&&!shadow.isPointLightShadow&&3===this.type){var A={minFilter:N,magFilter:N,format:W};shadow.map=new he(o.x,o.y,A),shadow.map.texture.name=w.name+".shadowMap",shadow.mapPass=new he(o.x,o.y,A),shadow.camera.updateProjectionMatrix()}if(null===shadow.map){var D={minFilter:F,magFilter:F,format:W};shadow.map=new he(o.x,o.y,D),shadow.map.texture.name=w.name+".shadowMap",shadow.camera.updateProjectionMatrix()}t.setRenderTarget(shadow.map),t.clear();for(var P=shadow.getViewportCount(),C=0;C<P;C++){var k=shadow.getViewport(C);c.set(l.x*k.x,l.y*k.y,l.x*k.z,l.y*k.w),y.viewport(c),shadow.updateMatrices(w,C),r=shadow.getFrustum(),T(n,h,shadow.camera,w,this.type)}shadow.isPointLightShadow||3!==this.type||E(shadow,h),shadow.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",w,"has no shadow.")}S.needsUpdate=!1,t.setRenderTarget(d,f,v)}}}function ro(t,e,n){var r,l,c=n.isWebGL2;var h=new function(){var e=!1,n=new ce,r=null,o=new ce(0,0,0,0);return{setMask:function(n){r===n||e||(t.colorMask(n,n,n,n),r=n)},setLocked:function(t){e=t},setClear:function(e,g,b,a,r){!0===r&&(e*=a,g*=a,b*=a),n.set(e,g,b,a),!1===o.equals(n)&&(t.clearColor(e,g,b,a),o.copy(n))},reset:function(){e=!1,r=null,o.set(-1,0,0,0)}}},d=new function(){var e=!1,n=null,r=null,o=null;return{setTest:function(t){t?$(2929):K(2929)},setMask:function(r){n===r||e||(t.depthMask(r),n=r)},setFunc:function(e){if(r!==e){if(e)switch(e){case 0:t.depthFunc(512);break;case 1:t.depthFunc(519);break;case 2:t.depthFunc(513);break;case 3:default:t.depthFunc(515);break;case 4:t.depthFunc(514);break;case 5:t.depthFunc(518);break;case 6:t.depthFunc(516);break;case 7:t.depthFunc(517)}else t.depthFunc(515);r=e}},setLocked:function(t){e=t},setClear:function(e){o!==e&&(t.clearDepth(e),o=e)},reset:function(){e=!1,n=null,r=null,o=null}}},f=new function(){var e=!1,n=null,r=null,o=null,l=null,c=null,h=null,d=null,f=null;return{setTest:function(t){e||(t?$(2960):K(2960))},setMask:function(r){n===r||e||(t.stencilMask(r),n=r)},setFunc:function(e,n,c){r===e&&o===n&&l===c||(t.stencilFunc(e,n,c),r=e,o=n,l=c)},setOp:function(e,n,r){c===e&&h===n&&d===r||(t.stencilOp(e,n,r),c=e,h=n,d=r)},setLocked:function(t){e=t},setClear:function(e){f!==e&&(t.clearStencil(e),f=e)},reset:function(){e=!1,n=null,r=null,o=null,l=null,c=null,h=null,d=null,f=null}}},m={},v={},y=new WeakMap,_=[],x=null,w=!1,S=null,M=null,T=null,A=null,D=null,P=null,C=null,k=!1,O=null,L=null,F=null,R=null,I=null,N=t.getParameter(35661),j=!1,B=0,U=t.getParameter(7938);-1!==U.indexOf("WebGL")?(B=parseFloat(/^WebGL (\d)/.exec(U)[1]),j=B>=1):-1!==U.indexOf("OpenGL ES")&&(B=parseFloat(/^OpenGL ES (\d)/.exec(U)[1]),j=B>=2);var z=null,V={},H=t.getParameter(3088),G=t.getParameter(2978),W=(new ce).fromArray(H),X=(new ce).fromArray(G);function Y(e,n,r){var data=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var l=0;l<r;l++)t.texImage2D(n+l,0,6408,1,1,0,6408,5121,data);return o}var Q={};function $(e){!0!==m[e]&&(t.enable(e),m[e]=!0)}function K(e){!1!==m[e]&&(t.disable(e),m[e]=!1)}Q[3553]=Y(3553,3553,1),Q[34067]=Y(34067,34069,6),h.setClear(0,0,0,1),d.setClear(1),f.setClear(0),$(2929),d.setFunc(3),nt(!1),it(1),$(2884),et(0);var J=(r={},Object(o.a)(r,E,32774),Object(o.a)(r,101,32778),Object(o.a)(r,102,32779),r);if(c)J[103]=32775,J[104]=32776;else{var Z=e.get("EXT_blend_minmax");null!==Z&&(J[103]=Z.MIN_EXT,J[104]=Z.MAX_EXT)}var tt=(l={},Object(o.a)(l,200,0),Object(o.a)(l,201,1),Object(o.a)(l,202,768),Object(o.a)(l,204,770),Object(o.a)(l,210,776),Object(o.a)(l,208,774),Object(o.a)(l,206,772),Object(o.a)(l,203,769),Object(o.a)(l,205,771),Object(o.a)(l,209,775),Object(o.a)(l,207,773),l);function et(e,n,r,o,l,c,h,d){if(0!==e){if(!1===w&&($(3042),w=!0),5===e)l=l||n,c=c||r,h=h||o,n===M&&l===D||(t.blendEquationSeparate(J[n],J[l]),M=n,D=l),r===T&&o===A&&c===P&&h===C||(t.blendFuncSeparate(tt[r],tt[o],tt[c],tt[h]),T=r,A=o,P=c,C=h),S=e,k=null;else if(e!==S||d!==k){if(M===E&&D===E||(t.blendEquation(32774),M=E,D=E),d)switch(e){case 1:t.blendFuncSeparate(1,771,1,771);break;case 2:t.blendFunc(1,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case 1:t.blendFuncSeparate(770,771,1,771);break;case 2:t.blendFunc(770,1);break;case 3:t.blendFuncSeparate(0,769,0,1);break;case 4:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}T=null,A=null,P=null,C=null,S=e,k=d}}else!0===w&&(K(3042),w=!1)}function nt(e){O!==e&&(e?t.frontFace(2304):t.frontFace(2305),O=e)}function it(e){0!==e?($(2884),e!==L&&(1===e?t.cullFace(1029):2===e?t.cullFace(1028):t.cullFace(1032))):K(2884),L=e}function at(e,n,r){e?($(32823),R===n&&I===r||(t.polygonOffset(n,r),R=n,I=r)):K(32823)}function ot(e){void 0===e&&(e=33984+N-1),z!==e&&(t.activeTexture(e),z=e)}return{buffers:{color:h,depth:d,stencil:f},enable:$,disable:K,bindFramebuffer:function(e,n){return v[e]!==n&&(t.bindFramebuffer(e,n),v[e]=n,c&&(36009===e&&(v[36160]=n),36160===e&&(v[36009]=n)),!0)},drawBuffers:function(r,o){var l=_,c=!1;if(r)if(void 0===(l=y.get(o))&&(l=[],y.set(o,l)),r.isWebGLMultipleRenderTargets){var h=r.texture;if(l.length!==h.length||36064!==l[0]){for(var d=0,f=h.length;d<f;d++)l[d]=36064+d;l.length=h.length,c=!0}}else 36064!==l[0]&&(l[0]=36064,c=!0);else 1029!==l[0]&&(l[0]=1029,c=!0);c&&(n.isWebGL2?t.drawBuffers(l):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(l))},useProgram:function(e){return x!==e&&(t.useProgram(e),x=e,!0)},setBlending:et,setMaterial:function(t,e){2===t.side?K(2884):$(2884);var n=1===t.side;e&&(n=!n),nt(n),1===t.blending&&!1===t.transparent?et(0):et(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),h.setMask(t.colorWrite);var r=t.stencilWrite;f.setTest(r),r&&(f.setMask(t.stencilWriteMask),f.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),f.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),at(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits),!0===t.alphaToCoverage?$(32926):K(32926)},setFlipSided:nt,setCullFace:it,setLineWidth:function(e){e!==F&&(j&&t.lineWidth(e),F=e)},setPolygonOffset:at,setScissorTest:function(t){t?$(3089):K(3089)},activeTexture:ot,bindTexture:function(e,n){null===z&&ot();var r=V[z];void 0===r&&(r={type:void 0,texture:void 0},V[z]=r),r.type===e&&r.texture===n||(t.bindTexture(e,n||Q[e]),r.type=e,r.texture=n)},unbindTexture:function(){var e=V[z];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(e){!1===W.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),W.copy(e))},viewport:function(e){!1===X.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),X.copy(e))},reset:function(){t.disable(3042),t.disable(2884),t.disable(2929),t.disable(32823),t.disable(3089),t.disable(2960),t.disable(32926),t.blendEquation(32774),t.blendFunc(1,0),t.blendFuncSeparate(1,0,1,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(513),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(519,0,4294967295),t.stencilOp(7680,7680,7680),t.clearStencil(0),t.cullFace(1029),t.frontFace(2305),t.polygonOffset(0,0),t.activeTexture(33984),t.bindFramebuffer(36160,null),!0===c&&(t.bindFramebuffer(36009,null),t.bindFramebuffer(36008,null)),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),m={},z=null,V={},v={},y=new WeakMap,_=[],x=null,w=!1,S=null,M=null,T=null,A=null,D=null,P=null,C=null,k=!1,O=null,L=null,F=null,R=null,I=null,W.set(0,0,t.canvas.width,t.canvas.height),X.set(0,0,t.canvas.width,t.canvas.height),h.reset(),d.reset(),f.reset()}}}function io(t,e,n,r,l,c,h){var d,f,m,v=l.isWebGL2,y=l.maxTextures,_=l.maxCubemapSize,x=l.maxTextureSize,w=l.maxSamples,S=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,E=new WeakMap,M=new WeakMap,T=!1;try{T="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function A(t,e){return T?new OffscreenCanvas(t,e):$t("canvas")}function D(image,t,e,n){var r=1;if((image.width>n||image.height>n)&&(r=n/Math.max(image.width,image.height)),r<1||!0===t){if("undefined"!=typeof HTMLImageElement&&image instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&image instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&image instanceof ImageBitmap){var o=t?Xt:Math.floor,l=o(r*image.width),c=o(r*image.height);void 0===m&&(m=A(l,c));var canvas=e?A(l,c):m;return canvas.width=l,canvas.height=c,canvas.getContext("2d").drawImage(image,0,0,l,c),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+image.width+"x"+image.height+") to ("+l+"x"+c+")."),canvas}return"data"in image&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+image.width+"x"+image.height+")."),image}return image}function P(image){return Wt(image.width)&&Wt(image.height)}function C(t,e){return t.generateMipmaps&&e&&t.minFilter!==F&&t.minFilter!==N}function Q(e){t.generateMipmap(e)}function $(n,r,o,l){var c=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===v)return r;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}var h=r;return 6403===r&&(5126===o&&(h=33326),5131===o&&(h=33325),5121===o&&(h=33321)),33319===r&&(5126===o&&(h=33328),5131===o&&(h=33327),5121===o&&(h=33323)),6408===r&&(5126===o&&(h=34836),5131===o&&(h=34842),5121===o&&(h=l===kt&&!1===c?35907:32856),32819===o&&(h=32854),32820===o&&(h=32855)),33325!==h&&33326!==h&&33327!==h&&33328!==h&&34842!==h&&34836!==h||e.get("EXT_color_buffer_float"),h}function K(t,image,e){return!0===C(t,e)||t.isFramebufferTexture&&t.minFilter!==F&&t.minFilter!==N?Math.log2(Math.max(image.width,image.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?image.mipmaps.length:1}function J(t){return t===F||t===R||t===I?9728:9729}function Z(t){var e=t.target;e.removeEventListener("dispose",Z),function(t){var e=r.get(t);if(void 0===e.__webglInit)return;var source=t.source,n=M.get(source);if(n){var o=n[e.__cacheKey];o.usedTimes--,0===o.usedTimes&&et(t),0===Object.keys(n).length&&M.delete(source)}r.remove(t)}(e),e.isVideoTexture&&E.delete(e)}function tt(e){var n=e.target;n.removeEventListener("dispose",tt),function(e){var n=e.texture,o=r.get(e),l=r.get(n);void 0!==l.__webglTexture&&(t.deleteTexture(l.__webglTexture),h.memory.textures--);e.depthTexture&&e.depthTexture.dispose();if(e.isWebGLCubeRenderTarget)for(var c=0;c<6;c++)t.deleteFramebuffer(o.__webglFramebuffer[c]),o.__webglDepthbuffer&&t.deleteRenderbuffer(o.__webglDepthbuffer[c]);else t.deleteFramebuffer(o.__webglFramebuffer),o.__webglDepthbuffer&&t.deleteRenderbuffer(o.__webglDepthbuffer),o.__webglMultisampledFramebuffer&&t.deleteFramebuffer(o.__webglMultisampledFramebuffer),o.__webglColorRenderbuffer&&t.deleteRenderbuffer(o.__webglColorRenderbuffer),o.__webglDepthRenderbuffer&&t.deleteRenderbuffer(o.__webglDepthRenderbuffer);if(e.isWebGLMultipleRenderTargets)for(var d=0,f=n.length;d<f;d++){var m=r.get(n[d]);m.__webglTexture&&(t.deleteTexture(m.__webglTexture),h.memory.textures--),r.remove(n[d])}r.remove(n),r.remove(e)}(n)}function et(e){var n=r.get(e);t.deleteTexture(n.__webglTexture);var source=e.source;delete M.get(source)[n.__cacheKey],h.memory.textures--}var nt=0;function it(t,slot){var e=r.get(t);if(t.isVideoTexture&&function(t){var e=h.render.frame;E.get(t)!==e&&(E.set(t,e),t.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&e.__version!==t.version){var image=t.image;if(null===image)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==image.complete)return void lt(e,t,slot);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+slot),n.bindTexture(3553,e.__webglTexture)}var at=(d={},Object(o.a)(d,k,10497),Object(o.a)(d,O,33071),Object(o.a)(d,L,33648),d),ot=(f={},Object(o.a)(f,F,9728),Object(o.a)(f,R,9984),Object(o.a)(f,I,9986),Object(o.a)(f,N,9729),Object(o.a)(f,1007,9985),Object(o.a)(f,j,9987),f);function st(n,o,c){if(c?(t.texParameteri(n,10242,at[o.wrapS]),t.texParameteri(n,10243,at[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,at[o.wrapR]),t.texParameteri(n,10240,ot[o.magFilter]),t.texParameteri(n,10241,ot[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===O&&o.wrapT===O||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,J(o.magFilter)),t.texParameteri(n,10241,J(o.minFilter)),o.minFilter!==F&&o.minFilter!==N&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===e.has("EXT_texture_filter_anisotropic")){var h=e.get("EXT_texture_filter_anisotropic");if(o.type===V&&!1===e.has("OES_texture_float_linear"))return;if(!1===v&&o.type===H&&!1===e.has("OES_texture_half_float_linear"))return;(o.anisotropy>1||r.get(o).__currentAnisotropy)&&(t.texParameterf(n,h.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,l.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy)}}function ut(e,n){var r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",Z));var source=n.source,o=M.get(source);void 0===o&&(o={},M.set(source,o));var l=function(t){var e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.encoding),e.join()}(n);if(l!==e.__cacheKey){void 0===o[l]&&(o[l]={texture:t.createTexture(),usedTimes:0},h.memory.textures++,r=!0),o[l].usedTimes++;var c=o[e.__cacheKey];void 0!==c&&(o[e.__cacheKey].usedTimes--,0===c.usedTimes&&et(n)),e.__cacheKey=l,e.__webglTexture=o[l].texture}return r}function lt(e,r,slot){var o=3553;r.isDataArrayTexture&&(o=35866),r.isData3DTexture&&(o=32879);var l=ut(e,r),source=r.source;if(n.activeTexture(33984+slot),n.bindTexture(o,e.__webglTexture),source.version!==source.__currentVersion||!0===l){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);var h,d=function(t){return!v&&(t.wrapS!==O||t.wrapT!==O||t.minFilter!==F&&t.minFilter!==N)}(r)&&!1===P(r.image),image=D(r.image,d,!1,x),f=P(image=vt(r,image))||v,m=c.convert(r.format,r.encoding),y=c.convert(r.type),_=$(r.internalFormat,m,y,r.encoding,r.isVideoTexture);st(o,r,f);var w=r.mipmaps,S=v&&!0!==r.isVideoTexture,E=void 0===e.__version,M=K(r,image,f);if(r.isDepthTexture)_=6402,v?_=r.type===V?36012:r.type===z?33190:r.type===G?35056:33189:r.type===V&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===X&&6402===_&&r.type!==U&&r.type!==z&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=U,y=c.convert(r.type)),r.format===Y&&6402===_&&(_=34041,r.type!==G&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=G,y=c.convert(r.type))),S&&E?n.texStorage2D(3553,1,_,image.width,image.height):n.texImage2D(3553,0,_,image.width,image.height,0,m,y,null);else if(r.isDataTexture)if(w.length>0&&f){S&&E&&n.texStorage2D(3553,M,_,w[0].width,w[0].height);for(var T=0,A=w.length;T<A;T++)h=w[T],S?n.texSubImage2D(3553,T,0,0,h.width,h.height,m,y,h.data):n.texImage2D(3553,T,_,h.width,h.height,0,m,y,h.data);r.generateMipmaps=!1}else S?(E&&n.texStorage2D(3553,M,_,image.width,image.height),n.texSubImage2D(3553,0,0,0,image.width,image.height,m,y,image.data)):n.texImage2D(3553,0,_,image.width,image.height,0,m,y,image.data);else if(r.isCompressedTexture){S&&E&&n.texStorage2D(3553,M,_,w[0].width,w[0].height);for(var k=0,L=w.length;k<L;k++)h=w[k],r.format!==W?null!==m?S?n.compressedTexSubImage2D(3553,k,0,0,h.width,h.height,m,h.data):n.compressedTexImage2D(3553,k,_,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?n.texSubImage2D(3553,k,0,0,h.width,h.height,m,y,h.data):n.texImage2D(3553,k,_,h.width,h.height,0,m,y,h.data)}else if(r.isDataArrayTexture)S?(E&&n.texStorage3D(35866,M,_,image.width,image.height,image.depth),n.texSubImage3D(35866,0,0,0,0,image.width,image.height,image.depth,m,y,image.data)):n.texImage3D(35866,0,_,image.width,image.height,image.depth,0,m,y,image.data);else if(r.isData3DTexture)S?(E&&n.texStorage3D(32879,M,_,image.width,image.height,image.depth),n.texSubImage3D(32879,0,0,0,0,image.width,image.height,image.depth,m,y,image.data)):n.texImage3D(32879,0,_,image.width,image.height,image.depth,0,m,y,image.data);else if(r.isFramebufferTexture)S&&E?n.texStorage2D(3553,M,_,image.width,image.height):n.texImage2D(3553,0,_,image.width,image.height,0,m,y,null);else if(w.length>0&&f){S&&E&&n.texStorage2D(3553,M,_,w[0].width,w[0].height);for(var R=0,I=w.length;R<I;R++)h=w[R],S?n.texSubImage2D(3553,R,0,0,m,y,h):n.texImage2D(3553,R,_,m,y,h);r.generateMipmaps=!1}else S?(E&&n.texStorage2D(3553,M,_,image.width,image.height),n.texSubImage2D(3553,0,0,0,m,y,image)):n.texImage2D(3553,0,_,m,y,image);C(r,f)&&Q(o),source.__currentVersion=source.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}function ct(e,o,l,h,d){var f=c.convert(l.format,l.encoding),m=c.convert(l.type),v=$(l.internalFormat,f,m,l.encoding);r.get(o).__hasExternalTextures||(32879===d||35866===d?n.texImage3D(d,0,v,o.width,o.height,o.depth,0,f,m,null):n.texImage2D(d,0,v,o.width,o.height,0,f,m,null)),n.bindFramebuffer(36160,e),mt(o)?S.framebufferTexture2DMultisampleEXT(36160,h,d,r.get(l).__webglTexture,0,ft(o)):t.framebufferTexture2D(36160,h,d,r.get(l).__webglTexture,0),n.bindFramebuffer(36160,null)}function ht(e,n,r){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var o=33189;if(r||mt(n)){var l=n.depthTexture;l&&l.isDepthTexture&&(l.type===V?o=36012:l.type===z&&(o=33190));var h=ft(n);mt(n)?S.renderbufferStorageMultisampleEXT(36161,h,o,n.width,n.height):t.renderbufferStorageMultisample(36161,h,o,n.width,n.height)}else t.renderbufferStorage(36161,o,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){var d=ft(n);r&&!1===mt(n)?t.renderbufferStorageMultisample(36161,d,35056,n.width,n.height):mt(n)?S.renderbufferStorageMultisampleEXT(36161,d,35056,n.width,n.height):t.renderbufferStorage(36161,34041,n.width,n.height),t.framebufferRenderbuffer(36160,33306,36161,e)}else{var f=!0===n.isWebGLMultipleRenderTargets?n.texture[0]:n.texture,m=c.convert(f.format,f.encoding),v=c.convert(f.type),y=$(f.internalFormat,m,v,f.encoding),_=ft(n);r&&!1===mt(n)?t.renderbufferStorageMultisample(36161,_,y,n.width,n.height):mt(n)?S.renderbufferStorageMultisampleEXT(36161,_,y,n.width,n.height):t.renderbufferStorage(36161,y,n.width,n.height)}t.bindRenderbuffer(36161,null)}function pt(e){var o=r.get(e),l=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture&&!o.__autoAllocateDepthBuffer){if(l)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,o){if(o&&o.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,e),!o.depthTexture||!o.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(o.depthTexture).__webglTexture&&o.depthTexture.image.width===o.width&&o.depthTexture.image.height===o.height||(o.depthTexture.image.width=o.width,o.depthTexture.image.height=o.height,o.depthTexture.needsUpdate=!0),it(o.depthTexture,0);var l=r.get(o.depthTexture).__webglTexture,c=ft(o);if(o.depthTexture.format===X)mt(o)?S.framebufferTexture2DMultisampleEXT(36160,36096,3553,l,0,c):t.framebufferTexture2D(36160,36096,3553,l,0);else{if(o.depthTexture.format!==Y)throw new Error("Unknown depthTexture format");mt(o)?S.framebufferTexture2DMultisampleEXT(36160,33306,3553,l,0,c):t.framebufferTexture2D(36160,33306,3553,l,0)}}(o.__webglFramebuffer,e)}else if(l){o.__webglDepthbuffer=[];for(var c=0;c<6;c++)n.bindFramebuffer(36160,o.__webglFramebuffer[c]),o.__webglDepthbuffer[c]=t.createRenderbuffer(),ht(o.__webglDepthbuffer[c],e,!1)}else n.bindFramebuffer(36160,o.__webglFramebuffer),o.__webglDepthbuffer=t.createRenderbuffer(),ht(o.__webglDepthbuffer,e,!1);n.bindFramebuffer(36160,null)}function ft(t){return Math.min(w,t.samples)}function mt(t){var n=r.get(t);return v&&t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function vt(t,image){var n=t.encoding,r=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||t.format===It||n!==Ct&&(n===kt?!1===v?!0===e.has("EXT_sRGB")&&r===W?(t.format=It,t.minFilter=N,t.generateMipmaps=!1):image=ae.sRGBToLinear(image):r===W&&o===B||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",n)),image}this.allocateTextureUnit=function(){var t=nt;return t>=y&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+y),nt+=1,t},this.resetTextureUnits=function(){nt=0},this.setTexture2D=it,this.setTexture2DArray=function(t,slot){var e=r.get(t);t.version>0&&e.__version!==t.version?lt(e,t,slot):(n.activeTexture(33984+slot),n.bindTexture(35866,e.__webglTexture))},this.setTexture3D=function(t,slot){var e=r.get(t);t.version>0&&e.__version!==t.version?lt(e,t,slot):(n.activeTexture(33984+slot),n.bindTexture(32879,e.__webglTexture))},this.setTextureCube=function(e,slot){var o=r.get(e);e.version>0&&o.__version!==e.version?function(e,r,slot){if(6!==r.image.length)return;var o=ut(e,r),source=r.source;if(n.activeTexture(33984+slot),n.bindTexture(34067,e.__webglTexture),source.version!==source.__currentVersion||!0===o){t.pixelStorei(37440,r.flipY),t.pixelStorei(37441,r.premultiplyAlpha),t.pixelStorei(3317,r.unpackAlignment),t.pixelStorei(37443,0);for(var l=r.isCompressedTexture||r.image[0].isCompressedTexture,h=r.image[0]&&r.image[0].isDataTexture,d=[],f=0;f<6;f++)d[f]=l||h?h?r.image[f].image:r.image[f]:D(r.image[f],!1,!0,_),d[f]=vt(r,d[f]);var m,image=d[0],y=P(image)||v,x=c.convert(r.format,r.encoding),w=c.convert(r.type),S=$(r.internalFormat,x,w,r.encoding),E=v&&!0!==r.isVideoTexture,M=void 0===e.__version,T=K(r,image,y);if(st(34067,r,y),l){E&&M&&n.texStorage2D(34067,T,S,image.width,image.height);for(var A=0;A<6;A++){m=d[A].mipmaps;for(var k=0;k<m.length;k++){var O=m[k];r.format!==W?null!==x?E?n.compressedTexSubImage2D(34069+A,k,0,0,O.width,O.height,x,O.data):n.compressedTexImage2D(34069+A,k,S,O.width,O.height,0,O.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?n.texSubImage2D(34069+A,k,0,0,O.width,O.height,x,w,O.data):n.texImage2D(34069+A,k,S,O.width,O.height,0,x,w,O.data)}}}else{m=r.mipmaps,E&&M&&(m.length>0&&T++,n.texStorage2D(34067,T,S,d[0].width,d[0].height));for(var L=0;L<6;L++)if(h){E?n.texSubImage2D(34069+L,0,0,0,d[L].width,d[L].height,x,w,d[L].data):n.texImage2D(34069+L,0,S,d[L].width,d[L].height,0,x,w,d[L].data);for(var F=0;F<m.length;F++){var R=m[F].image[L].image;E?n.texSubImage2D(34069+L,F+1,0,0,R.width,R.height,x,w,R.data):n.texImage2D(34069+L,F+1,S,R.width,R.height,0,x,w,R.data)}}else{E?n.texSubImage2D(34069+L,0,0,0,x,w,d[L]):n.texImage2D(34069+L,0,S,x,w,d[L]);for(var I=0;I<m.length;I++){var N=m[I];E?n.texSubImage2D(34069+L,I+1,0,0,x,w,N.image[L]):n.texImage2D(34069+L,I+1,S,x,w,N.image[L])}}}C(r,y)&&Q(34067),source.__currentVersion=source.version,r.onUpdate&&r.onUpdate(r)}e.__version=r.version}(o,e,slot):(n.activeTexture(33984+slot),n.bindTexture(34067,o.__webglTexture))},this.rebindTextures=function(t,e,n){var o=r.get(t);void 0!==e&&ct(o.__webglFramebuffer,t,t.texture,36064,3553),void 0!==n&&pt(t)},this.setupRenderTarget=function(e){var o=e.texture,d=r.get(e),f=r.get(o);e.addEventListener("dispose",tt),!0!==e.isWebGLMultipleRenderTargets&&(void 0===f.__webglTexture&&(f.__webglTexture=t.createTexture()),f.__version=o.version,h.memory.textures++);var m=!0===e.isWebGLCubeRenderTarget,y=!0===e.isWebGLMultipleRenderTargets,_=P(e)||v;if(m){d.__webglFramebuffer=[];for(var x=0;x<6;x++)d.__webglFramebuffer[x]=t.createFramebuffer()}else if(d.__webglFramebuffer=t.createFramebuffer(),y)if(l.drawBuffers)for(var w=e.texture,S=0,E=w.length;S<E;S++){var M=r.get(w[S]);void 0===M.__webglTexture&&(M.__webglTexture=t.createTexture(),h.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(v&&e.samples>0&&!1===mt(e)){d.__webglMultisampledFramebuffer=t.createFramebuffer(),d.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,d.__webglColorRenderbuffer);var T=c.convert(o.format,o.encoding),A=c.convert(o.type),D=$(o.internalFormat,T,A,o.encoding),k=ft(e);t.renderbufferStorageMultisample(36161,k,D,e.width,e.height),n.bindFramebuffer(36160,d.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,d.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(d.__webglDepthRenderbuffer=t.createRenderbuffer(),ht(d.__webglDepthRenderbuffer,e,!0)),n.bindFramebuffer(36160,null)}if(m){n.bindTexture(34067,f.__webglTexture),st(34067,o,_);for(var O=0;O<6;O++)ct(d.__webglFramebuffer[O],e,o,36064,34069+O);C(o,_)&&Q(34067),n.unbindTexture()}else if(y){for(var L=e.texture,F=0,R=L.length;F<R;F++){var I=L[F],N=r.get(I);n.bindTexture(3553,N.__webglTexture),st(3553,I,_),ct(d.__webglFramebuffer,e,I,36064+F,3553),C(I,_)&&Q(3553)}n.unbindTexture()}else{var j=3553;(e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(v?j=e.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(j,f.__webglTexture),st(j,o,_),ct(d.__webglFramebuffer,e,o,36064,j),C(o,_)&&Q(j),n.unbindTexture()}e.depthBuffer&&pt(e)},this.updateRenderTargetMipmap=function(t){for(var e=P(t)||v,o=!0===t.isWebGLMultipleRenderTargets?t.texture:[t.texture],l=0,c=o.length;l<c;l++){var h=o[l];if(C(h,e)){var d=t.isWebGLCubeRenderTarget?34067:3553,f=r.get(h).__webglTexture;n.bindTexture(d,f),Q(d),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(v&&e.samples>0&&!1===mt(e)){var o=e.width,l=e.height,mask=16384,c=[36064],h=e.stencilBuffer?33306:36096;e.depthBuffer&&c.push(h);var d=r.get(e),f=void 0!==d.__ignoreDepthValues&&d.__ignoreDepthValues;!1===f&&(e.depthBuffer&&(mask|=256),e.stencilBuffer&&(mask|=1024)),n.bindFramebuffer(36008,d.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,d.__webglFramebuffer),!0===f&&(t.invalidateFramebuffer(36008,[h]),t.invalidateFramebuffer(36009,[h])),t.blitFramebuffer(0,0,o,l,0,0,o,l,mask,9728),t.invalidateFramebuffer(36008,c),n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,d.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=pt,this.setupFrameBufferTexture=ct,this.useMultisampledRTT=mt}function ao(t,e,n){var r=n.isWebGL2;return{convert:function(p){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(p===B)return 5121;if(1017===p)return 32819;if(1018===p)return 32820;if(1010===p)return 5120;if(1011===p)return 5122;if(p===U)return 5123;if(1013===p)return 5124;if(p===z)return 5125;if(p===V)return 5126;if(p===H)return r?5131:null!==(t=e.get("OES_texture_half_float"))?t.HALF_FLOAT_OES:null;if(1021===p)return 6406;if(p===W)return 6408;if(1024===p)return 6409;if(1025===p)return 6410;if(p===X)return 6402;if(p===Y)return 34041;if(1028===p)return 6403;if(1022===p)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(p===It)return null!==(t=e.get("EXT_sRGB"))?t.SRGB_ALPHA_EXT:null;if(1029===p)return 36244;if(1030===p)return 33319;if(1031===p)return 33320;if(1033===p)return 36249;if(p===Q||p===$||p===K||p===J)if(n===kt){if(null===(t=e.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(p===Q)return t.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(p===$)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(p===K)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(p===J)return t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(t=e.get("WEBGL_compressed_texture_s3tc")))return null;if(p===Q)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(p===$)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(p===K)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(p===J)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(p===Z||p===tt||p===et||p===nt){if(null===(t=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(p===Z)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(p===tt)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(p===et)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(p===nt)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===p)return null!==(t=e.get("WEBGL_compressed_texture_etc1"))?t.COMPRESSED_RGB_ETC1_WEBGL:null;if(p===it||p===at){if(null===(t=e.get("WEBGL_compressed_texture_etc")))return null;if(p===it)return n===kt?t.COMPRESSED_SRGB8_ETC2:t.COMPRESSED_RGB8_ETC2;if(p===at)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:t.COMPRESSED_RGBA8_ETC2_EAC}if(p===ot||p===st||p===ut||p===lt||p===ct||p===ht||p===pt||p===ft||p===mt||p===vt||p===gt||p===yt||p===_t||p===bt){if(null===(t=e.get("WEBGL_compressed_texture_astc")))return null;if(p===ot)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:t.COMPRESSED_RGBA_ASTC_4x4_KHR;if(p===st)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:t.COMPRESSED_RGBA_ASTC_5x4_KHR;if(p===ut)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:t.COMPRESSED_RGBA_ASTC_5x5_KHR;if(p===lt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:t.COMPRESSED_RGBA_ASTC_6x5_KHR;if(p===ct)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:t.COMPRESSED_RGBA_ASTC_6x6_KHR;if(p===ht)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:t.COMPRESSED_RGBA_ASTC_8x5_KHR;if(p===pt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:t.COMPRESSED_RGBA_ASTC_8x6_KHR;if(p===ft)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:t.COMPRESSED_RGBA_ASTC_8x8_KHR;if(p===mt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:t.COMPRESSED_RGBA_ASTC_10x5_KHR;if(p===vt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:t.COMPRESSED_RGBA_ASTC_10x6_KHR;if(p===gt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:t.COMPRESSED_RGBA_ASTC_10x8_KHR;if(p===yt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:t.COMPRESSED_RGBA_ASTC_10x10_KHR;if(p===_t)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:t.COMPRESSED_RGBA_ASTC_12x10_KHR;if(p===bt)return n===kt?t.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:t.COMPRESSED_RGBA_ASTC_12x12_KHR}if(p===xt){if(null===(t=e.get("EXT_texture_compression_bptc")))return null;if(p===xt)return n===kt?t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:t.COMPRESSED_RGBA_BPTC_UNORM_EXT}return p===G?r?34042:null!==(t=e.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}var oo=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(v.a)(this,n),(t=e.call(this)).cameras=r,t}return n}(wr);oo.prototype.isArrayCamera=!0;var so=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="Group",t}return n}(_n);so.prototype.isGroup=!0;var uo={type:"move"},lo=function(){function t(){Object(v.a)(this,t),this._targetRay=null,this._grip=null,this._hand=null}return Object(y.a)(t,[{key:"getHandSpace",value:function(){return null===this._hand&&(this._hand=new so,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function(){return null===this._targetRay&&(this._targetRay=new so,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new ve),this._targetRay}},{key:"getGripSpace",value:function(){return null===this._grip&&(this._grip=new so,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new ve),this._grip}},{key:"dispatchEvent",value:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}},{key:"disconnect",value:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function(t,e,n){var r=null,o=null,l=null,c=this._targetRay,h=this._grip,d=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(null!==c&&null!==(r=e.getPose(t.targetRaySpace,n))&&(c.matrix.fromArray(r.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),r.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(r.linearVelocity)):c.hasLinearVelocity=!1,r.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(r.angularVelocity)):c.hasAngularVelocity=!1,this.dispatchEvent(uo)),d&&t.hand){l=!0;var f,m=_(t.hand.values());try{for(m.s();!(f=m.n()).done;){var v=f.value,y=e.getJointPose(v,n);if(void 0===d.joints[v.jointName]){var x=new so;x.matrixAutoUpdate=!1,x.visible=!1,d.joints[v.jointName]=x,d.add(x)}var w=d.joints[v.jointName];null!==y&&(w.matrix.fromArray(y.transform.matrix),w.matrix.decompose(w.position,w.rotation,w.scale),w.jointRadius=y.radius),w.visible=null!==y}}catch(t){m.e(t)}finally{m.f()}var S=d.joints["index-finger-tip"],E=d.joints["thumb-tip"],M=S.position.distanceTo(E.position);d.inputState.pinching&&M>.025?(d.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!d.inputState.pinching&&M<=.015&&(d.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==h&&t.gripSpace&&null!==(o=e.getPose(t.gripSpace,n))&&(h.matrix.fromArray(o.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),o.linearVelocity?(h.hasLinearVelocity=!0,h.linearVelocity.copy(o.linearVelocity)):h.hasLinearVelocity=!1,o.angularVelocity?(h.hasAngularVelocity=!0,h.angularVelocity.copy(o.angularVelocity)):h.hasAngularVelocity=!1);return null!==c&&(c.visible=null!==r),null!==h&&(h.visible=null!==o),null!==d&&(d.visible=null!==l),this}}]),t}(),co=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l,c,h,d,f,m,y){var _;if(Object(v.a)(this,n),(y=void 0!==y?y:X)!==X&&y!==Y)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===o&&y===X&&(o=U),void 0===o&&y===Y&&(o=G),(_=e.call(this,null,l,c,h,d,f,y,o,m)).image={width:t,height:r},_.magFilter=void 0!==d?d:F,_.minFilter=void 0!==f?f:F,_.flipY=!1,_.generateMipmaps=!1,_}return n}(le);co.prototype.isDepthTexture=!0;var ho=function(t){Object(d.a)(n,t);var e=w(n);function n(t,o){var l;Object(v.a)(this,n),l=e.call(this);var c=Object(h.a)(l),d=null,f=1,m=null,y="local-floor",_=null,x=null,w=null,S=null,E=null,M=o.getContextAttributes(),T=null,A=null,D=[],P=new Map,C=new wr;C.layers.enable(1),C.viewport=new ce;var k=new wr;k.layers.enable(2),k.viewport=new ce;var O=[C,k],L=new oo;L.layers.enable(1),L.layers.enable(2);var F=null,R=null;function I(t){var e=P.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function N(){P.forEach((function(t,e){t.disconnect(e)})),P.clear(),F=null,R=null,t.setRenderTarget(T),S=null,w=null,x=null,d=null,A=null,$.stop(),c.isPresenting=!1,c.dispatchEvent({type:"sessionend"})}function j(t){for(var e=d.inputSources,n=0;n<D.length;n++)P.set(e[n],D[n]);for(var r=0;r<t.removed.length;r++){var o=t.removed[r],l=P.get(o);l&&(l.dispatchEvent({type:"disconnected",data:o}),P.delete(o))}for(var c=0;c<t.added.length;c++){var h=t.added[c],f=P.get(h);f&&f.dispatchEvent({type:"connected",data:h})}}l.cameraAutoUpdate=!0,l.enabled=!1,l.isPresenting=!1,l.getController=function(t){var e=D[t];return void 0===e&&(e=new lo,D[t]=e),e.getTargetRaySpace()},l.getControllerGrip=function(t){var e=D[t];return void 0===e&&(e=new lo,D[t]=e),e.getGripSpace()},l.getHand=function(t){var e=D[t];return void 0===e&&(e=new lo,D[t]=e),e.getHandSpace()},l.setFramebufferScaleFactor=function(t){f=t,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},l.setReferenceSpaceType=function(t){y=t,!0===c.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},l.getReferenceSpace=function(){return m},l.getBaseLayer=function(){return null!==w?w:S},l.getBinding=function(){return x},l.getFrame=function(){return E},l.getSession=function(){return d},l.setSession=function(){var e=Object(r.a)(regeneratorRuntime.mark((function e(n){var r,l,h,v,_;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(d=n)){e.next=24;break}if(T=t.getRenderTarget(),d.addEventListener("select",I),d.addEventListener("selectstart",I),d.addEventListener("selectend",I),d.addEventListener("squeeze",I),d.addEventListener("squeezestart",I),d.addEventListener("squeezeend",I),d.addEventListener("end",N),d.addEventListener("inputsourceschange",j),!0===M.xrCompatible){e.next=14;break}return e.next=14,o.makeXRCompatible();case 14:return void 0===d.renderState.layers||!1===t.capabilities.isWebGL2?(r={antialias:void 0!==d.renderState.layers||M.antialias,alpha:M.alpha,depth:M.depth,stencil:M.stencil,framebufferScaleFactor:f},S=new XRWebGLLayer(d,o,r),d.updateRenderState({baseLayer:S}),A=new he(S.framebufferWidth,S.framebufferHeight,{format:W,type:B,encoding:t.outputEncoding})):(l=null,h=null,v=null,M.depth&&(v=M.stencil?35056:33190,l=M.stencil?Y:X,h=M.stencil?G:U),_={colorFormat:t.outputEncoding===kt?35907:32856,depthFormat:v,scaleFactor:f},x=new XRWebGLBinding(d,o),w=x.createProjectionLayer(_),d.updateRenderState({layers:[w]}),A=new he(w.textureWidth,w.textureHeight,{format:W,type:B,depthTexture:new co(w.textureWidth,w.textureHeight,h,void 0,void 0,void 0,void 0,void 0,void 0,l),stencilBuffer:M.stencil,encoding:t.outputEncoding,samples:M.antialias?4:0}),t.properties.get(A).__ignoreDepthValues=w.ignoreDepthValues),A.isXRRenderTarget=!0,this.setFoveation(1),e.next=19,d.requestReferenceSpace(y);case 19:m=e.sent,$.setContext(d),$.start(),c.isPresenting=!0,c.dispatchEvent({type:"sessionstart"});case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();var z=new ve,V=new ve;function H(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}l.updateCamera=function(t){if(null!==d){L.near=k.near=C.near=t.near,L.far=k.far=C.far=t.far,F===L.near&&R===L.far||(d.updateRenderState({depthNear:L.near,depthFar:L.far}),F=L.near,R=L.far);var e=t.parent,n=L.cameras;H(L,e);for(var r=0;r<n.length;r++)H(n[r],e);L.matrixWorld.decompose(L.position,L.quaternion,L.scale),t.position.copy(L.position),t.quaternion.copy(L.quaternion),t.scale.copy(L.scale),t.matrix.copy(L.matrix),t.matrixWorld.copy(L.matrixWorld);for(var o=t.children,l=0,c=o.length;l<c;l++)o[l].updateMatrixWorld(!0);2===n.length?function(t,e,n){z.setFromMatrixPosition(e.matrixWorld),V.setFromMatrixPosition(n.matrixWorld);var r=z.distanceTo(V),o=e.projectionMatrix.elements,l=n.projectionMatrix.elements,c=o[14]/(o[10]-1),h=o[14]/(o[10]+1),d=(o[9]+1)/o[5],f=(o[9]-1)/o[5],m=(o[8]-1)/o[0],v=(l[8]+1)/l[0],y=c*m,_=c*v,x=r/(-m+v),w=x*-m;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(w),t.translateZ(x),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();var S=c+x,E=h+x,M=y-w,T=_+(r-w),A=d*h/E*S,D=f*h/E*S;t.projectionMatrix.makePerspective(M,T,A,D,S,E)}(L,C,k):L.projectionMatrix.copy(C.projectionMatrix)}},l.getCamera=function(){return L},l.getFoveation=function(){return null!==w?w.fixedFoveation:null!==S?S.fixedFoveation:void 0},l.setFoveation=function(t){null!==w&&(w.fixedFoveation=t),null!==S&&void 0!==S.fixedFoveation&&(S.fixedFoveation=t)};var Q=null;var $=new Fr;return $.setAnimationLoop((function(time,e){if(_=e.getViewerPose(m),E=e,null!==_){var n=_.views;null!==S&&(t.setRenderTargetFramebuffer(A,S.framebuffer),t.setRenderTarget(A));var r=!1;n.length!==L.cameras.length&&(L.cameras.length=0,r=!0);for(var o=0;o<n.length;o++){var view=n[o],l=null;if(null!==S)l=S.getViewport(view);else{var c=x.getViewSubImage(w,view);l=c.viewport,0===o&&(t.setRenderTargetTextures(A,c.colorTexture,w.ignoreDepthValues?void 0:c.depthStencilTexture),t.setRenderTarget(A))}var h=O[o];h.matrix.fromArray(view.transform.matrix),h.projectionMatrix.fromArray(view.projectionMatrix),h.viewport.set(l.x,l.y,l.width,l.height),0===o&&L.matrix.copy(h.matrix),!0===r&&L.cameras.push(h)}}for(var f=d.inputSources,v=0;v<D.length;v++){var y=D[v],M=f[v];y.update(M,e,m)}Q&&Q(time,e),E=null})),l.setAnimationLoop=function(t){Q=t},l.dispose=function(){},l}return n}(Nt);function po(t){function e(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap),n.alphaTest>0&&(e.alphaTest.value=n.alphaTest);var r,o,l=t.get(n).envMap;l&&(e.envMap.value=l,e.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1,e.reflectivity.value=n.reflectivity,e.ior.value=n.ior,e.refractionRatio.value=n.refractionRatio),n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap?r=n.clearcoatRoughnessMap:n.specularIntensityMap?r=n.specularIntensityMap:n.specularColorMap?r=n.specularColorMap:n.transmissionMap?r=n.transmissionMap:n.thicknessMap?r=n.thicknessMap:n.sheenColorMap?r=n.sheenColorMap:n.sheenRoughnessMap&&(r=n.sheenRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function n(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,1===n.side&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),1===n.side&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias),t.get(n).envMap&&(e.envMapIntensity.value=n.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,r,o,l,c){r.isMeshBasicMaterial?e(t,r):r.isMeshLambertMaterial?(e(t,r),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,r)):r.isMeshToonMaterial?(e(t,r),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap);e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshPhongMaterial?(e(t,r),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshStandardMaterial?(e(t,r),r.isMeshPhysicalMaterial?function(t,e,r){n(t,e),t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap));e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,1===e.side&&t.clearcoatNormalScale.value.negate()));e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=r.texture,t.transmissionSamplerSize.value.set(r.width,r.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor));t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap);e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap)}(t,r,c):n(t,r)):r.isMeshMatcapMaterial?(e(t,r),function(t,e){e.matcap&&(t.matcap.value=e.matcap);e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDepthMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isMeshDistanceMaterial?(e(t,r),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias);t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,r)):r.isMeshNormalMaterial?(e(t,r),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,1===e.side&&(t.bumpScale.value*=-1));e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),1===e.side&&t.normalScale.value.negate());e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,r)):r.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,r),r.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,r)):r.isPointsMaterial?function(t,e,n,r){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*r,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);var o;e.map?o=e.map:e.alphaMap&&(o=e.alphaMap);void 0!==o&&(!0===o.matrixAutoUpdate&&o.updateMatrix(),t.uvTransform.value.copy(o.matrix))}(t,r,o,l):r.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map);e.alphaMap&&(t.alphaMap.value=e.alphaMap);e.alphaTest>0&&(t.alphaTest.value=e.alphaTest);var n;e.map?n=e.map:e.alphaMap&&(n=e.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,r):r.isShadowMaterial?(t.color.value.copy(r.color),t.opacity.value=r.opacity):r.isShaderMaterial&&(r.uniformsNeedUpdate=!1)}}}function fo(){var canvas=$t("canvas");return canvas.style.display="block",canvas}function mo(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=void 0!==e.canvas?e.canvas:fo(),r=void 0!==e.context?e.context:null,o=void 0===e.depth||e.depth,l=void 0===e.stencil||e.stencil,c=void 0!==e.antialias&&e.antialias,h=void 0===e.premultipliedAlpha||e.premultipliedAlpha,d=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,f=void 0!==e.powerPreference?e.powerPreference:"default",m=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;t=void 0!==e.context?r.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;var v=null,y=null,_=[],x=[];this.domElement=n,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=Ct,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var w=this,E=!1,M=0,T=0,A=null,D=-1,P=null,C=new ce,k=new ce,O=null,L=n.width,F=n.height,R=1,I=null,N=null,U=new ce(0,0,L,F),z=new ce(0,0,L,F),G=!1,X=new Lr,Y=!1,Q=!1,$=null,K=new Ye,J=new Yt,Z=new ve,tt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function et(){return null===A?R:1}var nt,it,at,ot,st,ut,lt,ct,ht,pt,ft,mt,vt,gt,yt,_t,bt,xt,wt,St,Et,Mt,Tt,At=r;function Dt(t,e){for(var r=0;r<t.length;r++){var o=t[r],l=n.getContext(o,e);if(null!==l)return l}return null}try{var Pt={alpha:!0,depth:o,stencil:l,antialias:c,premultipliedAlpha:h,preserveDrawingBuffer:d,powerPreference:f,failIfMajorPerformanceCaveat:m};if("setAttribute"in n&&n.setAttribute("data-engine","three.js r".concat(S)),n.addEventListener("webglcontextlost",Ft,!1),n.addEventListener("webglcontextrestored",Rt,!1),null===At){var kt=["webgl2","webgl","experimental-webgl"];if(!0===w.isWebGL1Renderer&&kt.shift(),null===(At=Dt(kt,Pt)))throw Dt(kt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===At.getShaderPrecisionFormat&&(At.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}function Ot(){nt=new si(At),it=new Hr(At,nt,e),nt.init(it),Mt=new ao(At,nt,it),at=new ro(At,nt,it),ot=new hi(At),st=new Ha,ut=new io(At,nt,at,st,it,Mt,ot),lt=new Wr(w),ct=new oi(w),ht=new Rr(At,it),Tt=new zr(At,nt,ht,it),pt=new ui(At,ht,ot,Tt),ft=new vi(At,pt,ht,ot),wt=new mi(At,it,ut),_t=new Gr(st),mt=new Va(w,lt,ct,nt,it,Tt,_t),vt=new po(st),gt=new Ya,yt=new Za(nt,it),xt=new Ur(w,lt,at,ft,t,h),bt=new no(w,ft,it),St=new Vr(At,nt,ot,it),Et=new ci(At,nt,ot,it),ot.programs=mt.programs,w.capabilities=it,w.extensions=nt,w.properties=st,w.renderLists=gt,w.shadowMap=bt,w.state=at,w.info=ot}Ot();var Lt=new ho(w,At);function Ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Rt(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;var t=ot.autoReset,e=bt.enabled,n=bt.autoUpdate,r=bt.needsUpdate,o=bt.type;Ot(),ot.autoReset=t,bt.enabled=e,bt.autoUpdate=n,bt.needsUpdate=r,bt.type=o}function It(t){var e=t.target;e.removeEventListener("dispose",It),Nt(e)}function Nt(t){jt(t),st.remove(t)}function jt(t){var e=st.get(t).programs;void 0!==e&&(e.forEach((function(t){mt.releaseProgram(t)})),t.isShaderMaterial&&mt.releaseShaderCache(t))}this.xr=Lt,this.getContext=function(){return At},this.getContextAttributes=function(){return At.getContextAttributes()},this.forceContextLoss=function(){var t=nt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=nt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(t){void 0!==t&&(R=t,this.setSize(L,F,!1))},this.getSize=function(t){return t.set(L,F)},this.setSize=function(t,e,r){Lt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(L=t,F=e,n.width=Math.floor(t*R),n.height=Math.floor(e*R),!1!==r&&(n.style.width=t+"px",n.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return t.set(L*R,F*R).floor()},this.setDrawingBufferSize=function(t,e,r){L=t,F=e,R=r,n.width=Math.floor(t*r),n.height=Math.floor(e*r),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return t.copy(C)},this.getViewport=function(t){return t.copy(U)},this.setViewport=function(t,e,n,r){t.isVector4?U.set(t.x,t.y,t.z,t.w):U.set(t,e,n,r),at.viewport(C.copy(U).multiplyScalar(R).floor())},this.getScissor=function(t){return t.copy(z)},this.setScissor=function(t,e,n,r){t.isVector4?z.set(t.x,t.y,t.z,t.w):z.set(t,e,n,r),at.scissor(k.copy(z).multiplyScalar(R).floor())},this.getScissorTest=function(){return G},this.setScissorTest=function(t){at.setScissorTest(G=t)},this.setOpaqueSort=function(t){I=t},this.setTransparentSort=function(t){N=t},this.getClearColor=function(t){return t.copy(xt.getClearColor())},this.setClearColor=function(){xt.setClearColor.apply(xt,arguments)},this.getClearAlpha=function(){return xt.getClearAlpha()},this.setClearAlpha=function(){xt.setClearAlpha.apply(xt,arguments)},this.clear=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=0;t&&(r|=16384),e&&(r|=256),n&&(r|=1024),At.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",Ft,!1),n.removeEventListener("webglcontextrestored",Rt,!1),gt.dispose(),yt.dispose(),st.dispose(),lt.dispose(),ct.dispose(),ft.dispose(),Tt.dispose(),mt.dispose(),Lt.dispose(),Lt.removeEventListener("sessionstart",zt),Lt.removeEventListener("sessionend",Vt),$&&($.dispose(),$=null),Ht.stop()},this.renderBufferDirect=function(t,e,n,r,object,o){null===e&&(e=tt);var l=object.isMesh&&object.matrixWorld.determinant()<0,c=Zt(t,e,n,r,object);at.setMaterial(r,l);var h=n.index,d=n.attributes.position;if(null===h){if(void 0===d||0===d.count)return}else if(0===h.count)return;var f,m=1;!0===r.wireframe&&(h=pt.getWireframeAttribute(n),m=2),Tt.setup(object,r,c,n,h);var v=St;null!==h&&(f=ht.get(h),(v=Et).setIndex(f));var y=null!==h?h.count:d.count,_=n.drawRange.start*m,x=n.drawRange.count*m,w=null!==o?o.start*m:0,S=null!==o?o.count*m:1/0,E=Math.max(_,w),M=Math.min(y,_+x,w+S)-1,T=Math.max(0,M-E+1);if(0!==T){if(object.isMesh)!0===r.wireframe?(at.setLineWidth(r.wireframeLinewidth*et()),v.setMode(1)):v.setMode(4);else if(object.isLine){var A=r.linewidth;void 0===A&&(A=1),at.setLineWidth(A*et()),object.isLineSegments?v.setMode(1):object.isLineLoop?v.setMode(2):v.setMode(3)}else object.isPoints?v.setMode(0):object.isSprite&&v.setMode(4);if(object.isInstancedMesh)v.renderInstances(E,T,object.count);else if(n.isInstancedBufferGeometry){var D=Math.min(n.instanceCount,n._maxInstanceCount);v.renderInstances(E,T,D)}else v.render(E,T)}},this.compile=function(t,e){(y=yt.get(t)).init(),x.push(y),t.traverseVisible((function(object){object.isLight&&object.layers.test(e.layers)&&(y.pushLight(object),object.castShadow&&y.pushShadow(object))})),y.setupLights(w.physicallyCorrectLights),t.traverse((function(object){var e=object.material;if(e)if(Array.isArray(e))for(var n=0;n<e.length;n++){Kt(e[n],t,object)}else Kt(e,t,object)})),x.pop(),y=null};var Bt=null;function Ut(time){Bt&&Bt(time)}function zt(){Ht.stop()}function Vt(){Ht.start()}var Ht=new Fr;function Gt(object,t,e,n){if(!1!==object.visible){if(object.layers.test(t.layers))if(object.isGroup)e=object.renderOrder;else if(object.isLOD)!0===object.autoUpdate&&object.update(t);else if(object.isLight)y.pushLight(object),object.castShadow&&y.pushShadow(object);else if(object.isSprite){if(!object.frustumCulled||X.intersectsSprite(object)){n&&Z.setFromMatrixPosition(object.matrixWorld).applyMatrix4(K);var r=ft.update(object),o=object.material;o.visible&&v.push(object,r,o,e,Z.z,null)}}else if((object.isMesh||object.isLine||object.isPoints)&&(object.isSkinnedMesh&&object.skeleton.frame!==ot.render.frame&&(object.skeleton.update(),object.skeleton.frame=ot.render.frame),!object.frustumCulled||X.intersectsObject(object))){n&&Z.setFromMatrixPosition(object.matrixWorld).applyMatrix4(K);var l=ft.update(object),c=object.material;if(Array.isArray(c))for(var h=l.groups,d=0,f=h.length;d<f;d++){var m=h[d],_=c[m.materialIndex];_&&_.visible&&v.push(object,l,_,e,Z.z,m)}else c.visible&&v.push(object,l,c,e,Z.z,null)}for(var x=object.children,w=0,S=x.length;w<S;w++)Gt(x[w],t,e,n)}}function Wt(t,e,n,r){var o=t.opaque,l=t.transmissive,c=t.transparent;y.setupLightsView(n),l.length>0&&qt(o,e,n),r&&at.viewport(C.copy(r)),o.length>0&&Qt(o,e,n),l.length>0&&Qt(l,e,n),c.length>0&&Qt(c,e,n),at.buffers.depth.setTest(!0),at.buffers.depth.setMask(!0),at.buffers.color.setMask(!0),at.setPolygonOffset(!1)}function qt(t,e,n){var r=it.isWebGL2;null===$&&($=new he(1,1,{generateMipmaps:!0,type:null!==Mt.convert(H)?H:B,minFilter:j,samples:r&&!0===c?4:0})),w.getDrawingBufferSize(J),r?$.setSize(J.x,J.y):$.setSize(Xt(J.x),Xt(J.y));var o=w.getRenderTarget();w.setRenderTarget($),w.clear();var l=w.toneMapping;w.toneMapping=0,Qt(t,e,n),w.toneMapping=l,ut.updateMultisampleRenderTarget($),ut.updateRenderTargetMipmap($),w.setRenderTarget(o)}function Qt(t,e,n){for(var r=!0===e.isScene?e.overrideMaterial:null,o=0,l=t.length;o<l;o++){var c=t[o],object=c.object,h=c.geometry,d=null===r?c.material:r,f=c.group;object.layers.test(n.layers)&&$t(object,e,n,h,d,f)}}function $t(object,t,e,n,r,o){object.onBeforeRender(w,t,e,n,r,o),object.modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,object.matrixWorld),object.normalMatrix.getNormalMatrix(object.modelViewMatrix),r.onBeforeRender(w,t,e,n,object,o),!0===r.transparent&&2===r.side?(r.side=1,r.needsUpdate=!0,w.renderBufferDirect(e,t,n,r,object,o),r.side=0,r.needsUpdate=!0,w.renderBufferDirect(e,t,n,r,object,o),r.side=2):w.renderBufferDirect(e,t,n,r,object,o),object.onAfterRender(w,t,e,n,r,o)}function Kt(t,e,object){!0!==e.isScene&&(e=tt);var n=st.get(t),r=y.state.lights,o=y.state.shadowsArray,l=r.state.version,c=mt.getParameters(t,r.state,o,e,object),h=mt.getProgramCacheKey(c),d=n.programs;n.environment=t.isMeshStandardMaterial?e.environment:null,n.fog=e.fog,n.envMap=(t.isMeshStandardMaterial?ct:lt).get(t.envMap||n.environment),void 0===d&&(t.addEventListener("dispose",It),d=new Map,n.programs=d);var f=d.get(h);if(void 0!==f){if(n.currentProgram===f&&n.lightsStateVersion===l)return Jt(t,c),f}else c.uniforms=mt.getUniforms(t),t.onBuild(object,c,w),t.onBeforeCompile(c,w),f=mt.acquireProgram(c,h),d.set(h,f),n.uniforms=c.uniforms;var m=n.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(m.clippingPlanes=_t.uniform),Jt(t,c),n.needsLights=ee(t),n.lightsStateVersion=l,n.needsLights&&(m.ambientLightColor.value=r.state.ambient,m.lightProbe.value=r.state.probe,m.directionalLights.value=r.state.directional,m.directionalLightShadows.value=r.state.directionalShadow,m.spotLights.value=r.state.spot,m.spotLightShadows.value=r.state.spotShadow,m.rectAreaLights.value=r.state.rectArea,m.ltc_1.value=r.state.rectAreaLTC1,m.ltc_2.value=r.state.rectAreaLTC2,m.pointLights.value=r.state.point,m.pointLightShadows.value=r.state.pointShadow,m.hemisphereLights.value=r.state.hemi,m.directionalShadowMap.value=r.state.directionalShadowMap,m.directionalShadowMatrix.value=r.state.directionalShadowMatrix,m.spotShadowMap.value=r.state.spotShadowMap,m.spotShadowMatrix.value=r.state.spotShadowMatrix,m.pointShadowMap.value=r.state.pointShadowMap,m.pointShadowMatrix.value=r.state.pointShadowMatrix);var v=f.getUniforms(),_=ba.seqWithValue(v.seq,m);return n.currentProgram=f,n.uniformsList=_,f}function Jt(t,e){var n=st.get(t);n.outputEncoding=e.outputEncoding,n.instancing=e.instancing,n.skinning=e.skinning,n.morphTargets=e.morphTargets,n.morphNormals=e.morphNormals,n.morphColors=e.morphColors,n.morphTargetsCount=e.morphTargetsCount,n.numClippingPlanes=e.numClippingPlanes,n.numIntersection=e.numClipIntersection,n.vertexAlphas=e.vertexAlphas,n.vertexTangents=e.vertexTangents,n.toneMapping=e.toneMapping}function Zt(t,e,n,r,object){!0!==e.isScene&&(e=tt),ut.resetTextureUnits();var o=e.fog,l=r.isMeshStandardMaterial?e.environment:null,c=null===A?w.outputEncoding:!0===A.isXRRenderTarget?A.texture.encoding:Ct,h=(r.isMeshStandardMaterial?ct:lt).get(r.envMap||l),d=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,f=!!r.normalMap&&!!n.attributes.tangent,m=!!n.morphAttributes.position,v=!!n.morphAttributes.normal,_=!!n.morphAttributes.color,x=r.toneMapped?w.toneMapping:0,S=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,E=void 0!==S?S.length:0,M=st.get(r),T=y.state.lights;if(!0===Y&&(!0===Q||t!==P)){var C=t===P&&r.id===D;_t.setState(r,t,C)}var k=!1;r.version===M.__version?M.needsLights&&M.lightsStateVersion!==T.state.version||M.outputEncoding!==c||object.isInstancedMesh&&!1===M.instancing?k=!0:object.isInstancedMesh||!0!==M.instancing?object.isSkinnedMesh&&!1===M.skinning?k=!0:object.isSkinnedMesh||!0!==M.skinning?M.envMap!==h||r.fog&&M.fog!==o?k=!0:void 0===M.numClippingPlanes||M.numClippingPlanes===_t.numPlanes&&M.numIntersection===_t.numIntersection?(M.vertexAlphas!==d||M.vertexTangents!==f||M.morphTargets!==m||M.morphNormals!==v||M.morphColors!==_||M.toneMapping!==x||!0===it.isWebGL2&&M.morphTargetsCount!==E)&&(k=!0):k=!0:k=!0:k=!0:(k=!0,M.__version=r.version);var O=M.currentProgram;!0===k&&(O=Kt(r,e,object));var L=!1,I=!1,N=!1,j=O.getUniforms(),B=M.uniforms;if(at.useProgram(O.program)&&(L=!0,I=!0,N=!0),r.id!==D&&(D=r.id,I=!0),L||P!==t){if(j.setValue(At,"projectionMatrix",t.projectionMatrix),it.logarithmicDepthBuffer&&j.setValue(At,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),P!==t&&(P=t,I=!0,N=!0),r.isShaderMaterial||r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshStandardMaterial||r.envMap){var U=j.map.cameraPosition;void 0!==U&&U.setValue(At,Z.setFromMatrixPosition(t.matrixWorld))}(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&j.setValue(At,"isOrthographic",!0===t.isOrthographicCamera),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial||r.isShadowMaterial||object.isSkinnedMesh)&&j.setValue(At,"viewMatrix",t.matrixWorldInverse)}if(object.isSkinnedMesh){j.setOptional(At,object,"bindMatrix"),j.setOptional(At,object,"bindMatrixInverse");var z=object.skeleton;z&&(it.floatVertexTextures?(null===z.boneTexture&&z.computeBoneTexture(),j.setValue(At,"boneTexture",z.boneTexture,ut),j.setValue(At,"boneTextureSize",z.boneTextureSize)):j.setOptional(At,z,"boneMatrices"))}var V=n.morphAttributes;return(void 0!==V.position||void 0!==V.normal||void 0!==V.color&&!0===it.isWebGL2)&&wt.update(object,n,r,O),(I||M.receiveShadow!==object.receiveShadow)&&(M.receiveShadow=object.receiveShadow,j.setValue(At,"receiveShadow",object.receiveShadow)),I&&(j.setValue(At,"toneMappingExposure",w.toneMappingExposure),M.needsLights&&te(B,N),o&&r.fog&&vt.refreshFogUniforms(B,o),vt.refreshMaterialUniforms(B,r,R,F,$),ba.upload(At,M.uniformsList,B,ut)),r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(ba.upload(At,M.uniformsList,B,ut),r.uniformsNeedUpdate=!1),r.isSpriteMaterial&&j.setValue(At,"center",object.center),j.setValue(At,"modelViewMatrix",object.modelViewMatrix),j.setValue(At,"normalMatrix",object.normalMatrix),j.setValue(At,"modelMatrix",object.matrixWorld),O}function te(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function ee(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}Ht.setAnimationLoop(Ut),"undefined"!=typeof window&&Ht.setContext(window),this.setAnimationLoop=function(t){Bt=t,Lt.setAnimationLoop(t),null===t?Ht.stop():Ht.start()},Lt.addEventListener("sessionstart",zt),Lt.addEventListener("sessionend",Vt),this.render=function(t,e){if(void 0===e||!0===e.isCamera){if(!0!==E){!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===Lt.enabled&&!0===Lt.isPresenting&&(!0===Lt.cameraAutoUpdate&&Lt.updateCamera(e),e=Lt.getCamera()),!0===t.isScene&&t.onBeforeRender(w,t,e,A),(y=yt.get(t,x.length)).init(),x.push(y),K.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),X.setFromProjectionMatrix(K),Q=this.localClippingEnabled,Y=_t.init(this.clippingPlanes,Q,e),(v=gt.get(t,_.length)).init(),_.push(v),Gt(t,e,0,w.sortObjects),v.finish(),!0===w.sortObjects&&v.sort(I,N),!0===Y&&_t.beginShadows();var n=y.state.shadowsArray;if(bt.render(n,t,e),!0===Y&&_t.endShadows(),!0===this.info.autoReset&&this.info.reset(),xt.render(v,t),y.setupLights(w.physicallyCorrectLights),e.isArrayCamera)for(var r=e.cameras,o=0,l=r.length;o<l;o++){var c=r[o];Wt(v,t,c,c.viewport)}else Wt(v,t,e);null!==A&&(ut.updateMultisampleRenderTarget(A),ut.updateRenderTargetMipmap(A)),!0===t.isScene&&t.onAfterRender(w,t,e),Tt.resetDefaultState(),D=-1,P=null,x.pop(),y=x.length>0?x[x.length-1]:null,_.pop(),v=_.length>0?_[_.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return M},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return A},this.setRenderTargetTextures=function(t,e,n){st.get(t.texture).__webglTexture=e,st.get(t.depthTexture).__webglTexture=n;var r=st.get(t);r.__hasExternalTextures=!0,r.__hasExternalTextures&&(r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===nt.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(t,e){var n=st.get(t);n.__webglFramebuffer=e,n.__useDefaultFramebuffer=void 0===e},this.setRenderTarget=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;A=t,M=e,T=n;var r=!0;if(t){var o=st.get(t);void 0!==o.__useDefaultFramebuffer?(at.bindFramebuffer(36160,null),r=!1):void 0===o.__webglFramebuffer?ut.setupRenderTarget(t):o.__hasExternalTextures&&ut.rebindTextures(t,st.get(t.texture).__webglTexture,st.get(t.depthTexture).__webglTexture)}var l=null,c=!1,h=!1;if(t){var d=t.texture;(d.isData3DTexture||d.isDataArrayTexture)&&(h=!0);var f=st.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(l=f[e],c=!0):l=it.isWebGL2&&t.samples>0&&!1===ut.useMultisampledRTT(t)?st.get(t).__webglMultisampledFramebuffer:f,C.copy(t.viewport),k.copy(t.scissor),O=t.scissorTest}else C.copy(U).multiplyScalar(R).floor(),k.copy(z).multiplyScalar(R).floor(),O=G;var m=at.bindFramebuffer(36160,l);if(m&&it.drawBuffers&&r&&at.drawBuffers(t,l),at.viewport(C),at.scissor(k),at.setScissorTest(O),c){var v=st.get(t.texture);At.framebufferTexture2D(36160,36064,34069+e,v.__webglTexture,n)}else if(h){var y=st.get(t.texture),_=e||0;At.framebufferTextureLayer(36160,36064,y.__webglTexture,n||0,_)}D=-1},this.readRenderTargetPixels=function(t,e,n,r,o,l,c){if(t&&t.isWebGLRenderTarget){var h=st.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==c&&(h=h[c]),h){at.bindFramebuffer(36160,h);try{var d=t.texture,f=d.format,m=d.type;if(f!==W&&Mt.convert(f)!==At.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var v=m===H&&(nt.has("EXT_color_buffer_half_float")||it.isWebGL2&&nt.has("EXT_color_buffer_float"));if(!(m===B||Mt.convert(m)===At.getParameter(35738)||m===V&&(it.isWebGL2||nt.has("OES_texture_float")||nt.has("WEBGL_color_buffer_float"))||v))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===At.checkFramebufferStatus(36160)?e>=0&&e<=t.width-r&&n>=0&&n<=t.height-o&&At.readPixels(e,n,r,o,Mt.convert(f),Mt.convert(m),l):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{var y=null!==A?st.get(A).__webglFramebuffer:null;at.bindFramebuffer(36160,y)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0===e.isFramebufferTexture){var r=Math.pow(2,-n),o=Math.floor(e.image.width*r),l=Math.floor(e.image.height*r);ut.setTexture2D(e,0),At.copyTexSubImage2D(3553,n,0,0,t.x,t.y,o,l),at.unbindTexture()}else console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.")},this.copyTextureToTexture=function(t,e,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=e.image.width,l=e.image.height,c=Mt.convert(n.format),h=Mt.convert(n.type);ut.setTexture2D(n,0),At.pixelStorei(37440,n.flipY),At.pixelStorei(37441,n.premultiplyAlpha),At.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?At.texSubImage2D(3553,r,t.x,t.y,o,l,c,h,e.image.data):e.isCompressedTexture?At.compressedTexSubImage2D(3553,r,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,c,e.mipmaps[0].data):At.texSubImage2D(3553,r,t.x,t.y,c,h,e.image),0===r&&n.generateMipmaps&&At.generateMipmap(3553),at.unbindTexture()},this.copyTextureToTexture3D=function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(w.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var l,c=t.max.x-t.min.x+1,h=t.max.y-t.min.y+1,d=t.max.z-t.min.z+1,f=Mt.convert(r.format),m=Mt.convert(r.type);if(r.isData3DTexture)ut.setTexture3D(r,0),l=32879;else{if(!r.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ut.setTexture2DArray(r,0),l=35866}At.pixelStorei(37440,r.flipY),At.pixelStorei(37441,r.premultiplyAlpha),At.pixelStorei(3317,r.unpackAlignment);var v=At.getParameter(3314),y=At.getParameter(32878),_=At.getParameter(3316),x=At.getParameter(3315),S=At.getParameter(32877),image=n.isCompressedTexture?n.mipmaps[0]:n.image;At.pixelStorei(3314,image.width),At.pixelStorei(32878,image.height),At.pixelStorei(3316,t.min.x),At.pixelStorei(3315,t.min.y),At.pixelStorei(32877,t.min.z),n.isDataTexture||n.isData3DTexture?At.texSubImage3D(l,o,e.x,e.y,e.z,c,h,d,f,m,image.data):n.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),At.compressedTexSubImage3D(l,o,e.x,e.y,e.z,c,h,d,f,image.data)):At.texSubImage3D(l,o,e.x,e.y,e.z,c,h,d,f,m,image),At.pixelStorei(3314,v),At.pixelStorei(32878,y),At.pixelStorei(3316,_),At.pixelStorei(3315,x),At.pixelStorei(32877,S),0===o&&r.generateMipmaps&&At.generateMipmap(l),at.unbindTexture()}},this.initTexture=function(t){ut.setTexture2D(t,0),at.unbindTexture()},this.resetState=function(){M=0,T=0,A=null,at.reset(),Tt.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}mo.prototype.isWebGLRenderer=!0;var vo=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(mo);vo.prototype.isWebGL1Renderer=!0;var go=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;Object(v.a)(this,t),this.name="",this.color=new ie(e),this.density=n}return Object(y.a)(t,[{key:"clone",value:function(){return new t(this.color,this.density)}},{key:"toJSON",value:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),t}();go.prototype.isFogExp2=!0;var yo=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;Object(v.a)(this,t),this.name="",this.color=new ie(e),this.near=n,this.far=r}return Object(y.a)(t,[{key:"clone",value:function(){return new t(this.color,this.near,this.far)}},{key:"toJSON",value:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),t}();yo.prototype.isFog=!0;var _o=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="Scene",t.background=null,t.environment=null,t.fog=null,t.overrideMaterial=null,t.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:Object(h.a)(t)})),t}return Object(y.a)(n,[{key:"copy",value:function(source,t){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source,t),null!==source.background&&(this.background=source.background.clone()),null!==source.environment&&(this.environment=source.environment.clone()),null!==source.fog&&(this.fog=source.fog.clone()),null!==source.overrideMaterial&&(this.overrideMaterial=source.overrideMaterial.clone()),this.autoUpdate=source.autoUpdate,this.matrixAutoUpdate=source.matrixAutoUpdate,this}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return null!==this.fog&&(data.object.fog=this.fog.toJSON()),data}}]),n}(_n);_o.prototype.isScene=!0;var bo=function(){function t(e,n){Object(v.a)(this,t),this.array=e,this.stride=n,this.count=void 0!==e?e.length/n:0,this.usage=Lt,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=zt()}return Object(y.a)(t,[{key:"onUploadCallback",value:function(){}},{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setUsage",value:function(t){return this.usage=t,this}},{key:"copy",value:function(source){return this.array=new source.array.constructor(source.array),this.count=source.count,this.stride=source.stride,this.usage=source.usage,this}},{key:"copyAt",value:function(t,e,n){t*=this.stride,n*=e.stride;for(var r=0,o=this.stride;r<o;r++)this.array[t+r]=e.array[n+r];return this}},{key:"set",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(t,e),this}},{key:"clone",value:function(data){void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zt()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var t=new this.array.constructor(data.arrayBuffers[this.array.buffer._uuid]),e=new this.constructor(t,this.stride);return e.setUsage(this.usage),e}},{key:"onUpload",value:function(t){return this.onUploadCallback=t,this}},{key:"toJSON",value:function(data){return void 0===data.arrayBuffers&&(data.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zt()),void 0===data.arrayBuffers[this.array.buffer._uuid]&&(data.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),t}();bo.prototype.isInterleavedBuffer=!0;var xo=new ve,wo=function(){function t(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Object(v.a)(this,t),this.name="",this.data=e,this.itemSize=n,this.offset=r,this.normalized=!0===o}return Object(y.a)(t,[{key:"count",get:function(){return this.data.count}},{key:"array",get:function(){return this.data.array}},{key:"needsUpdate",set:function(t){this.data.needsUpdate=t}},{key:"applyMatrix4",value:function(t){for(var e=0,n=this.data.count;e<n;e++)xo.x=this.getX(e),xo.y=this.getY(e),xo.z=this.getZ(e),xo.applyMatrix4(t),this.setXYZ(e,xo.x,xo.y,xo.z);return this}},{key:"applyNormalMatrix",value:function(t){for(var e=0,n=this.count;e<n;e++)xo.x=this.getX(e),xo.y=this.getY(e),xo.z=this.getZ(e),xo.applyNormalMatrix(t),this.setXYZ(e,xo.x,xo.y,xo.z);return this}},{key:"transformDirection",value:function(t){for(var e=0,n=this.count;e<n;e++)xo.x=this.getX(e),xo.y=this.getY(e),xo.z=this.getZ(e),xo.transformDirection(t),this.setXYZ(e,xo.x,xo.y,xo.z);return this}},{key:"setX",value:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this}},{key:"setY",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this}},{key:"setZ",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this}},{key:"setW",value:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this}},{key:"getX",value:function(t){return this.data.array[t*this.data.stride+this.offset]}},{key:"getY",value:function(t){return this.data.array[t*this.data.stride+this.offset+1]}},{key:"getZ",value:function(t){return this.data.array[t*this.data.stride+this.offset+2]}},{key:"getW",value:function(t){return this.data.array[t*this.data.stride+this.offset+3]}},{key:"setXY",value:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this}},{key:"setXYZ",value:function(t,e,n,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this}},{key:"setXYZW",value:function(t,e,n,r,o){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=r,this.data.array[t+3]=o,this}},{key:"clone",value:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var e=[],n=0;n<this.count;n++)for(var r=n*this.data.stride+this.offset,o=0;o<this.itemSize;o++)e.push(this.data.array[r+o]);return new In(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.clone(data)),new t(data.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function(data){if(void 0===data){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var t=[],e=0;e<this.count;e++)for(var n=e*this.data.stride+this.offset,r=0;r<this.itemSize;r++)t.push(this.data.array[n+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===data.interleavedBuffers&&(data.interleavedBuffers={}),void 0===data.interleavedBuffers[this.data.uuid]&&(data.interleavedBuffers[this.data.uuid]=this.data.toJSON(data)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),t}();wo.prototype.isInterleavedBufferAttribute=!0;var So,Eo=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="SpriteMaterial",r.color=new ie(16777215),r.map=null,r.alphaMap=null,r.rotation=0,r.sizeAttenuation=!0,r.transparent=!0,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.rotation=source.rotation,this.sizeAttenuation=source.sizeAttenuation,this}}]),n}(On);Eo.prototype.isSpriteMaterial=!0;var Mo=new ve,To=new ve,Ao=new ve,Do=new Yt,Po=new Yt,Co=new Ye,ko=new ve,Oo=new ve,Lo=new ve,Fo=new Yt,Ro=new Yt,Io=new Yt,No=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;if(Object(v.a)(this,n),(r=e.call(this)).type="Sprite",void 0===So){So=new Yn;var o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),l=new bo(o,5);So.setIndex([0,1,2,0,2,3]),So.setAttribute("position",new wo(l,3,0,!1)),So.setAttribute("uv",new wo(l,2,3,!1))}return r.geometry=So,r.material=void 0!==t?t:new Eo,r.center=new Yt(.5,.5),r}return Object(y.a)(n,[{key:"raycast",value:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),To.setFromMatrixScale(this.matrixWorld),Co.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ao.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&To.multiplyScalar(-Ao.z);var n,r,o=this.material.rotation;0!==o&&(r=Math.cos(o),n=Math.sin(o));var l=this.center;jo(ko.set(-.5,-.5,0),Ao,l,To,n,r),jo(Oo.set(.5,-.5,0),Ao,l,To,n,r),jo(Lo.set(.5,.5,0),Ao,l,To,n,r),Fo.set(0,0),Ro.set(1,0),Io.set(1,1);var c=t.ray.intersectTriangle(ko,Oo,Lo,!1,Mo);if(null!==c||(jo(Oo.set(-.5,.5,0),Ao,l,To,n,r),Ro.set(0,1),null!==(c=t.ray.intersectTriangle(ko,Lo,Oo,!1,Mo)))){var h=t.ray.origin.distanceTo(Mo);h<t.near||h>t.far||e.push({distance:h,point:Mo.clone(),uv:Cn.getUV(Mo,ko,Oo,Lo,Fo,Ro,Io,new Yt),face:null,object:this})}}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),void 0!==source.center&&this.center.copy(source.center),this.material=source.material,this}}]),n}(_n);function jo(t,e,n,r,o,l){Do.subVectors(t,n).addScalar(.5).multiply(r),void 0!==o?(Po.x=l*Do.x-o*Do.y,Po.y=o*Do.x+l*Do.y):Po.copy(Do),t.copy(e),t.x+=Po.x,t.y+=Po.y,t.applyMatrix4(Co)}No.prototype.isSprite=!0;var Bo=new ve,Uo=new ce,zo=new ce,Vo=new ve,Ho=new Ye,Go=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="SkinnedMesh",o.bindMode="attached",o.bindMatrix=new Ye,o.bindMatrixInverse=new Ye,o}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.bindMode=source.bindMode,this.bindMatrix.copy(source.bindMatrix),this.bindMatrixInverse.copy(source.bindMatrixInverse),this.skeleton=source.skeleton,this}},{key:"bind",value:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()}},{key:"pose",value:function(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function(){for(var t=new ce,e=this.geometry.attributes.skinWeight,n=0,r=e.count;n<r;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var o=1/t.manhattanLength();o!==1/0?t.multiplyScalar(o):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}}},{key:"updateMatrixWorld",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"updateMatrixWorld",this).call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function(t,e){var n=this.skeleton,r=this.geometry;Uo.fromBufferAttribute(r.attributes.skinIndex,t),zo.fromBufferAttribute(r.attributes.skinWeight,t),Bo.copy(e).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(var o=0;o<4;o++){var l=zo.getComponent(o);if(0!==l){var c=Uo.getComponent(o);Ho.multiplyMatrices(n.bones[c].matrixWorld,n.boneInverses[c]),e.addScaledVector(Vo.copy(Bo).applyMatrix4(Ho),l)}}return e.applyMatrix4(this.bindMatrixInverse)}}]),n}(pr);Go.prototype.isSkinnedMesh=!0;var Wo=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="Bone",t}return n}(_n);Wo.prototype.isBone=!0;var Xo=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,data=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,h=arguments.length>5?arguments[5]:void 0,d=arguments.length>6?arguments[6]:void 0,f=arguments.length>7?arguments[7]:void 0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:F,y=arguments.length>9&&void 0!==arguments[9]?arguments[9]:F,_=arguments.length>10?arguments[10]:void 0,x=arguments.length>11?arguments[11]:void 0;return Object(v.a)(this,n),(t=e.call(this,null,h,d,f,m,y,l,c,_,x)).image={data:data,width:r,height:o},t.generateMipmaps=!1,t.flipY=!1,t.unpackAlignment=1,t}return n}(le);Xo.prototype.isDataTexture=!0;var Yo=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(v.a)(this,n),"number"==typeof o&&(c=o,o=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(l=e.call(this,t,r,o)).meshPerAttribute=c,l}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.meshPerAttribute=source.meshPerAttribute,this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.meshPerAttribute=this.meshPerAttribute,data.isInstancedBufferAttribute=!0,data}}]),n}(In);Yo.prototype.isInstancedBufferAttribute=!0;var qo=new Ye,Qo=new Ye,$o=[],Ko=new pr,Jo=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;return Object(v.a)(this,n),(l=e.call(this,t,r)).instanceMatrix=new Yo(new Float32Array(16*o),16),l.instanceColor=null,l.count=o,l.frustumCulled=!1,l}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.instanceMatrix.copy(source.instanceMatrix),null!==source.instanceColor&&(this.instanceColor=source.instanceColor.clone()),this.count=source.count,this}},{key:"getColorAt",value:function(t,e){e.fromArray(this.instanceColor.array,3*t)}},{key:"getMatrixAt",value:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)}},{key:"raycast",value:function(t,e){var n=this.matrixWorld,r=this.count;if(Ko.geometry=this.geometry,Ko.material=this.material,void 0!==Ko.material)for(var o=0;o<r;o++){this.getMatrixAt(o,qo),Qo.multiplyMatrices(n,qo),Ko.matrixWorld=Qo,Ko.raycast(t,$o);for(var l=0,c=$o.length;l<c;l++){var h=$o[l];h.instanceId=o,h.object=this,e.push(h)}$o.length=0}}},{key:"setColorAt",value:function(t,e){null===this.instanceColor&&(this.instanceColor=new Yo(new Float32Array(3*this.instanceMatrix.count),3)),e.toArray(this.instanceColor.array,3*t)}},{key:"setMatrixAt",value:function(t,e){e.toArray(this.instanceMatrix.array,16*t)}},{key:"updateMorphTargets",value:function(){}},{key:"dispose",value:function(){this.dispatchEvent({type:"dispose"})}}]),n}(pr);Jo.prototype.isInstancedMesh=!0;var Zo=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="LineBasicMaterial",r.color=new ie(16777215),r.linewidth=1,r.linecap="round",r.linejoin="round",r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.linewidth=source.linewidth,this.linecap=source.linecap,this.linejoin=source.linejoin,this}}]),n}(On);Zo.prototype.isLineBasicMaterial=!0;var ts=new ve,es=new ve,ns=new Ye,rs=new Xe,is=new je,as=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yn,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Zo;return Object(v.a)(this,n),(t=e.call(this)).type="Line",t.geometry=r,t.material=o,t.updateMorphTargets(),t}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.material=source.material,this.geometry=source.geometry,this}},{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[0],r=1,o=e.count;r<o;r++)ts.fromBufferAttribute(e,r-1),es.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=ts.distanceTo(es);t.setAttribute("lineDistance",new Bn(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),is.copy(n.boundingSphere),is.applyMatrix4(r),is.radius+=o,!1!==t.ray.intersectsSphere(is)){ns.copy(r).invert(),rs.copy(t.ray).applyMatrix4(ns);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c,d=new ve,f=new ve,m=new ve,v=new ve,y=this.isLineSegments?2:1;if(n.isBufferGeometry){var _=n.index,x=n.attributes.position;if(null!==_)for(var w=Math.max(0,l.start),S=Math.min(_.count,l.start+l.count)-1;w<S;w+=y){var a=_.getX(w),b=_.getX(w+1);if(d.fromBufferAttribute(x,a),f.fromBufferAttribute(x,b),!(rs.distanceSqToSegment(d,f,v,m)>h)){v.applyMatrix4(this.matrixWorld);var E=t.ray.origin.distanceTo(v);E<t.near||E>t.far||e.push({distance:E,point:m.clone().applyMatrix4(this.matrixWorld),index:w,face:null,faceIndex:null,object:this})}}else for(var M=Math.max(0,l.start),T=Math.min(x.count,l.start+l.count)-1;M<T;M+=y){if(d.fromBufferAttribute(x,M),f.fromBufferAttribute(x,M+1),!(rs.distanceSqToSegment(d,f,v,m)>h)){v.applyMatrix4(this.matrixWorld);var A=t.ray.origin.distanceTo(v);A<t.near||A>t.far||e.push({distance:A,point:m.clone().applyMatrix4(this.matrixWorld),index:M,face:null,faceIndex:null,object:this})}}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,l=r.length;o<l;o++){var c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}else{var h=t.morphTargets;void 0!==h&&h.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(_n);as.prototype.isLine=!0;var os=new ve,ss=new ve,us=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="LineSegments",o}return Object(y.a)(n,[{key:"computeLineDistances",value:function(){var t=this.geometry;if(t.isBufferGeometry)if(null===t.index){for(var e=t.attributes.position,n=[],r=0,o=e.count;r<o;r+=2)os.fromBufferAttribute(e,r),ss.fromBufferAttribute(e,r+1),n[r]=0===r?0:n[r-1],n[r+1]=n[r]+os.distanceTo(ss);t.setAttribute("lineDistance",new Bn(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),n}(as);us.prototype.isLineSegments=!0;var ls=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="LineLoop",o}return n}(as);ls.prototype.isLineLoop=!0;var cs=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="PointsMaterial",r.color=new ie(16777215),r.map=null,r.alphaMap=null,r.size=1,r.sizeAttenuation=!0,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.map=source.map,this.alphaMap=source.alphaMap,this.size=source.size,this.sizeAttenuation=source.sizeAttenuation,this}}]),n}(On);cs.prototype.isPointsMaterial=!0;var hs=new Ye,ds=new Xe,ps=new je,fs=new ve,ms=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yn,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new cs;return Object(v.a)(this,n),(t=e.call(this)).type="Points",t.geometry=r,t.material=o,t.updateMorphTargets(),t}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.material=source.material,this.geometry=source.geometry,this}},{key:"raycast",value:function(t,e){var n=this.geometry,r=this.matrixWorld,o=t.params.Points.threshold,l=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ps.copy(n.boundingSphere),ps.applyMatrix4(r),ps.radius+=o,!1!==t.ray.intersectsSphere(ps)){hs.copy(r).invert(),ds.copy(t.ray).applyMatrix4(hs);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),h=c*c;if(n.isBufferGeometry){var d=n.index,f=n.attributes.position;if(null!==d)for(var m=Math.max(0,l.start),v=Math.min(d.count,l.start+l.count);m<v;m++){var a=d.getX(m);fs.fromBufferAttribute(f,a),vs(fs,a,h,r,t,e,this)}else for(var y=Math.max(0,l.start),_=Math.min(f.count,l.start+l.count);y<_;y++)fs.fromBufferAttribute(f,y),vs(fs,y,h,r,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var r=e[n[0]];if(void 0!==r){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var o=0,l=r.length;o<l;o++){var c=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[c]=o}}}}else{var h=t.morphTargets;void 0!==h&&h.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),n}(_n);function vs(t,e,n,r,o,l,object){var c=ds.distanceSqToPoint(t);if(c<n){var h=new ve;ds.closestPointToPoint(t,h),h.applyMatrix4(r);var d=o.ray.origin.distanceTo(h);if(d<o.near||d>o.far)return;l.push({distance:d,distanceToRay:Math.sqrt(c),point:h,index:e,face:null,object:object})}}ms.prototype.isPoints=!0,function(t){Object(d.a)(n,t);var e=w(n);function n(video,t,r,o,l,c,d,f,m){var y;Object(v.a)(this,n),(y=e.call(this,video,t,r,o,l,c,d,f,m)).minFilter=void 0!==c?c:N,y.magFilter=void 0!==l?l:N,y.generateMipmaps=!1;var _=Object(h.a)(y);return"requestVideoFrameCallback"in video&&video.requestVideoFrameCallback((function t(){_.needsUpdate=!0,video.requestVideoFrameCallback(t)})),y}return Object(y.a)(n,[{key:"clone",value:function(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function(){var video=this.image;!1==="requestVideoFrameCallback"in video&&video.readyState>=video.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),n}(le).prototype.isVideoTexture=!0,function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;return Object(v.a)(this,n),(l=e.call(this,{width:t,height:r})).format=o,l.magFilter=F,l.minFilter=F,l.generateMipmaps=!1,l.needsUpdate=!0,l}return n}(le).prototype.isFramebufferTexture=!0;var gs=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l,c,h,d,f,m,y,_,x){var w;return Object(v.a)(this,n),(w=e.call(this,null,h,d,f,m,y,l,c,_,x)).image={width:r,height:o},w.mipmaps=t,w.flipY=!1,w.generateMipmaps=!1,w}return n}(le);gs.prototype.isCompressedTexture=!0,function(t){Object(d.a)(n,t);var e=w(n);function n(canvas,t,r,o,l,c,h,d,f){var m;return Object(v.a)(this,n),(m=e.call(this,canvas,t,r,o,l,c,h,d,f)).needsUpdate=!0,m}return n}(le).prototype.isCanvasTexture=!0;new ve,new ve,new ve,new Cn;var ys=function(){function t(){Object(v.a)(this,t),this.type="Curve",this.arcLengthDivisions=200}return Object(y.a)(t,[{key:"getPoint",value:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function(u,t){var e=this.getUtoTmapping(u);return this.getPoint(e,t)}},{key:"getPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e}},{key:"getLength",value:function(){var t=this.getLengths();return t[t.length-1]}},{key:"getLengths",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],r=this.getPoint(0),o=0;n.push(0);for(var p=1;p<=t;p++)o+=(e=this.getPoint(p/t)).distanceTo(r),n.push(o),r=e;return this.cacheArcLengths=n,n}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function(u,t){var e,n=this.getLengths(),i=0,r=n.length;e=t||u*n[r-1];for(var o,l=0,c=r-1;l<=c;)if((o=n[i=Math.floor(l+(c-l)/2)]-e)<0)l=i+1;else{if(!(o>0)){c=i;break}c=i-1}if(n[i=c]===e)return i/(r-1);var h=n[i];return(i+(e-h)/(n[i+1]-h))/(r-1)}},{key:"getTangent",value:function(t,e){var n=1e-4,r=t-n,o=t+n;r<0&&(r=0),o>1&&(o=1);var l=this.getPoint(r),c=this.getPoint(o),h=e||(l.isVector2?new Yt:new ve);return h.copy(c).sub(l).normalize(),h}},{key:"getTangentAt",value:function(u,t){var e=this.getUtoTmapping(u);return this.getTangent(e,t)}},{key:"computeFrenetFrames",value:function(t,e){for(var n=new ve,r=[],o=[],l=[],c=new ve,h=new Ye,d=0;d<=t;d++){var u=d/t;r[d]=this.getTangentAt(u,new ve)}o[0]=new ve,l[0]=new ve;var f=Number.MAX_VALUE,m=Math.abs(r[0].x),v=Math.abs(r[0].y),y=Math.abs(r[0].z);m<=f&&(f=m,n.set(1,0,0)),v<=f&&(f=v,n.set(0,1,0)),y<=f&&n.set(0,0,1),c.crossVectors(r[0],n).normalize(),o[0].crossVectors(r[0],c),l[0].crossVectors(r[0],o[0]);for(var _=1;_<=t;_++){if(o[_]=o[_-1].clone(),l[_]=l[_-1].clone(),c.crossVectors(r[_-1],r[_]),c.length()>Number.EPSILON){c.normalize();var x=Math.acos(Vt(r[_-1].dot(r[_]),-1,1));o[_].applyMatrix4(h.makeRotationAxis(c,x))}l[_].crossVectors(r[_],o[_])}if(!0===e){var w=Math.acos(Vt(o[0].dot(o[t]),-1,1));w/=t,r[0].dot(c.crossVectors(o[0],o[t]))>0&&(w=-w);for(var S=1;S<=t;S++)o[S].applyMatrix4(h.makeRotationAxis(r[S],w*S)),l[S].crossVectors(r[S],o[S])}return{tangents:r,normals:o,binormals:l}}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(source){return this.arcLengthDivisions=source.arcLengthDivisions,this}},{key:"toJSON",value:function(){var data={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return data.arcLengthDivisions=this.arcLengthDivisions,data.type=this.type,data}},{key:"fromJSON",value:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}]),t}(),_s=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,f=arguments.length>6&&void 0!==arguments[6]&&arguments[6],m=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return Object(v.a)(this,n),(t=e.call(this)).type="EllipseCurve",t.aX=r,t.aY=o,t.xRadius=l,t.yRadius=c,t.aStartAngle=h,t.aEndAngle=d,t.aClockwise=f,t.aRotation=m,t}return Object(y.a)(n,[{key:"getPoint",value:function(t,e){for(var n=e||new Yt,r=2*Math.PI,o=this.aEndAngle-this.aStartAngle,l=Math.abs(o)<Number.EPSILON;o<0;)o+=r;for(;o>r;)o-=r;o<Number.EPSILON&&(o=l?0:r),!0!==this.aClockwise||l||(o===r?o=-r:o-=r);var c=this.aStartAngle+t*o,h=this.aX+this.xRadius*Math.cos(c),d=this.aY+this.yRadius*Math.sin(c);if(0!==this.aRotation){var f=Math.cos(this.aRotation),m=Math.sin(this.aRotation),v=h-this.aX,y=d-this.aY;h=v*f-y*m+this.aX,d=v*m+y*f+this.aY}return n.set(h,d)}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.aX=source.aX,this.aY=source.aY,this.xRadius=source.xRadius,this.yRadius=source.yRadius,this.aStartAngle=source.aStartAngle,this.aEndAngle=source.aEndAngle,this.aClockwise=source.aClockwise,this.aRotation=source.aRotation,this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.aX=this.aX,data.aY=this.aY,data.xRadius=this.xRadius,data.yRadius=this.yRadius,data.aStartAngle=this.aStartAngle,data.aEndAngle=this.aEndAngle,data.aClockwise=this.aClockwise,data.aRotation=this.aRotation,data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this}}]),n}(ys);_s.prototype.isEllipseCurve=!0;var bs=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l,c,h){var d;return Object(v.a)(this,n),(d=e.call(this,t,r,o,o,l,c,h)).type="ArcCurve",d}return n}(_s);function xs(){var t=0,e=0,n=0,r=0;function o(o,l,c,h){t=o,e=c,n=-3*o+3*l-2*c-h,r=2*o-2*l+c+h}return{initCatmullRom:function(t,e,n,r,l){o(e,n,l*(n-t),l*(r-e))},initNonuniformCatmullRom:function(t,e,n,r,l,c,h){var d=(e-t)/l-(n-t)/(l+c)+(n-e)/c,f=(n-e)/c-(r-e)/(c+h)+(r-n)/h;o(e,n,d*=c,f*=c)},calc:function(o){var l=o*o;return t+e*o+n*l+r*(l*o)}}}bs.prototype.isArcCurve=!0;var ws=new ve,Ss=new xs,Es=new xs,Ms=new xs,Ts=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return Object(v.a)(this,n),(t=e.call(this)).type="CatmullRomCurve3",t.points=r,t.closed=o,t.curveType=l,t.tension=c,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,o=r,l=this.points,c=l.length,p=(c-(this.closed?0:1))*t,h=Math.floor(p),d=p-h;this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/c)+1)*c:0===d&&h===c-1&&(h=c-2,d=1),this.closed||h>0?e=l[(h-1)%c]:(ws.subVectors(l[0],l[1]).add(l[0]),e=ws);var f=l[h%c],m=l[(h+1)%c];if(this.closed||h+2<c?n=l[(h+2)%c]:(ws.subVectors(l[c-1],l[c-2]).add(l[c-1]),n=ws),"centripetal"===this.curveType||"chordal"===this.curveType){var v="chordal"===this.curveType?.5:.25,y=Math.pow(e.distanceToSquared(f),v),_=Math.pow(f.distanceToSquared(m),v),x=Math.pow(m.distanceToSquared(n),v);_<1e-4&&(_=1),y<1e-4&&(y=_),x<1e-4&&(x=_),Ss.initNonuniformCatmullRom(e.x,f.x,m.x,n.x,y,_,x),Es.initNonuniformCatmullRom(e.y,f.y,m.y,n.y,y,_,x),Ms.initNonuniformCatmullRom(e.z,f.z,m.z,n.z,y,_,x)}else"catmullrom"===this.curveType&&(Ss.initCatmullRom(e.x,f.x,m.x,n.x,this.tension),Es.initCatmullRom(e.y,f.y,m.y,n.y,this.tension),Ms.initCatmullRom(e.z,f.z,m.z,n.z,this.tension));return o.set(Ss.calc(d),Es.calc(d),Ms.calc(d)),o}},{key:"copy",value:function(source){Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.points=[];for(var t=0,e=source.points.length;t<e;t++){var r=source.points[t];this.points.push(r.clone())}return this.closed=source.closed,this.curveType=source.curveType,this.tension=source.tension,this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);data.points=[];for(var t=0,e=this.points.length;t<e;t++){var r=this.points[t];data.points.push(r.toArray())}return data.closed=this.closed,data.curveType=this.curveType,data.tension=this.tension,data}},{key:"fromJSON",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var o=t.points[e];this.points.push((new ve).fromArray(o))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this}}]),n}(ys);function As(t,e,n,r,o){var l=.5*(r-e),c=.5*(o-n),h=t*t;return(2*n-2*r+l+c)*(t*h)+(-3*n+3*r-2*l-c)*h+l*t+n}function Ds(t,e,n,r){return function(t,p){var e=1-t;return e*e*p}(t,e)+function(t,p){return 2*(1-t)*t*p}(t,n)+function(t,p){return t*t*p}(t,r)}function Ps(t,e,n,r,o){return function(t,p){var e=1-t;return e*e*e*p}(t,e)+function(t,p){var e=1-t;return 3*e*e*t*p}(t,n)+function(t,p){return 3*(1-t)*t*t*p}(t,r)+function(t,p){return t*t*t*p}(t,o)}Ts.prototype.isCatmullRomCurve3=!0;var Cs=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yt,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Yt;return Object(v.a)(this,n),(t=e.call(this)).type="CubicBezierCurve",t.v0=r,t.v1=o,t.v2=l,t.v3=c,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,n=e,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(Ps(t,r.x,o.x,l.x,c.x),Ps(t,r.y,o.y,l.y,c.y)),n}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(ys);Cs.prototype.isCubicBezierCurve=!0;var ks=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ve,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new ve;return Object(v.a)(this,n),(t=e.call(this)).type="CubicBezierCurve3",t.v0=r,t.v1=o,t.v2=l,t.v3=c,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,n=e,r=this.v0,o=this.v1,l=this.v2,c=this.v3;return n.set(Ps(t,r.x,o.x,l.x,c.x),Ps(t,r.y,o.y,l.y,c.y),Ps(t,r.z,o.z,l.z,c.z)),n}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this.v3.copy(source.v3),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data.v3=this.v3.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this}}]),n}(ys);ks.prototype.isCubicBezierCurve3=!0;var Os=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt;return Object(v.a)(this,n),(t=e.call(this)).type="LineCurve",t.v1=r,t.v2=o,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(u,t){return this.getPoint(u,t)}},{key:"getTangent",value:function(t,e){var n=e||new Yt;return n.copy(this.v2).sub(this.v1).normalize(),n}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(ys);Os.prototype.isLineCurve=!0;var Ls=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve;return Object(v.a)(this,n),(t=e.call(this)).type="LineCurve3",t.isLineCurve3=!0,t.v1=r,t.v2=o,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n}},{key:"getPointAt",value:function(u,t){return this.getPoint(u,t)}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(ys),Fs=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Yt;return Object(v.a)(this,n),(t=e.call(this)).type="QuadraticBezierCurve",t.v0=r,t.v1=o,t.v2=l,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,n=e,r=this.v0,o=this.v1,l=this.v2;return n.set(Ds(t,r.x,o.x,l.x),Ds(t,r.y,o.y,l.y)),n}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(ys);Fs.prototype.isQuadraticBezierCurve=!0;var Rs=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new ve;return Object(v.a)(this,n),(t=e.call(this)).type="QuadraticBezierCurve3",t.v0=r,t.v1=o,t.v2=l,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve,n=e,r=this.v0,o=this.v1,l=this.v2;return n.set(Ds(t,r.x,o.x,l.x),Ds(t,r.y,o.y,l.y),Ds(t,r.z,o.z,l.z)),n}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.v0.copy(source.v0),this.v1.copy(source.v1),this.v2.copy(source.v2),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.v0=this.v0.toArray(),data.v1=this.v1.toArray(),data.v2=this.v2.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this}}]),n}(ys);Rs.prototype.isQuadraticBezierCurve3=!0;var Is=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(v.a)(this,n),(t=e.call(this)).type="SplineCurve",t.points=r,t}return Object(y.a)(n,[{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt,n=e,r=this.points,p=(r.length-1)*t,o=Math.floor(p),l=p-o,c=r[0===o?o:o-1],h=r[o],d=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return n.set(As(l,c.x,h.x,d.x,f.x),As(l,c.y,h.y,d.y,f.y)),n}},{key:"copy",value:function(source){Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.points=[];for(var t=0,e=source.points.length;t<e;t++){var r=source.points[t];this.points.push(r.clone())}return this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);data.points=[];for(var t=0,e=this.points.length;t<e;t++){var r=this.points[t];data.points.push(r.toArray())}return data}},{key:"fromJSON",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.points=[];for(var e=0,r=t.points.length;e<r;e++){var o=t.points[e];this.points.push((new Yt).fromArray(o))}return this}}]),n}(ys);Is.prototype.isSplineCurve=!0;var Ns=Object.freeze({__proto__:null,ArcCurve:bs,CatmullRomCurve3:Ts,CubicBezierCurve:Cs,CubicBezierCurve3:ks,EllipseCurve:_s,LineCurve:Os,LineCurve3:Ls,QuadraticBezierCurve:Fs,QuadraticBezierCurve3:Rs,SplineCurve:Is}),js=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="CurvePath",t.curves=[],t.autoClose=!1,t}return Object(y.a)(n,[{key:"add",value:function(t){this.curves.push(t)}},{key:"closePath",value:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Os(e,t))}},{key:"getPoint",value:function(t,e){for(var n=t*this.getLength(),r=this.getCurveLengths(),i=0;i<r.length;){if(r[i]>=n){var o=r[i]-n,l=this.curves[i],c=l.getLength(),u=0===c?0:1-o/c;return l.getPointAt(u,e)}i++}return null}},{key:"getLength",value:function(){var t=this.getCurveLengths();return t[t.length-1]}},{key:"updateArcLengths",value:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,r=this.curves.length;n<r;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t}},{key:"getSpacedPoints",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e}},{key:"getPoints",value:function(){for(var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,n=[],r=0,o=this.curves;r<o.length;r++)for(var l=o[r],c=l.isEllipseCurve?2*e:l.isLineCurve||l.isLineCurve3?1:l.isSplineCurve?e*l.points.length:e,h=l.getPoints(c),d=0;d<h.length;d++){var f=h[d];t&&t.equals(f)||(n.push(f),t=f)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n}},{key:"copy",value:function(source){Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.curves=[];for(var t=0,e=source.curves.length;t<e;t++){var r=source.curves[t];this.curves.push(r.clone())}return this.autoClose=source.autoClose,this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);data.autoClose=this.autoClose,data.curves=[];for(var t=0,e=this.curves.length;t<e;t++){var r=this.curves[t];data.curves.push(r.toJSON())}return data}},{key:"fromJSON",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,r=t.curves.length;e<r;e++){var o=t.curves[e];this.curves.push((new Ns[o.type]).fromJSON(o))}return this}}]),n}(ys),Bs=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="Path",r.currentPoint=new Yt,t&&r.setFromPoints(t),r}return Object(y.a)(n,[{key:"setFromPoints",value:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this}},{key:"moveTo",value:function(t,e){return this.currentPoint.set(t,e),this}},{key:"lineTo",value:function(t,e){var n=new Os(this.currentPoint.clone(),new Yt(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this}},{key:"quadraticCurveTo",value:function(t,e,n,r){var o=new Fs(this.currentPoint.clone(),new Yt(t,e),new Yt(n,r));return this.curves.push(o),this.currentPoint.set(n,r),this}},{key:"bezierCurveTo",value:function(t,e,n,r,o,l){var c=new Cs(this.currentPoint.clone(),new Yt(t,e),new Yt(n,r),new Yt(o,l));return this.curves.push(c),this.currentPoint.set(o,l),this}},{key:"splineThru",value:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Is(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this}},{key:"arc",value:function(t,e,n,r,o,l){var c=this.currentPoint.x,h=this.currentPoint.y;return this.absarc(t+c,e+h,n,r,o,l),this}},{key:"absarc",value:function(t,e,n,r,o,l){return this.absellipse(t,e,n,n,r,o,l),this}},{key:"ellipse",value:function(t,e,n,r,o,l,c,h){var d=this.currentPoint.x,f=this.currentPoint.y;return this.absellipse(t+d,e+f,n,r,o,l,c,h),this}},{key:"absellipse",value:function(t,e,n,r,o,l,c,h){var d=new _s(t,e,n,r,o,l,c,h);if(this.curves.length>0){var f=d.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(d);var m=d.getPoint(1);return this.currentPoint.copy(m),this}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.currentPoint.copy(source.currentPoint),this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return data.currentPoint=this.currentPoint.toArray(),data}},{key:"fromJSON",value:function(t){return Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}]),n}(js),Us=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).uuid=zt(),r.type="Shape",r.holes=[],r}return Object(y.a)(n,[{key:"getPointsHoles",value:function(t){for(var e=[],n=0,r=this.holes.length;n<r;n++)e[n]=this.holes[n].getPoints(t);return e}},{key:"extractPoints",value:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}}},{key:"copy",value:function(source){Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.holes=[];for(var t=0,e=source.holes.length;t<e;t++){var r=source.holes[t];this.holes.push(r.clone())}return this}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);data.uuid=this.uuid,data.holes=[];for(var t=0,e=this.holes.length;t<e;t++){var r=this.holes[t];data.holes.push(r.toJSON())}return data}},{key:"fromJSON",value:function(t){Object(c.a)(Object(m.a)(n.prototype),"fromJSON",this).call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,r=t.holes.length;e<r;e++){var o=t.holes[e];this.holes.push((new Bs).fromJSON(o))}return this}}]),n}(Bs),zs=function(data,t){var e,n,r,o,l,c,h,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,f=t&&t.length,m=f?t[0]*d:data.length,v=Vs(data,0,m,d,!0),y=[];if(!v||v.next===v.prev)return y;if(f&&(v=Qs(data,t,v,d)),data.length>80*d){e=r=data[0],n=o=data[1];for(var _=d;_<m;_+=d)(l=data[_])<e&&(e=l),(c=data[_+1])<n&&(n=c),l>r&&(r=l),c>o&&(o=c);h=0!==(h=Math.max(r-e,o-n))?1/h:0}return Gs(v,y,d,e,n,h),y};function Vs(data,t,e,n,r){var i,o;if(r===function(data,t,e,n){for(var r=0,o=t,l=e-n;o<e;o+=n)r+=(data[l]-data[o])*(data[o+1]+data[l+1]),l=o;return r}(data,t,e,n)>0)for(i=t;i<e;i+=n)o=lu(i,data[i],data[i+1],o);else for(i=e-n;i>=t;i-=n)o=lu(i,data[i],data[i+1],o);return o&&ru(o,o.next)&&(cu(o),o=o.next),o}function Hs(t,e){if(!t)return t;e||(e=t);var n,p=t;do{if(n=!1,p.steiner||!ru(p,p.next)&&0!==area(p.prev,p,p.next))p=p.next;else{if(cu(p),(p=e=p.prev)===p.next)break;n=!0}}while(n||p!==e);return e}function Gs(t,e,n,r,o,l,c){if(t){!c&&l&&function(t,e,n,r){var p=t;do{null===p.z&&(p.z=Zs(p.x,p.y,e,n,r)),p.prevZ=p.prev,p.nextZ=p.next,p=p.next}while(p!==t);p.prevZ.nextZ=null,p.prevZ=null,function(t){var i,p,q,e,n,r,o,l,c=1;do{for(p=t,t=null,n=null,r=0;p;){for(r++,q=p,o=0,i=0;i<c&&(o++,q=q.nextZ);i++);for(l=c;o>0||l>0&&q;)0!==o&&(0===l||!q||p.z<=q.z)?(e=p,p=p.nextZ,o--):(e=q,q=q.nextZ,l--),n?n.nextZ=e:t=e,e.prevZ=n,n=e;p=q}n.nextZ=null,c*=2}while(r>1)}(p)}(t,r,o,l);for(var h,d,f=t;t.prev!==t.next;)if(h=t.prev,d=t.next,l?Xs(t,r,o,l):Ws(t))e.push(h.i/n),e.push(t.i/n),e.push(d.i/n),cu(t),t=d.next,f=d.next;else if((t=d)===f){c?1===c?Gs(t=Ys(Hs(t),e,n),e,n,r,o,l,2):2===c&&qs(t,e,n,r,o,l):Gs(Hs(t),e,n,r,o,l,1);break}}}function Ws(t){var a=t.prev,b=t,e=t.next;if(area(a,b,e)>=0)return!1;for(var p=t.next.next;p!==t.prev;){if(eu(a.x,a.y,b.x,b.y,e.x,e.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Xs(t,e,n,r){var a=t.prev,b=t,o=t.next;if(area(a,b,o)>=0)return!1;for(var l=a.x<b.x?a.x<o.x?a.x:o.x:b.x<o.x?b.x:o.x,c=a.y<b.y?a.y<o.y?a.y:o.y:b.y<o.y?b.y:o.y,h=a.x>b.x?a.x>o.x?a.x:o.x:b.x>o.x?b.x:o.x,d=a.y>b.y?a.y>o.y?a.y:o.y:b.y>o.y?b.y:o.y,f=Zs(l,c,e,n,r),m=Zs(h,d,e,n,r),p=t.prevZ,v=t.nextZ;p&&p.z>=f&&v&&v.z<=m;){if(p!==t.prev&&p!==t.next&&eu(a.x,a.y,b.x,b.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&eu(a.x,a.y,b.x,b.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;p&&p.z>=f;){if(p!==t.prev&&p!==t.next&&eu(a.x,a.y,b.x,b.y,o.x,o.y,p.x,p.y)&&area(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;v&&v.z<=m;){if(v!==t.prev&&v!==t.next&&eu(a.x,a.y,b.x,b.y,o.x,o.y,v.x,v.y)&&area(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Ys(t,e,n){var p=t;do{var a=p.prev,b=p.next.next;!ru(a,b)&&iu(a,p,p.next,b)&&su(a,b)&&su(b,a)&&(e.push(a.i/n),e.push(p.i/n),e.push(b.i/n),cu(p),cu(p.next),p=t=b),p=p.next}while(p!==t);return Hs(p)}function qs(t,e,n,r,o,l){var a=t;do{for(var b=a.next.next;b!==a.prev;){if(a.i!==b.i&&nu(a,b)){var c=uu(a,b);return a=Hs(a,a.next),c=Hs(c,c.next),Gs(a,e,n,r,o,l),void Gs(c,e,n,r,o,l)}b=b.next}a=a.next}while(a!==t)}function Qs(data,t,e,n){var i,r,o,l=[];for(i=0,r=t.length;i<r;i++)(o=Vs(data,t[i]*n,i<r-1?t[i+1]*n:data.length,n,!1))===o.next&&(o.steiner=!0),l.push(tu(o));for(l.sort($s),i=0;i<l.length;i++)Ks(l[i],e),e=Hs(e,e.next);return e}function $s(a,b){return a.x-b.x}function Ks(t,e){if(e=function(t,e){var n,p=e,r=t.x,o=t.y,l=-1/0;do{if(o<=p.y&&o>=p.next.y&&p.next.y!==p.y){var c=p.x+(o-p.y)*(p.next.x-p.x)/(p.next.y-p.y);if(c<=r&&c>l){if(l=c,c===r){if(o===p.y)return p;if(o===p.next.y)return p.next}n=p.x<p.next.x?p:p.next}}p=p.next}while(p!==e);if(!n)return null;if(r===l)return n;var h,d=n,f=n.x,m=n.y,v=1/0;p=n;do{r>=p.x&&p.x>=f&&r!==p.x&&eu(o<m?r:l,o,f,m,o<m?l:r,o,p.x,p.y)&&(h=Math.abs(o-p.y)/(r-p.x),su(p,t)&&(h<v||h===v&&(p.x>n.x||p.x===n.x&&Js(n,p)))&&(n=p,v=h)),p=p.next}while(p!==d);return n}(t,e),e){var b=uu(e,t);Hs(e,e.next),Hs(b,b.next)}}function Js(t,p){return area(t.prev,t,p.prev)<0&&area(p.next,t,t.next)<0}function Zs(t,e,n,r,o){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*o)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*o)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function tu(t){var p=t,e=t;do{(p.x<e.x||p.x===e.x&&p.y<e.y)&&(e=p),p=p.next}while(p!==t);return e}function eu(t,e,n,r,o,l,c,h){return(o-c)*(e-h)-(t-c)*(l-h)>=0&&(t-c)*(r-h)-(n-c)*(e-h)>=0&&(n-c)*(l-h)-(o-c)*(r-h)>=0}function nu(a,b){return a.next.i!==b.i&&a.prev.i!==b.i&&!function(a,b){var p=a;do{if(p.i!==a.i&&p.next.i!==a.i&&p.i!==b.i&&p.next.i!==b.i&&iu(p,p.next,a,b))return!0;p=p.next}while(p!==a);return!1}(a,b)&&(su(a,b)&&su(b,a)&&function(a,b){var p=a,t=!1,e=(a.x+b.x)/2,n=(a.y+b.y)/2;do{p.y>n!=p.next.y>n&&p.next.y!==p.y&&e<(p.next.x-p.x)*(n-p.y)/(p.next.y-p.y)+p.x&&(t=!t),p=p.next}while(p!==a);return t}(a,b)&&(area(a.prev,a,b.prev)||area(a,b.prev,b))||ru(a,b)&&area(a.prev,a,a.next)>0&&area(b.prev,b,b.next)>0)}function area(p,q,t){return(q.y-p.y)*(t.x-q.x)-(q.x-p.x)*(t.y-q.y)}function ru(t,e){return t.x===e.x&&t.y===e.y}function iu(t,e,n,r){var o=ou(area(t,e,n)),l=ou(area(t,e,r)),c=ou(area(n,r,t)),h=ou(area(n,r,e));return o!==l&&c!==h||(!(0!==o||!au(t,n,e))||(!(0!==l||!au(t,r,e))||(!(0!==c||!au(n,t,r))||!(0!==h||!au(n,e,r)))))}function au(p,q,t){return q.x<=Math.max(p.x,t.x)&&q.x>=Math.min(p.x,t.x)&&q.y<=Math.max(p.y,t.y)&&q.y>=Math.min(p.y,t.y)}function ou(t){return t>0?1:t<0?-1:0}function su(a,b){return area(a.prev,a,a.next)<0?area(a,b,a.next)>=0&&area(a,a.prev,b)>=0:area(a,b,a.prev)<0||area(a,a.next,b)<0}function uu(a,b){var t=new hu(a.i,a.x,a.y),e=new hu(b.i,b.x,b.y),n=a.next,r=b.prev;return a.next=b,b.prev=a,t.next=n,n.prev=t,e.next=t,t.prev=e,r.next=e,e.prev=r,e}function lu(i,t,e,n){var p=new hu(i,t,e);return n?(p.next=n.next,p.prev=n,n.next.prev=p,n.next=p):(p.prev=p,p.next=p),p}function cu(p){p.next.prev=p.prev,p.prev.next=p.next,p.prevZ&&(p.prevZ.nextZ=p.nextZ),p.nextZ&&(p.nextZ.prevZ=p.prevZ)}function hu(i,t,e){this.i=i,this.x=t,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var du=function(){function t(){Object(v.a)(this,t)}return Object(y.a)(t,null,[{key:"area",value:function(t){for(var e=t.length,a=0,p=e-1,q=0;q<e;p=q++)a+=t[p].x*t[q].y-t[q].x*t[p].y;return.5*a}},{key:"isClockWise",value:function(e){return t.area(e)<0}},{key:"triangulateShape",value:function(t,e){var n=[],r=[],o=[];pu(t),fu(n,t);var l=t.length;e.forEach(pu);for(var c=0;c<e.length;c++)r.push(l),l+=e[c].length,fu(n,e[c]);for(var h=zs(n,r),d=0;d<h.length;d+=3)o.push(h.slice(d,d+3));return o}}]),t}();function pu(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function fu(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}var mu=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Us([new Yt(.5,.5),new Yt(-.5,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(v.a)(this,n),(t=e.call(this)).type="ExtrudeGeometry",t.parameters={shapes:r,options:o},r=Array.isArray(r)?r:[r];for(var l=Object(h.a)(t),c=[],d=[],f=0,m=r.length;f<m;f++){var y=r[f];_(y)}function _(t){var e=[],n=void 0!==o.curveSegments?o.curveSegments:12,r=void 0!==o.steps?o.steps:1,h=void 0!==o.depth?o.depth:1,f=void 0===o.bevelEnabled||o.bevelEnabled,m=void 0!==o.bevelThickness?o.bevelThickness:.2,v=void 0!==o.bevelSize?o.bevelSize:m-.1,y=void 0!==o.bevelOffset?o.bevelOffset:0,_=void 0!==o.bevelSegments?o.bevelSegments:3,x=o.extrudePath,w=void 0!==o.UVGenerator?o.UVGenerator:vu;void 0!==o.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),h=o.amount);var S,E,M,T,A,D=!1;x&&(S=x.getSpacedPoints(r),D=!0,f=!1,E=x.computeFrenetFrames(r,!1),M=new ve,T=new ve,A=new ve),f||(_=0,m=0,v=0,y=0);var P=t.extractPoints(n),C=P.shape,k=P.holes;if(!du.isClockWise(C)){C=C.reverse();for(var O=0,L=k.length;O<L;O++){var F=k[O];du.isClockWise(F)&&(k[O]=F.reverse())}}for(var R=du.triangulateShape(C,k),I=C,N=0,j=k.length;N<j;N++){var B=k[N];C=C.concat(B)}function U(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var z=C.length,V=R.length;function H(t,e,n){var r,o,l,c=t.x-e.x,h=t.y-e.y,d=n.x-t.x,f=n.y-t.y,m=c*c+h*h,v=c*f-h*d;if(Math.abs(v)>Number.EPSILON){var y=Math.sqrt(m),_=Math.sqrt(d*d+f*f),x=e.x-h/y,w=e.y+c/y,S=((n.x-f/_-x)*f-(n.y+d/_-w)*d)/(c*f-h*d),E=(r=x+c*S-t.x)*r+(o=w+h*S-t.y)*o;if(E<=2)return new Yt(r,o);l=Math.sqrt(E/2)}else{var M=!1;c>Number.EPSILON?d>Number.EPSILON&&(M=!0):c<-Number.EPSILON?d<-Number.EPSILON&&(M=!0):Math.sign(h)===Math.sign(f)&&(M=!0),M?(r=-h,o=c,l=Math.sqrt(m)):(r=c,o=h,l=Math.sqrt(m/2))}return new Yt(r/l,o/l)}for(var G=[],W=0,X=I.length,Y=X-1,Q=W+1;W<X;W++,Y++,Q++)Y===X&&(Y=0),Q===X&&(Q=0),G[W]=H(I[W],I[Y],I[Q]);for(var $,K=[],J=G.concat(),Z=0,tt=k.length;Z<tt;Z++){var et=k[Z];$=[];for(var nt=0,it=et.length,at=it-1,ot=nt+1;nt<it;nt++,at++,ot++)at===it&&(at=0),ot===it&&(ot=0),$[nt]=H(et[nt],et[at],et[ot]);K.push($),J=J.concat($)}for(var b=0;b<_;b++){for(var st=b/_,ut=m*Math.cos(st*Math.PI/2),lt=v*Math.sin(st*Math.PI/2)+y,ct=0,ht=I.length;ct<ht;ct++){var pt=U(I[ct],G[ct],lt);Bt(pt.x,pt.y,-ut)}for(var ft=0,mt=k.length;ft<mt;ft++){var vt=k[ft];$=K[ft];for(var gt=0,yt=vt.length;gt<yt;gt++){var _t=U(vt[gt],$[gt],lt);Bt(_t.x,_t.y,-ut)}}}for(var bt=v+y,xt=0;xt<z;xt++){var wt=f?U(C[xt],J[xt],bt):C[xt];D?(T.copy(E.normals[0]).multiplyScalar(wt.x),M.copy(E.binormals[0]).multiplyScalar(wt.y),A.copy(S[0]).add(T).add(M),Bt(A.x,A.y,A.z)):Bt(wt.x,wt.y,0)}for(var s=1;s<=r;s++)for(var St=0;St<z;St++){var Et=f?U(C[St],J[St],bt):C[St];D?(T.copy(E.normals[s]).multiplyScalar(Et.x),M.copy(E.binormals[s]).multiplyScalar(Et.y),A.copy(S[s]).add(T).add(M),Bt(A.x,A.y,A.z)):Bt(Et.x,Et.y,h/r*s)}for(var Mt=_-1;Mt>=0;Mt--){for(var Tt=Mt/_,At=m*Math.cos(Tt*Math.PI/2),Dt=v*Math.sin(Tt*Math.PI/2)+y,Pt=0,Ct=I.length;Pt<Ct;Pt++){var kt=U(I[Pt],G[Pt],Dt);Bt(kt.x,kt.y,h+At)}for(var Ot=0,Lt=k.length;Ot<Lt;Ot++){var Ft=k[Ot];$=K[Ot];for(var Rt=0,It=Ft.length;Rt<It;Rt++){var Nt=U(Ft[Rt],$[Rt],Dt);D?Bt(Nt.x,Nt.y+S[r-1].y,S[r-1].x+At):Bt(Nt.x,Nt.y,h+At)}}}function jt(t,e){for(var i=t.length;--i>=0;){var n=i,o=i-1;o<0&&(o=t.length-1);for(var l=0,c=r+2*_;l<c;l++){var h=z*l,d=z*(l+1);zt(e+n+h,e+o+h,e+o+d,e+n+d)}}}function Bt(t,n,r){e.push(t),e.push(n),e.push(r)}function Ut(a,b,t){Vt(a),Vt(b),Vt(t);var e=c.length/3,n=w.generateTopUV(l,c,e-3,e-2,e-1);Ht(n[0]),Ht(n[1]),Ht(n[2])}function zt(a,b,t,e){Vt(a),Vt(b),Vt(e),Vt(b),Vt(t),Vt(e);var n=c.length/3,r=w.generateSideWallUV(l,c,n-6,n-3,n-2,n-1);Ht(r[0]),Ht(r[1]),Ht(r[3]),Ht(r[1]),Ht(r[2]),Ht(r[3])}function Vt(t){c.push(e[3*t+0]),c.push(e[3*t+1]),c.push(e[3*t+2])}function Ht(t){d.push(t.x),d.push(t.y)}!function(){var t=c.length/3;if(f){for(var e=0,n=z*e,o=0;o<V;o++){var h=R[o];Ut(h[2]+n,h[1]+n,h[0]+n)}n=z*(e=r+2*_);for(var d=0;d<V;d++){var m=R[d];Ut(m[0]+n,m[1]+n,m[2]+n)}}else{for(var v=0;v<V;v++){var y=R[v];Ut(y[2],y[1],y[0])}for(var x=0;x<V;x++){var w=R[x];Ut(w[0]+z*r,w[1]+z*r,w[2]+z*r)}}l.addGroup(t,c.length/3-t,0)}(),function(){var t=c.length/3,e=0;jt(I,e),e+=I.length;for(var n=0,r=k.length;n<r;n++){var o=k[n];jt(o,e),e+=o.length}l.addGroup(t,c.length/3-t,1)}()}return t.setAttribute("position",new Bn(c,3)),t.setAttribute("uv",new Bn(d,2)),t.computeVertexNormals(),t}return Object(y.a)(n,[{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return function(t,e,data){if(data.shapes=[],Array.isArray(t))for(var n=0,r=t.length;n<r;n++){var o=t[n];data.shapes.push(o.uuid)}else data.shapes.push(t.uuid);void 0!==e.extrudePath&&(data.options.extrudePath=e.extrudePath.toJSON());return data}(this.parameters.shapes,this.parameters.options,data)}}],[{key:"fromJSON",value:function(data,t){for(var e=[],r=0,o=data.shapes.length;r<o;r++){var l=t[data.shapes[r]];e.push(l)}var c=data.options.extrudePath;return void 0!==c&&(data.options.extrudePath=(new Ns[c.type]).fromJSON(c)),new n(e,data.options)}}]),n}(Yn),vu={generateTopUV:function(t,e,n,r,o){var l=e[3*n],c=e[3*n+1],h=e[3*r],d=e[3*r+1],f=e[3*o],m=e[3*o+1];return[new Yt(l,c),new Yt(h,d),new Yt(f,m)]},generateSideWallUV:function(t,e,n,r,o,l){var c=e[3*n],h=e[3*n+1],d=e[3*n+2],f=e[3*r],m=e[3*r+1],v=e[3*r+2],y=e[3*o],_=e[3*o+1],x=e[3*o+2],w=e[3*l],S=e[3*l+1],E=e[3*l+2];return Math.abs(h-m)<Math.abs(c-f)?[new Yt(c,1-d),new Yt(f,1-v),new Yt(y,1-x),new Yt(w,1-E)]:[new Yt(h,1-d),new Yt(m,1-v),new Yt(_,1-x),new Yt(S,1-E)]}};var gu=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Us([new Yt(0,.5),new Yt(-.5,-.5),new Yt(.5,-.5)]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;Object(v.a)(this,n),(t=e.call(this)).type="ShapeGeometry",t.parameters={shapes:r,curveSegments:o};var l=[],c=[],h=[],d=[],f=0,m=0;if(!1===Array.isArray(r))_(r);else for(var y=0;y<r.length;y++)_(r[y]),t.addGroup(f,m,y),f+=m,m=0;function _(t){var e=c.length/3,n=t.extractPoints(o),r=n.shape,f=n.holes;!1===du.isClockWise(r)&&(r=r.reverse());for(var v=0,y=f.length;v<y;v++){var _=f[v];!0===du.isClockWise(_)&&(f[v]=_.reverse())}for(var x=du.triangulateShape(r,f),w=0,S=f.length;w<S;w++){var E=f[w];r=r.concat(E)}for(var M=0,T=r.length;M<T;M++){var A=r[M];c.push(A.x,A.y,0),h.push(0,0,1),d.push(A.x,A.y)}for(var D=0,P=x.length;D<P;D++){var C=x[D],a=C[0]+e,b=C[1]+e,k=C[2]+e;l.push(a,b,k),m+=3}}return t.setIndex(l),t.setAttribute("position",new Bn(c,3)),t.setAttribute("normal",new Bn(h,3)),t.setAttribute("uv",new Bn(d,2)),t}return Object(y.a)(n,[{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this);return function(t,data){if(data.shapes=[],Array.isArray(t))for(var e=0,n=t.length;e<n;e++){var r=t[e];data.shapes.push(r.uuid)}else data.shapes.push(t.uuid);return data}(this.parameters.shapes,data)}}],[{key:"fromJSON",value:function(data,t){for(var e=[],r=0,o=data.shapes.length;r<o;r++){var l=t[data.shapes[r]];e.push(l)}return new n(e,data.curveSegments)}}]),n}(Yn);var yu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="ShadowMaterial",r.color=new ie(0),r.transparent=!0,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this}}]),n}(On);yu.prototype.isShadowMaterial=!0;var _u=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this,t)).type="RawShaderMaterial",r}return n}(_r);_u.prototype.isRawShaderMaterial=!0;var bu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).defines={STANDARD:""},r.type="MeshStandardMaterial",r.color=new ie(16777215),r.roughness=1,r.metalness=0,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ie(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Yt(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.roughnessMap=null,r.metalnessMap=null,r.alphaMap=null,r.envMap=null,r.envMapIntensity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.defines={STANDARD:""},this.color.copy(source.color),this.roughness=source.roughness,this.metalness=source.metalness,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.roughnessMap=source.roughnessMap,this.metalnessMap=source.metalnessMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.envMapIntensity=source.envMapIntensity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this}}]),n}(On);bu.prototype.isMeshStandardMaterial=!0;var xu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).defines={STANDARD:"",PHYSICAL:""},r.type="MeshPhysicalMaterial",r.clearcoatMap=null,r.clearcoatRoughness=0,r.clearcoatRoughnessMap=null,r.clearcoatNormalScale=new Yt(1,1),r.clearcoatNormalMap=null,r.ior=1.5,Object.defineProperty(Object(h.a)(r),"reflectivity",{get:function(){return Vt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),r.sheenColor=new ie(0),r.sheenColorMap=null,r.sheenRoughness=1,r.sheenRoughnessMap=null,r.transmissionMap=null,r.thickness=0,r.thicknessMap=null,r.attenuationDistance=0,r.attenuationColor=new ie(1,1,1),r.specularIntensity=1,r.specularIntensityMap=null,r.specularColor=new ie(1,1,1),r.specularColorMap=null,r._sheen=0,r._clearcoat=0,r._transmission=0,r.setValues(t),r}return Object(y.a)(n,[{key:"sheen",get:function(){return this._sheen},set:function(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}},{key:"clearcoat",get:function(){return this._clearcoat},set:function(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}},{key:"transmission",get:function(){return this._transmission},set:function(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=source.clearcoat,this.clearcoatMap=source.clearcoatMap,this.clearcoatRoughness=source.clearcoatRoughness,this.clearcoatRoughnessMap=source.clearcoatRoughnessMap,this.clearcoatNormalMap=source.clearcoatNormalMap,this.clearcoatNormalScale.copy(source.clearcoatNormalScale),this.ior=source.ior,this.sheen=source.sheen,this.sheenColor.copy(source.sheenColor),this.sheenColorMap=source.sheenColorMap,this.sheenRoughness=source.sheenRoughness,this.sheenRoughnessMap=source.sheenRoughnessMap,this.transmission=source.transmission,this.transmissionMap=source.transmissionMap,this.thickness=source.thickness,this.thicknessMap=source.thicknessMap,this.attenuationDistance=source.attenuationDistance,this.attenuationColor.copy(source.attenuationColor),this.specularIntensity=source.specularIntensity,this.specularIntensityMap=source.specularIntensityMap,this.specularColor.copy(source.specularColor),this.specularColorMap=source.specularColorMap,this}}]),n}(bu);xu.prototype.isMeshPhysicalMaterial=!0;var wu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshPhongMaterial",r.color=new ie(16777215),r.specular=new ie(1118481),r.shininess=30,r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ie(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Yt(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.flatShading=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.specular.copy(source.specular),this.shininess=source.shininess,this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this.flatShading=source.flatShading,this}}]),n}(On);wu.prototype.isMeshPhongMaterial=!0;var Su=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).defines={TOON:""},r.type="MeshToonMaterial",r.color=new ie(16777215),r.map=null,r.gradientMap=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ie(0),r.emissiveIntensity=1,r.emissiveMap=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Yt(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.map=source.map,this.gradientMap=source.gradientMap,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this}}]),n}(On);Su.prototype.isMeshToonMaterial=!0;var Eu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshNormalMaterial",r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Yt(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.wireframe=!1,r.wireframeLinewidth=1,r.fog=!1,r.flatShading=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.flatShading=source.flatShading,this}}]),n}(On);Eu.prototype.isMeshNormalMaterial=!0;var Mu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="MeshLambertMaterial",r.color=new ie(16777215),r.map=null,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=null,r.aoMapIntensity=1,r.emissive=new ie(0),r.emissiveIntensity=1,r.emissiveMap=null,r.specularMap=null,r.alphaMap=null,r.envMap=null,r.combine=0,r.reflectivity=1,r.refractionRatio=.98,r.wireframe=!1,r.wireframeLinewidth=1,r.wireframeLinecap="round",r.wireframeLinejoin="round",r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.map=source.map,this.lightMap=source.lightMap,this.lightMapIntensity=source.lightMapIntensity,this.aoMap=source.aoMap,this.aoMapIntensity=source.aoMapIntensity,this.emissive.copy(source.emissive),this.emissiveMap=source.emissiveMap,this.emissiveIntensity=source.emissiveIntensity,this.specularMap=source.specularMap,this.alphaMap=source.alphaMap,this.envMap=source.envMap,this.combine=source.combine,this.reflectivity=source.reflectivity,this.refractionRatio=source.refractionRatio,this.wireframe=source.wireframe,this.wireframeLinewidth=source.wireframeLinewidth,this.wireframeLinecap=source.wireframeLinecap,this.wireframeLinejoin=source.wireframeLinejoin,this}}]),n}(On);Mu.prototype.isMeshLambertMaterial=!0;var Tu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).defines={MATCAP:""},r.type="MeshMatcapMaterial",r.color=new ie(16777215),r.matcap=null,r.map=null,r.bumpMap=null,r.bumpScale=1,r.normalMap=null,r.normalMapType=0,r.normalScale=new Yt(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.alphaMap=null,r.flatShading=!1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.defines={MATCAP:""},this.color.copy(source.color),this.matcap=source.matcap,this.map=source.map,this.bumpMap=source.bumpMap,this.bumpScale=source.bumpScale,this.normalMap=source.normalMap,this.normalMapType=source.normalMapType,this.normalScale.copy(source.normalScale),this.displacementMap=source.displacementMap,this.displacementScale=source.displacementScale,this.displacementBias=source.displacementBias,this.alphaMap=source.alphaMap,this.flatShading=source.flatShading,this}}]),n}(On);Tu.prototype.isMeshMatcapMaterial=!0;var Au=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="LineDashedMaterial",r.scale=1,r.dashSize=3,r.gapSize=1,r.setValues(t),r}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.scale=source.scale,this.dashSize=source.dashSize,this.gapSize=source.gapSize,this}}]),n}(Zo);Au.prototype.isLineDashedMaterial=!0;var Du={ShadowMaterial:yu,SpriteMaterial:Eo,RawShaderMaterial:_u,ShaderMaterial:_r,PointsMaterial:cs,MeshPhysicalMaterial:xu,MeshStandardMaterial:bu,MeshPhongMaterial:wu,MeshToonMaterial:Su,MeshNormalMaterial:Eu,MeshLambertMaterial:Mu,MeshDepthMaterial:to,MeshDistanceMaterial:eo,MeshBasicMaterial:Ln,MeshMatcapMaterial:Tu,LineDashedMaterial:Au,LineBasicMaterial:Zo,Material:On};On.fromType=function(t){return new Du[t]};var Pu={arraySlice:function(t,e,n){return Pu.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(object){return ArrayBuffer.isView(object)&&!(object instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),r=0;r!==e;++r)n[r]=r;return n.sort((function(i,e){return t[i]-t[e]})),n},sortedArray:function(t,e,n){for(var r=t.length,o=new t.constructor(r),l=0,c=0;c!==r;++l)for(var h=n[l]*e,d=0;d!==e;++d)o[c++]=t[h+d];return o},flattenJSON:function(t,e,n,r){for(var i=1,o=t[0];void 0!==o&&void 0===o[r];)o=t[i++];if(void 0!==o){var l=o[r];if(void 0!==l)if(Array.isArray(l))do{void 0!==(l=o[r])&&(e.push(o.time),n.push.apply(n,l)),o=t[i++]}while(void 0!==o);else if(void 0!==l.toArray)do{void 0!==(l=o[r])&&(e.push(o.time),l.toArray(n,n.length)),o=t[i++]}while(void 0!==o);else do{void 0!==(l=o[r])&&(e.push(o.time),n.push(l)),o=t[i++]}while(void 0!==o)}},subclip:function(t,e,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,l=t.clone();l.name=e;for(var c=[],h=0;h<l.tracks.length;++h){for(var track=l.tracks[h],d=track.getValueSize(),f=[],m=[],v=0;v<track.times.length;++v){var y=track.times[v]*o;if(!(y<n||y>=r)){f.push(track.times[v]);for(var _=0;_<d;++_)m.push(track.values[v*d+_])}}0!==f.length&&(track.times=Pu.convertArray(f,track.times.constructor),track.values=Pu.convertArray(m,track.values.constructor),c.push(track))}l.tracks=c;for(var x=1/0,w=0;w<l.tracks.length;++w)x>l.tracks[w].times[0]&&(x=l.tracks[w].times[0]);for(var S=0;S<l.tracks.length;++S)l.tracks[S].shift(-1*x);return l.resetDuration(),l},makeClipAdditive:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);for(var o=n.tracks.length,l=e/r,c=function(e){var r=n.tracks[e],o=r.ValueTypeName;if("bool"===o||"string"===o)return"continue";var c=t.tracks.find((function(track){return track.name===r.name&&track.ValueTypeName===o}));if(void 0===c)return"continue";var h=0,d=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=d/3);var f=0,m=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(f=m/3);var v=r.times.length-1,y=void 0;if(l<=r.times[0]){var _=h,x=d-h;y=Pu.arraySlice(r.values,_,x)}else if(l>=r.times[v]){var w=v*d+h,S=w+d-h;y=Pu.arraySlice(r.values,w,S)}else{var E=r.createInterpolant(),M=h,T=d-h;E.evaluate(l),y=Pu.arraySlice(E.resultBuffer,M,T)}"quaternion"===o&&(new me).fromArray(y).normalize().conjugate().toArray(y);for(var A=c.times.length,D=0;D<A;++D){var P=D*m+f;if("quaternion"===o)me.multiplyQuaternionsFlat(c.values,P,y,0,c.values,P);else for(var C=m-2*f,k=0;k<C;++k)c.values[P+k]-=y[k]}},h=0;h<o;++h)c(h);return t.blendMode=Pt,t}},Cu=function(){function t(e,n,r,o){Object(v.a)(this,t),this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==o?o:new n.constructor(r),this.sampleValues=n,this.valueSize=r,this.settings=null,this.DefaultSettings_={}}return Object(y.a)(t,[{key:"evaluate",value:function(t){var e=this.parameterPositions,n=this._cachedIndex,r=e[n],o=e[n-1];t:{e:{var l;n:{r:if(!(t<r)){for(var c=n+2;;){if(void 0===r){if(t<o)break r;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,o)}if(n===c)break;if(o=r,t<(r=e[++n]))break e}l=e.length;break n}if(t>=o)break t;var h=e[1];t<h&&(n=2,o=h);for(var d=n-2;;){if(void 0===o)return this._cachedIndex=0,this.beforeStart_(0,t,r);if(n===d)break;if(r=o,t>=(o=e[--n-1]))break e}l=n,n=0}for(;n<l;){var f=n+l>>>1;t<e[f]?l=f:n=f+1}if(r=e[n],void 0===(o=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,r);if(void 0===r)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,o,t)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}},{key:"getSettings_",value:function(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function(t){for(var e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r,l=0;l!==r;++l)e[l]=n[o+l];return e}},{key:"interpolate_",value:function(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function(){}}]),t}();Cu.prototype.beforeStart_=Cu.prototype.copySampleValue_,Cu.prototype.afterEnd_=Cu.prototype.copySampleValue_;var ku=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l){var c;return Object(v.a)(this,n),(c=e.call(this,t,r,o,l))._weightPrev=-0,c._offsetPrev=-0,c._weightNext=-0,c._offsetNext=-0,c.DefaultSettings_={endingStart:Mt,endingEnd:Mt},c}return Object(y.a)(n,[{key:"intervalChanged_",value:function(t,e,n){var r=this.parameterPositions,o=t-2,l=t+1,c=r[o],h=r[l];if(void 0===c)switch(this.getSettings_().endingStart){case Tt:o=t,c=2*e-n;break;case At:c=e+r[o=r.length-2]-r[o+1];break;default:o=t,c=n}if(void 0===h)switch(this.getSettings_().endingEnd){case Tt:l=t,h=2*n-e;break;case At:l=1,h=n+r[1]-r[0];break;default:l=t-1,h=e}var d=.5*(n-e),f=this.valueSize;this._weightPrev=d/(e-c),this._weightNext=d/(h-n),this._offsetPrev=o*f,this._offsetNext=l*f}},{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,d=h-c,f=this._offsetPrev,m=this._offsetNext,v=this._weightPrev,y=this._weightNext,p=(n-e)/(r-e),_=p*p,x=_*p,w=-v*x+2*v*_-v*p,S=(1+v)*x+(-1.5-2*v)*_+(-.5+v)*p+1,E=(-1-y)*x+(1.5+y)*_+.5*p,M=y*x-y*_,T=0;T!==c;++T)o[T]=w*l[f+T]+S*l[d+T]+E*l[h+T]+M*l[m+T];return o}}]),n}(Cu),Ou=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l){return Object(v.a)(this,n),e.call(this,t,r,o,l)}return Object(y.a)(n,[{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=t*c,d=h-c,f=(n-e)/(r-e),m=1-f,v=0;v!==c;++v)o[v]=l[d+v]*m+l[h+v]*f;return o}}]),n}(Cu),Lu=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l){return Object(v.a)(this,n),e.call(this,t,r,o,l)}return Object(y.a)(n,[{key:"interpolate_",value:function(t){return this.copySampleValue_(t-1)}}]),n}(Cu),Fu=function(){function t(e,n,r,o){if(Object(v.a)(this,t),void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===n||0===n.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pu.convertArray(n,this.TimeBufferType),this.values=Pu.convertArray(r,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation)}return Object(y.a)(t,[{key:"InterpolantFactoryMethodDiscrete",value:function(t){return new Lu(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodLinear",value:function(t){return new Ou(this.times,this.values,this.getValueSize(),t)}},{key:"InterpolantFactoryMethodSmooth",value:function(t){return new ku(this.times,this.values,this.getValueSize(),t)}},{key:"setInterpolation",value:function(t){var e;switch(t){case wt:e=this.InterpolantFactoryMethodDiscrete;break;case St:e=this.InterpolantFactoryMethodLinear;break;case Et:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this}},{key:"getInterpolation",value:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return wt;case this.InterpolantFactoryMethodLinear:return St;case this.InterpolantFactoryMethodSmooth:return Et}}},{key:"getValueSize",value:function(){return this.values.length/this.times.length}},{key:"shift",value:function(t){if(0!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]+=t;return this}},{key:"scale",value:function(t){if(1!==t)for(var e=this.times,n=0,r=e.length;n!==r;++n)e[n]*=t;return this}},{key:"trim",value:function(t,e){for(var n=this.times,r=n.length,o=0,l=r-1;o!==r&&n[o]<t;)++o;for(;-1!==l&&n[l]>e;)--l;if(++l,0!==o||l!==r){o>=l&&(o=(l=Math.max(l,1))-1);var c=this.getValueSize();this.times=Pu.arraySlice(n,o,l),this.values=Pu.arraySlice(this.values,o*c,l*c)}return this}},{key:"validate",value:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,r=this.values,o=n.length;0===o&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var l=null,c=0;c!==o;c++){var h=n[c];if("number"==typeof h&&isNaN(h)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,c,h),t=!1;break}if(null!==l&&l>h){console.error("THREE.KeyframeTrack: Out of order keys.",this,c,h,l),t=!1;break}l=h}if(void 0!==r&&Pu.isTypedArray(r))for(var d=0,f=r.length;d!==f;++d){var m=r[d];if(isNaN(m)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,d,m),t=!1;break}}return t}},{key:"optimize",value:function(){for(var t=Pu.arraySlice(this.times),e=Pu.arraySlice(this.values),n=this.getValueSize(),r=this.getInterpolation()===Et,o=t.length-1,l=1,c=1;c<o;++c){var h=!1,time=t[c];if(time!==t[c+1]&&(1!==c||time!==t[0]))if(r)h=!0;else for(var d=c*n,f=d-n,m=d+n,v=0;v!==n;++v){var y=e[d+v];if(y!==e[f+v]||y!==e[m+v]){h=!0;break}}if(h){if(c!==l){t[l]=t[c];for(var _=c*n,x=l*n,w=0;w!==n;++w)e[x+w]=e[_+w]}++l}}if(o>0){t[l]=t[o];for(var S=o*n,E=l*n,M=0;M!==n;++M)e[E+M]=e[S+M];++l}return l!==t.length?(this.times=Pu.arraySlice(t,0,l),this.values=Pu.arraySlice(e,0,l*n)):(this.times=t,this.values=e),this}},{key:"clone",value:function(){var t=Pu.arraySlice(this.times,0),e=Pu.arraySlice(this.values,0),track=new(0,this.constructor)(this.name,t,e);return track.createInterpolant=this.createInterpolant,track}}],[{key:"toJSON",value:function(track){var t,e=track.constructor;if(e.toJSON!==this.toJSON)t=e.toJSON(track);else{t={name:track.name,times:Pu.convertArray(track.times,Array),values:Pu.convertArray(track.values,Array)};var n=track.getInterpolation();n!==track.DefaultInterpolation&&(t.interpolation=n)}return t.type=track.ValueTypeName,t}}]),t}();Fu.prototype.TimeBufferType=Float32Array,Fu.prototype.ValueBufferType=Float32Array,Fu.prototype.DefaultInterpolation=St;var Ru=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Fu);Ru.prototype.ValueTypeName="bool",Ru.prototype.ValueBufferType=Array,Ru.prototype.DefaultInterpolation=wt,Ru.prototype.InterpolantFactoryMethodLinear=void 0,Ru.prototype.InterpolantFactoryMethodSmooth=void 0;var Iu=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Fu);Iu.prototype.ValueTypeName="color";var Nu=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Fu);Nu.prototype.ValueTypeName="number";var ju=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o,l){return Object(v.a)(this,n),e.call(this,t,r,o,l)}return Object(y.a)(n,[{key:"interpolate_",value:function(t,e,n,r){for(var o=this.resultBuffer,l=this.sampleValues,c=this.valueSize,h=(n-e)/(r-e),d=t*c,f=d+c;d!==f;d+=4)me.slerpFlat(o,0,l,d-c,l,d,h);return o}}]),n}(Cu),Bu=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return Object(y.a)(n,[{key:"InterpolantFactoryMethodLinear",value:function(t){return new ju(this.times,this.values,this.getValueSize(),t)}}]),n}(Fu);Bu.prototype.ValueTypeName="quaternion",Bu.prototype.DefaultInterpolation=St,Bu.prototype.InterpolantFactoryMethodSmooth=void 0;var Uu=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Fu);Uu.prototype.ValueTypeName="string",Uu.prototype.ValueBufferType=Array,Uu.prototype.DefaultInterpolation=wt,Uu.prototype.InterpolantFactoryMethodLinear=void 0,Uu.prototype.InterpolantFactoryMethodSmooth=void 0;var zu=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.apply(this,arguments)}return n}(Fu);zu.prototype.ValueTypeName="vector";var Vu=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Dt;Object(v.a)(this,t),this.name=e,this.tracks=r,this.duration=n,this.blendMode=o,this.uuid=zt(),this.duration<0&&this.resetDuration()}return Object(y.a)(t,[{key:"resetDuration",value:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var track=this.tracks[e];t=Math.max(t,track.times[track.times.length-1])}return this.duration=t,this}},{key:"trim",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}},{key:"validate",value:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t}},{key:"optimize",value:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}},{key:"clone",value:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}},{key:"toJSON",value:function(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function(t){for(var e=[],n=t.tracks,r=1/(t.fps||1),o=0,l=n.length;o!==l;++o)e.push(Hu(n[o]).scale(r));var c=new this(t.name,t.duration,e,t.blendMode);return c.uuid=t.uuid,c}},{key:"toJSON",value:function(t){for(var e=[],n=t.tracks,r={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},o=0,l=n.length;o!==l;++o)e.push(Fu.toJSON(n[o]));return r}},{key:"CreateFromMorphTargetSequence",value:function(t,e,n,r){for(var o=e.length,l=[],c=0;c<o;c++){var h=[],d=[];h.push((c+o-1)%o,c,(c+1)%o),d.push(0,1,0);var f=Pu.getKeyframeOrder(h);h=Pu.sortedArray(h,1,f),d=Pu.sortedArray(d,1,f),r||0!==h[0]||(h.push(o),d.push(d[0])),l.push(new Nu(".morphTargetInfluences["+e[c].name+"]",h,d).scale(1/n))}return new this(t,-1,l)}},{key:"findByName",value:function(t,e){var n=t;if(!Array.isArray(t)){var r=t;n=r.geometry&&r.geometry.animations||r.animations}for(var o=0;o<n.length;o++)if(n[o].name===e)return n[o];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function(t,e,n){for(var r={},pattern=/^([\w-]*?)([\d]+)$/,o=0,l=t.length;o<l;o++){var c=t[o],h=c.name.match(pattern);if(h&&h.length>1){var d=h[1],f=r[d];f||(r[d]=f=[]),f.push(c)}}var m=[];for(var v in r)m.push(this.CreateFromMorphTargetSequence(v,r[v],e,n));return m}},{key:"parseAnimation",value:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,r,o){if(0!==n.length){var l=[],c=[];Pu.flattenJSON(n,l,c,r),0!==l.length&&o.push(new t(e,l,c))}},r=[],o=t.name||"default",l=t.fps||30,c=t.blendMode,h=t.length||-1,d=t.hierarchy||[],f=0;f<d.length;f++){var m=d[f].keys;if(m&&0!==m.length)if(m[0].morphTargets){var v={},y=void 0;for(y=0;y<m.length;y++)if(m[y].morphTargets)for(var _=0;_<m[y].morphTargets.length;_++)v[m[y].morphTargets[_]]=-1;for(var x in v){for(var w=[],S=[],E=0;E!==m[y].morphTargets.length;++E){var M=m[y];w.push(M.time),S.push(M.morphTarget===x?1:0)}r.push(new Nu(".morphTargetInfluence["+x+"]",w,S))}h=v.length*l}else{var T=".bones["+e[f].name+"]";n(zu,T+".position",m,"pos",r),n(Bu,T+".quaternion",m,"rot",r),n(zu,T+".scale",m,"scl",r)}}return 0===r.length?null:new this(o,h,r,c)}}]),t}();function Hu(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nu;case"vector":case"vector2":case"vector3":case"vector4":return zu;case"color":return Iu;case"quaternion":return Bu;case"bool":case"boolean":return Ru;case"string":return Uu}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],r=[];Pu.flattenJSON(t.keys,n,r,"value"),t.times=n,t.values=r}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}var Gu={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Wu=function t(e,n,r){Object(v.a)(this,t);var o=this,l=!1,c=0,h=0,d=void 0,f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=n,this.onError=r,this.itemStart=function(t){h++,!1===l&&void 0!==o.onStart&&o.onStart(t,c,h),l=!0},this.itemEnd=function(t){c++,void 0!==o.onProgress&&o.onProgress(t,c,h),c===h&&(l=!1,void 0!==o.onLoad&&o.onLoad())},this.itemError=function(t){void 0!==o.onError&&o.onError(t)},this.resolveURL=function(t){return d?d(t):t},this.setURLModifier=function(t){return d=t,this},this.addHandler=function(t,e){return f.push(t,e),this},this.removeHandler=function(t){var e=f.indexOf(t);return-1!==e&&f.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=f.length;e<n;e+=2){var r=f[e],o=f[e+1];if(r.global&&(r.lastIndex=0),r.test(t))return o}return null}},Xu=new Wu,Yu=function(){function t(e){Object(v.a)(this,t),this.manager=void 0!==e?e:Xu,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return Object(y.a)(t,[{key:"load",value:function(){}},{key:"loadAsync",value:function(t,e){var n=this;return new Promise((function(r,o){n.load(t,r,e,o)}))}},{key:"parse",value:function(){}},{key:"setCrossOrigin",value:function(t){return this.crossOrigin=t,this}},{key:"setWithCredentials",value:function(t){return this.withCredentials=t,this}},{key:"setPath",value:function(path){return this.path=path,this}},{key:"setResourcePath",value:function(t){return this.resourcePath=t,this}},{key:"setRequestHeader",value:function(t){return this.requestHeader=t,this}}]),t}(),qu={},Qu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){return Object(v.a)(this,n),e.call(this,t)}return Object(y.a)(n,[{key:"load",value:function(t,e,n,r){var o=this;void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var l=Gu.get(t);if(void 0!==l)return this.manager.itemStart(t),setTimeout((function(){e&&e(l),o.manager.itemEnd(t)}),0),l;if(void 0===qu[t]){qu[t]=[],qu[t].push({onLoad:e,onProgress:n,onError:r});var c=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),h=this.mimeType,d=this.responseType;fetch(c).then((function(e){if(200===e.status||0===e.status){if(0===e.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===e.body||void 0===e.body.getReader)return e;var n=qu[t],r=e.body.getReader(),o=e.headers.get("Content-Length"),l=o?parseInt(o):0,c=0!==l,h=0,d=new ReadableStream({start:function(t){!function e(){r.read().then((function(r){var o=r.done,d=r.value;if(o)t.close();else{h+=d.byteLength;for(var f=new ProgressEvent("progress",{lengthComputable:c,loaded:h,total:l}),m=0,v=n.length;m<v;m++){var y=n[m];y.onProgress&&y.onProgress(f)}t.enqueue(d),e()}}))}()}});return new Response(d)}throw Error('fetch for "'.concat(e.url,'" responded with ').concat(e.status,": ").concat(e.statusText))})).then((function(t){switch(d){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"document":return t.text().then((function(text){return(new DOMParser).parseFromString(text,h)}));case"json":return t.json();default:if(void 0===h)return t.text();var e=/charset="?([^;"\s]*)"?/i.exec(h),label=e&&e[1]?e[1].toLowerCase():void 0,n=new TextDecoder(label);return t.arrayBuffer().then((function(t){return n.decode(t)}))}})).then((function(data){Gu.add(t,data);var e=qu[t];delete qu[t];for(var n=0,r=e.length;n<r;n++){var o=e[n];o.onLoad&&o.onLoad(data)}})).catch((function(e){var n=qu[t];if(void 0===n)throw o.manager.itemError(t),e;delete qu[t];for(var r=0,l=n.length;r<l;r++){var c=n[r];c.onError&&c.onError(e)}o.manager.itemError(t)})).finally((function(){o.manager.itemEnd(t)})),this.manager.itemStart(t)}else qu[t].push({onLoad:e,onProgress:n,onError:r})}},{key:"setResponseType",value:function(t){return this.responseType=t,this}},{key:"setMimeType",value:function(t){return this.mimeType=t,this}}]),n}(Yu),$u=function(t){Object(d.a)(n,t);var e=w(n);function n(t){return Object(v.a)(this,n),e.call(this,t)}return Object(y.a)(n,[{key:"load",value:function(t,e,n,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,l=Gu.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout((function(){e&&e(l),o.manager.itemEnd(t)}),0),l;var image=$t("img");function c(){d(),Gu.add(t,this),e&&e(this),o.manager.itemEnd(t)}function h(e){d(),r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)}function d(){image.removeEventListener("load",c,!1),image.removeEventListener("error",h,!1)}return image.addEventListener("load",c,!1),image.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(image.crossOrigin=this.crossOrigin),o.manager.itemStart(t),image.src=t,image}}]),n}(Yu),Ku=function(t){Object(d.a)(n,t);var e=w(n);function n(t){return Object(v.a)(this,n),e.call(this,t)}return Object(y.a)(n,[{key:"load",value:function(t,e,n,r){var o=new Mr,l=new $u(this.manager);l.setCrossOrigin(this.crossOrigin),l.setPath(this.path);var c=0;function h(i){l.load(t[i],(function(image){o.images[i]=image,6===++c&&(o.needsUpdate=!0,e&&e(o))}),void 0,r)}for(var d=0;d<t.length;++d)h(d);return o}}]),n}(Yu),Ju=function(t){Object(d.a)(n,t);var e=w(n);function n(t){return Object(v.a)(this,n),e.call(this,t)}return Object(y.a)(n,[{key:"load",value:function(t,e,n,r){var o=new le,l=new $u(this.manager);return l.setCrossOrigin(this.crossOrigin),l.setPath(this.path),l.load(t,(function(image){o.image=image,o.needsUpdate=!0,void 0!==e&&e(o)}),n,r),o}}]),n}(Yu),Zu=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(v.a)(this,n),(r=e.call(this)).type="Light",r.color=new ie(t),r.intensity=o,r}return Object(y.a)(n,[{key:"dispose",value:function(){}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.color.copy(source.color),this.intensity=source.intensity,this}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return data.object.color=this.color.getHex(),data.object.intensity=this.intensity,void 0!==this.groundColor&&(data.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(data.object.distance=this.distance),void 0!==this.angle&&(data.object.angle=this.angle),void 0!==this.decay&&(data.object.decay=this.decay),void 0!==this.penumbra&&(data.object.penumbra=this.penumbra),void 0!==this.shadow&&(data.object.shadow=this.shadow.toJSON()),data}}]),n}(_n);Zu.prototype.isLight=!0;var tl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r,o){var l;return Object(v.a)(this,n),(l=e.call(this,t,o)).type="HemisphereLight",l.position.copy(_n.DefaultUp),l.updateMatrix(),l.groundColor=new ie(r),l}return Object(y.a)(n,[{key:"copy",value:function(source){return Zu.prototype.copy.call(this,source),this.groundColor.copy(source.groundColor),this}}]),n}(Zu);tl.prototype.isHemisphereLight=!0;var el=new Ye,nl=new ve,rl=new ve,il=function(){function t(e){Object(v.a)(this,t),this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Yt(512,512),this.map=null,this.mapPass=null,this.matrix=new Ye,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Lr,this._frameExtents=new Yt(1,1),this._viewportCount=1,this._viewports=[new ce(0,0,1,1)]}return Object(y.a)(t,[{key:"getViewportCount",value:function(){return this._viewportCount}},{key:"getFrustum",value:function(){return this._frustum}},{key:"updateMatrices",value:function(t){var e=this.camera,n=this.matrix;nl.setFromMatrixPosition(t.matrixWorld),e.position.copy(nl),rl.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(rl),e.updateMatrixWorld(),el.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(el),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)}},{key:"getViewport",value:function(t){return this._viewports[t]}},{key:"getFrameExtents",value:function(){return this._frameExtents}},{key:"dispose",value:function(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function(source){return this.camera=source.camera.clone(),this.bias=source.bias,this.radius=source.radius,this.mapSize.copy(source.mapSize),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var object={};return 0!==this.bias&&(object.bias=this.bias),0!==this.normalBias&&(object.normalBias=this.normalBias),1!==this.radius&&(object.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(object.mapSize=this.mapSize.toArray()),object.camera=this.camera.toJSON(!1).object,delete object.camera.matrix,object}}]),t}(),al=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this,new wr(50,1,.5,500))).focus=1,t}return Object(y.a)(n,[{key:"updateMatrices",value:function(t){var e=this.camera,r=2*Ut*t.angle*this.focus,o=this.mapSize.width/this.mapSize.height,l=t.distance||e.far;r===e.fov&&o===e.aspect&&l===e.far||(e.fov=r,e.aspect=o,e.far=l,e.updateProjectionMatrix()),Object(c.a)(Object(m.a)(n.prototype),"updateMatrices",this).call(this,t)}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.focus=source.focus,this}}]),n}(il);al.prototype.isSpotLightShadow=!0;var sl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="SpotLight",o.position.copy(_n.DefaultUp),o.updateMatrix(),o.target=new _n,o.distance=l,o.angle=c,o.penumbra=h,o.decay=d,o.shadow=new al,o}return Object(y.a)(n,[{key:"power",get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.distance=source.distance,this.angle=source.angle,this.penumbra=source.penumbra,this.decay=source.decay,this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}]),n}(Zu);sl.prototype.isSpotLight=!0;var ll=new Ye,cl=new ve,hl=new ve,pl=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this,new wr(90,1,.5,500)))._frameExtents=new Yt(4,2),t._viewportCount=6,t._viewports=[new ce(2,1,1,1),new ce(0,1,1,1),new ce(3,1,1,1),new ce(1,1,1,1),new ce(3,0,1,1),new ce(1,0,1,1)],t._cubeDirections=[new ve(1,0,0),new ve(-1,0,0),new ve(0,0,1),new ve(0,0,-1),new ve(0,1,0),new ve(0,-1,0)],t._cubeUps=[new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,1,0),new ve(0,0,1),new ve(0,0,-1)],t}return Object(y.a)(n,[{key:"updateMatrices",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.camera,r=this.matrix,o=t.distance||n.far;o!==n.far&&(n.far=o,n.updateProjectionMatrix()),cl.setFromMatrixPosition(t.matrixWorld),n.position.copy(cl),hl.copy(n.position),hl.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(hl),n.updateMatrixWorld(),r.makeTranslation(-cl.x,-cl.y,-cl.z),ll.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ll)}}]),n}(il);pl.prototype.isPointLightShadow=!0;var fl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="PointLight",o.distance=l,o.decay=c,o.shadow=new pl,o}return Object(y.a)(n,[{key:"power",get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}},{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.distance=source.distance,this.decay=source.decay,this.shadow=source.shadow.clone(),this}}]),n}(Zu);fl.prototype.isPointLight=!0;var ml=function(t){Object(d.a)(n,t);var e=w(n);function n(){return Object(v.a)(this,n),e.call(this,new Xr(-5,5,5,-5,.5,500))}return n}(il);ml.prototype.isDirectionalLightShadow=!0;var vl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="DirectionalLight",o.position.copy(_n.DefaultUp),o.updateMatrix(),o.target=new _n,o.shadow=new ml,o}return Object(y.a)(n,[{key:"dispose",value:function(){this.shadow.dispose()}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.target=source.target.clone(),this.shadow=source.shadow.clone(),this}}]),n}(Zu);vl.prototype.isDirectionalLight=!0;var gl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="AmbientLight",o}return n}(Zu);gl.prototype.isAmbientLight=!0;var yl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return Object(v.a)(this,n),(o=e.call(this,t,r)).type="RectAreaLight",o.width=l,o.height=c,o}return Object(y.a)(n,[{key:"power",get:function(){return this.intensity*this.width*this.height*Math.PI},set:function(t){this.intensity=t/(this.width*this.height*Math.PI)}},{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.width=source.width,this.height=source.height,this}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return data.object.width=this.width,data.object.height=this.height,data}}]),n}(Zu);yl.prototype.isRectAreaLight=!0;var _l=function(){function t(){Object(v.a)(this,t),this.coefficients=[];for(var e=0;e<9;e++)this.coefficients.push(new ve)}return Object(y.a)(t,[{key:"set",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}},{key:"zero",value:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}},{key:"getAt",value:function(t,e){var n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.282095),e.addScaledVector(l[1],.488603*r),e.addScaledVector(l[2],.488603*o),e.addScaledVector(l[3],.488603*n),e.addScaledVector(l[4],n*r*1.092548),e.addScaledVector(l[5],r*o*1.092548),e.addScaledVector(l[6],.315392*(3*o*o-1)),e.addScaledVector(l[7],n*o*1.092548),e.addScaledVector(l[8],.546274*(n*n-r*r)),e}},{key:"getIrradianceAt",value:function(t,e){var n=t.x,r=t.y,o=t.z,l=this.coefficients;return e.copy(l[0]).multiplyScalar(.886227),e.addScaledVector(l[1],1.023328*r),e.addScaledVector(l[2],1.023328*o),e.addScaledVector(l[3],1.023328*n),e.addScaledVector(l[4],.858086*n*r),e.addScaledVector(l[5],.858086*r*o),e.addScaledVector(l[6],.743125*o*o-.247708),e.addScaledVector(l[7],.858086*n*o),e.addScaledVector(l[8],.429043*(n*n-r*r)),e}},{key:"add",value:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}},{key:"addScaledSH",value:function(t,s){for(var e=0;e<9;e++)this.coefficients[e].addScaledVector(t.coefficients[e],s);return this}},{key:"scale",value:function(s){for(var t=0;t<9;t++)this.coefficients[t].multiplyScalar(s);return this}},{key:"lerp",value:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}},{key:"equals",value:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}},{key:"copy",value:function(t){return this.set(t.coefficients)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].fromArray(t,e+3*r);return this}},{key:"toArray",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.coefficients,r=0;r<9;r++)n[r].toArray(t,e+3*r);return t}}],[{key:"getBasisAt",value:function(t,e){var n=t.x,r=t.y,o=t.z;e[0]=.282095,e[1]=.488603*r,e[2]=.488603*o,e[3]=.488603*n,e[4]=1.092548*n*r,e[5]=1.092548*r*o,e[6]=.315392*(3*o*o-1),e[7]=1.092548*n*o,e[8]=.546274*(n*n-r*r)}}]),t}();_l.prototype.isSphericalHarmonics3=!0;var bl=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new _l,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(v.a)(this,n),(t=e.call(this,void 0,o)).sh=r,t}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.sh.copy(source.sh),this}},{key:"fromJSON",value:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this}},{key:"toJSON",value:function(meta){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,meta);return data.object.sh=this.sh.toArray(),data}}]),n}(Zu);bl.prototype.isLightProbe=!0;var xl=function(){function t(){Object(v.a)(this,t)}return Object(y.a)(t,null,[{key:"decodeText",value:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var s="",e=0,n=t.length;e<n;e++)s+=String.fromCharCode(t[e]);try{return decodeURIComponent(escape(s))}catch(t){return s}}},{key:"extractUrlBase",value:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.slice(0,e+1)}},{key:"resolveURL",value:function(t,path){return"string"!=typeof t||""===t?"":(/^https?:\/\//i.test(path)&&/^\//.test(t)&&(path=path.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:path+t)}}]),t}(),wl=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t;return Object(v.a)(this,n),(t=e.call(this)).type="InstancedBufferGeometry",t.instanceCount=1/0,t}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.instanceCount=source.instanceCount,this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function(){var data=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,this);return data.instanceCount=this.instanceCount,data.isInstancedBufferGeometry=!0,data}}]),n}(Yn);wl.prototype.isInstancedBufferGeometry=!0;var Sl;(function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),r=e.call(this,t),"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),r.options={premultiplyAlpha:"none"},r}return Object(y.a)(n,[{key:"setOptions",value:function(t){return this.options=t,this}},{key:"load",value:function(t,e,n,r){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,l=Gu.get(t);if(void 0!==l)return o.manager.itemStart(t),setTimeout((function(){e&&e(l),o.manager.itemEnd(t)}),0),l;var c={};c.credentials="anonymous"===this.crossOrigin?"same-origin":"include",c.headers=this.requestHeader,fetch(t,c).then((function(t){return t.blob()})).then((function(t){return createImageBitmap(t,Object.assign(o.options,{colorSpaceConversion:"none"}))})).then((function(n){Gu.add(t,n),e&&e(n),o.manager.itemEnd(t)})).catch((function(e){r&&r(e),o.manager.itemError(t),o.manager.itemEnd(t)})),o.manager.itemStart(t)}}]),n})(Yu).prototype.isImageBitmapLoader=!0;var El=function(){return void 0===Sl&&(Sl=new(window.AudioContext||window.webkitAudioContext)),Sl},Ml=function(t){Object(d.a)(n,t);var e=w(n);function n(t){return Object(v.a)(this,n),e.call(this,t)}return Object(y.a)(n,[{key:"load",value:function(t,e,n,r){var o=this,l=new Qu(this.manager);l.setResponseType("arraybuffer"),l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(t,(function(n){try{var l=n.slice(0);El().decodeAudioData(l,(function(t){e(t)}))}catch(e){r?r(e):console.error(e),o.manager.itemError(t)}}),n,r)}}]),n}(Yu),Tl=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Object(v.a)(this,n),o=e.call(this,void 0,l);var c=(new ie).set(t),h=(new ie).set(r),d=new ve(c.r,c.g,c.b),f=new ve(h.r,h.g,h.b),m=Math.sqrt(Math.PI),y=m*Math.sqrt(.75);return o.sh.coefficients[0].copy(d).add(f).multiplyScalar(m),o.sh.coefficients[1].copy(d).sub(f).multiplyScalar(y),o}return n}(bl);Tl.prototype.isHemisphereLightProbe=!0;var Al=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Object(v.a)(this,n),r=e.call(this,void 0,o);var l=(new ie).set(t);return r.sh.coefficients[0].set(l.r,l.g,l.b).multiplyScalar(2*Math.sqrt(Math.PI)),r}return n}(bl);Al.prototype.isAmbientLightProbe=!0;var Dl=function(){function t(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Object(v.a)(this,t),this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return Object(y.a)(t,[{key:"start",value:function(){this.startTime=Pl(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=Pl();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}]),t}();function Pl(){return("undefined"==typeof performance?Date:performance).now()}var Cl=function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this)).type="Audio",r.listener=t,r.context=t.context,r.gain=r.context.createGain(),r.gain.connect(t.getInput()),r.autoplay=!1,r.buffer=null,r.detune=0,r.loop=!1,r.loopStart=0,r.loopEnd=0,r.offset=0,r.duration=void 0,r.playbackRate=1,r.isPlaying=!1,r.hasPlaybackControl=!0,r.source=null,r.sourceType="empty",r._startedAt=0,r._progress=0,r._connected=!1,r.filters=[],r}return Object(y.a)(n,[{key:"getOutput",value:function(){return this.gain}},{key:"setNodeSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}},{key:"setMediaElementSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}},{key:"setMediaStreamSource",value:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}},{key:"setBuffer",value:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var source=this.context.createBufferSource();return source.buffer=this.buffer,source.loop=this.loop,source.loopStart=this.loopStart,source.loopEnd=this.loopEnd,source.onended=this.onEnded.bind(this),source.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=source,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function(){return this.filters}},{key:"setFilters",value:function(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}},{key:"setDetune",value:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function(){return this.detune}},{key:"getFilter",value:function(){return this.getFilters()[0]}},{key:"setFilter",value:function(filter){return this.setFilters(filter?[filter]:[])}},{key:"setPlaybackRate",value:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"onEnded",value:function(){this.isPlaying=!1}},{key:"getLoop",value:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function(t){return this.loopStart=t,this}},{key:"setLoopEnd",value:function(t){return this.loopEnd=t,this}},{key:"getVolume",value:function(){return this.gain.gain.value}},{key:"setVolume",value:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}]),n}(_n),kl=function(){function t(audio){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;Object(v.a)(this,t),this.analyser=audio.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),audio.getOutput().connect(this.analyser)}return Object(y.a)(t,[{key:"getFrequencyData",value:function(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function(){for(var t=0,data=this.getFrequencyData(),e=0;e<data.length;e++)t+=data[e];return t/data.length}}]),t}(),Ol=function(){function t(e,n,r){var o,l,c;switch(Object(v.a)(this,t),this.binding=e,this.valueSize=r,n){case"quaternion":o=this._slerp,l=this._slerpAdditive,c=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*r),this._workIndex=5;break;case"string":case"bool":o=this._select,l=this._select,c=this._setAdditiveIdentityOther,this.buffer=new Array(5*r);break;default:o=this._lerp,l=this._lerpAdditive,c=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*r)}this._mixBufferRegion=o,this._mixBufferRegionAdditive=l,this._setIdentity=c,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return Object(y.a)(t,[{key:"accumulate",value:function(t,e){var n=this.buffer,r=this.valueSize,o=t*r+r,l=this.cumulativeWeight;if(0===l){for(var c=0;c!==r;++c)n[o+c]=n[c];l=e}else{var h=e/(l+=e);this._mixBufferRegion(n,o,0,h,r)}this.cumulativeWeight=l}},{key:"accumulateAdditive",value:function(t){var e=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,r,0,t,n),this.cumulativeWeightAdditive+=t}},{key:"apply",value:function(t){var e=this.valueSize,n=this.buffer,r=t*e+e,o=this.cumulativeWeight,l=this.cumulativeWeightAdditive,c=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,o<1){var h=e*this._origIndex;this._mixBufferRegion(n,r,h,1-o,e)}l>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*e,1,e);for(var d=e,f=e+e;d!==f;++d)if(n[d]!==n[d+e]){c.setValue(n,r);break}}},{key:"saveOriginalState",value:function(){var t=this.binding,e=this.buffer,n=this.valueSize,r=n*this._origIndex;t.getValue(e,r);for(var o=n,l=r;o!==l;++o)e[o]=e[r+o%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)}},{key:"_setAdditiveIdentityNumeric",value:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0}},{key:"_setAdditiveIdentityQuaternion",value:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]}},{key:"_select",value:function(t,e,n,r,o){if(r>=.5)for(var l=0;l!==o;++l)t[e+l]=t[n+l]}},{key:"_slerp",value:function(t,e,n,r){me.slerpFlat(t,e,t,e,t,n,r)}},{key:"_slerpAdditive",value:function(t,e,n,r,o){var l=this._workIndex*o;me.multiplyQuaternionsFlat(t,l,t,e,t,n),me.slerpFlat(t,e,t,e,t,l,r)}},{key:"_lerp",value:function(t,e,n,r,o){for(var s=1-r,l=0;l!==o;++l){var c=e+l;t[c]=t[c]*s+t[n+l]*r}}},{key:"_lerpAdditive",value:function(t,e,n,r,o){for(var l=0;l!==o;++l){var c=e+l;t[c]=t[c]+t[n+l]*r}}}]),t}(),Ll="\\[\\]\\.:\\/",Fl=new RegExp("[\\[\\]\\.:\\/]","g"),Rl="[^\\[\\]\\.:\\/]",Il="[^"+Ll.replace("\\.","")+"]",Nl=/((?:WC+[\/:])*)/.source.replace("WC",Rl),jl=/(WCOD+)?/.source.replace("WCOD",Il),Bl=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Rl),Ul=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Rl),zl=new RegExp("^"+Nl+jl+Bl+Ul+"$"),Vl=["material","materials","bones"],Hl=function(){function t(e,path,n){Object(v.a)(this,t);var r=n||Gl.parseTrackName(path);this._targetGroup=e,this._bindings=e.subscribe_(path,r)}return Object(y.a)(t,[{key:"getValue",value:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(t,e)}},{key:"setValue",value:function(t,e){for(var n=this._bindings,r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(t,e)}},{key:"bind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}},{key:"unbind",value:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}]),t}(),Gl=function(){function t(e,path,n){Object(v.a)(this,t),this.path=path,this.parsedPath=n||t.parseTrackName(path),this.node=t.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return Object(y.a)(t,[{key:"_getValue_unavailable",value:function(){}},{key:"_setValue_unavailable",value:function(){}},{key:"_getValue_direct",value:function(t,e){t[e]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function(t,e){for(var source=this.resolvedProperty,n=0,r=source.length;n!==r;++n)t[e++]=source[n]}},{key:"_getValue_arrayElement",value:function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function(t,e){this.resolvedProperty.toArray(t,e)}},{key:"_setValue_direct",value:function(t,e){this.targetObject[this.propertyName]=t[e]}},{key:"_setValue_direct_setNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++]}},{key:"_setValue_array_setNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function(t,e){for(var n=this.resolvedProperty,r=0,o=n.length;r!==o;++r)n[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function(t,e){this.resolvedProperty.fromArray(t,e)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function(t,e){this.bind(),this.getValue(t,e)}},{key:"_setValue_unbound",value:function(t,e){this.bind(),this.setValue(t,e)}},{key:"bind",value:function(){var e=this.node,n=this.parsedPath,r=n.objectName,o=n.propertyName,l=n.propertyIndex;if(e||(e=t.findNode(this.rootNode,n.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(r){var c=n.objectIndex;switch(r){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var h=0;h<e.length;h++)if(e[h].name===c){c=h;break}break;default:if(void 0===e[r])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[r]}if(void 0!==c){if(void 0===e[c])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[c]}}var d=e[o];if(void 0!==d){var f=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?f=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(f=this.Versioning.MatrixWorldNeedsUpdate);var m=this.BindingType.Direct;if(void 0!==l){if("morphTargetInfluences"===o){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[l]&&(l=e.morphTargetDictionary[l])}m=this.BindingType.ArrayElement,this.resolvedProperty=d,this.propertyIndex=l}else void 0!==d.fromArray&&void 0!==d.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=d):Array.isArray(d)?(m=this.BindingType.EntireArray,this.resolvedProperty=d):this.propertyName=o;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][f]}else{var v=n.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+v+"."+o+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function(e,path,n){return e&&e.isAnimationObjectGroup?new t.Composite(e,path,n):new t(e,path,n)}},{key:"sanitizeNodeName",value:function(t){return t.replace(/\s/g,"_").replace(Fl,"")}},{key:"parseTrackName",value:function(t){var e=zl.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){var o=n.nodeName.substring(r+1);-1!==Vl.indexOf(o)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=o)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}},{key:"findNode",value:function(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var r=function t(n){for(var r=0;r<n.length;r++){var o=n[r];if(o.name===e||o.uuid===e)return o;var l=t(o.children);if(l)return l}return null}(t.children);if(r)return r}return null}}]),t}();Gl.Composite=Hl,Gl.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gl.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gl.prototype.GetterByBindingType=[Gl.prototype._getValue_direct,Gl.prototype._getValue_array,Gl.prototype._getValue_arrayElement,Gl.prototype._getValue_toArray],Gl.prototype.SetterByBindingTypeAndVersioning=[[Gl.prototype._setValue_direct,Gl.prototype._setValue_direct_setNeedsUpdate,Gl.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_array,Gl.prototype._setValue_array_setNeedsUpdate,Gl.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_arrayElement,Gl.prototype._setValue_arrayElement_setNeedsUpdate,Gl.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gl.prototype._setValue_fromArray,Gl.prototype._setValue_fromArray_setNeedsUpdate,Gl.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var Wl=function(){function t(){Object(v.a)(this,t),this.uuid=zt(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}return Object(y.a)(t,[{key:"add",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length,c=void 0,h=t.length,d=this.nCachedObjects_,f=0,m=arguments.length;f!==m;++f){var object=arguments[f],v=object.uuid,y=e[v];if(void 0===y){y=h++,e[v]=y,t.push(object);for(var _=0,x=l;_!==x;++_)o[_].push(new Gl(object,n[_],r[_]))}else if(y<d){c=t[y];var w=--d,S=t[w];e[S.uuid]=y,t[y]=S,e[v]=w,t[w]=object;for(var E=0,M=l;E!==M;++E){var T=o[E],A=T[w],D=T[y];T[y]=A,void 0===D&&(D=new Gl(object,n[E],r[E])),T[w]=D}}else t[y]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=d}},{key:"remove",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,o=this.nCachedObjects_,l=0,c=arguments.length;l!==c;++l){var object=arguments[l],h=object.uuid,d=e[h];if(void 0!==d&&d>=o){var f=o++,m=t[f];e[m.uuid]=d,t[d]=m,e[h]=f,t[f]=object;for(var v=0,y=r;v!==y;++v){var _=n[v],x=_[f],w=_[d];_[d]=x,_[f]=w}}}this.nCachedObjects_=o}},{key:"uncache",value:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,r=n.length,o=this.nCachedObjects_,l=t.length,c=0,h=arguments.length;c!==h;++c){var object=arguments[c],d=object.uuid,f=e[d];if(void 0!==f)if(delete e[d],f<o){var m=--o,v=t[m],y=--l,_=t[y];e[v.uuid]=f,t[f]=v,e[_.uuid]=m,t[m]=_,t.pop();for(var x=0,w=r;x!==w;++x){var S=n[x],E=S[m],M=S[y];S[f]=E,S[m]=M,S.pop()}}else{var T=--l,A=t[T];T>0&&(e[A.uuid]=f),t[f]=A,t.pop();for(var D=0,P=r;D!==P;++D){var C=n[D];C[f]=C[T],C.pop()}}}this.nCachedObjects_=o}},{key:"subscribe_",value:function(path,t){var e=this._bindingsIndicesByPath,n=e[path],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,l=this._parsedPaths,c=this._objects,h=c.length,d=this.nCachedObjects_,f=new Array(h);n=r.length,e[path]=n,o.push(path),l.push(t),r.push(f);for(var m=d,v=c.length;m!==v;++m){var object=c[m];f[m]=new Gl(object,path,t)}return f}},{key:"unsubscribe_",value:function(path){var t=this._bindingsIndicesByPath,e=t[path];if(void 0!==e){var n=this._paths,r=this._parsedPaths,o=this._bindings,l=o.length-1,c=o[l];t[path[l]]=e,o[e]=c,o.pop(),r[e]=r[l],r.pop(),n[e]=n[l],n.pop()}}}]),t}();Wl.prototype.isAnimationObjectGroup=!0;var Xl=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n.blendMode;Object(v.a)(this,t),this._mixer=e,this._clip=n,this._localRoot=r,this.blendMode=o;for(var l=n.tracks,c=l.length,h=new Array(c),d={endingStart:Mt,endingEnd:Mt},f=0;f!==c;++f){var m=l[f].createInterpolant(null);h[f]=m,m.settings=d}this._interpolantSettings=d,this._interpolants=h,this._propertyBindings=new Array(c),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return Object(y.a)(t,[{key:"play",value:function(){return this._mixer._activateAction(this),this}},{key:"stop",value:function(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function(time){return this._startTime=time,this}},{key:"setLoop",value:function(t,e){return this.loop=t,this.repetitions=e,this}},{key:"setEffectiveWeight",value:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}},{key:"getEffectiveWeight",value:function(){return this._effectiveWeight}},{key:"fadeIn",value:function(t){return this._scheduleFading(t,0,1)}},{key:"fadeOut",value:function(t){return this._scheduleFading(t,1,0)}},{key:"crossFadeFrom",value:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var r=this._clip.duration,o=t._clip.duration,l=o/r,c=r/o;t.warp(1,l,e),this.warp(c,1,e)}return this}},{key:"crossFadeTo",value:function(t,e,n){return t.crossFadeFrom(this,e,n)}},{key:"stopFading",value:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"setEffectiveTimeScale",value:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function(){return this._effectiveTimeScale}},{key:"setDuration",value:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}},{key:"syncWith",value:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}},{key:"halt",value:function(t){return this.warp(this._effectiveTimeScale,0,t)}},{key:"warp",value:function(t,e,n){var r=this._mixer,o=r.time,l=this.timeScale,c=this._timeScaleInterpolant;null===c&&(c=r._lendControlInterpolant(),this._timeScaleInterpolant=c);var h=c.parameterPositions,d=c.sampleValues;return h[0]=o,h[1]=o+n,d[0]=t/l,d[1]=e/l,this}},{key:"stopWarping",value:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}},{key:"getMixer",value:function(){return this._mixer}},{key:"getClip",value:function(){return this._clip}},{key:"getRoot",value:function(){return this._localRoot||this._mixer._root}},{key:"_update",value:function(time,t,e,n){if(this.enabled){var r=this._startTime;if(null!==r){var o=(time-r)*e;if(o<0||0===e)return;this._startTime=null,t=e*o}t*=this._updateTimeScale(time);var l=this._updateTime(t),c=this._updateWeight(time);if(c>0){var h=this._interpolants,d=this._propertyBindings;if(this.blendMode===Pt)for(var f=0,m=h.length;f!==m;++f)h[f].evaluate(l),d[f].accumulateAdditive(c);else for(var v=0,y=h.length;v!==y;++v)h[v].evaluate(l),d[v].accumulate(n,c)}}else this._updateWeight(time)}},{key:"_updateWeight",value:function(time){var t=0;if(this.enabled){t=this.weight;var e=this._weightInterpolant;if(null!==e){var n=e.evaluate(time)[0];t*=n,time>e.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t}},{key:"_updateTimeScale",value:function(time){var t=0;if(!this.paused){t=this.timeScale;var e=this._timeScaleInterpolant;if(null!==e)t*=e.evaluate(time)[0],time>e.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t}},{key:"_updateTime",value:function(t){var e=this._clip.duration,n=this.loop,time=this.time+t,r=this._loopCount,o=2202===n;if(0===t)return-1===r?time:o&&1==(1&r)?e-time:time;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(time>=e)time=e;else{if(!(time<0)){this.time=time;break t}time=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),time>=e||time<0){var l=Math.floor(time/e);time-=e*l,r+=Math.abs(l);var c=this.repetitions-r;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,time=t>0?e:0,this.time=time,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===c){var h=t<0;this._setEndings(h,!h,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=time,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=time;if(o&&1==(1&r))return e-time}return time}},{key:"_setEndings",value:function(t,e,n){var r=this._interpolantSettings;n?(r.endingStart=Tt,r.endingEnd=Tt):(r.endingStart=t?this.zeroSlopeAtStart?Tt:Mt:At,r.endingEnd=e?this.zeroSlopeAtEnd?Tt:Mt:At)}},{key:"_scheduleFading",value:function(t,e,n){var r=this._mixer,o=r.time,l=this._weightInterpolant;null===l&&(l=r._lendControlInterpolant(),this._weightInterpolant=l);var c=l.parameterPositions,h=l.sampleValues;return c[0]=o,h[0]=e,c[1]=o+t,h[1]=n,this}}]),t}();(function(t){Object(d.a)(n,t);var e=w(n);function n(t){var r;return Object(v.a)(this,n),(r=e.call(this))._root=t,r._initMemoryManager(),r._accuIndex=0,r.time=0,r.timeScale=1,r}return Object(y.a)(n,[{key:"_bindAction",value:function(t,e){var n=t._localRoot||this._root,r=t._clip.tracks,o=r.length,l=t._propertyBindings,c=t._interpolants,h=n.uuid,d=this._bindingsByRootAndName,f=d[h];void 0===f&&(f={},d[h]=f);for(var m=0;m!==o;++m){var track=r[m],v=track.name,y=f[v];if(void 0!==y)++y.referenceCount,l[m]=y;else{if(void 0!==(y=l[m])){null===y._cacheIndex&&(++y.referenceCount,this._addInactiveBinding(y,h,v));continue}var path=e&&e._propertyBindings[m].binding.parsedPath;++(y=new Ol(Gl.create(n,v,path),track.ValueTypeName,track.getValueSize())).referenceCount,this._addInactiveBinding(y,h,v),l[m]=y}c[m].resultBuffer=y.buffer}}},{key:"_activateAction",value:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,r=this._actionsByClip[n];this._bindAction(t,r&&r.knownActions[0]),this._addInactiveAction(t,n,e)}for(var o=t._propertyBindings,l=0,c=o.length;l!==c;++l){var h=o[l];0==h.useCount++&&(this._lendBinding(h),h.saveOriginalState())}this._lendAction(t)}}},{key:"_deactivateAction",value:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var o=e[n];0==--o.useCount&&(o.restoreOriginalState(),this._takeBackBinding(o))}this._takeBackAction(t)}}},{key:"_initMemoryManager",value:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions}},{key:"_addInactiveAction",value:function(t,e,n){var r=this._actions,o=this._actionsByClip,l=o[e];if(void 0===l)l={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,o[e]=l;else{var c=l.knownActions;t._byClipCacheIndex=c.length,c.push(t)}t._cacheIndex=r.length,r.push(t),l.actionByRoot[n]=t}},{key:"_removeInactiveAction",value:function(t){var e=this._actions,n=e[e.length-1],r=t._cacheIndex;n._cacheIndex=r,e[r]=n,e.pop(),t._cacheIndex=null;var o=t._clip.uuid,l=this._actionsByClip,c=l[o],h=c.knownActions,d=h[h.length-1],f=t._byClipCacheIndex;d._byClipCacheIndex=f,h[f]=d,h.pop(),t._byClipCacheIndex=null,delete c.actionByRoot[(t._localRoot||this._root).uuid],0===h.length&&delete l[o],this._removeInactiveBindingsForAction(t)}},{key:"_removeInactiveBindingsForAction",value:function(t){for(var e=t._propertyBindings,n=0,r=e.length;n!==r;++n){var o=e[n];0==--o.referenceCount&&this._removeInactiveBinding(o)}}},{key:"_lendAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=this._nActiveActions++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_takeBackAction",value:function(t){var e=this._actions,n=t._cacheIndex,r=--this._nActiveActions,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_addInactiveBinding",value:function(t,e,n){var r=this._bindingsByRootAndName,o=this._bindings,l=r[e];void 0===l&&(l={},r[e]=l),l[n]=t,t._cacheIndex=o.length,o.push(t)}},{key:"_removeInactiveBinding",value:function(t){var e=this._bindings,n=t.binding,r=n.rootNode.uuid,o=n.path,l=this._bindingsByRootAndName,c=l[r],h=e[e.length-1],d=t._cacheIndex;h._cacheIndex=d,e[d]=h,e.pop(),delete c[o],0===Object.keys(c).length&&delete l[r]}},{key:"_lendBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=this._nActiveBindings++,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_takeBackBinding",value:function(t){var e=this._bindings,n=t._cacheIndex,r=--this._nActiveBindings,o=e[r];t._cacheIndex=r,e[r]=t,o._cacheIndex=n,e[n]=o}},{key:"_lendControlInterpolant",value:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Ou(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n}},{key:"_takeBackControlInterpolant",value:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,r=--this._nActiveControlInterpolants,o=e[r];t.__cacheIndex=r,e[r]=t,o.__cacheIndex=n,e[n]=o}},{key:"clipAction",value:function(t,e,n){var r=e||this._root,o=r.uuid,l="string"==typeof t?Vu.findByName(r,t):t,c=null!==l?l.uuid:t,h=this._actionsByClip[c],d=null;if(void 0===n&&(n=null!==l?l.blendMode:Dt),void 0!==h){var f=h.actionByRoot[o];if(void 0!==f&&f.blendMode===n)return f;d=h.knownActions[0],null===l&&(l=d._clip)}if(null===l)return null;var m=new Xl(this,l,e,n);return this._bindAction(m,d),this._addInactiveAction(m,c,o),m}},{key:"existingAction",value:function(t,e){var n=e||this._root,r=n.uuid,o="string"==typeof t?Vu.findByName(n,t):t,l=o?o.uuid:t,c=this._actionsByClip[l];return void 0!==c&&c.actionByRoot[r]||null}},{key:"stopAllAction",value:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this}},{key:"update",value:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,time=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,l=0;l!==n;++l){e[l]._update(time,t,r,o)}for(var c=this._bindings,h=this._nActiveBindings,d=0;d!==h;++d)c[d].apply(o);return this}},{key:"setTime",value:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)}},{key:"getRoot",value:function(){return this._root}},{key:"uncacheClip",value:function(t){var e=this._actions,n=t.uuid,r=this._actionsByClip,o=r[n];if(void 0!==o){for(var l=o.knownActions,c=0,h=l.length;c!==h;++c){var d=l[c];this._deactivateAction(d);var f=d._cacheIndex,m=e[e.length-1];d._cacheIndex=null,d._byClipCacheIndex=null,m._cacheIndex=f,e[f]=m,e.pop(),this._removeInactiveBindingsForAction(d)}delete r[n]}}},{key:"uncacheRoot",value:function(t){var e=t.uuid,n=this._actionsByClip;for(var r in n){var o=n[r].actionByRoot[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var l=this._bindingsByRootAndName[e];if(void 0!==l)for(var c in l){var h=l[c];h.restoreOriginalState(),this._removeInactiveBinding(h)}}},{key:"uncacheAction",value:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}]),n})(Nt).prototype._controlInterpolantsResultBuffer=new Float32Array(1);var Yl=function(){function t(e){Object(v.a)(this,t),"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}return Object(y.a)(t,[{key:"clone",value:function(){return new t(void 0===this.value.clone?this.value:this.value.clone())}}]),t}(),ql=function(t){Object(d.a)(n,t);var e=w(n);function n(t,r){var o,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object(v.a)(this,n),(o=e.call(this,t,r)).meshPerAttribute=l,o}return Object(y.a)(n,[{key:"copy",value:function(source){return Object(c.a)(Object(m.a)(n.prototype),"copy",this).call(this,source),this.meshPerAttribute=source.meshPerAttribute,this}},{key:"clone",value:function(data){var t=Object(c.a)(Object(m.a)(n.prototype),"clone",this).call(this,data);return t.meshPerAttribute=this.meshPerAttribute,t}},{key:"toJSON",value:function(data){var t=Object(c.a)(Object(m.a)(n.prototype),"toJSON",this).call(this,data);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}]),n}(bo);ql.prototype.isInstancedInterleavedBuffer=!0,function(){function t(e,n,r,o,l){Object(v.a)(this,t),this.buffer=e,this.type=n,this.itemSize=r,this.elementSize=o,this.count=l,this.version=0}return Object(y.a)(t,[{key:"needsUpdate",set:function(t){!0===t&&this.version++}},{key:"setBuffer",value:function(t){return this.buffer=t,this}},{key:"setType",value:function(t,e){return this.type=t,this.elementSize=e,this}},{key:"setItemSize",value:function(t){return this.itemSize=t,this}},{key:"setCount",value:function(t){return this.count=t,this}}]),t}().prototype.isGLBufferAttribute=!0;var Ql=new Yt,$l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yt(1/0,1/0),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Yt(-1/0,-1/0);Object(v.a)(this,t),this.min=e,this.max=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.min.copy(t),this.max.copy(e),this}},{key:"setFromPoints",value:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}},{key:"setFromCenterAndSize",value:function(t,e){var n=Ql.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}},{key:"clone",value:function(){return(new this.constructor).copy(this)}},{key:"copy",value:function(t){return this.min.copy(t.min),this.max.copy(t.max),this}},{key:"makeEmpty",value:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function(t){return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function(t){return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function(t){return this.min.min(t),this.max.max(t),this}},{key:"expandByVector",value:function(t){return this.min.sub(t),this.max.add(t),this}},{key:"expandByScalar",value:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this}},{key:"containsPoint",value:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}},{key:"containsBox",value:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}},{key:"getParameter",value:function(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}},{key:"clampPoint",value:function(t,e){return e.copy(t).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function(t){return Ql.copy(t).clamp(this.min,this.max).sub(t).length()}},{key:"intersect",value:function(t){return this.min.max(t.min),this.max.min(t.max),this}},{key:"union",value:function(t){return this.min.min(t.min),this.max.max(t.max),this}},{key:"translate",value:function(t){return this.min.add(t),this.max.add(t),this}},{key:"equals",value:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}]),t}();$l.prototype.isBox2=!0;var Kl=new ve,Jl=new ve,Zl=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ve,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ve;Object(v.a)(this,t),this.start=e,this.end=n}return Object(y.a)(t,[{key:"set",value:function(t,e){return this.start.copy(t),this.end.copy(e),this}},{key:"copy",value:function(line){return this.start.copy(line.start),this.end.copy(line.end),this}},{key:"getCenter",value:function(t){return t.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function(t){return t.subVectors(this.end,this.start)}},{key:"distanceSq",value:function(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function(){return this.start.distanceTo(this.end)}},{key:"at",value:function(t,e){return this.delta(e).multiplyScalar(t).add(this.start)}},{key:"closestPointToPointParameter",value:function(t,e){Kl.subVectors(t,this.start),Jl.subVectors(this.end,this.start);var n=Jl.dot(Jl),r=Jl.dot(Kl)/n;return e&&(r=Vt(r,0,1)),r}},{key:"closestPointToPoint",value:function(t,e,n){var r=this.closestPointToPointParameter(t,e);return this.delta(n).multiplyScalar(r).add(this.start)}},{key:"applyMatrix4",value:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}},{key:"equals",value:function(line){return line.start.equals(this.start)&&line.end.equals(this.end)}},{key:"clone",value:function(){return(new this.constructor).copy(this)}}]),t}(),tc=new ve,ec=new Ye,nc=new Ye,rc=function(t){Object(d.a)(n,t);var e=w(n);function n(object){var t;Object(v.a)(this,n);for(var r=ic(object),o=new Yn,l=[],c=[],h=new ie(0,0,1),d=new ie(0,1,0),f=0;f<r.length;f++){var m=r[f];m.parent&&m.parent.isBone&&(l.push(0,0,0),l.push(0,0,0),c.push(h.r,h.g,h.b),c.push(d.r,d.g,d.b))}o.setAttribute("position",new Bn(l,3)),o.setAttribute("color",new Bn(c,3));var y=new Zo({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(t=e.call(this,o,y)).type="SkeletonHelper",t.isSkeletonHelper=!0,t.root=object,t.bones=r,t.matrix=object.matrixWorld,t.matrixAutoUpdate=!1,t}return Object(y.a)(n,[{key:"updateMatrixWorld",value:function(t){var e=this.bones,r=this.geometry,o=r.getAttribute("position");nc.copy(this.root.matrixWorld).invert();for(var l=0,h=0;l<e.length;l++){var d=e[l];d.parent&&d.parent.isBone&&(ec.multiplyMatrices(nc,d.matrixWorld),tc.setFromMatrixPosition(ec),o.setXYZ(h,tc.x,tc.y,tc.z),ec.multiplyMatrices(nc,d.parent.matrixWorld),tc.setFromMatrixPosition(ec),o.setXYZ(h+1,tc.x,tc.y,tc.z),h+=2)}r.getAttribute("position").needsUpdate=!0,Object(c.a)(Object(m.a)(n.prototype),"updateMatrixWorld",this).call(this,t)}}]),n}(us);function ic(object){var t=[];!0===object.isBone&&t.push(object);for(var e=0;e<object.children.length;e++)t.push.apply(t,ic(object.children[e]));return t}var ac=function(t){Object(d.a)(n,t);var e=w(n);function n(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;Object(v.a)(this,n),l=new ie(l),c=new ie(c);for(var h=o/2,d=r/o,f=r/2,m=[],y=[],_=0,x=0,w=-f;_<=o;_++,w+=d){m.push(-f,0,w,f,0,w),m.push(w,0,-f,w,0,f);var S=_===h?l:c;S.toArray(y,x),x+=3,S.toArray(y,x),x+=3,S.toArray(y,x),x+=3,S.toArray(y,x),x+=3}var E=new Yn;E.setAttribute("position",new Bn(m,3)),E.setAttribute("color",new Bn(y,3));var M=new Zo({vertexColors:!0,toneMapped:!1});return(t=e.call(this,E,M)).type="GridHelper",t}return n}(us);var oc=new Float32Array(1);new Int32Array(oc.buffer);ys.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(ys.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Bs.prototype.fromPoints=function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)},ac.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},rc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Yu.prototype.extractUrlBase=function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),xl.extractUrlBase(t)},Yu.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},$l.prototype.center=function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},$l.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},$l.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},$l.prototype.size=function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)},_e.prototype.center=function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},_e.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},_e.prototype.isIntersectionBox=function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},_e.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},_e.prototype.size=function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)},rn.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},je.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Lr.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Zl.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},qt.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},qt.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},qt.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},qt.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},qt.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},qt.prototype.getInverse=function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Ye.prototype.extractPosition=function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},Ye.prototype.flattenToArrayOffset=function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},Ye.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new ve).setFromMatrixColumn(this,3)},Ye.prototype.setRotationFromQuaternion=function(q){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(q)},Ye.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ye.prototype.multiplyVector3=function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ye.prototype.multiplyVector4=function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ye.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ye.prototype.rotateAxis=function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},Ye.prototype.crossVector=function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ye.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ye.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ye.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ye.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ye.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ye.prototype.applyToBufferAttribute=function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},Ye.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ye.prototype.makeFrustum=function(t,e,n,r,o,l){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,r,n,o,l)},Ye.prototype.getInverse=function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()},Cr.prototype.isIntersectionLine=function(line){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(line)},me.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},me.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Xe.prototype.isIntersectionBox=function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},Xe.prototype.isIntersectionPlane=function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},Xe.prototype.isIntersectionSphere=function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},Cn.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},Cn.prototype.barycoordFromPoint=function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},Cn.prototype.midpoint=function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},Cn.prototypenormal=function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},Cn.prototype.plane=function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)},Cn.barycoordFromPoint=function(t,a,b,e,n){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Cn.getBarycoord(t,a,b,e,n)},Cn.normal=function(a,b,t,e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Cn.getNormal(a,b,t,e)},Us.prototype.extractAllPoints=function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},Us.prototype.extrude=function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new mu(this,t)},Us.prototype.makeGeometry=function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new gu(this,t)},Yt.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},Yt.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},Yt.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ve.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},ve.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},ve.prototype.getPositionFromMatrix=function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},ve.prototype.getScaleFromMatrix=function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},ve.prototype.getColumnFromMatrix=function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},ve.prototype.applyProjection=function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},ve.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},ve.prototype.distanceToManhattan=function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},ve.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ce.prototype.fromAttribute=function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},ce.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},_n.prototype.getChildByName=function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},_n.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},_n.prototype.translate=function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},_n.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},_n.prototype.applyMatrix=function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(_n.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),pr.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(pr.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Go.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},wr.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Zu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(In.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Ft},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Ft)}}}),In.prototype.setDynamic=function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ft:Lt),this},In.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},In.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Yn.prototype.addIndex=function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},Yn.prototype.addAttribute=function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new In(arguments[1],arguments[2])))},Yn.prototype.addDrawCall=function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},Yn.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Yn.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Yn.prototype.removeAttribute=function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},Yn.prototype.applyMatrix=function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)},Object.defineProperties(Yn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),bo.prototype.setDynamic=function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Ft:Lt),this},bo.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},mu.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},mu.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},mu.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},_o.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},Yl.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(On.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new ie}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}},vertexTangents:{get:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties(_r.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),mo.prototype.clearTarget=function(t,e,n,r){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,r)},mo.prototype.animate=function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},mo.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},mo.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},mo.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},mo.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},mo.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},mo.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},mo.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},mo.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},mo.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},mo.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},mo.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},mo.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},mo.prototype.enableScissorTest=function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},mo.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},mo.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},mo.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},mo.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},mo.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},mo.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},mo.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},mo.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},mo.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},mo.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(mo.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?kt:Ct}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(no.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(he.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Cl.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Ml).load(t,(function(t){e.setBuffer(t)})),this},kl.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Er.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},Er.prototype.clear=function(t,e,n,r){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,r)},ae.crossOrigin=void 0,ae.loadTexture=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var o=new Ju;o.setCrossOrigin(this.crossOrigin);var l=o.load(t,n,void 0,r);return e&&(l.mapping=e),l},ae.loadTextureCube=function(t,e,n,r){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var o=new Ku;o.setCrossOrigin(this.crossOrigin);var l=o.load(t,n,void 0,r);return e&&(l.mapping=e),l},ae.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},ae.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:S}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=S)},310:function(t,e,n){(function(t){t.installComponents=function(component,t){var n="function"==typeof component.exports?component.exports.extendOptions:component.options;for(var i in"function"==typeof component.exports&&(n.components=component.exports.options.components),n.components=n.components||{},t)n.components[i]=n.components[i]||t[i];n.functional&&function(component,t){if(component.exports[e])return;component.exports[e]=!0;var n=component.exports.render;component.exports.render=function(e,r){return n(e,Object.assign({},r,{_c:function(e,a,b){return r._c(t[e]||e,a,b)}}))}}(component,n.components)};var e="_functionalComponents"}).call(this,n(84))},311:function(t,e,n){"use strict";n.r(e),function(t){n(61),n(68),n(30),n(69),n(73);var e=n(49),r=n(15),o=(n(164),n(320),n(327),n(329),n(46),n(36),n(12),n(28),n(37),n(31),n(75),n(101),n(55),n(67),n(29),n(44),n(45),n(90),n(11)),l=n(275),c=n(208),h=n(9),d=n(81),f=n(288),m=n(177),v=n(289);function y(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return _(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}Object(v.a)(),o.a.__nuxt__fetch__mixin__||(o.a.mixin(f.a),o.a.__nuxt__fetch__mixin__=!0),o.a.component(m.a.name,m.a),o.a.component("NLink",m.a),t.fetch||(t.fetch=l.a);var x,w,S=[],E=window.__NUXT__||{},M=E.config||{};M._app&&(n.p=Object(h.v)(M._app.cdnURL,M._app.assetsPath)),Object.assign(o.a.config,{silent:!0,performance:!1});var T=o.a.config.errorHandler||console.error;function A(t,e,n){for(var r=function(component){var t=function(component,t){if(!component||!component.options||!component.options[t])return{};var option=component.options[t];if("function"==typeof option){for(var e=arguments.length,n=new Array(e>2?e-2:0),r=2;r<e;r++)n[r-2]=arguments[r];return option.apply(void 0,n)}return option}(component,"transition",e,n)||{};return"string"==typeof t?{name:t}:t},o=n?Object(h.h)(n):[],l=Math.max(t.length,o.length),c=[],d=function(i){var e=Object.assign({},r(t[i])),n=Object.assign({},r(o[i]));Object.keys(e).filter((function(t){return void 0!==e[t]&&!t.toLowerCase().includes("leave")})).forEach((function(t){n[t]=e[t]})),c.push(n)},i=0;i<l;i++)d(i);return c}function D(t,e,n){return P.apply(this,arguments)}function P(){return(P=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r){var o,l,c,d,f=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._routeChanged=Boolean(x.nuxt.err)||n.name!==e.name,this._paramChanged=!this._routeChanged&&n.path!==e.path,this._queryChanged=!this._paramChanged&&n.fullPath!==e.fullPath,this._diffQuery=this._queryChanged?Object(h.j)(e.query,n.query):[],(this._routeChanged||this._paramChanged)&&this.$loading.start&&!this.$loading.manual&&this.$loading.start(),t.prev=5,!this._queryChanged){t.next=12;break}return t.next=9,Object(h.r)(e,(function(t,e){return{Component:t,instance:e}}));case 9:o=t.sent,o.some((function(t){var r=t.Component,o=t.instance,l=r.options.watchQuery;return!0===l||(Array.isArray(l)?l.some((function(t){return f._diffQuery[t]})):"function"==typeof l&&l.apply(o,[e.query,n.query]))}))&&this.$loading.start&&!this.$loading.manual&&this.$loading.start();case 12:r(),t.next=26;break;case 15:if(t.prev=15,t.t0=t.catch(5),l=t.t0||{},c=l.statusCode||l.status||l.response&&l.response.status||500,d=l.message||"",!/^Loading( CSS)? chunk (\d)+ failed\./.test(d)){t.next=23;break}return window.location.reload(!0),t.abrupt("return");case 23:this.error({statusCode:c,message:d}),this.$nuxt.$emit("routeChanged",e,n,l),r();case 26:case"end":return t.stop()}}),t,this,[[5,15]])})))).apply(this,arguments)}function C(t,e){return E.serverRendered&&e&&Object(h.b)(t,e),t._Ctor=t,t}function k(t){return Object(h.e)(t,function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r,o,l){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof e||e.options){t.next=4;break}return t.next=3,e();case 3:e=t.sent;case 4:return c=C(Object(h.s)(e),E.data?E.data[l]:null),r.components[o]=c,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r,o,l){return t.apply(this,arguments)}}())}function O(t,e,n){var r=this,o=[],l=!1;if(void 0!==n&&(o=[],(n=Object(h.s)(n)).options.middleware&&(o=o.concat(n.options.middleware)),t.forEach((function(t){t.options.middleware&&(o=o.concat(t.options.middleware))}))),o=o.map((function(t){return"function"==typeof t?t:("function"!=typeof c.a[t]&&(l=!0,r.error({statusCode:500,message:"Unknown middleware "+t})),c.a[t])})),!l)return Object(h.o)(o,e)}function L(t,e,n){return F.apply(this,arguments)}function F(){return F=Object(r.a)(regeneratorRuntime.mark((function t(e,n,o){var l,c,f,m,v,_,w,E,M,T,D,P,C,k,L,F,R=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){t.next=2;break}return t.abrupt("return",o());case 2:return l=!1,e===n?(S=[],l=!0):(c=[],S=Object(h.h)(n,c).map((function(t,i){return Object(h.c)(n.matched[c[i]].path)(n.params)}))),f=!1,m=function(path){n.path===path.path&&R.$loading.finish&&R.$loading.finish(),n.path!==path.path&&R.$loading.pause&&R.$loading.pause(),f||(f=!0,o(path))},t.next=8,Object(h.t)(x,{route:e,from:n,next:m.bind(this)});case 8:if(this._dateLastError=x.nuxt.dateErr,this._hadError=Boolean(x.nuxt.err),v=[],(_=Object(h.h)(e,v)).length){t.next=27;break}return t.next=15,O.call(this,_,x.context);case 15:if(!f){t.next=17;break}return t.abrupt("return");case 17:return w=(d.a.options||d.a).layout,t.next=20,this.loadLayout("function"==typeof w?w.call(d.a,x.context):w);case 20:return E=t.sent,t.next=23,O.call(this,_,x.context,E);case 23:if(!f){t.next=25;break}return t.abrupt("return");case 25:return x.context.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",o());case 27:return _.forEach((function(t){t._Ctor&&t._Ctor.options&&(t.options.asyncData=t._Ctor.options.asyncData,t.options.fetch=t._Ctor.options.fetch)})),this.setTransitions(A(_,e,n)),t.prev=29,t.next=32,O.call(this,_,x.context);case 32:if(!f){t.next=34;break}return t.abrupt("return");case 34:if(!x.context._errored){t.next=36;break}return t.abrupt("return",o());case 36:return"function"==typeof(M=_[0].options.layout)&&(M=M(x.context)),t.next=40,this.loadLayout(M);case 40:return M=t.sent,t.next=43,O.call(this,_,x.context,M);case 43:if(!f){t.next=45;break}return t.abrupt("return");case 45:if(!x.context._errored){t.next=47;break}return t.abrupt("return",o());case 47:T=!0,t.prev=48,D=y(_),t.prev=50,D.s();case 52:if((P=D.n()).done){t.next=63;break}if("function"==typeof(C=P.value).options.validate){t.next=56;break}return t.abrupt("continue",61);case 56:return t.next=58,C.options.validate(x.context);case 58:if(T=t.sent){t.next=61;break}return t.abrupt("break",63);case 61:t.next=52;break;case 63:t.next=68;break;case 65:t.prev=65,t.t0=t.catch(50),D.e(t.t0);case 68:return t.prev=68,D.f(),t.finish(68);case 71:t.next=77;break;case 73:return t.prev=73,t.t1=t.catch(48),this.error({statusCode:t.t1.statusCode||"500",message:t.t1.message}),t.abrupt("return",o());case 77:if(T){t.next=80;break}return this.error({statusCode:404,message:"This page could not be found"}),t.abrupt("return",o());case 80:return t.next=82,Promise.all(_.map(function(){var t=Object(r.a)(regeneratorRuntime.mark((function t(r,i){var o,c,d,f,m,y,_,w,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r._path=Object(h.c)(e.matched[v[i]].path)(e.params),r._dataRefresh=!1,o=r._path!==S[i],R._routeChanged&&o?r._dataRefresh=!0:R._paramChanged&&o?(c=r.options.watchParam,r._dataRefresh=!1!==c):R._queryChanged&&(!0===(d=r.options.watchQuery)?r._dataRefresh=!0:Array.isArray(d)?r._dataRefresh=d.some((function(t){return R._diffQuery[t]})):"function"==typeof d&&(k||(k=Object(h.i)(e)),r._dataRefresh=d.apply(k[i],[e.query,n.query]))),R._hadError||!R._isMounted||r._dataRefresh){t.next=6;break}return t.abrupt("return");case 6:return f=[],m=r.options.asyncData&&"function"==typeof r.options.asyncData,y=Boolean(r.options.fetch)&&r.options.fetch.length,_=m&&y?30:45,m&&((w=R.isPreview||l?Object(h.q)(r.options.asyncData,x.context):R.fetchPayload(e.path).then((function(t){return t.data[i]})).catch((function(t){return Object(h.q)(r.options.asyncData,x.context)}))).then((function(t){Object(h.b)(r,t),R.$loading.increase&&R.$loading.increase(_)})),f.push(w)),R.isPreview||l||f.push(R.fetchPayload(e.path).then((function(t){t.mutations.forEach((function(t){R.$store.commit(t[0],t[1])}))})).catch((function(t){return null}))),R.$loading.manual=!1===r.options.loading,R.isPreview||l||f.push(R.fetchPayload(e.path).catch((function(t){return null}))),y&&((p=r.options.fetch(x.context))&&(p instanceof Promise||"function"==typeof p.then)||(p=Promise.resolve(p)),p.then((function(t){R.$loading.increase&&R.$loading.increase(_)})),f.push(p)),t.abrupt("return",Promise.all(f));case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()));case 82:f||(this.$loading.finish&&!this.$loading.manual&&this.$loading.finish(),o()),t.next=99;break;case 85:if(t.prev=85,t.t2=t.catch(29),"ERR_REDIRECT"!==(L=t.t2||{}).message){t.next=90;break}return t.abrupt("return",this.$nuxt.$emit("routeChanged",e,n,L));case 90:return S=[],Object(h.l)(L),"function"==typeof(F=(d.a.options||d.a).layout)&&(F=F(x.context)),t.next=96,this.loadLayout(F);case 96:this.error(L),this.$nuxt.$emit("routeChanged",e,n,L),o();case 99:case"end":return t.stop()}}),t,this,[[29,85],[48,73],[50,65,68,71]])}))),F.apply(this,arguments)}function R(t,n){Object(h.e)(t,(function(t,n,r,l){return"object"!==Object(e.a)(t)||t.options||((t=o.a.extend(t))._Ctor=t,r.components[l]=t),t}))}function I(t){var e=Boolean(this.$options.nuxt.err);this._hadError&&this._dateLastError===this.$options.nuxt.dateErr&&(e=!1);var n=e?(d.a.options||d.a).layout:t.matched[0].components.default.options.layout;"function"==typeof n&&(n=n(x.context)),this.setLayout(n)}function N(t){t._hadError&&t._dateLastError===t.$options.nuxt.dateErr&&t.error()}function j(t,e){var n=this;if(!1!==this._routeChanged||!1!==this._paramChanged||!1!==this._queryChanged){var r=Object(h.i)(t),l=Object(h.h)(t),c=!1;o.a.nextTick((function(){r.forEach((function(t,i){if(t&&!t._isDestroyed&&t.constructor._dataRefresh&&l[i]===t.constructor&&!0!==t.$vnode.data.keepAlive&&"function"==typeof t.constructor.options.data){var e=t.constructor.options.data.call(t);for(var n in e)o.a.set(t.$data,n,e[n]);c=!0}})),c&&window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")})),N(n)}))}}function B(t){window.onNuxtReadyCbs.forEach((function(e){"function"==typeof e&&e(t)})),"function"==typeof window._onNuxtLoaded&&window._onNuxtLoaded(t),w.afterEach((function(e,n){o.a.nextTick((function(){return t.$nuxt.$emit("routeChanged",e,n)}))}))}function U(){return(U=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,l,c,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x=e.app,w=e.router,e.store,n=new o.a(x),E.data||!E.serverRendered){t.next=14;break}return t.prev=5,t.next=8,n.fetchPayload(E.routePath||n.context.route.path);case 8:r=t.sent,Object.assign(E,r),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(5);case 14:return l=E.layout||"default",t.next=17,n.loadLayout(l);case 17:return n.setLayout(l),c=function(){n.$mount("#__nuxt"),w.afterEach(R),w.afterEach(I.bind(n)),w.afterEach(j.bind(n)),o.a.nextTick((function(){B(n)}))},t.next=21,Promise.all(k(x.context.route));case 21:if(d=t.sent,n.setTransitions=n.$options.nuxt.setTransitions.bind(n),d.length&&(n.setTransitions(A(d,w.currentRoute)),S=w.currentRoute.matched.map((function(t){return Object(h.c)(t.path)(w.currentRoute.params)}))),n.$loading={},E.error&&n.error(E.error),w.beforeEach(D.bind(n)),w.beforeEach(L.bind(n)),!E.serverRendered){t.next=30;break}return t.abrupt("return",c());case 30:return f=function(){R(w.currentRoute,w.currentRoute),I.call(n,w.currentRoute),N(n),c()},t.next=33,new Promise((function(t){return setTimeout(t,0)}));case 33:L.call(n,w.currentRoute,w.currentRoute,(function(path){if(path){var t=w.afterEach((function(e,n){t(),f()}));w.push(path,void 0,(function(t){t&&T(t)}))}else f()}));case 34:case"end":return t.stop()}}),t,null,[[5,12]])})))).apply(this,arguments)}Object(d.b)(null,E.config).then((function(t){return U.apply(this,arguments)})).catch(T)}.call(this,n(84))},340:function(t,e,n){"use strict";n(244)},341:function(t,e,n){"use strict";n(245)},343:function(t,e){function n(){}n.prototype={on:function(t,e,n){var r=this.e||(this.e={});return(r[t]||(r[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var r=this;function o(){r.off(t,o),e.apply(n,arguments)}return o._=e,this.on(t,o,n)},emit:function(t){for(var data=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),i=0,n=e.length;i<n;i++)e[i].fn.apply(e[i].ctx,data);return this},off:function(t,e){var n=this.e||(this.e={}),r=n[t],o=[];if(r&&e)for(var i=0,l=r.length;i<l;i++)r[i].fn!==e&&r[i].fn._!==e&&o.push(r[i]);return o.length?n[t]=o:delete n[t],this}},t.exports=n},344:function(t,e){function n(t,e,n){var r,o,l,c,h;function d(){var f=Date.now()-c;f<e&&f>=0?r=setTimeout(d,e-f):(r=null,n||(h=t.apply(l,o),l=o=null))}null==e&&(e=100);var f=function(){l=this,o=arguments,c=Date.now();var f=n&&!r;return r||(r=setTimeout(d,e)),f&&(h=t.apply(l,o),l=o=null),h};return f.clear=function(){r&&(clearTimeout(r),r=null)},f.flush=function(){r&&(h=t.apply(l,o),l=o=null,clearTimeout(r),r=null)},f}n.debounce=n,t.exports=n},346:function(t,e,n){"use strict";t.exports=function(t){if("string"!=typeof t)throw new TypeError("expected a string");return(t=(t=(t=t.replace(/([a-z])([A-Z])/g,"$1-$2")).replace(/[ \t\W]/g,"-")).replace(/^-+|-+$/g,"")).toLowerCase()}},5:function(t,e,n){"use strict";function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}n.d(e,"a",(function(){return qe})),n.d(e,"b",(function(){return wn})),n.d(e,"y",(function(){return Fn})),n.d(e,"x",(function(){return ue})),n.d(e,"i",(function(){return wt})),n.d(e,"n",(function(){return Q})),n.d(e,"o",(function(){return $})),n.d(e,"k",(function(){return N})),n.d(e,"l",(function(){return U})),n.d(e,"s",(function(){return vn})),n.d(e,"r",(function(){return J})),n.d(e,"g",(function(){return St})),n.d(e,"v",(function(){return xn})),n.d(e,"e",(function(){return Fe})),n.d(e,"t",(function(){return be})),n.d(e,"c",(function(){return en})),n.d(e,"q",(function(){return mt})),n.d(e,"w",(function(){return Re})),n.d(e,"f",(function(){return A})),n.d(e,"u",(function(){return Et})),n.d(e,"m",(function(){return at})),n.d(e,"j",(function(){return pn})),n.d(e,"h",(function(){return xt})),n.d(e,"d",(function(){return Oe})),n.d(e,"p",(function(){return Tt}));var l,c,h,d,f,m,v,y,_,x,w,S,E,M,T,A={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},D={duration:.5,overwrite:!1,delay:0},P=1e8,C=1e-8,k=2*Math.PI,O=k/4,L=0,F=Math.sqrt,R=Math.cos,I=Math.sin,N=function(t){return"string"==typeof t},j=function(t){return"function"==typeof t},B=function(t){return"number"==typeof t},U=function(t){return void 0===t},z=function(t){return"object"==typeof t},V=function(t){return!1!==t},H=function(){return"undefined"!=typeof window},G=function(t){return j(t)||N(t)},W="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},X=Array.isArray,Y=/(?:-?\.?\d|\.)+/gi,Q=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,$=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,K=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,J=/[+-]=-?[.\d]+/,Z=/[^,'"\[\]\s]+/gi,tt=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,et={},nt={},it=function(t){return(nt=Lt(t,et))&&Fn},at=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},ot=function(t,e){return!e&&console.warn(t)},st=function(t,e){return t&&(et[t]=e)&&nt&&(nt[t]=e)||et},ut=function(){return 0},lt={suppressEvents:!0,isStart:!0},ct={suppressEvents:!0},ht={},pt=[],ft={},mt={},vt={},gt=30,yt=[],_t="",bt=function(t){var e,i,n=t[0];if(z(n)||j(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=yt.length;i--&&!yt[i].targetTest(n););e=yt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new qe(t[i],e)))||t.splice(i,1);return t},xt=function(t){return t._gsap||bt(de(t))[0]._gsap},wt=function(t,e,n){return(n=t[e])&&j(n)?t[e]():U(n)&&t.getAttribute&&t.getAttribute(e)||n},St=function(t,e){return(t=t.split(",")).forEach(e)||t},Et=function(t){return Math.round(1e5*t)/1e5||0},Mt=function(t){return Math.round(1e7*t)/1e7||0},Tt=function(t,e){var n=e.charAt(0),r=parseFloat(e.substr(2));return t=parseFloat(t),"+"===n?t+r:"-"===n?t-r:"*"===n?t*r:t/r},At=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},Dt=function(){var i,t,e=pt.length,a=pt.slice(0);for(ft={},pt.length=0,i=0;i<e;i++)(t=a[i])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},Pt=function(t,time,e,n){pt.length&&Dt(),t.render(time,e,n||c),pt.length&&Dt()},Ct=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(Z).length<2?e:N(t)?t.trim():t},kt=function(p){return p},Ot=function(t,e){for(var p in e)p in t||(t[p]=e[p]);return t},Lt=function(base,t){for(var p in t)base[p]=t[p];return base},Ft=function t(base,e){for(var p in e)"__proto__"!==p&&"constructor"!==p&&"prototype"!==p&&(base[p]=z(e[p])?t(base[p]||(base[p]={}),e[p]):e[p]);return base},Rt=function(t,e){var p,n={};for(p in t)p in e||(n[p]=t[p]);return n},It=function(t){var e,n=t.parent||d,r=t.keyframes?(e=X(t.keyframes),function(t,n){for(var p in n)p in t||"duration"===p&&e||"ease"===p||(t[p]=n[p])}):Ot;if(V(t.inherit))for(;n;)r(t,n.vars.defaults),n=n.parent||n._dp;return t},Nt=function(t,e,n,r,o){void 0===n&&(n="_first"),void 0===r&&(r="_last");var l,c=t[r];if(o)for(l=e[o];c&&c[o]>l;)c=c._prev;return c?(e._next=c._next,c._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[r]=e,e._prev=c,e.parent=e._dp=t,e},jt=function(t,e,n,r){void 0===n&&(n="_first"),void 0===r&&(r="_last");var o=e._prev,l=e._next;o?o._next=l:t[n]===e&&(t[n]=l),l?l._prev=o:t[r]===e&&(t[r]=o),e._next=e._prev=e.parent=null},Bt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Ut=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var a=t;a;)a._dirty=1,a=a.parent;return t},zt=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Vt=function(t,e,n,r){return t._startAt&&(c?t._startAt.revert(ct):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,r))},Ht=function t(e){return!e||e._ts&&t(e.parent)},Gt=function(t){return t._repeat?Wt(t._tTime,t=t.duration()+t._rDelay)*t:0},Wt=function(t,e){var n=Math.floor(t/=e);return t&&n===t?n-1:n},Xt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Yt=function(t){return t._end=Mt(t._start+(t._tDur/Math.abs(t._ts||t._rts||C)||0))},qt=function(t,e){var n=t._dp;return n&&n.smoothChildTiming&&t._ts&&(t._start=Mt(n._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Yt(t),n._dirty||Ut(n,t)),t},Qt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=Xt(t.rawTime(),e),(!e._dur||se(0,e.totalDuration(),n)-e._tTime>C)&&e.render(n,!0)),Ut(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-1e-8}},$t=function(t,e,n,r){return e.parent&&Bt(e),e._start=Mt((B(n)?n:n||t!==d?ie(t,n,e):t._time)+e._delay),e._end=Mt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Nt(t,e,"_first","_last",t._sort?"_start":0),te(e)||(t._recent=e),r||Qt(t,e),t._ts<0&&qt(t,t._tTime),t},Kt=function(t,e){return(et.ScrollTrigger||at("scrollTrigger",e))&&et.ScrollTrigger.create(e,t)},Jt=function(t,e,n,r){return nn(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&_!==Re.frame?(pt.push(t),t._lazy=[e,r],1):void 0:1},Zt=function t(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||t(n))},te=function(t){var data=t.data;return"isFromStart"===data||"isStart"===data},ee=function(t,e,n,r){var o=t._repeat,l=Mt(e)||0,c=t._tTime/t._tDur;return c&&!r&&(t._time*=l/t._dur),t._dur=l,t._tDur=o?o<0?1e10:Mt(l*(o+1)+t._rDelay*o):l,c>0&&!r?qt(t,t._tTime=t._tDur*c):t.parent&&Yt(t),n||Ut(t.parent,t),t},ne=function(t){return t instanceof $e?Ut(t):ee(t,t._dur)},re={_start:0,endTime:ut,totalDuration:ut},ie=function t(e,n,r){var i,o,l,c=e.labels,h=e._recent||re,d=e.duration()>=P?h.endTime(!1):e._dur;return N(n)&&(isNaN(n)||n in c)?(o=n.charAt(0),l="%"===n.substr(-1),i=n.indexOf("="),"<"===o||">"===o?(i>=0&&(n=n.replace(/=/,"")),("<"===o?h._start:h.endTime(h._repeat>=0))+(parseFloat(n.substr(1))||0)*(l?(i<0?h:r).totalDuration()/100:1)):i<0?(n in c||(c[n]=d),c[n]):(o=parseFloat(n.charAt(i-1)+n.substr(i+1)),l&&r&&(o=o/100*(X(r)?r[0]:r).totalDuration()),i>1?t(e,n.substr(0,i-1),r)+o:d+o)):null==n?d:+n},ae=function(t,e,n){var r,o,l=B(e[1]),c=(l?2:1)+(t<2?0:1),h=e[c];if(l&&(h.duration=e[1]),h.parent=n,t){for(r=h,o=n;o&&!("immediateRender"in r);)r=o.vars.defaults||{},o=V(o.vars.inherit)&&o.parent;h.immediateRender=V(r.immediateRender),t<2?h.runBackwards=1:h.startAt=e[c-1]}return new un(e[0],h,e[c+1])},oe=function(t,e){return t||0===t?e(t):e},se=function(t,e,n){return n<t?t:n>e?e:n},ue=function(t,e){return N(t)&&(e=tt.exec(t))?e[1]:""},le=[].slice,ce=function(t,e){return t&&z(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&z(t[0]))&&!t.nodeType&&t!==f},he=function(t,e,n){return void 0===n&&(n=[]),t.forEach((function(t){var r;return N(t)&&!e||ce(t,1)?(r=n).push.apply(r,de(t)):n.push(t)}))||n},de=function(t,e,n){return h&&!e&&h.selector?h.selector(t):!N(t)||n||!m&&Ie()?X(t)?he(t,n):ce(t)?le.call(t,0):t?[t]:[]:le.call((e||v).querySelectorAll(t),0)},pe=function(t){return t=de(t)[0]||ot("Invalid scope")||{},function(e){var n=t.current||t.nativeElement||t;return de(e,n.querySelectorAll?n:n===t?ot("Invalid scope")||v.createElement("div"):t)}},fe=function(a){return a.sort((function(){return.5-Math.random()}))},me=function(t){if(j(t))return t;var e=z(t)?t:{each:t},n=He(e.ease),r=e.from||0,base=parseFloat(e.base)||0,o={},l=r>0&&r<1,c=isNaN(r)||l,h=e.axis,d=r,f=r;return N(r)?d=f={center:.5,edges:.5,end:1}[r]||0:!l&&c&&(d=r[0],f=r[1]),function(i,t,a){var l,m,v,y,_,x,w,S,E,M=(a||e).length,T=o[M];if(!T){if(!(E="auto"===e.grid?0:(e.grid||[1,P])[1])){for(w=-P;w<(w=a[E++].getBoundingClientRect().left)&&E<M;);E--}for(T=o[M]=[],l=c?Math.min(E,M)*d-.5:r%E,m=E===P?0:c?M*f/E-.5:r/E|0,w=0,S=P,x=0;x<M;x++)v=x%E-l,y=m-(x/E|0),T[x]=_=h?Math.abs("y"===h?y:v):F(v*v+y*y),_>w&&(w=_),_<S&&(S=_);"random"===r&&fe(T),T.max=w-S,T.min=S,T.v=M=(parseFloat(e.amount)||parseFloat(e.each)*(E>M?M-1:h?"y"===h?M/E:E:Math.max(E,M/E))||0)*("edges"===r?-1:1),T.b=M<0?base-M:base,T.u=ue(e.amount||e.each)||0,n=n&&M<0?ze(n):n}return M=(T[i]-T.min)/T.max||0,Mt(T.b+(n?n(M):M)*T.v)+T.u}},ve=function(t){var p=Math.pow(10,((t+"").split(".")[1]||"").length);return function(e){var n=Mt(Math.round(parseFloat(e)/t)*t*p);return(n-n%1)/p+(B(e)?0:ue(e))}},ge=function(t,e){var n,r,o=X(t);return!o&&z(t)&&(n=o=t.radius||P,t.values?(t=de(t.values),(r=!B(t[0]))&&(n*=n)):t=ve(t.increment)),oe(e,o?j(t)?function(e){return r=t(e),Math.abs(r-e)<=n?r:e}:function(e){for(var o,l,c=parseFloat(r?e.x:e),h=parseFloat(r?e.y:0),d=P,f=0,i=t.length;i--;)(o=r?(o=t[i].x-c)*o+(l=t[i].y-h)*l:Math.abs(t[i]-c))<d&&(d=o,f=i);return f=!n||d<=n?t[f]:e,r||f===e||B(e)?f:f+ue(e)}:ve(t))},ye=function(t,e,n,r){return oe(X(t)?!e:!0===n?!!(n=0):!r,(function(){return X(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(r=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t-n/2+Math.random()*(e-t+.99*n))/n)*n*r)/r}))},_e=function(a,t,e){return oe(e,(function(e){return a[~~t(e)]}))},be=function(t){for(var i,e,n,r,o=0,s="";~(i=t.indexOf("random(",o));)n=t.indexOf(")",i),r="["===t.charAt(i+7),e=t.substr(i+7,n-i-7).match(r?Z:Y),s+=t.substr(o,i-o)+ye(r?e:+e[0],r?0:+e[1],+e[2]||1e-5),o=n+1;return s+t.substr(o,t.length-o)},xe=function(t,e,n,r,o){var l=e-t,c=r-n;return oe(o,(function(e){return n+((e-t)/l*c||0)}))},we=function(t,e,n){var p,r,label,o=t.labels,l=P;for(p in o)(r=o[p]-e)<0==!!n&&r&&l>(r=Math.abs(r))&&(label=p,l=r);return label},Se=function(t,e,n){var r,o,l,c=t.vars,d=c[e],f=h,m=t._ctx;if(d)return r=c[e+"Params"],o=c.callbackScope||t,n&&pt.length&&Dt(),m&&(h=m),l=r?d.apply(o,r):d.call(o),h=f,l},Ee=function(t){return Bt(t),t.scrollTrigger&&t.scrollTrigger.kill(!1),t.progress()<1&&Se(t,"onInterrupt"),t},Me=function(t){var e=(t=!t.name&&t.default||t).name,n=j(t),r=e&&!n&&t.init?function(){this._props=[]}:t,o={init:ut,render:gn,add:tn,kill:_n,modifier:yn,rawVars:0},l={targetTest:0,get:0,getSetter:pn,aliases:{},register:0};if(Ie(),t!==r){if(mt[e])return;Ot(r,Ot(Rt(t,o),l)),Lt(r.prototype,Lt(o,Rt(t,l))),mt[r.prop=e]=r,t.targetTest&&(yt.push(r),ht[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}st(e,r),t.register&&t.register(Fn,r,wn)},Te=255,Ae={aqua:[0,Te,Te],lime:[0,Te,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Te],navy:[0,0,128],white:[Te,Te,Te],olive:[128,128,0],yellow:[Te,Te,0],orange:[Te,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Te,0,0],pink:[Te,192,203],cyan:[0,Te,Te],transparent:[Te,Te,Te,0]},De=function(t,e,n){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Te+.5|0},Pe=function(t,e,n){var r,g,b,o,s,l,c,h,d,f,a=t?B(t)?[t>>16,t>>8&Te,t&Te]:0:Ae.black;if(!a){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ae[t])a=Ae[t];else if("#"===t.charAt(0)){if(t.length<6&&(r=t.charAt(1),g=t.charAt(2),b=t.charAt(3),t="#"+r+r+g+g+b+b+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(a=parseInt(t.substr(1,6),16))>>16,a>>8&Te,a&Te,parseInt(t.substr(7),16)/255];a=[(t=parseInt(t.substr(1),16))>>16,t>>8&Te,t&Te]}else if("hsl"===t.substr(0,3))if(a=f=t.match(Y),e){if(~t.indexOf("="))return a=t.match(Q),n&&a.length<4&&(a[3]=1),a}else o=+a[0]%360/360,s=+a[1]/100,r=2*(l=+a[2]/100)-(g=l<=.5?l*(s+1):l+s-l*s),a.length>3&&(a[3]*=1),a[0]=De(o+1/3,r,g),a[1]=De(o,r,g),a[2]=De(o-1/3,r,g);else a=t.match(Y)||Ae.transparent;a=a.map(Number)}return e&&!f&&(r=a[0]/Te,g=a[1]/Te,b=a[2]/Te,l=((c=Math.max(r,g,b))+(h=Math.min(r,g,b)))/2,c===h?o=s=0:(d=c-h,s=l>.5?d/(2-c-h):d/(c+h),o=c===r?(g-b)/d+(g<b?6:0):c===g?(b-r)/d+2:(r-g)/d+4,o*=60),a[0]=~~(o+.5),a[1]=~~(100*s+.5),a[2]=~~(100*l+.5)),n&&a.length<4&&(a[3]=1),a},Ce=function(t){var e=[],n=[],i=-1;return t.split(Oe).forEach((function(t){var a=t.match($)||[];e.push.apply(e,a),n.push(i+=a.length+1)})),e.c=n,e},ke=function(s,t,e){var n,r,o,l,c="",h=(s+c).match(Oe),d=t?"hsla(":"rgba(",i=0;if(!h)return s;if(h=h.map((function(e){return(e=Pe(e,t,1))&&d+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"})),e&&(o=Ce(s),(n=e.c).join(c)!==o.c.join(c)))for(l=(r=s.replace(Oe,"1").split($)).length-1;i<l;i++)c+=r[i]+(~n.indexOf(i)?h.shift()||d+"0,0,0,0)":(o.length?o:h.length?h:e).shift());if(!r)for(l=(r=s.split(Oe)).length-1;i<l;i++)c+=r[i]+h[i];return c+r[l]},Oe=function(){var p,s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(p in Ae)s+="|"+p+"\\b";return new RegExp(s+")","gi")}(),Le=/hsl[a]?\(/,Fe=function(a){var t,e=a.join(" ");if(Oe.lastIndex=0,Oe.test(e))return t=Le.test(e),a[1]=ke(a[1],t),a[0]=ke(a[0],t,Ce(a[1])),!0},Re=function(){var t,e,n,r,o,l,c=Date.now,h=500,d=33,_=c(),x=_,S=1e3/240,E=S,M=[],T=function n(f){var m,v,time,y,w=c()-x,T=!0===f;if(w>h&&(_+=w-d),((m=(time=(x+=w)-_)-E)>0||T)&&(y=++r.frame,o=time-1e3*r.time,r.time=time/=1e3,E+=m+(m>=S?4:S-m),v=1),T||(t=e(n)),v)for(l=0;l<M.length;l++)M[l](time,o,y,f)};return r={time:0,frame:0,tick:function(){T(!0)},deltaRatio:function(t){return o/(1e3/(t||60))},wake:function(){y&&(!m&&H()&&(f=m=window,v=f.document||{},et.gsap=Fn,(f.gsapVersions||(f.gsapVersions=[])).push(Fn.version),it(nt||f.GreenSockGlobals||!f.gsap&&f||{}),n=f.requestAnimationFrame),t&&r.sleep(),e=n||function(t){return setTimeout(t,E-1e3*r.time+1|0)},w=1,T(2))},sleep:function(){(n?f.cancelAnimationFrame:clearTimeout)(t),w=0,e=ut},lagSmoothing:function(t,e){h=t||1e8,d=Math.min(e,h,0)},fps:function(t){S=1e3/(t||240),E=1e3*r.time+S},add:function(t,e,n){var o=e?function(e,n,l,c){t(e,n,l,c),r.remove(o)}:t;return r.remove(t),M[n?"unshift":"push"](o),Ie(),o},remove:function(t,i){~(i=M.indexOf(t))&&M.splice(i,1)&&l>=i&&l--},_listeners:M}}(),Ie=function(){return!w&&Re.wake()},Ne={},je=/^[\d.\-M][\d.\-,\s]/,Be=/["']/g,Ue=function(t){for(var e,n,r,o={},l=t.substr(1,t.length-3).split(":"),c=l[0],i=1,h=l.length;i<h;i++)n=l[i],e=i!==h-1?n.lastIndexOf(","):n.length,r=n.substr(0,e),o[c]=isNaN(r)?r.replace(Be,"").trim():+r,c=n.substr(e+1).trim();return o},ze=function(t){return function(p){return 1-t(1-p)}},Ve=function t(e,n){for(var r,o=e._first;o;)o instanceof $e?t(o,n):!o.vars.yoyoEase||o._yoyo&&o._repeat||o._yoyo===n||(o.timeline?t(o.timeline,n):(r=o._ease,o._ease=o._yEase,o._yEase=r,o._yoyo=n)),o=o._next},He=function(t,e){return t&&(j(t)?t:Ne[t]||function(t){var e,n,r,o,l=(t+"").split("("),c=Ne[l[0]];return c&&l.length>1&&c.config?c.config.apply(null,~t.indexOf("{")?[Ue(l[1])]:(e=t,n=e.indexOf("(")+1,r=e.indexOf(")"),o=e.indexOf("(",n),e.substring(n,~o&&o<r?e.indexOf(")",r+1):r)).split(",").map(Ct)):Ne._CE&&je.test(t)?Ne._CE("",t):c}(t))||e},Ge=function(t,e,n,r){void 0===n&&(n=function(p){return 1-e(1-p)}),void 0===r&&(r=function(p){return p<.5?e(2*p)/2:1-e(2*(1-p))/2});var o,l={easeIn:e,easeOut:n,easeInOut:r};return St(t,(function(t){for(var p in Ne[t]=et[t]=l,Ne[o=t.toLowerCase()]=n,l)Ne[o+("easeIn"===p?".in":"easeOut"===p?".out":".inOut")]=Ne[t+"."+p]=l[p]})),l},We=function(t){return function(p){return p<.5?(1-t(1-2*p))/2:.5+t(2*(p-.5))/2}},Xe=function t(e,n,r){var o=n>=1?n:1,l=(r||(e?.3:.45))/(n<1?n:1),c=l/k*(Math.asin(1/o)||0),h=function(p){return 1===p?1:o*Math.pow(2,-10*p)*I((p-c)*l)+1},d="out"===e?h:"in"===e?function(p){return 1-h(1-p)}:We(h);return l=k/l,d.config=function(n,r){return t(e,n,r)},d},Ye=function t(e,n){void 0===n&&(n=1.70158);var r=function(p){return p?--p*p*((n+1)*p+n)+1:0},o="out"===e?r:"in"===e?function(p){return 1-r(1-p)}:We(r);return o.config=function(n){return t(e,n)},o};St("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,i){var e=i<5?i+1:i;Ge(t+",Power"+(e-1),i?function(p){return Math.pow(p,e)}:function(p){return p},(function(p){return 1-Math.pow(1-p,e)}),(function(p){return p<.5?Math.pow(2*p,e)/2:1-Math.pow(2*(1-p),e)/2}))})),Ne.Linear.easeNone=Ne.none=Ne.Linear.easeIn,Ge("Elastic",Xe("in"),Xe("out"),Xe()),S=7.5625,M=1/(E=2.75),Ge("Bounce",(function(p){return 1-T(1-p)}),T=function(p){return p<M?S*p*p:p<.7272727272727273?S*Math.pow(p-1.5/E,2)+.75:p<.9090909090909092?S*(p-=2.25/E)*p+.9375:S*Math.pow(p-2.625/E,2)+.984375}),Ge("Expo",(function(p){return p?Math.pow(2,10*(p-1)):0})),Ge("Circ",(function(p){return-(F(1-p*p)-1)})),Ge("Sine",(function(p){return 1===p?1:1-R(p*O)})),Ge("Back",Ye("in"),Ye("out"),Ye()),Ne.SteppedEase=Ne.steps=et.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,r=t+(e?0:1),o=e?1:0;return function(p){return((r*se(0,.99999999,p)|0)+o)*n}}},D.ease=Ne["quad.out"],St("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return _t+=t+","+t+"Params,"}));var qe=function(t,e){this.id=L++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:wt,this.set=e?e.getSetter:pn},Qe=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,ee(this,+t.duration,1,1),this.data=t.data,h&&(this._ctx=h,h.data.push(this)),w||Re.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,ee(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Ie(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(qt(this,t),!n._dp||n.parent||Qt(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&$t(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===C||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),Pt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Gt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Gt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?Wt(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Xt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,this.totalTime(se(-this._delay,this._tDur,e),!0),Yt(this),zt(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Ie(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==C&&(this._tTime-=C)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&$t(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(V(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Xt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=ct);var e=c;return c=t,this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents),"nested"!==this.data&&Bt(this),c=e,this},e.globalTime=function(t){for(var e=this,time=arguments.length?t:e.rawTime();e;)time=e._start+time/(e._ts||1),e=e._dp;return!this.parent&&this.vars.immediateRender?-1:time},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,ne(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var time=this._time;return this._rDelay=t,ne(this),time?this.time(time):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(ie(this,t),V(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,V(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},e.isActive=function(){var t,e=this.parent||this._dp,n=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=n&&t<this.endTime(!0)-C))},e.eventCallback=function(t,e,n){var r=this.vars;return arguments.length>1?(e?(r[t]=e,n&&(r[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete r[t],this):r[t]},e.then=function(t){var e=this;return new Promise((function(n){var r=j(t)?t:kt,o=function(){var t=e.then;e.then=null,j(r)&&(r=r(e))&&(r.then||r===e)&&(e.then=t),n(r),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?o():e._prom=o}))},e.kill=function(){Ee(this)},t}();Ot(Qe.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var $e=function(t){function e(e,n){var o;return void 0===e&&(e={}),(o=t.call(this,e)||this).labels={},o.smoothChildTiming=!!e.smoothChildTiming,o.autoRemoveChildren=!!e.autoRemoveChildren,o._sort=V(e.sortChildren),d&&$t(e.parent||d,r(o),n),e.reversed&&o.reverse(),e.paused&&o.paused(!0),e.scrollTrigger&&Kt(r(o),e.scrollTrigger),o}o(e,t);var n=e.prototype;return n.to=function(t,e,n){return ae(0,arguments,this),this},n.from=function(t,e,n){return ae(1,arguments,this),this},n.fromTo=function(t,e,n,r){return ae(2,arguments,this),this},n.set=function(t,e,n){return e.duration=0,e.parent=this,It(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new un(t,e,ie(this,n),1),this},n.call=function(t,e,n){return $t(this,un.delayedCall(0,t,e),n)},n.staggerTo=function(t,e,n,r,o,l,c){return n.duration=e,n.stagger=n.stagger||r,n.onComplete=l,n.onCompleteParams=c,n.parent=this,new un(t,n,ie(this,o)),this},n.staggerFrom=function(t,e,n,r,o,l,c){return n.runBackwards=1,It(n).immediateRender=V(n.immediateRender),this.staggerTo(t,e,n,r,o,l,c)},n.staggerFromTo=function(t,e,n,r,o,l,c,h){return r.startAt=n,It(r).immediateRender=V(r.immediateRender),this.staggerTo(t,e,r,o,l,c,h)},n.render=function(t,e,n){var time,r,o,l,h,f,m,v,y,_,x,w,S=this._time,E=this._dirty?this.totalDuration():this._tDur,M=this._dur,T=t<=0?0:Mt(t),A=this._zTime<0!=t<0&&(this._initted||!M);if(this!==d&&T>E&&t>=0&&(T=E),T!==this._tTime||n||A){if(S!==this._time&&M&&(T+=this._time-S,t+=this._time-S),time=T,y=this._start,f=!(v=this._ts),A&&(M||(S=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(x=this._yoyo,h=M+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*h+t,e,n);if(time=Mt(T%h),T===E?(l=this._repeat,time=M):((l=~~(T/h))&&l===T/h&&(time=M,l--),time>M&&(time=M)),_=Wt(this._tTime,h),!S&&this._tTime&&_!==l&&(_=l),x&&1&l&&(time=M-time,w=1),l!==_&&!this._lock){var D=x&&1&_,P=D===(x&&1&l);if(l<_&&(D=!D),S=D?0:M,this._lock=1,this.render(S||(w?0:Mt(l*h)),e,!M)._lock=0,this._tTime=T,!e&&this.parent&&Se(this,"onRepeat"),this.vars.repeatRefresh&&!w&&(this.invalidate()._lock=1),S&&S!==this._time||f!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(M=this._dur,E=this._tDur,P&&(this._lock=2,S=D?M:-1e-4,this.render(S,!0),this.vars.repeatRefresh&&!w&&this.invalidate()),this._lock=0,!this._ts&&!f)return this;Ve(this,w)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(m=function(t,e,time){var n;if(time>e)for(n=t._first;n&&n._start<=time;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=time;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,Mt(S),Mt(time)),m&&(T-=time-(time=m._start))),this._tTime=T,this._time=time,this._act=!v,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,S=0),!S&&time&&!e&&(Se(this,"onStart"),this._tTime!==T))return this;if(time>=S&&t>=0)for(r=this._first;r;){if(o=r._next,(r._act||time>=r._start)&&r._ts&&m!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(time-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(time-r._start)*r._ts,e,n),time!==this._time||!this._ts&&!f){m=0,o&&(T+=this._zTime=-1e-8);break}}r=o}else{n=n||c,r=this._last;for(var k=t<0?t:time;r;){if(o=r._prev,(r._act||k<=r._end)&&r._ts&&m!==r){if(r.parent!==this)return this.render(t,e,n);if(r.render(r._ts>0?(k-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(k-r._start)*r._ts,e,n),time!==this._time||!this._ts&&!f){m=0,o&&(T+=this._zTime=k?-1e-8:C);break}}r=o}}if(m&&!e&&(this.pause(),m.render(time>=S?0:-1e-8)._zTime=time>=S?1:-1,this._ts))return this._start=y,Yt(this),this.render(t,e,n);this._onUpdate&&!e&&Se(this,"onUpdate",!0),(T===E&&this._tTime>=this.totalDuration()||!T&&S)&&(y!==this._start&&Math.abs(v)===Math.abs(this._ts)||this._lock||((t||!M)&&(T===E&&this._ts>0||!T&&this._ts<0)&&Bt(this,1),e||t<0&&!S||!T&&!S&&E||(Se(this,T===E&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(T<E&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(t,e){var n=this;if(B(e)||(e=ie(this,e,t)),!(t instanceof Qe)){if(X(t))return t.forEach((function(t){return n.add(t,e)})),this;if(N(t))return this.addLabel(t,e);if(!j(t))return this;t=un.delayedCall(0,t)}return this!==t?$t(this,t,e):this},n.getChildren=function(t,e,n,r){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===r&&(r=-P);for(var a=[],o=this._first;o;)o._start>=r&&(o instanceof un?e&&a.push(o):(n&&a.push(o),t&&a.push.apply(a,o.getChildren(!0,e,n)))),o=o._next;return a},n.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},n.remove=function(t){return N(t)?this.removeLabel(t):j(t)?this.killTweensOf(t):(jt(this,t),t===this._recent&&(this._recent=this._last),Ut(this))},n.totalTime=function(e,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Mt(Re.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},n.addLabel=function(label,t){return this.labels[label]=ie(this,t),this},n.removeLabel=function(label){return delete this.labels[label],this},n.addPause=function(t,e,n){var r=un.delayedCall(0,e||ut,n);return r.data="isPause",this._hasPause=1,$t(this,r,ie(this,t))},n.removePause=function(t){var e=this._first;for(t=ie(this,t);e;)e._start===t&&"isPause"===e.data&&Bt(e),e=e._next},n.killTweensOf=function(t,e,n){for(var r=this.getTweensOf(t,n),i=r.length;i--;)Ke!==r[i]&&r[i].kill(t,e);return this},n.getTweensOf=function(t,e){for(var n,a=[],r=de(t),o=this._first,l=B(e);o;)o instanceof un?At(o._targets,r)&&(l?(!Ke||o._initted&&o._ts)&&o.globalTime(0)<=e&&o.globalTime(o.totalDuration())>e:!e||o.isActive())&&a.push(o):(n=o.getTweensOf(r,e)).length&&a.push.apply(a,n),o=o._next;return a},n.tweenTo=function(t,e){e=e||{};var n,r=this,o=ie(r,t),l=e,c=l.startAt,h=l.onStart,d=l.onStartParams,f=l.immediateRender,m=un.to(r,Ot({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:e.duration||Math.abs((o-(c&&"time"in c?c.time:r._time))/r.timeScale())||C,onStart:function(){if(r.pause(),!n){var t=e.duration||Math.abs((o-(c&&"time"in c?c.time:r._time))/r.timeScale());m._dur!==t&&ee(m,t,0,1).render(m._time,!0,!0),n=1}h&&h.apply(m,d||[])}},e));return f?m.render(0):m},n.tweenFromTo=function(t,e,n){return this.tweenTo(e,Ot({startAt:{time:ie(this,t)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(t){return void 0===t&&(t=this._time),we(this,ie(this,t))},n.previousLabel=function(t){return void 0===t&&(t=this._time),we(this,ie(this,t),1)},n.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+C)},n.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var p,r=this._first,o=this.labels;r;)r._start>=n&&(r._start+=t,r._end+=t),r=r._next;if(e)for(p in o)o[p]>=n&&(o[p]+=t);return Ut(this)},n.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},n.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Ut(this)},n.totalDuration=function(t){var e,n,r,o=0,l=this,c=l._last,h=P;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-t:t));if(l._dirty){for(r=l.parent;c;)e=c._prev,c._dirty&&c.totalDuration(),(n=c._start)>h&&l._sort&&c._ts&&!l._lock?(l._lock=1,$t(l,c,n-c._delay,1)._lock=0):h=n,n<0&&c._ts&&(o-=n,(!r&&!l._dp||r&&r.smoothChildTiming)&&(l._start+=n/l._ts,l._time-=n,l._tTime-=n),l.shiftChildren(-n,!1,-Infinity),h=0),c._end>o&&c._ts&&(o=c._end),c=e;ee(l,l===d&&l._time>o?l._time:o,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(time){if(d._ts&&(Pt(d,Xt(time,d)),_=Re.frame),Re.frame>=gt){gt+=A.autoSleep||120;var t=d._first;if((!t||!t._ts)&&A.autoSleep&&Re._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||Re.sleep()}}},e}(Qe);Ot($e.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ke,Je,Ze=function(t,e,n,r,o,l,c){var h,d,f,m,v,y,_,a,x=new wn(this._pt,t,e,0,1,vn,null,o),w=0,S=0;for(x.b=n,x.e=r,n+="",(_=~(r+="").indexOf("random("))&&(r=be(r)),l&&(l(a=[n,r],t,e),n=a[0],r=a[1]),d=n.match(K)||[];h=K.exec(r);)m=h[0],v=r.substring(w,h.index),f?f=(f+1)%5:"rgba("===v.substr(-5)&&(f=1),m!==d[S++]&&(y=parseFloat(d[S-1])||0,x._pt={_next:x._pt,p:v||1===S?v:",",s:y,c:"="===m.charAt(1)?Tt(y,m)-y:parseFloat(m)-y,m:f&&f<4?Math.round:0},w=K.lastIndex);return x.c=w<r.length?r.substring(w,r.length):"",x.fp=c,(J.test(r)||_)&&(x.e=0),this._pt=x,x},tn=function(t,e,n,r,o,l,c,h,d,f){j(r)&&(r=r(o||0,t,l));var m,v=t[e],y="get"!==n?n:j(v)?d?t[e.indexOf("set")||!j(t["get"+e.substr(3)])?e:"get"+e.substr(3)](d):t[e]():v,_=j(v)?d?hn:cn:ln;if(N(r)&&(~r.indexOf("random(")&&(r=be(r)),"="===r.charAt(1)&&((m=Tt(y,r)+(ue(y)||0))||0===m)&&(r=m)),!f||y!==r||Je)return isNaN(y*r)||""===r?(!v&&!(e in t)&&at(e,r),Ze.call(this,t,e,y,r,_,h||A.stringFilter,d)):(m=new wn(this._pt,t,e,+y||0,r-(y||0),"boolean"==typeof v?mn:fn,0,_),d&&(m.fp=d),c&&m.modifier(c,this,t),this._pt=m)},en=function(t,e,n,r,o,l){var c,h,d,i;if(mt[t]&&!1!==(c=new mt[t]).init(o,c.rawVars?e[t]:function(t,e,n,r,o){if(j(t)&&(t=an(t,o,e,n,r)),!z(t)||t.style&&t.nodeType||X(t)||W(t))return N(t)?an(t,o,e,n,r):t;var p,l={};for(p in t)l[p]=an(t[p],o,e,n,r);return l}(e[t],r,o,l,n),n,r,l)&&(n._pt=h=new wn(n._pt,o,t,0,1,c.render,c,0,c.priority),n!==x))for(d=n._ptLookup[n._targets.indexOf(o)],i=c._props.length;i--;)d[c._props[i]]=h;return c},nn=function t(e,time){var n,i,p,r,o,h,f,m,v,y,_,x,w,S=e.vars,E=S.ease,M=S.startAt,T=S.immediateRender,A=S.lazy,k=S.onUpdate,O=S.onUpdateParams,L=S.callbackScope,F=S.runBackwards,R=S.yoyoEase,I=S.keyframes,N=S.autoRevert,j=e._dur,B=e._startAt,U=e._targets,z=e.parent,H=z&&"nested"===z.data?z.parent._targets:U,G="auto"===e._overwrite&&!l,W=e.timeline;if(W&&(!I||!E)&&(E="none"),e._ease=He(E,D.ease),e._yEase=R?ze(He(!0===R?E:R,D.ease)):0,R&&e._yoyo&&!e._repeat&&(R=e._yEase,e._yEase=e._ease,e._ease=R),e._from=!W&&!!S.runBackwards,!W||I&&!S.stagger){if(x=(m=U[0]?xt(U[0]).harness:0)&&S[m.prop],n=Rt(S,ht),B&&(B.revert(F&&j?ct:lt),B._lazy=0),M){if(Bt(e._startAt=un.set(U,Ot({data:"isStart",overwrite:!1,parent:z,immediateRender:!0,lazy:V(A),startAt:null,delay:0,onUpdate:k,onUpdateParams:O,callbackScope:L,stagger:0},M))),time<0&&(c||!T&&!N)&&e._startAt.revert(ct),T&&j&&time<=0)return void(time&&(e._zTime=time))}else if(F&&j&&!B)if(time&&(T=!1),p=Ot({overwrite:!1,data:"isFromStart",lazy:T&&V(A),immediateRender:T,stagger:0,parent:z},n),x&&(p[m.prop]=x),Bt(e._startAt=un.set(U,p)),time<0&&(c?e._startAt.revert(ct):e._startAt.render(-1,!0)),e._zTime=time,T){if(!time)return}else t(e._startAt,C);for(e._pt=e._ptCache=0,A=j&&V(A)||A&&!j,i=0;i<U.length;i++){if(f=(o=U[i])._gsap||bt(U)[i]._gsap,e._ptLookup[i]=y={},ft[f.id]&&pt.length&&Dt(),_=H===U?i:H.indexOf(o),m&&!1!==(v=new m).init(o,x||n,e,_,H)&&(e._pt=r=new wn(e._pt,o,v.name,0,1,v.render,v,0,v.priority),v._props.forEach((function(t){y[t]=r})),v.priority&&(h=1)),!m||x)for(p in n)mt[p]&&(v=en(p,n,e,_,o,H))?v.priority&&(h=1):y[p]=r=tn.call(e,o,p,"get",n[p],_,H,0,S.stringFilter);e._op&&e._op[i]&&e.kill(o,e._op[i]),G&&e._pt&&(Ke=e,d.killTweensOf(o,y,e.globalTime(time)),w=!e.parent,Ke=0),e._pt&&A&&(ft[f.id]=1)}h&&xn(e),e._onInit&&e._onInit(e)}e._onUpdate=k,e._initted=(!e._op||e._pt)&&!w,I&&time<=0&&W.render(P,!0,!0)},rn=function(t,e,n,r){var p,a,o=e.ease||r||"power1.inOut";if(X(e))a=n[t]||(n[t]=[]),e.forEach((function(t,i){return a.push({t:i/(e.length-1)*100,v:t,e:o})}));else for(p in e)a=n[p]||(n[p]=[]),"ease"===p||a.push({t:parseFloat(t),v:e[p],e:o})},an=function(t,e,i,n,r){return j(t)?t.call(e,i,n,r):N(t)&&~t.indexOf("random(")?be(t):t},on=_t+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",sn={};St(on+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return sn[t]=1}));var un=function(t){function e(e,n,o,c){var h;"number"==typeof n&&(o.duration=n,n=o,o=null);var f,i,m,v,p,y,_,x,w=(h=t.call(this,c?n:It(n))||this).vars,S=w.duration,E=w.delay,M=w.immediateRender,T=w.stagger,D=w.overwrite,P=w.keyframes,C=w.defaults,k=w.scrollTrigger,O=w.yoyoEase,L=n.parent||d,F=(X(e)||W(e)?B(e[0]):"length"in n)?[e]:de(e);if(h._targets=F.length?bt(F):ot("GSAP target "+e+" not found. https://greensock.com",!A.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=D,P||T||G(S)||G(E)){if(n=h.vars,(f=h.timeline=new $e({data:"nested",defaults:C||{}})).kill(),f.parent=f._dp=r(h),f._start=0,T||G(S)||G(E)){if(v=F.length,_=T&&me(T),z(T))for(p in T)~on.indexOf(p)&&(x||(x={}),x[p]=T[p]);for(i=0;i<v;i++)(m=Rt(n,sn)).stagger=0,O&&(m.yoyoEase=O),x&&Lt(m,x),y=F[i],m.duration=+an(S,r(h),i,y,F),m.delay=(+an(E,r(h),i,y,F)||0)-h._delay,!T&&1===v&&m.delay&&(h._delay=E=m.delay,h._start+=E,m.delay=0),f.to(y,m,_?_(i,y,F):0),f._ease=Ne.none;f.duration()?S=E=0:h.timeline=0}else if(P){It(Ot(f.vars.defaults,{ease:"none"})),f._ease=He(P.ease||n.ease||"none");var a,R,I,time=0;if(X(P))P.forEach((function(t){return f.to(F,t,">")})),f.duration();else{for(p in m={},P)"ease"===p||"easeEach"===p||rn(p,P[p],m,P.easeEach);for(p in m)for(a=m[p].sort((function(a,b){return a.t-b.t})),time=0,i=0;i<a.length;i++)(I={ease:(R=a[i]).e,duration:(R.t-(i?a[i-1].t:0))/100*S})[p]=R.v,f.to(F,I,time),time+=I.duration;f.duration()<S&&f.to({},{duration:S-f.duration()})}}S||h.duration(S=f.duration())}else h.timeline=0;return!0!==D||l||(Ke=r(h),d.killTweensOf(F),Ke=0),$t(L,r(h),o),n.reversed&&h.reverse(),n.paused&&h.paused(!0),(M||!S&&!P&&h._start===Mt(L._time)&&V(M)&&Ht(r(h))&&"nested"!==L.data)&&(h._tTime=-1e-8,h.render(Math.max(0,-E))),k&&Kt(r(h),k),h}o(e,t);var n=e.prototype;return n.render=function(t,e,n){var time,r,o,l,h,d,f,m,v,y=this._time,_=this._tDur,x=this._dur,w=t<0,S=t>_-C&&!w?_:t<C?0:t;if(x){if(S!==this._tTime||!t||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==w){if(time=S,m=this.timeline,this._repeat){if(l=x+this._rDelay,this._repeat<-1&&w)return this.totalTime(100*l+t,e,n);if(time=Mt(S%l),S===_?(o=this._repeat,time=x):((o=~~(S/l))&&o===S/l&&(time=x,o--),time>x&&(time=x)),(d=this._yoyo&&1&o)&&(v=this._yEase,time=x-time),h=Wt(this._tTime,l),time===y&&!n&&this._initted)return this._tTime=S,this;o!==h&&(m&&this._yEase&&Ve(m,d),!this.vars.repeatRefresh||d||this._lock||(this._lock=n=1,this.render(Mt(l*o),!0).invalidate()._lock=0))}if(!this._initted){if(Jt(this,w?t:time,n,e))return this._tTime=0,this;if(y!==this._time)return this;if(x!==this._dur)return this.render(t,e,n)}if(this._tTime=S,this._time=time,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=f=(v||this._ease)(time/x),this._from&&(this.ratio=f=1-f),time&&!y&&!e&&(Se(this,"onStart"),this._tTime!==S))return this;for(r=this._pt;r;)r.r(f,r.d),r=r._next;m&&m.render(t<0?t:!time&&d?-1e-8:m._dur*m._ease(time/this._dur),e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(w&&Vt(this,t,0,n),Se(this,"onUpdate")),this._repeat&&o!==h&&this.vars.onRepeat&&!e&&this.parent&&Se(this,"onRepeat"),S!==this._tDur&&S||this._tTime!==S||(w&&!this._onUpdate&&Vt(this,t,0,!0),(t||!x)&&(S===this._tDur&&this._ts>0||!S&&this._ts<0)&&Bt(this,1),e||w&&!y||!S&&!y||(Se(this,S===_?"onComplete":"onReverseComplete",!0),this._prom&&!(S<_&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,r){var o,l,h,d=t.ratio,f=e<0||!e&&(!t._start&&Zt(t)&&(t._initted||!te(t))||(t._ts<0||t._dp._ts<0)&&!te(t))?0:1,m=t._rDelay,v=0;if(m&&t._repeat&&(v=se(0,t._tDur,e),l=Wt(v,m),t._yoyo&&1&l&&(f=1-f),l!==Wt(t._tTime,m)&&(d=1-f,t.vars.repeatRefresh&&t._initted&&t.invalidate())),f!==d||c||r||t._zTime===C||!e&&t._zTime){if(!t._initted&&Jt(t,e,r,n))return;for(h=t._zTime,t._zTime=e||(n?C:0),n||(n=e&&!h),t.ratio=f,t._from&&(f=1-f),t._time=0,t._tTime=v,o=t._pt;o;)o.r(f,o.d),o=o._next;e<0&&Vt(t,e,0,!0),t._onUpdate&&!n&&Se(t,"onUpdate"),v&&t._repeat&&!n&&t.parent&&Se(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===f&&(f&&Bt(t,1),n||(Se(t,f?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},n.targets=function(){return this._targets},n.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},n.resetTo=function(t,e,n,r){w||Re.wake(),this._ts||this.play();var time=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||nn(this,time),function(t,e,n,r,o,l,time){var c,h,d,i,f=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!f)for(f=t._ptCache[e]=[],d=t._ptLookup,i=t._targets.length;i--;){if((c=d[i][e])&&c.d&&c.d._pt)for(c=c.d._pt;c&&c.p!==e&&c.fp!==e;)c=c._next;if(!c)return Je=1,t.vars[e]="+=0",nn(t,time),Je=0,1;f.push(c)}for(i=f.length;i--;)(c=(h=f[i])._pt||h).s=!r&&0!==r||o?c.s+(r||0)+l*c.c:r,c.c=n-c.s,h.e&&(h.e=Et(n)+ue(h.e)),h.b&&(h.b=c.s+ue(h.b))}(this,t,e,n,r,this._ease(time/this._dur),time)?this.resetTo(t,e,n,r):(qt(this,0),this.parent||Nt(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Ee(this):this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,Ke&&!0!==Ke.vars.overwrite)._first||Ee(this),this.parent&&n!==this.timeline.totalDuration()&&ee(this,this._dur*this.timeline._tDur/n,0,1),this}var r,o,l,c,p,h,i,d=this._targets,f=t?de(t):d,m=this._ptLookup,v=this._pt;if((!e||"all"===e)&&function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0}(d,f))return"all"===e&&(this._pt=0),Ee(this);for(r=this._op=this._op||[],"all"!==e&&(N(e)&&(p={},St(e,(function(t){return p[t]=1})),e=p),e=function(t,e){var n,p,i,r,o=t[0]?xt(t[0]).harness:0,l=o&&o.aliases;if(!l)return e;for(p in n=Lt({},e),l)if(p in n)for(i=(r=l[p].split(",")).length;i--;)n[r[i]]=n[p];return n}(d,e)),i=d.length;i--;)if(~f.indexOf(d[i]))for(p in o=m[i],"all"===e?(r[i]=e,c=o,l={}):(l=r[i]=r[i]||{},c=e),c)(h=o&&o[p])&&("kill"in h.d&&!0!==h.d.kill(p)||jt(this,h,"_pt"),delete o[p]),"all"!==l&&(l[p]=1);return this._initted&&!this._pt&&v&&Ee(this),this},e.to=function(t,n){return new e(t,n,arguments[2])},e.from=function(t,e){return ae(1,arguments)},e.delayedCall=function(t,n,r,o){return new e(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:n,onReverseComplete:n,onCompleteParams:r,onReverseCompleteParams:r,callbackScope:o})},e.fromTo=function(t,e,n){return ae(2,arguments)},e.set=function(t,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new e(t,n)},e.killTweensOf=function(t,e,n){return d.killTweensOf(t,e,n)},e}(Qe);Ot(un.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),St("staggerTo,staggerFrom,staggerFromTo",(function(t){un[t]=function(){var e=new $e,n=le.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}}));var ln=function(t,e,n){return t[e]=n},cn=function(t,e,n){return t[e](n)},hn=function(t,e,n,data){return t[e](data.fp,n)},dn=function(t,e,n){return t.setAttribute(e,n)},pn=function(t,e){return j(t[e])?cn:U(t[e])&&t.setAttribute?dn:ln},fn=function(t,data){return data.set(data.t,data.p,Math.round(1e6*(data.s+data.c*t))/1e6,data)},mn=function(t,data){return data.set(data.t,data.p,!!(data.s+data.c*t),data)},vn=function(t,data){var e=data._pt,s="";if(!t&&data.b)s=data.b;else if(1===t&&data.e)s=data.e;else{for(;e;)s=e.p+(e.m?e.m(e.s+e.c*t):Math.round(1e4*(e.s+e.c*t))/1e4)+s,e=e._next;s+=data.c}data.set(data.t,data.p,s,data)},gn=function(t,data){for(var e=data._pt;e;)e.r(t,e.d),e=e._next},yn=function(t,e,n,r){for(var o,l=this._pt;l;)o=l._next,l.p===r&&l.modifier(t,e,n),l=o},_n=function(t){for(var e,n,r=this._pt;r;)n=r._next,r.p===t&&!r.op||r.op===t?jt(this,r,"_pt"):r.dep||(e=1),r=n;return!e},bn=function(t,e,n,data){data.mSet(t,e,data.m.call(data.tween,n,data.mt),data)},xn=function(t){for(var e,n,r,o,l=t._pt;l;){for(e=l._next,n=r;n&&n.pr>l.pr;)n=n._next;(l._prev=n?n._prev:o)?l._prev._next=l:r=l,(l._next=n)?n._prev=l:o=l,l=e}t._pt=r},wn=function(){function t(t,e,n,r,o,l,data,c,h){this.t=e,this.s=r,this.c=o,this.p=n,this.r=l||fn,this.d=data||this,this.set=c||ln,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=bn,this.m=t,this.mt=n,this.tween=e},t}();St(_t+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return ht[t]=1})),et.TweenMax=et.TweenLite=un,et.TimelineLite=et.TimelineMax=$e,d=new $e({sortChildren:!1,defaults:D,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),A.stringFilter=Fe;var Sn=[],En={},Mn=[],Tn=0,An=function(t){return(En[t]||Mn).map((function(t){return t()}))},Dn=function(){var time=Date.now(),t=[];time-Tn>2&&(An("matchMediaInit"),Sn.forEach((function(e){var n,p,r,o,l=e.queries,c=e.conditions;for(p in l)(n=f.matchMedia(l[p]).matches)&&(r=1),n!==c[p]&&(c[p]=n,o=1);o&&(e.revert(),r&&t.push(e))})),An("matchMediaRevert"),t.forEach((function(t){return t.onMatch(t)})),Tn=time,An("matchMedia"))},Pn=function(){function t(t,e){this.selector=e&&pe(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,n){j(t)&&(n=e,e=t,t=j);var r=this,o=function(){var t,o=h,l=r.selector;return o&&o.data.push(r),n&&(r.selector=pe(n)),h=r,t=e.apply(r,arguments),j(t)&&r._r.push(t),h=o,r.selector=l,r.isReverted=!1,t};return r.last=o,t===j?o(r):t?r[t]=o:o},e.ignore=function(t){var e=h;h=null,t(this),h=e},e.getTweens=function(){var a=[];return this.data.forEach((function(e){return e instanceof t?a.push.apply(a,e.getTweens()):e instanceof un&&e._targets[0]!==e.vars.onComplete&&a.push(e)})),a},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var n=this;if(t?(this.getTweens().map((function(t){return{g:t.globalTime(0),t:t}})).sort((function(a,b){return b.g-a.g||-1})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof Qe)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,n)})),this.isReverted=!0):this.data.forEach((function(t){return t.kill&&t.kill()})),this.clear(),e){var i=Sn.indexOf(this);~i&&Sn.splice(i,1)}},e.revert=function(t){this.kill(t||{})},t}(),Cn=function(){function t(t){this.contexts=[],this.scope=t}var e=t.prototype;return e.add=function(t,e,n){z(t)||(t={matches:t});var r,p,o,l=new Pn(0,n||this.scope),c=l.conditions={};for(p in this.contexts.push(l),e=l.add("onMatch",e),l.queries=t,t)"all"===p?o=1:(r=f.matchMedia(t[p]))&&(Sn.indexOf(l)<0&&Sn.push(l),(c[p]=r.matches)&&(o=1),r.addListener?r.addListener(Dn):r.addEventListener("change",Dn));return o&&e(l),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),kn={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach((function(t){return Me(t)}))},timeline:function(t){return new $e(t)},getTweensOf:function(t,e){return d.getTweensOf(t,e)},getProperty:function(t,e,n,r){N(t)&&(t=de(t)[0]);var o=xt(t||{}).get,l=n?kt:Ct;return"native"===n&&(n=""),t?e?l((mt[e]&&mt[e].get||o)(t,e,n,r)):function(e,n,r){return l((mt[e]&&mt[e].get||o)(t,e,n,r))}:t},quickSetter:function(t,e,n){if((t=de(t)).length>1){var r=t.map((function(t){return Fn.quickSetter(t,e,n)})),o=r.length;return function(t){for(var i=o;i--;)r[i](t)}}t=t[0]||{};var l=mt[e],c=xt(t),p=c.harness&&(c.harness.aliases||{})[e]||e,h=l?function(e){var p=new l;x._pt=0,p.init(t,n?e+n:e,x,0,[t]),p.render(1,p),x._pt&&gn(1,x)}:c.set(t,p);return l?h:function(e){return h(t,p,n?e+n:e,c,1)}},quickTo:function(t,e,n){var r,o=Fn.to(t,Lt(((r={})[e]="+=0.1",r.paused=!0,r),n||{})),l=function(t,n,r){return o.resetTo(e,t,n,r)};return l.tween=o,l},isTweening:function(t){return d.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=He(t.ease,D.ease)),Ft(D,t||{})},config:function(t){return Ft(A,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,r=t.plugins,o=t.defaults,l=t.extendTimeline;(r||"").split(",").forEach((function(t){return t&&!mt[t]&&!et[t]&&ot(e+" effect requires "+t+" plugin.")})),vt[e]=function(t,e,r){return n(de(t),Ot(e||{},o),r)},l&&($e.prototype[e]=function(t,n,r){return this.add(vt[e](t,z(n)?n:(r=n)&&{},this),r)})},registerEase:function(t,e){Ne[t]=He(e)},parseEase:function(t,e){return arguments.length?He(t,e):Ne},getById:function(t){return d.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,o=new $e(t);for(o.smoothChildTiming=V(t.smoothChildTiming),d.remove(o),o._dp=0,o._time=o._tTime=d._time,n=d._first;n;)r=n._next,!e&&!n._dur&&n instanceof un&&n.vars.onComplete===n._targets[0]||$t(o,n,n._start-n._delay),n=r;return $t(d,o,0),o},context:function(t,e){return t?new Pn(t,e):h},matchMedia:function(t){return new Cn(t)},matchMediaRefresh:function(){return Sn.forEach((function(t){var e,p,n=t.conditions;for(p in n)n[p]&&(n[p]=!1,e=1);e&&t.revert()}))||Dn()},addEventListener:function(t,e){var a=En[t]||(En[t]=[]);~a.indexOf(e)||a.push(e)},removeEventListener:function(t,e){var a=En[t],i=a&&a.indexOf(e);i>=0&&a.splice(i,1)},utils:{wrap:function t(e,n,r){var o=n-e;return X(e)?_e(e,t(0,e.length),n):oe(r,(function(t){return(o+(t-e)%o)%o+e}))},wrapYoyo:function t(e,n,r){var o=n-e,l=2*o;return X(e)?_e(e,t(0,e.length-1),n):oe(r,(function(t){return e+((t=(l+(t-e)%l)%l||0)>o?l-t:t)}))},distribute:me,random:ye,snap:ge,normalize:function(t,e,n){return xe(t,e,0,1,n)},getUnit:ue,clamp:function(t,e,n){return oe(n,(function(n){return se(t,e,n)}))},splitColor:Pe,toArray:de,selector:pe,mapRange:xe,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||ue(n))}},interpolate:function t(e,n,progress,r){var o=isNaN(e+n)?0:function(p){return(1-p)*e+p*n};if(!o){var p,i,l,c,h,d=N(e),f={};if(!0===progress&&(r=1)&&(progress=null),d)e={p:e},n={p:n};else if(X(e)&&!X(n)){for(l=[],c=e.length,h=c-2,i=1;i<c;i++)l.push(t(e[i-1],e[i]));c--,o=function(p){p*=c;var i=Math.min(h,~~p);return l[i](p-i)},progress=n}else r||(e=Lt(X(e)?[]:{},e));if(!l){for(p in n)tn.call(f,e,p,"get",n[p]);o=function(p){return gn(p,f)||(d?e.p:e)}}}return oe(progress,o)},shuffle:fe},install:it,effects:vt,ticker:Re,updateRoot:$e.updateRoot,plugins:mt,globalTimeline:d,core:{PropTween:wn,globals:st,Tween:un,Timeline:$e,Animation:Qe,getCache:xt,_removeLinkedListItem:jt,reverting:function(){return c},context:function(t){return t&&h&&(h.data.push(t),t._ctx=h),h},suppressOverwrites:function(t){return l=t}}};St("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return kn[t]=un[t]})),Re.add($e.updateRoot),x=kn.to({},{duration:0});var On=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Ln=function(t,e){return{name:t,rawVars:1,init:function(t,n,r){r._onInit=function(t){var r,p;if(N(n)&&(r={},St(n,(function(t){return r[t]=1})),n=r),e){for(p in r={},n)r[p]=e(n[p]);n=r}!function(t,e){var p,i,n,r=t._targets;for(p in e)for(i=r.length;i--;)(n=t._ptLookup[i][p])&&(n=n.d)&&(n._pt&&(n=On(n,p)),n&&n.modifier&&n.modifier(e[p],t,r[i],p))}(t,n)}}}},Fn=kn.registerPlugin({name:"attr",init:function(t,e,n,r,o){var p,l,c;for(p in this.tween=n,e)c=t.getAttribute(p)||"",(l=this.add(t,"setAttribute",(c||0)+"",e[p],r,o,0,0,p)).op=p,l.b=c,this._props.push(p)},render:function(t,data){for(var e=data._pt;e;)c?e.set(e.t,e.p,e.b,e):e.r(t,e.d),e=e._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Ln("roundProps",ve),Ln("modifiers"),Ln("snap",ge))||kn;un.version=$e.version=Fn.version="3.11.0",y=1,H()&&Ie();Ne.Power0,Ne.Power1,Ne.Power2,Ne.Power3,Ne.Power4,Ne.Linear,Ne.Quad,Ne.Cubic,Ne.Quart,Ne.Quint,Ne.Strong,Ne.Elastic,Ne.Back,Ne.SteppedEase,Ne.Bounce,Ne.Sine,Ne.Expo,Ne.Circ},60:function(t,e,n){"use strict";n(29),n(107),n(12),n(28),n(31),n(246);var r=n(346);function o(){var t=navigator.userAgent.toLowerCase(),e=navigator.appVersion.toLowerCase(),n=/windows phone|iemobile|wpdesktop/.test(t),r=!n&&/android.*mobile/.test(t),o=!n&&!r&&/android/i.test(t),l=r||o,c=!n&&/ip(hone|od|ad)/i.test(t)&&!window.MSStream,h=!n&&/ipad/i.test(t)&&c,d=o||h,f=r||c&&!h||n,m=f||d,v=t.indexOf("firefox")>-1,y=!!t.match(/version\/[\d\.]+.*safari/),_=t.indexOf("opr")>-1,x=!window.ActiveXObject&&"ActiveXObject"in window,w=e.indexOf("msie")>-1||x||e.indexOf("edge")>-1,S=t.indexOf("edge")>-1,E=null!==window.chrome&&void 0!==window.chrome&&"google inc."==navigator.vendor.toLowerCase()&&!_&&!S;this.infos={isDroid:l,isDroidPhone:r,isDroidTablet:o,isWindowsPhone:n,isIos:c,isIpad:h,isDevice:m,isEdge:S,isIE:w,isIE11:x,isPhone:f,isTablet:d,isFirefox:v,isSafari:y,isOpera:_,isChrome:E,isDesktop:!f&&!d},Object.keys(this.infos).forEach((function(t){Object.defineProperty(this,t,{get:function(){return this.infos[t]}})}),this),Object.freeze(this)}t.exports="undefined"!=typeof navigator?new o:null,o.prototype.addClasses=function(t){Object.keys(this.infos).forEach((function(e){this.infos[e]&&function(t,e){t.addClass?t.addClass(e):t.classList?t.classList.add(e):t.className+=" "+e}(t,r(e))}),this)},o.prototype.getInfos=function(){return source=this.infos,JSON.parse(JSON.stringify(source));var source}},66:function(t,e,n){"use strict";n(29);var r,o,l=n(343),c=n(344),h="resize",d="undefined"!=typeof window,f=new l,m=!!d&&(/ip(hone|od|ad)/i.test(window.navigator.userAgent.toLowerCase())&&!window.MSStream),v=t.exports={width:0,height:0,hasBar:!1,isLandscape:!1,addListener:function(t,e){f.on(h,t,e)},removeListener:function(t,e){t&&f.off(h,t,e)},bind:function(t){t=t||{},v.unbind(),r=t.debounceTime||150,o=c(y,r),window.addEventListener(h,o)},unbind:function(){window.removeEventListener(h,o)}};function y(){m&&(v.hasBar=v.width>v.height&&v.height>window.innerHeight),v.width=d?window.innerWidth:0,v.height=d?window.innerHeight:0,v.isLandscape=v.width>v.height,f.emit(h,v.width,v.height)}d&&(y(),v.bind())},80:function(t,e,n){"use strict";n.d(e,"a",(function(){return v}));n(12),n(79);var r=n(0),o=n(1),l=n(2),c=n(42),h=n(4),d=n(3),f=n(88);function m(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(h.a)(t);if(e){var o=Object(h.a)(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var v=function(t){Object(l.a)(n,t);var e=m(n);function n(t,o){var l;return Object(r.a)(this,n),(l=e.call(this)).textureID=void 0!==o?o:"tDiffuse",t instanceof d.q?(l.uniforms=t.uniforms,l.material=t):t&&(l.uniforms=d.s.clone(t.uniforms),l.material=new d.q({defines:Object.assign({},t.defines),uniforms:l.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),l.fsQuad=new f.a(l.material),l}return Object(o.a)(n,[{key:"render",value:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}]),n}(f.b)},81:function(t,e,n){"use strict";n.d(e,"b",(function(){return Cr})),n.d(e,"a",(function(){return R}));var r={};n.r(r),n.d(r,"Footer",(function(){return et})),n.d(r,"Header",(function(){return nt})),n.d(r,"Label",(function(){return it})),n.d(r,"Links",(function(){return at})),n.d(r,"Logo",(function(){return ot})),n.d(r,"Menu",(function(){return st})),n.d(r,"Navigation",(function(){return ut})),n.d(r,"Typewriter",(function(){return lt})),n.d(r,"Video",(function(){return ct})),n.d(r,"WebGL",(function(){return ht})),n.d(r,"CareersAbout",(function(){return pt})),n.d(r,"CareersBenefit",(function(){return ft})),n.d(r,"CareersDepartments",(function(){return mt})),n.d(r,"CareersGrid",(function(){return vt})),n.d(r,"CareersIntro",(function(){return gt})),n.d(r,"CareersLogo",(function(){return yt})),n.d(r,"CareersOffer",(function(){return _t})),n.d(r,"CareersSeeking",(function(){return bt})),n.d(r,"CareersTeams",(function(){return xt})),n.d(r,"CareersText",(function(){return wt})),n.d(r,"HomeAbout",(function(){return St})),n.d(r,"HomeApeCoin",(function(){return Et})),n.d(r,"HomeFooter",(function(){return Mt})),n.d(r,"HomeIntro",(function(){return Tt})),n.d(r,"HomeProjects",(function(){return At})),n.d(r,"HomeWebGL",(function(){return Dt})),n.d(r,"PressContent",(function(){return Pt})),n.d(r,"PressHeader",(function(){return Ct})),n.d(r,"PressPreview",(function(){return kt})),n.d(r,"PressSlicesEmbed",(function(){return Ot})),n.d(r,"PressSlicesImage",(function(){return Lt})),n.d(r,"PressSlicesQuote",(function(){return Ft})),n.d(r,"PressSlicesText",(function(){return Rt}));var o={};n.r(o),n.d(o,"getImage",(function(){return or})),n.d(o,"supportsAlias",(function(){return sr}));var l={};n.r(l),n.d(l,"getImage",(function(){return cr}));n(31),n(30),n(37),n(47),n(28),n(48);var c=n(15),h=n(10),d=(n(46),n(36),n(12),n(67),n(29),n(65),n(11)),f=n(99),m=n(276),v=n(209),y=n.n(v),_=n(109),x=n.n(_),w=(n(44),n(45),n(210)),S=n(20),E=n(9);"scrollRestoration"in window.history&&(Object(E.u)("manual"),window.addEventListener("beforeunload",(function(){Object(E.u)("auto")})),window.addEventListener("load",(function(){Object(E.u)("manual")})));function M(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function T(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?M(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):M(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var A=function(){};d.a.use(w.a);var D={mode:"history",base:"/",linkActiveClass:"nuxt-link-active",linkExactActiveClass:"nuxt-link-exact-active",scrollBehavior:function(t,e,n){var r=!1,o=t!==e;n?r=n:o&&function(t){var e=Object(E.h)(t);if(1===e.length){var n=e[0].options;return!1!==(void 0===n?{}:n).scrollToTop}return e.some((function(t){var e=t.options;return e&&e.scrollToTop}))}(t)&&(r={x:0,y:0});var l=window.$nuxt;return(!o||t.path===e.path&&t.hash!==e.hash)&&l.$nextTick((function(){return l.$emit("triggerScroll")})),new Promise((function(e){l.$once("triggerScroll",(function(){if(t.hash){var n=t.hash;void 0!==window.CSS&&void 0!==window.CSS.escape&&(n="#"+window.CSS.escape(n.substr(1)));try{document.querySelector(n)&&(r={selector:n})}catch(t){console.warn("Failed to save scroll position. Please add CSS.escape() polyfill (https://github.com/mathiasbynens/CSS.escape).")}}e(r)}))}))},routes:[{path:"/preview",component:function(){return Object(E.n)(n.e(48).then(n.bind(null,540)))},name:"prismic-preview"},{path:"/blog",component:function(){return Object(E.n)(n.e(35).then(n.bind(null,541)))},name:"blog"},{path:"/careers",component:function(){return Object(E.n)(Promise.all([n.e(0),n.e(36)]).then(n.bind(null,542)))},name:"careers"},{path:"/links",component:function(){return Object(E.n)(n.e(39).then(n.bind(null,543)))},name:"links"},{path:"/news",component:function(){return Object(E.n)(n.e(41).then(n.bind(null,544)))},name:"news"},{path:"/press",component:function(){return Object(E.n)(n.e(42).then(n.bind(null,545)))},name:"press"},{path:"/privacy",component:function(){return Object(E.n)(n.e(43).then(n.bind(null,546)))},name:"privacy"},{path:"/terms",component:function(){return Object(E.n)(n.e(44).then(n.bind(null,547)))},name:"terms"},{path:"/blog/:id",component:function(){return Object(E.n)(Promise.all([n.e(1),n.e(34)]).then(n.bind(null,548)))},name:"blog-id"},{path:"/links/:id",component:function(){return Object(E.n)(n.e(38).then(n.bind(null,549)))},name:"links-id"},{path:"/news/:id",component:function(){return Object(E.n)(Promise.all([n.e(1),n.e(40)]).then(n.bind(null,550)))},name:"news-id"},{path:"/",component:function(){return Object(E.n)(n.e(37).then(n.bind(null,551)))},name:"index"},{path:"/*",component:function(){return Object(E.n)(n.e(33).then(n.bind(null,553)))},name:"all"}],fallback:!1};function P(t,e){var base=e._app&&e._app.basePath||D.base,n=new w.a(T(T({},D),{},{base:base})),r=n.push;n.push=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,n=arguments.length>2?arguments[2]:void 0;return r.call(this,t,e,n)};var o=n.resolve.bind(n);return n.resolve=function(t,e,n){return"string"==typeof t&&(t=Object(S.g)(t)),o(t,e,n)},n}var C={name:"NuxtChild",functional:!0,props:{nuxtChildKey:{type:String,default:""},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0}},render:function(t,e){var n=e.parent,data=e.data,r=e.props,o=n.$createElement;data.nuxtChild=!0;for(var l=n,c=n.$nuxt.nuxt.transitions,h=n.$nuxt.nuxt.defaultTransition,d=0;n;)n.$vnode&&n.$vnode.data.nuxtChild&&d++,n=n.$parent;data.nuxtChildDepth=d;var f=c[d]||h,m={};k.forEach((function(t){void 0!==f[t]&&(m[t]=f[t])}));var v={};O.forEach((function(t){"function"==typeof f[t]&&(v[t]=f[t].bind(l))}));var y=v.beforeEnter;if(v.beforeEnter=function(t){if(window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")})),y)return y.call(l,t)},!1===f.css){var _=v.leave;(!_||_.length<2)&&(v.leave=function(t,e){_&&_.call(l,t),l.$nextTick(e)})}var x=o("routerView",data);return r.keepAlive&&(x=o("keep-alive",{props:r.keepAliveProps},[x])),o("transition",{props:m,on:v},[x])}},k=["name","mode","appear","css","type","duration","enterClass","leaveClass","appearClass","enterActiveClass","enterActiveClass","leaveActiveClass","appearActiveClass","enterToClass","leaveToClass","appearToClass"],O=["beforeEnter","enter","afterEnter","enterCancelled","beforeLeave","leave","afterLeave","leaveCancelled","beforeAppear","appear","afterAppear","appearCancelled"],L={name:"NuxtError",props:{error:{type:Object,default:null}},computed:{statusCode:function(){return this.error&&this.error.statusCode||500},message:function(){return this.error.message||"Error"}},head:function(){return{title:this.message,meta:[{name:"viewport",content:"width=device-width,initial-scale=1.0,minimum-scale=1.0"}]}}},F=(n(340),n(35)),R=Object(F.a)(L,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"__nuxt-error-page"},[n("div",{staticClass:"error"},[n("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"90",height:"90",fill:"#DBE1EC",viewBox:"0 0 48 48"}},[n("path",{attrs:{d:"M22 30h4v4h-4zm0-16h4v12h-4zm1.99-10C12.94 4 4 12.95 4 24s8.94 20 19.99 20S44 35.05 44 24 35.04 4 23.99 4zM24 40c-8.84 0-16-7.16-16-16S15.16 8 24 8s16 7.16 16 16-7.16 16-16 16z"}})]),t._v(" "),n("div",{staticClass:"title"},[t._v(t._s(t.message))]),t._v(" "),404===t.statusCode?n("p",{staticClass:"description"},[void 0===t.$route?n("a",{staticClass:"error-link",attrs:{href:"/"}}):n("NuxtLink",{staticClass:"error-link",attrs:{to:"/"}},[t._v("Back to the home page")])],1):t._e(),t._v(" "),t._m(0)])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"logo"},[n("a",{attrs:{href:"https://nuxtjs.org",target:"_blank",rel:"noopener"}},[t._v("Nuxt")])])}],!1,null,null,null).exports,I=n(40),N=(n(106),{name:"Nuxt",components:{NuxtChild:C,NuxtError:R},props:{nuxtChildKey:{type:String,default:void 0},keepAlive:Boolean,keepAliveProps:{type:Object,default:void 0},name:{type:String,default:"default"}},errorCaptured:function(t){this.displayingNuxtError&&(this.errorFromNuxtError=t,this.$forceUpdate())},computed:{routerViewKey:function(){if(void 0!==this.nuxtChildKey||this.$route.matched.length>1)return this.nuxtChildKey||Object(E.c)(this.$route.matched[0].path)(this.$route.params);var t=Object(I.a)(this.$route.matched,1)[0];if(!t)return this.$route.path;var e=t.components.default;if(e&&e.options){var n=e.options;if(n.key)return"function"==typeof n.key?n.key(this.$route):n.key}return/\/$/.test(t.path)?this.$route.path:this.$route.path.replace(/\/$/,"")}},beforeCreate:function(){d.a.util.defineReactive(this,"nuxt",this.$root.$options.nuxt)},render:function(t){var e=this;return this.nuxt.err?this.errorFromNuxtError?(this.$nextTick((function(){return e.errorFromNuxtError=!1})),t("div",{},[t("h2","An error occurred while showing the error page"),t("p","Unfortunately an error occurred and while showing the error page another error occurred"),t("p","Error details: ".concat(this.errorFromNuxtError.toString())),t("nuxt-link",{props:{to:"/"}},"Go back to home")])):(this.displayingNuxtError=!0,this.$nextTick((function(){return e.displayingNuxtError=!1})),t(R,{props:{error:this.nuxt.err}})):t("NuxtChild",{key:this.routerViewKey,props:this.$props})}}),j=(n(61),n(68),n(69),n(73),n(75),n(101),n(90),{name:"NuxtLoading",data:function(){return{percent:0,show:!1,canSucceed:!0,reversed:!1,skipTimerCount:0,rtl:!1,throttle:200,duration:5e3,continuous:!1}},computed:{left:function(){return!(!this.continuous&&!this.rtl)&&(this.rtl?this.reversed?"0px":"auto":this.reversed?"auto":"0px")}},beforeDestroy:function(){this.clear()},methods:{clear:function(){clearInterval(this._timer),clearTimeout(this._throttle),this._timer=null},start:function(){var t=this;return this.clear(),this.percent=0,this.reversed=!1,this.skipTimerCount=0,this.canSucceed=!0,this.throttle?this._throttle=setTimeout((function(){return t.startTimer()}),this.throttle):this.startTimer(),this},set:function(t){return this.show=!0,this.canSucceed=!0,this.percent=Math.min(100,Math.max(0,Math.floor(t))),this},get:function(){return this.percent},increase:function(t){return this.percent=Math.min(100,Math.floor(this.percent+t)),this},decrease:function(t){return this.percent=Math.max(0,Math.floor(this.percent-t)),this},pause:function(){return clearInterval(this._timer),this},resume:function(){return this.startTimer(),this},finish:function(){return this.percent=this.reversed?0:100,this.hide(),this},hide:function(){var t=this;return this.clear(),setTimeout((function(){t.show=!1,t.$nextTick((function(){t.percent=0,t.reversed=!1}))}),500),this},fail:function(t){return this.canSucceed=!1,this},startTimer:function(){var t=this;this.show||(this.show=!0),void 0===this._cut&&(this._cut=1e4/Math.floor(this.duration)),this._timer=setInterval((function(){t.skipTimerCount>0?t.skipTimerCount--:(t.reversed?t.decrease(t._cut):t.increase(t._cut),t.continuous&&(t.percent>=100||t.percent<=0)&&(t.skipTimerCount=1,t.reversed=!t.reversed))}),100)}},render:function(t){var e=t(!1);return this.show&&(e=t("div",{staticClass:"nuxt-progress",class:{"nuxt-progress-notransition":this.skipTimerCount>0,"nuxt-progress-failed":!this.canSucceed},style:{width:this.percent+"%",left:this.left}})),e}}),B=(n(341),Object(F.a)(j,undefined,undefined,!1,null,null,null).exports),U=(n(342),n(290)),z=n(291);function V(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var G={_default:Object(E.s)(U.a),_link:Object(E.s)(z.a)},W={render:function(t,e){var n=t("NuxtLoading",{ref:"loading"}),r=t(this.layout||"nuxt"),o=t("div",{domProps:{id:"__layout"},key:this.layoutName},[r]),l=t("transition",{props:{name:"layout",mode:"out-in"},on:{beforeEnter:function(t){window.$nuxt.$nextTick((function(){window.$nuxt.$emit("triggerScroll")}))}}},[o]);return t("div",{domProps:{id:"__nuxt"}},[n,l])},data:function(){return{isOnline:!0,layout:null,layoutName:"",nbFetching:0}},beforeCreate:function(){d.a.util.defineReactive(this,"nuxt",this.$options.nuxt)},created:function(){this.$root.$options.$nuxt=this,window.$nuxt=this,this.refreshOnlineStatus(),window.addEventListener("online",this.refreshOnlineStatus),window.addEventListener("offline",this.refreshOnlineStatus),this.error=this.nuxt.error,this.context=this.$options.context},mounted:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.$loading=t.$refs.loading,!t.isPreview){e.next=9;break}if(!t.$store||!t.$store._actions.nuxtServerInit){e.next=6;break}return t.$loading.start(),e.next=6,t.$store.dispatch("nuxtServerInit",t.context);case 6:return e.next=8,t.refresh();case 8:t.$loading.finish();case 9:case"end":return e.stop()}}),e)})))()},watch:{"nuxt.err":"errorChanged"},computed:{isOffline:function(){return!this.isOnline},isFetching:function(){return this.nbFetching>0},isPreview:function(){return Boolean(this.$options.previewData)}},methods:{refreshOnlineStatus:function(){void 0===window.navigator.onLine?this.isOnline=!0:this.isOnline=window.navigator.onLine},refresh:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=Object(E.i)(t.$route)).length){e.next=3;break}return e.abrupt("return");case 3:return t.$loading.start(),r=n.map((function(e){var p=[];if(e.$options.fetch&&e.$options.fetch.length&&p.push(Object(E.q)(e.$options.fetch,t.context)),e.$fetch)p.push(e.$fetch());else{var n,r=V(Object(E.f)(e.$vnode.componentInstance));try{for(r.s();!(n=r.n()).done;){var component=n.value;p.push(component.$fetch())}}catch(t){r.e(t)}finally{r.f()}}return e.$options.asyncData&&p.push(Object(E.q)(e.$options.asyncData,t.context).then((function(t){for(var n in t)d.a.set(e.$data,n,t[n])}))),Promise.all(p)})),e.prev=5,e.next=8,Promise.all(r);case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),t.$loading.fail(e.t0),Object(E.l)(e.t0),t.error(e.t0);case 15:t.$loading.finish();case 16:case"end":return e.stop()}}),e,null,[[5,10]])})))()},errorChanged:function(){if(this.nuxt.err){this.$loading&&(this.$loading.fail&&this.$loading.fail(this.nuxt.err),this.$loading.finish&&this.$loading.finish());var t=(R.options||R).layout;"function"==typeof t&&(t=t(this.context)),this.setLayout(t)}},setLayout:function(t){return t&&G["_"+t]||(t="default"),this.layoutName=t,this.layout=G["_"+t],this.layout},loadLayout:function(t){return t&&G["_"+t]||(t="default"),Promise.resolve(G["_"+t])},getRouterBase:function(){return Object(S.o)(this.$router.options.base)},getRoutePath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",base=this.getRouterBase();return Object(S.o)(Object(S.n)(Object(S.h)(t).pathname,base))},getStaticAssetsPath:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",e=window.__NUXT__.staticAssetsBase;return Object(E.v)(e,this.getRoutePath(t))},fetchStaticManifest:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.__NUXT_IMPORT__("manifest.js",Object(S.g)(Object(E.v)(t.getStaticAssetsPath(),"manifest.js"))));case 1:case"end":return e.stop()}}),e)})))()},setPagePayload:function(t){this._pagePayload=t,this._fetchCounters={}},fetchPayload:function(t,e){var n=this;return Object(c.a)(regeneratorRuntime.mark((function r(){var path,o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return path=Object(S.a)(n.getRoutePath(t)),r.next=3,n.fetchStaticManifest();case 3:if(r.sent.routes.includes(path)){r.next=7;break}throw e||n.setPagePayload(!1),new Error("Route ".concat(path," is not pre-rendered"));case 7:return o=Object(E.v)(n.getStaticAssetsPath(t),"payload.js"),r.prev=8,r.next=11,window.__NUXT_IMPORT__(path,Object(S.g)(o));case 11:return l=r.sent,e||n.setPagePayload(l),r.abrupt("return",l);case 16:throw r.prev=16,r.t0=r.catch(8),e||n.setPagePayload(!1),r.t0;case 20:case"end":return r.stop()}}),r,null,[[8,16]])})))()}},components:{NuxtLoading:B}};n(89);function X(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function Y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}d.a.use(f.a);var Q=["state","getters","actions","mutations"],$={};$.modules=$.modules||{},function(t,e){t=t.default||t;var n=e.replace(/\.(js|mjs)$/,"").split("/"),r=n[n.length-1],o="store/".concat(e);if(t="state"===r?function(t,e){if("function"!=typeof t){console.warn("".concat(e," should export a method that returns an object"));var n=Object.assign({},t);return function(){return n}}return J(t,e)}(t,o):J(t,o),Q.includes(r)){var l=r;tt(Z($,n,{isProperty:!0}),t,l)}else{"index"===r&&(n.pop(),r=n[n.length-1]);var c,h=Z($,n),d=X(Q);try{for(d.s();!(c=d.n()).done;){var f=c.value;tt(h,t[f],f)}}catch(t){d.e(t)}finally{d.f()}!1===t.namespaced&&delete h.namespaced}}(n(404),"app.js");var K=$ instanceof Function?$:function(){return new f.a.Store(Object.assign({strict:!1},$))};function J(t,e){if(t.state&&"function"!=typeof t.state){console.warn("'state' should be a method that returns an object in ".concat(e));var n=Object.assign({},t.state);t=Object.assign({},t,{state:function(){return n}})}return t}function Z(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.isProperty,o=void 0!==r&&r;if(!e.length||o&&1===e.length)return t;var l=e.shift();return t.modules[l]=t.modules[l]||{},t.modules[l].namespaced=!0,t.modules[l].modules=t.modules[l].modules||{},Z(t.modules[l],e,{isProperty:o})}function tt(t,e,n){e&&("state"===n?t.state=e||t.state:t[n]=Object.assign({},t[n],e))}var et=function(){return n.e(14).then(n.bind(null,435)).then((function(t){return It(t.default||t)}))},nt=function(){return Promise.resolve().then(n.bind(null,274)).then((function(t){return It(t.default||t)}))},it=function(){return n.e(21).then(n.bind(null,441)).then((function(t){return It(t.default||t)}))},at=function(){return n.e(22).then(n.bind(null,454)).then((function(t){return It(t.default||t)}))},ot=function(){return Promise.resolve().then(n.bind(null,425)).then((function(t){return It(t.default||t)}))},st=function(){return Promise.resolve().then(n.bind(null,424)).then((function(t){return It(t.default||t)}))},ut=function(){return n.e(23).then(n.bind(null,552)).then((function(t){return It(t.default||t)}))},lt=function(){return n.e(31).then(n.bind(null,451)).then((function(t){return It(t.default||t)}))},ct=function(){return Promise.all([n.e(0),n.e(32)]).then(n.bind(null,444)).then((function(t){return It(t.default||t)}))},ht=function(){return Promise.resolve().then(n.bind(null,426)).then((function(t){return It(t.default||t)}))},pt=function(){return Promise.all([n.e(0),n.e(4)]).then(n.bind(null,509)).then((function(t){return It(t.default||t)}))},ft=function(){return n.e(5).then(n.bind(null,512)).then((function(t){return It(t.default||t)}))},mt=function(){return n.e(6).then(n.bind(null,516)).then((function(t){return It(t.default||t)}))},vt=function(){return n.e(7).then(n.bind(null,515)).then((function(t){return It(t.default||t)}))},gt=function(){return n.e(8).then(n.bind(null,507)).then((function(t){return It(t.default||t)}))},yt=function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,508)).then((function(t){return It(t.default||t)}))},_t=function(){return n.e(10).then(n.bind(null,511)).then((function(t){return It(t.default||t)}))},bt=function(){return Promise.all([n.e(0),n.e(11)]).then(n.bind(null,513)).then((function(t){return It(t.default||t)}))},xt=function(){return n.e(12).then(n.bind(null,510)).then((function(t){return It(t.default||t)}))},wt=function(){return n.e(13).then(n.bind(null,514)).then((function(t){return It(t.default||t)}))},St=function(){return n.e(15).then(n.bind(null,519)).then((function(t){return It(t.default||t)}))},Et=function(){return n.e(16).then(n.bind(null,521)).then((function(t){return It(t.default||t)}))},Mt=function(){return n.e(17).then(n.bind(null,522)).then((function(t){return It(t.default||t)}))},Tt=function(){return n.e(18).then(n.bind(null,518)).then((function(t){return It(t.default||t)}))},At=function(){return n.e(19).then(n.bind(null,520)).then((function(t){return It(t.default||t)}))},Dt=function(){return n.e(20).then(n.bind(null,517)).then((function(t){return It(t.default||t)}))},Pt=function(){return n.e(24).then(n.bind(null,498)).then((function(t){return It(t.default||t)}))},Ct=function(){return n.e(25).then(n.bind(null,497)).then((function(t){return It(t.default||t)}))},kt=function(){return n.e(26).then(n.bind(null,445)).then((function(t){return It(t.default||t)}))},Ot=function(){return n.e(27).then(n.bind(null,477)).then((function(t){return It(t.default||t)}))},Lt=function(){return n.e(28).then(n.bind(null,475)).then((function(t){return It(t.default||t)}))},Ft=function(){return n.e(29).then(n.bind(null,476)).then((function(t){return It(t.default||t)}))},Rt=function(){return n.e(30).then(n.bind(null,474)).then((function(t){return It(t.default||t)}))};function It(t){if(!t||!t.functional)return t;var e=Array.isArray(t.props)?t.props:Object.keys(t.props||{});return{render:function(n){var r={},o={};for(var l in this.$attrs)e.includes(l)?o[l]=this.$attrs[l]:r[l]=this.$attrs[l];return n(t,{on:this.$listeners,attrs:r,props:o,scopedSlots:this.$scopedSlots},this.$slots.default)}}}for(var Nt in r)d.a.component(Nt,r[Nt]),d.a.component("Lazy"+Nt,r[Nt]);n(55);var jt=n(282),Bt=function(t,b){return Bt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,b){t.__proto__=b}||function(t,b){for(var p in b)b.hasOwnProperty(p)&&(t[p]=b[p])},Bt(t,b)};function Ut(t,b){function e(){this.constructor=t}Bt(t,b),t.prototype=null===b?Object.create(b):(e.prototype=b.prototype,new e)}var zt=function(){return zt=Object.assign||function(t){for(var s,i=1,e=arguments.length;i<e;i++)for(var p in s=arguments[i])Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},zt.apply(this,arguments)},Vt=function(){function t(data){this.data={},this.data=data}return t.prototype.id=function(){return this.data.id},t.prototype.ref=function(){return this.data.ref},t.prototype.label=function(){return this.data.label},t}(),Ht=function(){function t(data){this.data={},this.data=data,this.variations=(data.variations||[]).map((function(t){return new Vt(t)}))}return t.prototype.id=function(){return this.data.id},t.prototype.googleId=function(){return this.data.googleId},t.prototype.name=function(){return this.data.name},t}(),Gt=function(){function t(data){data&&(this.drafts=(data.drafts||[]).map((function(t){return new Ht(t)})),this.running=(data.running||[]).map((function(t){return new Ht(t)})))}return t.prototype.current=function(){return this.running.length>0?this.running[0]:null},t.prototype.refFromCookie=function(t){if(!t||""===t.trim())return null;var e=t.trim().split(" ");if(e.length<2)return null;var n=e[0],r=parseInt(e[1],10),o=this.running.filter((function(t){return t.googleId()===n&&t.variations.length>r}))[0];return o?o.variations[r].ref():null},t}(),Wt=function(){function t(form,t){for(var e in this.httpClient=t,this.form=form,this.data={},form.fields)form.fields[e].default&&(this.data[e]=[form.fields[e].default])}return t.prototype.set=function(t,e){var n=this.form.fields[t];if(!n)throw new Error("Unknown field "+t);var r=""===e||void 0===e?null:e,o=this.data[t]||[];o=n.multiple?r?o.concat([r]):o:r?[r]:o,this.data[t]=o},t.prototype.url=function(){var t=this.form.action;if(this.data){var e=t.indexOf("?")>-1?"&":"?";for(var n in this.data)if(Object.prototype.hasOwnProperty.call(this.data,n)){var r=this.data[n];if(r)for(var i=0;i<r.length;i++)t+=e+n+"="+encodeURIComponent(r[i]),e="&"}}return t},t.prototype.submit=function(t){return this.httpClient.cachedRequest(this.url()).then((function(e){return t&&t(null,e),e})).catch((function(e){throw t&&t(e),e}))},t}(),Xt=function(t){function e(form,e){return t.call(this,form,e)||this}return Ut(e,t),e.prototype.set=function(e,n){return t.prototype.set.call(this,e,n),this},e.prototype.ref=function(t){return this.set("ref",t)},e.prototype.query=function(t){if("string"==typeof t)return this.query([t]);if(Array.isArray(t))return this.set("q","["+t.join("")+"]");throw new Error("Invalid query : "+t)},e.prototype.pageSize=function(t){return this.set("pageSize",t)},e.prototype.graphQuery=function(t){return this.set("graphQuery",t)},e.prototype.lang=function(t){return this.set("lang",t)},e.prototype.page=function(p){return this.set("page",p)},e.prototype.after=function(t){return this.set("after",t)},e.prototype.orderings=function(t){return t?this.set("orderings","["+t.join(",")+"]"):this},e}(Wt),Yt=function(t){function e(form,e){return t.call(this,form,e)||this}return Ut(e,t),e}(Wt),qt="at",Qt="not",$t="missing",Kt="has",Jt="any",Zt="in",te="fulltext",ee="similar",ne="number.gt",re="number.lt",ie="number.inRange",ae="date.before",oe="date.after",se="date.between",ue="date.day-of-month",le="date.day-of-month-after",ce="date.day-of-month-before",he="date.day-of-week",de="date.day-of-week-after",pe="date.day-of-week-before",fe="date.month",me="date.month-before",ve="date.month-after",ge="date.year",ye="date.hour",_e="date.hour-before",be="date.hour-after",xe="geopoint.near";function we(t){if("string"==typeof t)return'"'+t+'"';if("number"==typeof t)return t.toString();if(t instanceof Date)return t.getTime().toString();if(Array.isArray(t))return"["+t.map((function(t){return we(t)})).join(",")+"]";if("boolean"==typeof t)return t.toString();throw new Error("Unable to encode "+t+" of type "+typeof t)}var Se={near:function(t,e,n,r){return"["+xe+"("+t+", "+e+", "+n+", "+r+")]"}},Ee={before:function(t,e){return"["+ae+"("+t+", "+we(e)+")]"},after:function(t,e){return"["+oe+"("+t+", "+we(e)+")]"},between:function(t,e,n){return"["+se+"("+t+", "+we(e)+", "+we(n)+")]"},dayOfMonth:function(t,e){return"["+ue+"("+t+", "+e+")]"},dayOfMonthAfter:function(t,e){return"["+le+"("+t+", "+e+")]"},dayOfMonthBefore:function(t,e){return"["+ce+"("+t+", "+e+")]"},dayOfWeek:function(t,e){return"["+he+"("+t+", "+we(e)+")]"},dayOfWeekAfter:function(t,e){return"["+de+"("+t+", "+we(e)+")]"},dayOfWeekBefore:function(t,e){return"["+pe+"("+t+", "+we(e)+")]"},month:function(t,e){return"["+fe+"("+t+", "+we(e)+")]"},monthBefore:function(t,e){return"["+me+"("+t+", "+we(e)+")]"},monthAfter:function(t,e){return"["+ve+"("+t+", "+we(e)+")]"},year:function(t,e){return"["+ge+"("+t+", "+e+")]"},hour:function(t,e){return"["+ye+"("+t+", "+e+")]"},hourBefore:function(t,e){return"["+_e+"("+t+", "+e+")]"},hourAfter:function(t,e){return"["+be+"("+t+", "+e+")]"}},Me={gt:function(t,e){return"["+ne+"("+t+", "+e+")]"},lt:function(t,e){return"["+re+"("+t+", "+e+")]"},inRange:function(t,e,n){return"["+ie+"("+t+", "+e+", "+n+")]"}},Te={at:function(t,e){return"["+qt+"("+t+", "+we(e)+")]"},not:function(t,e){return"["+Qt+"("+t+", "+we(e)+")]"},missing:function(t){return"["+$t+"("+t+")]"},has:function(t){return"["+Kt+"("+t+")]"},any:function(t,e){return"["+Jt+"("+t+", "+we(e)+")]"},in:function(t,e){return"["+Zt+"("+t+", "+we(e)+")]"},fulltext:function(t,e){return"["+te+"("+t+", "+we(e)+")]"},similar:function(t,e){return"["+ee+'("'+t+'", '+e+")]"},date:Ee,dateBefore:Ee.before,dateAfter:Ee.after,dateBetween:Ee.between,dayOfMonth:Ee.dayOfMonth,dayOfMonthAfter:Ee.dayOfMonthAfter,dayOfMonthBefore:Ee.dayOfMonthBefore,dayOfWeek:Ee.dayOfWeek,dayOfWeekAfter:Ee.dayOfWeekAfter,dayOfWeekBefore:Ee.dayOfWeekBefore,month:Ee.month,monthBefore:Ee.monthBefore,monthAfter:Ee.monthAfter,year:Ee.year,hour:Ee.hour,hourBefore:Ee.hourBefore,hourAfter:Ee.hourAfter,number:Me,gt:Me.gt,lt:Me.lt,inRange:Me.inRange,near:Se.near,geopoint:Se},Ae=decodeURIComponent;var De={parse:function(t,e){if("string"!=typeof t)throw new TypeError("argument str must be a string");var n={},r=e||{},o=t.split(/; */),l=r.decode||Ae;return o.forEach((function(t){var e=t.indexOf("=");if(!(e<0)){var r=t.substr(0,e).trim(),o=t.substr(++e,t.length).trim();'"'==o[0]&&(o=o.slice(1,-1)),null==n[r]&&(n[r]=function(t,e){try{return e(t)}catch(e){return t}}(o,l))}})),n}};function Pe(t,e,n){return{token:t,documentId:e,resolve:function(r,o,l){return e&&n?n(e,{ref:t}).then((function(t){if(t){var e=r&&r(t)||t.url||o;return l&&l(null,e),e}return l&&l(null,o),o})):Promise.resolve(o)}}}var Ce="io.prismic.preview",ke="io.prismic.experiment",Oe=function(){function t(data,t,e){this.data=data,this.masterRef=data.refs.filter((function(t){return t.isMasterRef}))[0],this.experiments=new Gt(data.experiments),this.bookmarks=data.bookmarks,this.httpClient=t,this.options=e,this.refs=data.refs,this.tags=data.tags,this.types=data.types,this.languages=data.languages}return t.prototype.form=function(t){var form=this.data.forms[t];return form?"tags"===t?new Yt(form,this.httpClient):new Xt(form,this.httpClient):null},t.prototype.searchForm=function(t){var e=this.form(t);return e instanceof Xt?e:null},t.prototype.tagsForm=function(){var t=this.form("tags");if(!t)throw new Error("Missing tags form");if(t instanceof Yt)return t;throw new Error("Unexpected error: tags form is not TagsForm")},t.prototype.everything=function(){var t=this.searchForm("everything");if(!t)throw new Error("Missing everything form");return t},t.prototype.master=function(){return this.masterRef.ref},t.prototype.ref=function(label){var t=this.data.refs.filter((function(t){return t.label===label}))[0];return t?t.ref:null},t.prototype.currentExperiment=function(){return this.experiments.current()},t.prototype.query=function(q,t,e){void 0===e&&(e=function(){});var n="function"==typeof t?{options:{},callback:t}:{options:t||{},callback:e},r=n.options,o=n.callback,form=this.everything();for(var l in r)form=form.set(l,r[l]);if(!r.ref){var c="";this.options.req?c=this.options.req.headers.cookie||"":"undefined"!=typeof window&&window.document&&(c=window.document.cookie||"");var h=De.parse(c),d=h[Ce],f=this.experiments.refFromCookie(h[ke]);form=form.ref(d||f||this.masterRef.ref)}return q&&form.query(q),form.submit(o)},t.prototype.queryFirst=function(q,t,e){var n="function"==typeof t?{options:{},callback:t}:{options:t||{},callback:e||function(){}},r=n.options,o=n.callback;return r.page=1,r.pageSize=1,this.query(q,r).then((function(t){var e=t&&t.results&&t.results[0];return o(null,e),e})).catch((function(t){throw o(t),t}))},t.prototype.getByID=function(t,e,n){var r=e?zt({},e):{};return r.lang||(r.lang="*"),this.queryFirst(Te.at("document.id",t),r,n)},t.prototype.getByIDs=function(t,e,n){var r=e?zt({},e):{};return r.lang||(r.lang="*"),this.query(Te.in("document.id",t),r,n)},t.prototype.getByUID=function(t,e,n,r){var o=n?zt({},n):{};if("*"===o.lang)throw new Error("FORBIDDEN. You can't use getByUID with *, use the predicates instead.");return o.page||(o.page=1),this.queryFirst(Te.at("my."+t+".uid",e),o,r)},t.prototype.getSingle=function(t,e,n){var r=e?zt({},e):{};return this.queryFirst(Te.at("document.type",t),r,n)},t.prototype.getBookmark=function(t,e,n){var r=this.data.bookmarks[t];return r?this.getByID(r,e,n):Promise.reject("Error retrieving bookmarked id")},t.prototype.getTags=function(t){return this.tagsForm().submit(t)},t.prototype.getPreviewResolver=function(t,e){return Pe(t,e,this.getByID.bind(this))},t}();function Le(t){this.size=0,this.limit=t,this._keymap={}}Le.prototype.put=function(t,e){var n={key:t,value:e};if(this._keymap[t]=n,this.tail?(this.tail.newer=n,n.older=this.tail):this.head=n,this.tail=n,this.size===this.limit)return this.shift();this.size++},Le.prototype.shift=function(){var t=this.head;return t&&(this.head.newer?(this.head=this.head.newer,this.head.older=void 0):this.head=void 0,t.newer=t.older=void 0,delete this._keymap[t.key]),console.log("purging ",t.key),t},Le.prototype.get=function(t,e){var n=this._keymap[t];if(void 0!==n)return n===this.tail||(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n),e?n:n.value},Le.prototype.find=function(t){return this._keymap[t]},Le.prototype.set=function(t,e){var n,r=this.get(t,!0);return r?(n=r.value,r.value=e):(n=this.put(t,e))&&(n=n.value),n},Le.prototype.remove=function(t){var e=this._keymap[t];if(e)return delete this._keymap[e.key],e.newer&&e.older?(e.older.newer=e.newer,e.newer.older=e.older):e.newer?(e.newer.older=void 0,this.head=e.newer):e.older?(e.older.newer=void 0,this.tail=e.older):this.head=this.tail=void 0,this.size--,e.value},Le.prototype.removeAll=function(){this.head=this.tail=void 0,this.size=0,this._keymap={}},"function"==typeof Object.keys?Le.prototype.keys=function(){return Object.keys(this._keymap)}:Le.prototype.keys=function(){var t=[];for(var e in this._keymap)t.push(e);return t},Le.prototype.forEach=function(t,e,desc){var n;if(!0===e?(desc=!0,e=void 0):"object"!=typeof e&&(e=this),desc)for(n=this.tail;n;)t.call(e,n.key,n.value,this),n=n.older;else for(n=this.head;n;)t.call(e,n.key,n.value,this),n=n.newer},Le.prototype.toString=function(){for(var s="",t=this.head;t;)s+=String(t.key)+":"+t.value,(t=t.newer)&&(s+=" < ");return s};var Fe=function(){function t(t){void 0===t&&(t=1e3),this.lru=function(t){return new Le(t)}(t)}return t.prototype.isExpired=function(t){var e=this.lru.get(t,!1);return!!e&&(0!==e.expiredIn&&e.expiredIn<Date.now())},t.prototype.get=function(t,e){var n=this.lru.get(t,!1);n&&!this.isExpired(t)?e(null,n.data):e&&e(null)},t.prototype.set=function(t,e,n,r){this.lru.remove(t),this.lru.put(t,{data:e,expiredIn:n?Date.now()+1e3*n:0}),r&&r(null)},t.prototype.remove=function(t,e){this.lru.remove(t),e&&e(null)},t.prototype.clear=function(t){this.lru.removeAll(),t&&t(null)},t}();var Re=function(){function t(t){this.options=t||{}}return t.prototype.request=function(t,e){!function(t,e,n){var r,o={headers:{Accept:"application/json"}};e&&e.proxyAgent&&(o.agent=e.proxyAgent);var l=jt(t,o);(e.timeoutInMs?Promise.race([l,new Promise((function(n,o){r=setTimeout((function(){return o(new Error(t+" response timeout"))}),e.timeoutInMs)}))]):l).then((function(e){return clearTimeout(r),~~(e.status/100!=2)?e.text().then((function(){var n=new Error("Unexpected status code ["+e.status+"] on URL "+t);throw n.status=e.status,n})):e.json().then((function(t){var r=e.headers.get("cache-control"),o=r?/max-age=(\d+)/.exec(r):null,l=o?parseInt(o[1],10):void 0;n(null,t,e,l)}))})).catch((function(t){clearTimeout(r),n(t)}))}(t,this.options,e)},t}(),Ie=function(){function t(t,e,n,r){this.requestHandler=t||new Re({proxyAgent:n,timeoutInMs:r}),this.cache=e||new Fe}return t.prototype.request=function(t,e){this.requestHandler.request(t,(function(t,n,r,o){t?e&&e(t,null,r,o):n&&e&&e(null,n,r,o)}))},t.prototype.cachedRequest=function(t,e){var n=this,r=e||{};return new Promise((function(e,o){var l,c;l=function(t,n){t&&o(t),n&&e(n)},c=r.cacheKey||t,n.cache.get(c,(function(e,o){e||o?l(e,o):n.request(t,(function(t,e,o,h){if(t)l(t,null);else{var d=h||r.ttl;d&&n.cache.set(c,e,d,l),l(null,e)}}))}))}))},t}();var Ne=function(){function t(t,e){this.options=e||{},this.url=t;var n=[this.options.accessToken&&"access_token="+this.options.accessToken,this.options.routes&&"routes="+encodeURIComponent(JSON.stringify(this.options.routes))].filter(Boolean);n.length>0&&(this.url+=function(t){return t.indexOf("?")>-1?"&":"?"}(t)+n.join("&")),this.apiDataTTL=this.options.apiDataTTL||5,this.httpClient=new Ie(this.options.requestHandler,this.options.apiCache,this.options.proxyAgent,this.options.timeoutInMs)}return t.prototype.get=function(t){var e=this;return this.httpClient.cachedRequest(this.url,{ttl:this.apiDataTTL}).then((function(data){var n=new Oe(data,e.httpClient,e.options);return t&&t(null,n),n})).catch((function(e){throw t&&t(e),e}))},t}(),je=function(){function t(t,e){this.id=t,this.api=e,this.fields={}}return t.prototype.set=function(t,e){return this.fields[t]=e,this},t.prototype.ref=function(t){return this.set("ref",t)},t.prototype.query=function(t){return this.set("q",t)},t.prototype.pageSize=function(t){return this.set("pageSize",t)},t.prototype.graphQuery=function(t){return this.set("graphQuery",t)},t.prototype.lang=function(t){return this.set("lang",t)},t.prototype.page=function(p){return this.set("page",p)},t.prototype.after=function(t){return this.set("after",t)},t.prototype.orderings=function(t){return this.set("orderings",t)},t.prototype.url=function(){var e=this;return this.api.get().then((function(n){return t.toSearchForm(e,n).url()}))},t.prototype.submit=function(e){var n=this;return this.api.get().then((function(r){return t.toSearchForm(n,r).submit(e)}))},t.toSearchForm=function(t,e){var form=e.searchForm(t.id);if(form)return Object.keys(t.fields).reduce((function(form,e){var n=t.fields[e];return"q"===e?form.query(n):"pageSize"===e?form.pageSize(n):"graphQuery"===e?form.graphQuery(n):"lang"===e?form.lang(n):"page"===e?form.page(n):"after"===e?form.after(n):"orderings"===e?form.orderings(n):form.set(e,n)}),form);throw new Error("Unable to access to form "+t.id)},t}(),Be=function(){function t(t,e){this.api=new Ne(t,e)}return t.prototype.getApi=function(){return this.api.get()},t.prototype.everything=function(){return this.form("everything")},t.prototype.form=function(t){return new je(t,this.api)},t.prototype.query=function(q,t,e){return this.getApi().then((function(n){return n.query(q,t,e)}))},t.prototype.queryFirst=function(q,t,e){return this.getApi().then((function(n){return n.queryFirst(q,t,e)}))},t.prototype.getByID=function(t,e,n){return this.getApi().then((function(r){return r.getByID(t,e,n)}))},t.prototype.getByIDs=function(t,e,n){return this.getApi().then((function(r){return r.getByIDs(t,e,n)}))},t.prototype.getByUID=function(t,e,n,r){return this.getApi().then((function(o){return o.getByUID(t,e,n,r)}))},t.prototype.getSingle=function(t,e,n){return this.getApi().then((function(r){return r.getSingle(t,e,n)}))},t.prototype.getBookmark=function(t,e,n){return this.getApi().then((function(r){return r.getBookmark(t,e,n)}))},t.prototype.getTags=function(){return this.getApi().then((function(t){return t.getTags()}))},t.prototype.getPreviewResolver=function(t,e){var n=this;return Pe(t,e,(function(t,e){return n.getApi().then((function(n){return n.getByID(t,e)}))}))},t.getApi=function(t,e){return new Ne(t,e).get()},t}();function Ue(t,e){return Be.getApi(t,e)}var ze={experimentCookie:ke,previewCookie:Ce,Predicates:Te,predicates:Te,Experiments:Gt,Api:Ne,client:function(t,e){return new Be(t,e)},getApi:Ue,api:function(t,e){return Ue(t,e)}},Ve=n(100),He=n.n(Ve),Ge=function(t){return"news"===t.type?"/news/"+t.uid:"blog"===t.type?"/blog/"+t.uid:"/"},We=null;function Xe(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Ye(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Xe(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Xe(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var qe=function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,o,base,l,h,f,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.req,r=e.route,e.res,o=e.query,e.redirect,e.nuxtState,base=e.base,l={},h={},t.prev=4,t.next=7,ze.api("https://bayc.cdn.prismic.io/api/v2",Object.assign({},l,{accessToken:"MC5ZaC1GSEJFQUFDVUFBbXEx.77-9PjILMANXAe-_vVfvv70M77-977-9SDnvv702H--_ve-_vQR7P--_vSzvv73vv70g77-9YjA"}));case 7:h=t.sent,t.next=14;break;case 10:t.prev=10,t.t0=t.catch(4),console.error(t.t0),console.error("Failed to init Prismic API, preventing app fatal error.");case 14:f=new d.a({computed:{api:function(){return h},apiEndpoint:function(){return"https://bayc.cdn.prismic.io/api/v2"},predicate:function(){return ze.Predicates},predicates:function(){return ze.Predicates},dom:function(){return He.a}},methods:Ye(Ye({asHTML:function(t){return this.asHtml(t)},asHtml:function(t){if(t)return He.a.RichText.asHtml(t,Ge,We)},asText:function(t){if(t)return He.a.RichText.asText(t)},asLink:function(link){if(link)return He.a.Link.url(link,Ge)},asDate:function(t){if(t)return He.a.Date(t)},preview:function(){var t=this;return Object(c.a)(regeneratorRuntime.mark((function e(){var n,r,l,c,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n="/",r=o.token,l=o.documentId,!r){e.next=10;break}return e.next=5,t.api.getPreviewResolver(r,l);case 5:return c=e.sent,e.next=8,c.resolve(t.linkResolver,"/");case 8:(h=e.sent)&&(n=h);case 10:n="".concat(base.replace(/\/$/,"")).concat(n),window.location.replace(n);case 11:case"end":return e.stop()}}),e)})))()}},Ge&&{linkResolver:Ge}),We)}),n("prismic",f),e.$prismic=f,window.onNuxtReady&&window.onNuxtReady((function(t){var script=document.createElement("script");script.src="//static.cdn.prismic.io/prismic.min.js?repo=bayc&new=true",document.body.appendChild(script),window.addEventListener("prismicPreviewUpdate",function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!("refresh"in t)||"function"!=typeof t.refresh){e.next=7;break}if(n.preventDefault(),!t.$store||!t.$store._actions.nuxtServerInit){e.next=5;break}return e.next=5,t.$store.dispatch("nuxtServerInit",t.$options.context);case 5:return e.next=7,t.refresh();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),t.next=21;break;case 21:"/preview"!==r.path&&(m="bayc",v=function(){var t="; ".concat(document.cookie).split("; ".concat(ze.previewCookie,"="));if(2!==t.length)return null;var e=t.pop().split(";").shift();try{e=JSON.parse(decodeURIComponent(e))}catch(t){e=null}return e}(),f.isPreview=v&&v["".concat(m,".prismic.io")]&&v["".concat(m,".prismic.io")].preview,f.isPreview&&(console.info("[@nuxtjs/prismic] Reload page data for preview"),e.enablePreview?e.enablePreview():window.onNuxtReady(function(){var t=Object(c.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.$store||!e.$store._actions.nuxtServerInit){t.next=3;break}return t.next=3,e.$store.dispatch("nuxtServerInit",e.$options.context);case 3:return t.next=5,e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())));case 22:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e,n){return t.apply(this,arguments)}}(),Qe=(n(197),n(211));function $e(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Ke(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$e(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$e(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}Object.entries(Ke(Ke({},Qe.common),Qe.nuxt)).forEach((function(t){var e=Object(I.a)(t,2),n=(e[0],e[1]);d.a.component(n.name,n)}));var Je=n(151),Ze=n.n(Je),tn=n(49);function en(t){return null!==t&&"object"===Object(tn.a)(t)}function nn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3?arguments[3]:void 0;if(!en(e))return nn(t,{},n,r);var o=Object.assign({},e);for(var l in t)if("__proto__"!==l&&"constructor"!==l){var c=t[l];null!==c&&(r&&r(o,l,c,n)||(Array.isArray(c)&&Array.isArray(o[l])?o[l]=o[l].concat(c):en(c)&&en(o[l])?o[l]=nn(c,o[l],(n?"".concat(n,"."):"")+l.toString(),r):o[l]=c))}return o}function rn(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(p,e){return nn(p,e,"",t)}),{})}}var an=rn();an.fn=rn((function(t,e,n,r){if(void 0!==t[e]&&"function"==typeof n)return t[e]=n(t[e]),!0})),an.arrayFn=rn((function(t,e,n,r){if(Array.isArray(t[e])&&"function"==typeof n)return t[e]=n(t[e]),!0})),an.extend=rn;var on=an;function sn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function un(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?sn(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):sn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function ln(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return cn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function cn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}for(var hn={setBaseURL:function(t){this.defaults.baseURL=t},setHeader:function(t,e){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",o=ln(Array.isArray(r)?r:[r]);try{for(o.s();!(n=o.n()).done;){var l=n.value;e?this.defaults.headers[l][t]=e:delete this.defaults.headers[l][t]}}catch(t){o.e(t)}finally{o.f()}},setToken:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"common",r=t?(e?e+" ":"")+t:null;this.setHeader("Authorization",r,n)},onRequest:function(t){this.interceptors.request.use((function(e){return t(e)||e}))},onResponse:function(t){this.interceptors.response.use((function(e){return t(e)||e}))},onRequestError:function(t){this.interceptors.request.use(void 0,(function(e){return t(e)||Promise.reject(e)}))},onResponseError:function(t){this.interceptors.response.use(void 0,(function(e){return t(e)||Promise.reject(e)}))},onError:function(t){this.onRequestError(t),this.onResponseError(t)},create:function(t){return mn(on(t,this.defaults))}},dn=function(){var t=fn[pn];hn["$"+t]=function(){return this[t].apply(this,arguments).then((function(t){return t&&t.data}))}},pn=0,fn=["request","delete","get","head","options","post","put","patch"];pn<fn.length;pn++)dn();var mn=function(t){var e=Ze.a.create(t);return e.CancelToken=Ze.a.CancelToken,e.isCancel=Ze.a.isCancel,function(t){for(var e in hn)t[e]=hn[e].bind(t)}(e),e.onRequest((function(t){t.headers=un(un({},e.defaults.headers.common),t.headers)})),vn(e),e},vn=function(t){var e={finish:function(){},start:function(){},fail:function(){},set:function(){}},n=function(){var t="undefined"!=typeof window&&window.$nuxt;return t&&t.$loading&&t.$loading.set?t.$loading:e},r=0;t.onRequest((function(t){t&&!1===t.progress||r++})),t.onResponse((function(t){t&&t.config&&!1===t.config.progress||--r<=0&&(r=0,n().finish())})),t.onError((function(t){t&&t.config&&!1===t.config.progress||(r--,Ze.a.isCancel(t)?r<=0&&(r=0,n().finish()):(n().fail(),n().finish()))}));var o=function(t){if(r&&t.total){var progress=100*t.loaded/(t.total*r);n().set(Math.min(100,progress))}};t.defaults.onUploadProgress=o,t.defaults.onDownloadProgress=o},gn=function(t,e){var n=t.$config&&t.$config.axios||{},r=n.browserBaseURL||n.browserBaseUrl||n.baseURL||n.baseUrl||"http://localhost:3000/";var o=mn({baseURL:r,headers:{common:{Accept:"application/json, text/plain, */*"},delete:{},get:{},head:{},post:{},put:{},patch:{}}});t.$axios=o,e("axios",o)},yn=function(){if(!("requestVideoFrameCallback"in HTMLVideoElement.prototype))return new Promise((function(t,e){n.e(52).then(function(e){n(535);t()}.bind(null,n)).catch(n.oe)}))},_n=function(){if(!("requestAnimationFrame"in window))return new Promise((function(t,e){n.e(50).then(function(e){n(536);t()}.bind(null,n)).catch(n.oe)}))},bn=function(){if(!("requestIdleCallback"in window))return new Promise((function(t,e){n.e(51).then(function(e){n(537);t()}.bind(null,n)).catch(n.oe)}))},xn=function(){if(!("IntersectionObserver"in window))return new Promise((function(t,e){n.e(49).then(function(e){n(538);t()}.bind(null,n)).catch(n.oe)}))};n(199),n(179),n(203),n(243),n(263),n(83);function wn(t){return null!==t&&"object"===Object(tn.a)(t)}function Sn(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",r=arguments.length>3?arguments[3]:void 0;if(!wn(e))return Sn(t,{},n,r);var o=Object.assign({},e);for(var l in t)if("__proto__"!==l&&"constructor"!==l){var c=t[l];null!=c&&(r&&r(o,l,c,n)||(Array.isArray(c)&&Array.isArray(o[l])?o[l]=o[l].concat(c):wn(c)&&wn(o[l])?o[l]=Sn(c,o[l],(n?"".concat(n,"."):"")+l.toString(),r):o[l]=c))}return o}function En(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.reduce((function(p,e){return Sn(p,e,"",t)}),{})}}var Mn=En();function Tn(t,e){return An.apply(this,arguments)}function An(){return An=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r,o,meta;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Cn(e),o="image:meta:"+n,!r.has(o)){t.next=4;break}return t.abrupt("return",r.get(o));case 4:return t.next=6,Dn(n).catch((function(t){return console.error("Failed to get image meta for "+n,t+""),{width:0,height:0,ratio:0}}));case 6:return meta=t.sent,r.set(o,meta),t.abrupt("return",meta);case 9:case"end":return t.stop()}}),t)}))),An.apply(this,arguments)}function Dn(t){return Pn.apply(this,arguments)}function Pn(){return Pn=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,data,r,o,l,meta;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.next=13;break;case 3:return n=t.sent,t.next=6,fetch(e).then((function(t){return t.buffer()}));case 6:if(data=t.sent,r=n(data)){t.next=10;break}throw new Error("No metadata could be extracted from the image `".concat(e,"`."));case 10:return o=r.width,l=r.height,meta={width:o,height:l,ratio:o&&l?o/l:void 0},t.abrupt("return",meta);case 13:if("undefined"!=typeof Image){t.next=15;break}throw new TypeError("Image not supported");case 15:return t.abrupt("return",new Promise((function(t,n){var img=new Image;img.onload=function(){var meta={width:img.width,height:img.height,ratio:img.width/img.height};t(meta)},img.onerror=function(t){return n(t)},img.src=e})));case 16:case"end":return t.stop()}}),t)}))),Pn.apply(this,arguments)}function Cn(t){if(!t.nuxtContext.cache)if(t.nuxtContext.ssrContext&&t.nuxtContext.ssrContext.cache)t.nuxtContext.cache=t.nuxtContext.ssrContext.cache;else{var e={};t.nuxtContext.cache={get:function(t){return e[t]},set:function(t,n){e[t]=n},has:function(t){return void 0!==e[t]}}}return t.nuxtContext.cache}Mn.fn=En((function(t,e,n,r){if(void 0!==t[e]&&"function"==typeof n)return t[e]=n(t[e]),!0})),Mn.arrayFn=En((function(t,e,n,r){if(Array.isArray(t[e])&&"function"==typeof n)return t[e]=n(t[e]),!0})),Mn.extend=En;n(107);function kn(map){return function(t){return t?map[t]||t:map.missingValue}}function On(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.formatter,n=t.keyMap,r=t.joinWith,o=void 0===r?"/":r,l=t.valueMap;e||(e=function(t,e){return"".concat(t,"=").concat(e)}),n&&"function"!=typeof n&&(n=kn(n));var map=l||{};return Object.keys(map).forEach((function(t){"function"!=typeof map[t]&&(map[t]=kn(map[t]))})),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=Object.entries(t).filter((function(t){var e=Object(I.a)(t,2);e[0];return void 0!==e[1]})).map((function(r){var o=Object(I.a)(r,2),l=o[0],c=o[1],h=map[l];return"function"==typeof h&&(c=h(t[l])),l="function"==typeof n?n(l):l,e(l,c)}));return r.join(o)}}function Ln(){var input=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"number"==typeof input?input:"string"==typeof input&&input.replace("px","").match(/^\d+$/g)?parseInt(input,10):void 0}var Fn={};function Rn(){if(void 0!==window.$nuxt){var t,e,n,r=(null===(t=window.$nuxt._pagePayload)||void 0===t||null===(e=t.data)||void 0===e||null===(n=e[0])||void 0===n?void 0:n._img)||{};Object.assign(Fn,r)}else if(void 0!==window.__NUXT__){var o,l=(null===(o=window.__NUXT__)||void 0===o?void 0:o._img)||{};Object.assign(Fn,l)}}function In(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Nn(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function Nn(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function jn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Bn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?jn(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):jn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function Un(t,e){var n=function(t){var e;return Rn(),t&&(null===(e=t.app.router)||void 0===e||e.afterEach(Rn)),window.onNuxtReady&&window.onNuxtReady(Rn),Fn}(e),r={options:t,nuxtContext:e},o=function(input){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},image=Vn(r,input,t);return image.isStatic&&c(image,input),image},l=function(input){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o(input,Bn(Bn({},e),{},{modifiers:Mn(t,e.modifiers||{})})).url};function c(image,input){if("fetchPayload"in window.$nuxt){var t=n[image.url];return image.url=t||input,image}}var h=function(e){l[e]=function(source,n,r){return l(source,n,Bn(Bn({},t.presets[e]),r))}};for(var d in t.presets)h(d);return l.options=t,l.getImage=o,l.getMeta=function(input,t){return function(t,e,n){return zn.apply(this,arguments)}(r,input,t)},l.getSizes=function(input,t){return function(t,input,e){var n,r,o=Ln(null===(n=e.modifiers)||void 0===n?void 0:n.width),l=Ln(null===(r=e.modifiers)||void 0===r?void 0:r.height),c=o&&l?l/o:0,h=[],d={};if("string"==typeof e.sizes){var f,m=In(e.sizes.split(/[\s,]+/).filter((function(t){return t})));try{for(m.s();!(f=m.n()).done;){var s=f.value.split(":");2===s.length&&(d[s[0].trim()]=s[1].trim())}}catch(t){m.e(t)}finally{m.f()}}else Object.assign(d,e.sizes);for(var v in d){var y=t.options.screens&&t.options.screens[v]||parseInt(v),_=String(d[v]),x=_.endsWith("vw");if(!x&&/^\d+$/.test(_)&&(_+="px"),x||_.endsWith("px")){var w=parseInt(_);if(y&&w){x&&(w=Math.round(w/100*y));var S=c?Math.round(w*c):l;h.push({width:w,size:_,screenMaxWidth:y,media:"(max-width: ".concat(y,"px)"),src:t.$img(input,Bn(Bn({},e.modifiers),{},{width:w,height:S}),e)})}}}h.sort((function(t,e){return t.screenMaxWidth-e.screenMaxWidth}));var E=h[h.length-1];E&&(E.media="");return{sizes:h.map((function(t){return"".concat(t.media?t.media+" ":"").concat(t.size)})).join(", "),srcset:h.map((function(t){return"".concat(t.src," ").concat(t.width,"w")})).join(", "),src:null==E?void 0:E.src}}(r,input,t)},r.$img=l,l}function zn(){return(zn=Object(c.a)(regeneratorRuntime.mark((function t(e,input,n){var image;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof(image=Vn(e,input,Bn({},n))).getMeta){t.next=7;break}return t.next=4,image.getMeta();case 4:case 9:return t.abrupt("return",t.sent);case 7:return t.next=9,Tn(e,image.url);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Vn(t,input,e){var n,r;if("string"!=typeof input||""===input)throw new TypeError("input must be a string (received ".concat(Object(tn.a)(input),": ").concat(JSON.stringify(input),")"));if(input.startsWith("data:"))return{url:input};var o=function(t,e){var n=t.options.providers[e];if(!n)throw new Error("Unknown provider: "+e);return n}(t,e.provider||t.options.provider),l=o.provider,c=o.defaults,h=function(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}(t,e.preset);if(input=Object(S.d)(input)?input:Object(S.l)(input),!l.supportsAlias)for(var base in t.options.alias)input.startsWith(base)&&(input=Object(S.f)(t.options.alias[base],input.substr(base.length)));if(l.validateDomains&&Object(S.d)(input)){var d=Object(S.j)(input).host;if(!t.options.domains.find((function(t){return t===d})))return{url:input}}var f=Mn(e,h,c);f.modifiers=Bn({},f.modifiers);var m=f.modifiers.format;null!==(n=f.modifiers)&&void 0!==n&&n.width&&(f.modifiers.width=Ln(f.modifiers.width)),null!==(r=f.modifiers)&&void 0!==r&&r.height&&(f.modifiers.height=Ln(f.modifiers.height));var image=l.getImage(input,f,t);return image.format=image.format||m||"",image}n(216);function Hn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Gn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Hn(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Hn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Wn={props:{src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:function(t){return["anonymous","use-credentials","",!0,!1].includes(t)}},loading:{type:String,default:void 0},decoding:{type:String,default:void 0,validator:function(t){return["async","auto","sync"].includes(t)}}},computed:{nImgAttrs:function(){return{width:Ln(this.width),height:Ln(this.height),alt:this.alt,referrerpolicy:this.referrerpolicy,usemap:this.usemap,longdesc:this.longdesc,ismap:this.ismap,crossorigin:!0===this.crossorigin?"anonymous":this.crossorigin||void 0,loading:this.loading,decoding:this.decoding}},nModifiers:function(){return Gn(Gn({},this.modifiers),{},{width:Ln(this.width),height:Ln(this.height),format:this.format,quality:this.quality,background:this.background,fit:this.fit})},nOptions:function(){return{provider:this.provider,preset:this.preset}}}};function Xn(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Yn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Xn(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Xn(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var qn={name:"NuxtImg",mixins:[Wn],computed:{nAttrs:function(){var t=this.nImgAttrs;if(this.sizes){var e=this.nSizes,n=e.sizes,r=e.srcset;t.sizes=n,t.srcset=r}return t},nSrc:function(){return this.sizes?this.nSizes.src:this.$img(this.src,this.nModifiers,this.nOptions)},nSizes:function(){return this.$img.getSizes(this.src,Yn(Yn({},this.nOptions),{},{sizes:this.sizes,modifiers:Yn(Yn({},this.nModifiers),{},{width:Ln(this.width),height:Ln(this.height)})}))}},created:function(){0}},Qn=Object(F.a)(qn,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("img",t._b({key:t.nSrc,attrs:{src:t.nSrc}},"img",t.nAttrs,!1))}),[],!1,null,null,null).exports;function $n(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Kn(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?$n(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):$n(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var Jn={name:"NuxtPicture",mixins:[Wn],props:{legacyFormat:{type:String,default:null}},computed:{isTransparent:function(){return["png","webp","gif"].includes(this.originalFormat)},originalFormat:function(){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(/[?#]/).shift().split("/").pop().split(".").pop()}(this.src)},nFormat:function(){return this.format?this.format:"svg"===this.originalFormat?"svg":"webp"},nLegacyFormat:function(){return this.legacyFormat?this.legacyFormat:{webp:this.isTransparent?"png":"jpeg",svg:"png"}[this.nFormat]||this.originalFormat},nSources:function(){var t=this;return"svg"===this.nFormat?[{srcset:this.src}]:(this.nLegacyFormat!==this.nFormat?[this.nLegacyFormat,this.nFormat]:[this.nFormat]).map((function(e){var n=t.$img.getSizes(t.src,Kn(Kn({},t.nOptions),{},{sizes:t.sizes||t.$img.options.screens,modifiers:Kn(Kn({},t.nModifiers),{},{format:e})})),r=n.srcset,o=n.sizes;return{src:n.src,type:"image/".concat(e),sizes:o,srcset:r}}))}},created:function(){0}},Zn=Jn,er=Object(F.a)(Zn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("picture",{key:t.nSources[0].src},[t.nSources[1]?n("source",{attrs:{type:t.nSources[1].type,srcset:t.nSources[1].srcset,sizes:t.nSources[1].sizes}}):t._e(),t._v(" "),n("img",t._b({attrs:{src:t.nSources[0].src,srcset:t.nSources[0].srcset,sizes:t.nSources[0].sizes}},"img",t.nImgAttrs,!1))])}),[],!1,null,null,null).exports,nr=On({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:",",formatter:function(t,e){return Object(S.b)(t)+"_"+Object(S.b)(e)}});function rr(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function ir(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?rr(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):rr(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var ar,or=function(t,e,n){return ir(ir({},function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.modifiers,r=void 0===n?{}:n,o=e.baseURL,l=void 0===o?"/_ipx":o,c=(arguments.length>2?arguments[2]:void 0).nuxtContext,h=(c=void 0===c?{}:c).base,d=void 0===h?"/":h;r.width&&r.height&&(r.resize="".concat(r.width,"x").concat(r.height),delete r.width,delete r.height);var f=nr(r)||"_";return{url:Object(S.f)(d,l,f,Object(S.c)(t))}}(t,e,n)),{},{isStatic:!0})},sr=!0,ur=(n(200),On({keyMap:{width:"w",height:"h",format:"fm",quality:"q",backgroundColor:"bg",rotate:"rot",mask:"mask",auto:"auto",crop:"crop",brightness:"bri",contrast:"con",exposure:"exp",gamma:"gam",highlight:"high",hueShift:"hue",invert:"invert",saturation:"sat",shadow:"shad",sharpen:"sharp",unsharpMask:"usm",unsharpMaskRadius:"usmrad",vibrance:"vib",blend:"blend",blendAlign:"blend-align",blendAlpha:"blend-alpha",blendColor:"blend-color",blendCrop:"blend-crop",blendFit:"blend-fit",blendHeight:"blend-h",blendMode:"blend-mode",blendPadding:"blend-pad",blendSize:"blend-size",blendWidth:"blend-w",blendXPosition:"blend-x",blendYPosition:"blend-y",padding:"pad",borderBottom:"border-bottom",borderLeft:"border-left",innerBorderRadius:"border-radius-inner",outerBorderRadius:"border-radius",borderRight:"border-right",borderTop:"border-top",borderSizeColor:"border",paddingBottom:"pad-bottom",paddingLeft:"pad-left",paddingRight:"pad-right",paddingTop:"pad-top",paletteColorCount:"colors",colorPaletteExtraction:"palette",cssPrefix:"prefix",expirationTimestamp:"expires",faceIndex:"faceindex",facePadding:"facepad",jsonFaceData:"faces",fillMode:"fill",fillColor:"fill-color",gridColors:"grid-colors",gridSize:"grid-size",transparency:"transparency",focalPointDebug:"fp-debug",focalPointXPosition:"fp-x",focalPointYPosition:"fp-y",focalPointZoom:"fp-z",clientHints:"ch",chromaSubsampling:"chromasub",colorQuantization:"colorquant",colorSpace:"cs",download:"dl",dotsPerInch:"dpi",losslessCompression:"lossless",maskBackgroundColor:"mask-bg",maskCornerRadius:"corner-radius",noiseReductionSharp:"nrs",noiseReductionBound:"nr",pdfPageNumber:"page",pdfAnnotation:"pdf-annotation",pixelDensity:"dpr",orientation:"orient",flipAxis:"flip",aspectRatio:"ar",maximumHeight:"max-h",maximumWidth:"max-w",minimumHeight:"min-h",minimumWidth:"min-w",sourceRectangleRegion:"rect",gaussianBlur:"blur",duotoneAlpha:"duotone-alpha",duotone:"duotone",halftone:"htn",monochrome:"monochrome",pixellate:"px",sepiaTone:"sepia",textAlign:"txt-align",textClippingMode:"txt-clip",textColor:"txt-color",textFitMode:"txt-fit",textFont:"txt-font",textLigatures:"txt-lig",textOutlineColor:"txt-line-color",textOutline:"txt-line",textPadding:"txt-pad",textShadow:"txt-shad",textFontSize:"txt-size",textWidth:"txt-width",textString:"txt",trimColor:"trim-color",trimMeanDifference:"trim-md",trimStandardDeviation:"trim-sd",trimTolerance:"trim-tol",trimImage:"trim",textLeading:"txt-lead",textTracking:"txt-track",typesettingEndpoint:"~text",watermarkAlignment:"mark-align",watermarkAlpha:"mark-alpha",watermarkBaseURL:"mark-base",watermarkFitMode:"mark-fit",watermarkHeight:"mark-h",watermarkPadding:"mark-pad",watermarkRotation:"mark-rot",watermarkScale:"mark-sclae",watermarkTile:"mark-tile",watermarkWidth:"mark-w",watermarkXPosition:"mark-x",watermarkYPosition:"mark-y",watermarkImageURL:"mark"},valueMap:{fit:{fill:"scale",inside:"max",outside:"min",cover:"crop",contain:"fill",clamp:"clamp",clip:"clip",facearea:"facearea",fillMax:"fillmax"},format:{gif:"gif",jp2:"jp2",jpg:"jpg",json:"json",jxr:"jxr",pjpg:"pjpg",mp4:"mp4",png:"png",png8:"png8",png32:"png32",webm:"webm",webp:"webp",blurhash:"blurhash"}},joinWith:"&",formatter:function(t,e){return"".concat(t,"=").concat(e)}})),lr="https://images.prismic.io",cr=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.modifiers,r=void 0===n?{}:n,o=e.baseURL,l=void 0===o?lr:o,c=ur(r),h=Object(S.j)(t);return{url:Object(S.f)(l,h.pathname+"?"+Object(S.k)(Object.assign(Object(S.i)(h.search),Object(S.i)(c))))}},dr={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":2536},presets:{},provider:"static",domains:[],alias:{}};dr.providers=(ar={},Object(h.a)(ar,"static",{provider:o,defaults:{}}),Object(h.a)(ar,"prismic",{provider:l,defaults:{}}),ar),d.a.component(Qn.name,Qn),d.a.component(er.name,er),d.a.component("NImg",Qn),d.a.component("NPicture",er);var pr=function(t,e){e("img",Un(dr,t))},fr=n(212),mr=n.n(fr);function vr(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return gr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function gr(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function yr(t,e,n){return t.find((function(t){return n?t[e]===n:t[e]}))}var meta=n(283),_r=function(t){!function(t,e){if("function"!=typeof t)for(var n in e){var r=e[n];if(Array.isArray(r)){t[n]=t[n]||[];var o,l=vr(r);try{for(l.s();!(o=l.n()).done;){var c=o.value;c.hid&&yr(t[n],"hid",c.hid)||c.name&&yr(t[n],"name",c.name)||t[n].push(c)}}catch(t){l.e(t)}finally{l.f()}}else if("object"===Object(tn.a)(r))for(var h in t[n]=t[n]||{},r)t[n][h]=r[h];else void 0===t[n]&&(t[n]=r)}else console.warn("Cannot merge meta. Avoid using head as a function!")}(t.app.head,meta)},xr=function(t,e){return wr.apply(this,arguments)};function wr(){return(wr=Object(c.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r={"64x64":"/_nuxt/icons/icon_64x64.7c5bcb.png","120x120":"/_nuxt/icons/icon_120x120.7c5bcb.png","144x144":"/_nuxt/icons/icon_144x144.7c5bcb.png","152x152":"/_nuxt/icons/icon_152x152.7c5bcb.png","192x192":"/_nuxt/icons/icon_192x192.7c5bcb.png","384x384":"/_nuxt/icons/icon_384x384.7c5bcb.png","512x512":"/_nuxt/icons/icon_512x512.7c5bcb.png",ipad_1536x2048:"/_nuxt/icons/splash_ipad_1536x2048.7c5bcb.png",ipadpro9_1536x2048:"/_nuxt/icons/splash_ipadpro9_1536x2048.7c5bcb.png",ipadpro10_1668x2224:"/_nuxt/icons/splash_ipadpro10_1668x2224.7c5bcb.png",ipadpro12_2048x2732:"/_nuxt/icons/splash_ipadpro12_2048x2732.7c5bcb.png",iphonese_640x1136:"/_nuxt/icons/splash_iphonese_640x1136.7c5bcb.png",iphone6_50x1334:"/_nuxt/icons/splash_iphone6_50x1334.7c5bcb.png",iphoneplus_1080x1920:"/_nuxt/icons/splash_iphoneplus_1080x1920.7c5bcb.png",iphonex_1125x2436:"/_nuxt/icons/splash_iphonex_1125x2436.7c5bcb.png",iphonexr_828x1792:"/_nuxt/icons/splash_iphonexr_828x1792.7c5bcb.png",iphonexsmax_1242x2688:"/_nuxt/icons/splash_iphonexsmax_1242x2688.7c5bcb.png"},n("icon",(function(t){return r[t+"x"+t]||""}));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Sr=n(214),Er=n(213);function Mr(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function Tr(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?Mr(Object(source),!0).forEach((function(e){Object(h.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):Mr(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}d.a.component(y.a.name,y.a),d.a.component(x.a.name,Tr(Tr({},x.a),{},{render:function(t,e){return x.a._warned||(x.a._warned=!0,console.warn("<no-ssr> has been deprecated and will be removed in Nuxt 3, please use <client-only> instead")),x.a.render(t,e)}})),d.a.component(C.name,C),d.a.component("NChild",C),d.a.component(N.name,N),Object.defineProperty(d.a.prototype,"$nuxt",{get:function(){var t=this.$root.$options.$nuxt;return t||"undefined"==typeof window?t:window.$nuxt},configurable:!0}),d.a.use(m.a,{keyName:"head",attribute:"data-n-head",ssrAttribute:"data-n-head-ssr",tagIDKeyName:"hid"});var Ar={css:!1,name:"page",mode:"out-in",appear:!1,appearClass:"appear",appearActiveClass:"appear-active",appearToClass:"appear-to"},Dr=f.a.Store.prototype.registerModule;function Pr(path,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Array.isArray(path)?!!path.reduce((function(t,path){return t&&t[path]}),this.state):path in this.state;return Dr.call(this,path,t,Tr({preserveState:n},e))}function Cr(t){return kr.apply(this,arguments)}function kr(){return kr=Object(c.a)(regeneratorRuntime.mark((function t(e){var n,r,o,l,h,f,path,m,v=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return m=function(t,e){if(!t)throw new Error("inject(key, value) has no key provided");if(void 0===e)throw new Error("inject('".concat(t,"', value) has no value provided"));l[t="$"+t]=e,l.context[t]||(l.context[t]=e),o[t]=l[t];var n="__nuxt_"+t+"_installed__";d.a[n]||(d.a[n]=!0,d.a.use((function(){Object.prototype.hasOwnProperty.call(d.a.prototype,t)||Object.defineProperty(d.a.prototype,t,{get:function(){return this.$root.$options[t]}})})))},n=v.length>1&&void 0!==v[1]?v[1]:{},t.next=4,P(0,n);case 4:return r=t.sent,(o=K(e)).$router=r,o.registerModule=Pr,l=Tr({head:{title:"Welcome to Yuga Labs, Home of BAYC, MAYC, Otherside, Cryptopunks, and Meebits",meta:[{charset:"utf-8"},{name:"viewport",content:"width=device-width, initial-scale=1, viewport-fit=cover"},{hid:"description",name:"description",content:"Powered by ApeCoin and shaping web3 through storytelling, experiences, and community. From the creators of Bored Ape Yacht Club."},{name:"robots",content:"index, follow"},{hid:"og:title",property:"og:title",content:"Welcome to Yuga Labs, Home of BAYC, MAYC, Otherside, Cryptopunks, and Meebits"},{hid:"og:description",property:"og:description",content:"Powered by ApeCoin and shaping web3 through storytelling, experiences, and community. From the creators of Bored Ape Yacht Club."},{hid:"og:image",property:"og:image",content:"https://yuga.com/share.jpg"},{hid:"og:url",property:"og:url",content:"https://yuga.com"},{hid:"twitter:card",name:"twitter:card",content:"summary_large_image"},{hid:"twitter:creator",name:"twitter:creator",content:"@yugalabs"},{hid:"twitter:title",name:"twitter:title",content:"Welcome to Yuga Labs, Home of BAYC, MAYC, Otherside, Cryptopunks, and Meebits"},{hid:"twitter:description",name:"twitter:description",content:"Powered by ApeCoin and shaping web3 through storytelling, experiences, and community. From the creators of Bored Ape Yacht Club."},{hid:"twitter:image:src",name:"twitter:image:src",content:"https://yuga.com/share.jpg"},{name:"apple-mobile-web-app-capable",content:"yes"},{name:"apple-mobile-web-app-status-bar-style",content:"default"}],link:[{rel:"icon",type:"image/x-icon",href:"/favicon.ico"}],style:[],script:[]},store:o,router:r,nuxt:{defaultTransition:Ar,transitions:[Ar],setTransitions:function(t){return Array.isArray(t)||(t=[t]),t=t.map((function(t){return t=t?"string"==typeof t?Object.assign({},Ar,{name:t}):Object.assign({},Ar,t):Ar})),this.$options.nuxt.transitions=t,t},err:null,dateErr:null,error:function(t){t=t||null,l.context._errored=Boolean(t),t=t?Object(E.p)(t):null;var n=l.nuxt;return this&&(n=this.nuxt||this.$options.nuxt),n.dateErr=Date.now(),n.err=t,e&&(e.nuxt.error=t),t}}},W),o.app=l,h=e?e.next:function(t){return l.router.push(t)},e?f=r.resolve(e.url).route:(path=Object(E.g)(r.options.base,r.options.mode),f=r.resolve(path).route),t.next=14,Object(E.t)(l,{store:o,route:f,next:h,error:l.nuxt.error.bind(l),payload:e?e.payload:void 0,req:e?e.req:void 0,res:e?e.res:void 0,beforeRenderFns:e?e.beforeRenderFns:void 0,ssrContext:e});case 14:m("config",n),window.__NUXT__&&window.__NUXT__.state&&o.replaceState(window.__NUXT__.state),l.context.enablePreview=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l.previewData=Object.assign({},t),m("preview",t)},t.next=20;break;case 20:if("function"!=typeof qe){t.next=23;break}return t.next=23,qe(l.context,m);case 23:t.next=26;break;case 26:return t.next=29,gn(l.context,m);case 29:return t.next=32,yn(l.context);case 32:return t.next=35,_n(l.context);case 35:return t.next=38,bn(l.context);case 38:return t.next=41,xn(l.context);case 41:return t.next=44,pr(l.context,m);case 44:if("function"!=typeof mr.a){t.next=47;break}return t.next=47,mr()(l.context,m);case 47:return t.next=50,_r(l.context);case 50:return t.next=53,xr(l.context,m);case 53:if("function"!=typeof Sr.a){t.next=56;break}return t.next=56,Object(Sr.a)(l.context,m);case 56:if("function"!=typeof Er.a){t.next=59;break}return t.next=59,Object(Er.a)(l.context,m);case 59:return l.context.enablePreview=function(){console.warn("You cannot call enablePreview() outside a plugin.")},t.next=62,new Promise((function(t,e){if(!r.resolve(l.context.route.fullPath).route.matched.length)return t();r.replace(l.context.route.fullPath,t,(function(n){if(!n._isRouter)return e(n);if(2!==n.type)return t();var o=r.afterEach(function(){var e=Object(c.a)(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,Object(E.k)(n);case 3:l.context.route=e.sent,l.context.params=n.params||{},l.context.query=n.query||{},o(),t();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}))}));case 62:return t.abrupt("return",{store:o,app:l,router:r});case 63:case"end":return t.stop()}}),t)}))),kr.apply(this,arguments)}},88:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return f}));var r=n(0),o=n(1),l=n(3),c=function(){function t(){Object(r.a)(this,t),this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}return Object(o.a)(t,[{key:"setSize",value:function(){}},{key:"render",value:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}]),t}(),h=new l.k(-1,1,1,-1,0,1),d=new l.b;d.setAttribute("position",new l.e([-1,3,0,-1,-1,0,3,-1,0],3)),d.setAttribute("uv",new l.e([0,2,0,0,2,0],2));var f=function(){function t(e){Object(r.a)(this,t),this._mesh=new l.i(d,e)}return Object(o.a)(t,[{key:"dispose",value:function(){this._mesh.geometry.dispose()}},{key:"render",value:function(t){t.render(this._mesh,h)}},{key:"material",get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}]),t}()},9:function(t,e,n){"use strict";n.d(e,"d",(function(){return _})),n.d(e,"l",(function(){return x})),n.d(e,"n",(function(){return w})),n.d(e,"m",(function(){return S})),n.d(e,"f",(function(){return E})),n.d(e,"b",(function(){return M})),n.d(e,"s",(function(){return T})),n.d(e,"h",(function(){return A})),n.d(e,"i",(function(){return D})),n.d(e,"e",(function(){return P})),n.d(e,"r",(function(){return C})),n.d(e,"k",(function(){return k})),n.d(e,"t",(function(){return L})),n.d(e,"o",(function(){return R})),n.d(e,"q",(function(){return I})),n.d(e,"g",(function(){return N})),n.d(e,"c",(function(){return j})),n.d(e,"j",(function(){return B})),n.d(e,"p",(function(){return U})),n.d(e,"a",(function(){return Y})),n.d(e,"v",(function(){return Q})),n.d(e,"u",(function(){return $}));n(68),n(30),n(69),n(73),n(47),n(28),n(48);var r=n(49),o=n(15),l=n(10),c=n(40),h=(n(46),n(12),n(37),n(197),n(36),n(55),n(67),n(31),n(44),n(45),n(61),n(29),n(65),n(199),n(200),n(241),n(106),n(83),n(242),n(75),n(101),n(11)),d=n(20);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(l.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}function v(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return y(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return l=t.done,t},e:function(t){c=!0,o=t},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function y(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function _(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;return void 0===t[n]&&(t[n]=0),t[n]++}}function x(t){h.a.config.errorHandler&&h.a.config.errorHandler(t)}function w(t){return t.then((function(t){return t.default||t}))}function S(t){return t.$options&&"function"==typeof t.$options.fetch&&!t.$options.fetch.length}function E(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=t.$children||[],o=v(r);try{for(o.s();!(e=o.n()).done;){var l=e.value;l.$fetch?n.push(l):l.$children&&E(l,n)}}catch(t){o.e(t)}finally{o.f()}return n}function M(t,e){if(e||!t.options.__hasNuxtData){var n=t.options._originDataFn||t.options.data||function(){return{}};t.options._originDataFn=n,t.options.data=function(){var data=n.call(this,this);return this.$ssrContext&&(e=this.$ssrContext.asyncData[t.cid]),m(m({},data),e)},t.options.__hasNuxtData=!0,t._Ctor&&t._Ctor.options&&(t._Ctor.options.data=t.options.data)}}function T(t){return t.options&&t._Ctor===t||(t.options?(t._Ctor=t,t.extendOptions=t.options):(t=h.a.extend(t))._Ctor=t,!t.options.name&&t.options.__file&&(t.options.name=t.options.__file)),t}function A(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"components";return Array.prototype.concat.apply([],t.matched.map((function(t,r){return Object.keys(t[n]).map((function(o){return e&&e.push(r),t[n][o]}))})))}function D(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return A(t,e,"instances")}function P(t,e){return Array.prototype.concat.apply([],t.matched.map((function(t,n){return Object.keys(t.components).reduce((function(r,o){return t.components[o]?r.push(e(t.components[o],t.instances[o],t,o,n)):delete t.components[o],r}),[])})))}function C(t,e){return Promise.all(P(t,function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n,r,o,l){var c,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("function"!=typeof n||n.options){t.next=11;break}return t.prev=1,t.next=4,n();case 4:n=t.sent,t.next=11;break;case 7:throw t.prev=7,t.t0=t.catch(1),t.t0&&"ChunkLoadError"===t.t0.name&&"undefined"!=typeof window&&window.sessionStorage&&(c=Date.now(),(!(h=parseInt(window.sessionStorage.getItem("nuxt-reload")))||h+6e4<c)&&(window.sessionStorage.setItem("nuxt-reload",c),window.location.reload(!0))),t.t0;case 11:return o.components[l]=n=T(n),t.abrupt("return","function"==typeof e?e(n,r,o,l):n);case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n,r,o){return t.apply(this,arguments)}}()))}function k(t){return O.apply(this,arguments)}function O(){return(O=Object(o.a)(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,C(e);case 4:return t.abrupt("return",m(m({},e),{},{meta:A(e).map((function(t,n){return m(m({},t.options.meta),(e.matched[n]||{}).meta)}))}));case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function L(t,e){return F.apply(this,arguments)}function F(){return(F=Object(o.a)(regeneratorRuntime.mark((function t(e,n){var o,l,h,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.context||(e.context={isStatic:!0,isDev:!1,isHMR:!1,app:e,store:e.store,payload:n.payload,error:n.error,base:e.router.options.base,env:{}},n.ssrContext&&(e.context.ssrContext=n.ssrContext),e.context.redirect=function(t,path,n){if(t){e.context._redirected=!0;var o=Object(r.a)(path);if("number"==typeof t||"undefined"!==o&&"object"!==o||(n=path||{},path=t,o=Object(r.a)(path),t=302),"object"===o&&(path=e.router.resolve(path).route.fullPath),!/(^[.]{1,2}\/)|(^\/(?!\/))/.test(path))throw path=Object(d.m)(path,n),window.location.replace(path),new Error("ERR_REDIRECT");e.context.next({path:path,query:n,status:t})}},e.context.nuxtState=window.__NUXT__),t.next=3,Promise.all([k(n.route),k(n.from)]);case 3:o=t.sent,l=Object(c.a)(o,2),h=l[0],f=l[1],n.route&&(e.context.route=h),n.from&&(e.context.from=f),e.context.next=n.next,e.context._redirected=!1,e.context._errored=!1,e.context.isHMR=!1,e.context.params=e.context.route.params||{},e.context.query=e.context.route.query||{};case 15:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function R(t,e){return!t.length||e._redirected||e._errored?Promise.resolve():I(t[0],e).then((function(){return R(t.slice(1),e)}))}function I(t,e){var n;return(n=2===t.length?new Promise((function(n){t(e,(function(t,data){t&&e.error(t),n(data=data||{})}))})):t(e))&&n instanceof Promise&&"function"==typeof n.then?n:Promise.resolve(n)}function N(base,t){if("hash"===t)return window.location.hash.replace(/^#\//,"");base=decodeURI(base).slice(0,-1);var path=decodeURI(window.location.pathname);base&&path.startsWith(base)&&(path=path.slice(base.length));var e=(path||"/")+window.location.search+window.location.hash;return Object(d.g)(e)}function j(t,e){return function(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===Object(r.a)(t[i])&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",X(e)));return function(e,r){for(var path="",data=e||{},o=(r||{}).pretty?V:encodeURIComponent,l=0;l<t.length;l++){var c=t[l];if("string"!=typeof c){var h=data[c.name||"pathMatch"],d=void 0;if(null==h){if(c.optional){c.partial&&(path+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(Array.isArray(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var f=0;f<h.length;f++){if(d=o(h[f]),!n[l].test(d))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(d)+"`");path+=(0===f?c.prefix:c.delimiter)+d}}else{if(d=c.asterisk?H(h):o(h),!n[l].test(d))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+d+'"');path+=c.prefix+d}}else path+=c}return path}}(function(t,e){var n,r=[],o=0,l=0,path="",c=e&&e.delimiter||"/";for(;null!=(n=z.exec(t));){var h=n[0],d=n[1],f=n.index;if(path+=t.slice(l,f),l=f+h.length,d)path+=d[1];else{var m=t[l],v=n[2],y=n[3],_=n[4],x=n[5],w=n[6],S=n[7];path&&(r.push(path),path="");var E=null!=v&&null!=m&&m!==v,M="+"===w||"*"===w,T="?"===w||"*"===w,A=n[2]||c,pattern=_||x;r.push({name:y||o++,prefix:v||"",delimiter:A,optional:T,repeat:M,partial:E,asterisk:Boolean(S),pattern:pattern?W(pattern):S?".*":"[^"+G(A)+"]+?"})}}l<t.length&&(path+=t.substr(l));path&&r.push(path);return r}(t,e),e)}function B(t,e){var n={},r=m(m({},t),e);for(var o in r)String(t[o])!==String(e[o])&&(n[o]=!0);return n}function U(t){var e;if(t.message||"string"==typeof t)e=t.message||t;else try{e=JSON.stringify(t,null,2)}catch(n){e="[".concat(t.constructor.name,"]")}return m(m({},t),{},{message:e,statusCode:t.statusCode||t.status||t.response&&t.response.status||500})}window.onNuxtReadyCbs=[],window.onNuxtReady=function(t){window.onNuxtReadyCbs.push(t)};var z=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function V(t,e){var n=e?/[?#]/g:/[/?#]/g;return encodeURI(t).replace(n,(function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()}))}function H(t){return V(t,!0)}function G(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function W(t){return t.replace(/([=!:$/()])/g,"\\$1")}function X(t){return t&&t.sensitive?"":"i"}function Y(t,e,n){t.$options[e]||(t.$options[e]=[]),t.$options[e].includes(n)||t.$options[e].push(n)}var Q=d.f;d.o,d.e;function $(t){try{window.history.scrollRestoration=t}catch(t){}}}}]);